/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.12.1
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.com/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *   GPL v3 http://opensource.org/licenses/GPL-3.0
 *
 */
(function(a,b){if(typeof exports==="object"){module.exports=b(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains"))}else{if(typeof define==="function"&&define.amd){define(["./punycode","./IPv6","./SecondLevelDomains"],b)}else{a.URI=b(a.punycode,a.IPv6,a.SecondLevelDomains,a)}}}(this,function(c,d,i,v){var n=v&&v.URI;function j(p,q){if(!(this instanceof j)){return new j(p,q)}if(p===undefined){if(typeof location!=="undefined"){p=location.href+""}else{p=""}}this.href(p);if(q!==undefined){return this.absoluteTo(q)}return this}j.version="1.12.1";var s=j.prototype;var o=Object.prototype.hasOwnProperty;function e(p){return p.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function w(p){if(p===undefined){return"Undefined"}return String(Object.prototype.toString.call(p)).slice(8,-1)}function m(p){return w(p)==="Array"}function l(A,z){var B={};var p,q;if(m(z)){for(p=0,q=z.length;p<q;p++){B[z[p]]=true}}else{B[z]=true}for(p=0,q=A.length;p<q;p++){if(B[A[p]]!==undefined){A.splice(p,1);q--;p--}}return A}function y(B,A){var q,z;if(m(A)){for(q=0,z=A.length;q<z;q++){if(!y(B,A[q])){return false}}return true}var p=w(A);for(q=0,z=B.length;q<z;q++){if(p==="RegExp"){if(typeof B[q]==="string"&&B[q].match(A)){return true}}else{if(B[q]===A){return true}}}return false}function h(A,q){if(!m(A)||!m(q)){return false}if(A.length!==q.length){return false}A.sort();q.sort();for(var z=0,p=A.length;z<p;z++){if(A[z]!==q[z]){return false}}return true}j._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:j.duplicateQueryParameters,escapeQuerySpace:j.escapeQuerySpace}};j.duplicateQueryParameters=false;j.escapeQuerySpace=true;j.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;j.idn_expression=/[^a-z0-9\.-]/i;j.punycode_expression=/(xn--)/i;j.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;j.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;j.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig;j.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/};j.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};j.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;j.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"};j.getDomAttribute=function(p){if(!p||!p.nodeName){return undefined}var q=p.nodeName.toLowerCase();if(q==="input"&&p.type!=="image"){return undefined}return j.domAttributes[q]};function b(p){return escape(p)}function t(p){return encodeURIComponent(p).replace(/[!'()*]/g,b).replace(/\*/g,"%2A")}j.encode=t;j.decode=decodeURIComponent;j.iso8859=function(){j.encode=escape;j.decode=unescape};j.unicode=function(){j.encode=t;j.decode=decodeURIComponent};j.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}};j.encodeQuery=function(p,q){var z=j.encode(p+"");if(q===undefined){q=j.escapeQuerySpace}return q?z.replace(/%20/g,"+"):z};j.decodeQuery=function(p,q){p+="";if(q===undefined){q=j.escapeQuerySpace}try{return j.decode(q?p.replace(/\+/g,"%20"):p)}catch(z){return p}};j.recodePath=function(q){var p=(q+"").split("/");for(var z=0,A=p.length;z<A;z++){p[z]=j.encodePathSegment(j.decode(p[z]))}return p.join("/")};j.decodePath=function(q){var p=(q+"").split("/");for(var z=0,A=p.length;z<A;z++){p[z]=j.decodePathSegment(p[z])}return p.join("/")};var f={encode:"encode",decode:"decode"};var g;var k=function(q,p){return function(z){return j[p](z+"").replace(j.characters[q][p].expression,function(A){return j.characters[q][p].map[A]})}};for(g in f){j[g+"PathSegment"]=k("pathname",f[g])}j.encodeReserved=k("reserved","encode");j.parse=function(p,q){var z;if(!q){q={}}z=p.indexOf("#");if(z>-1){q.fragment=p.substring(z+1)||null;p=p.substring(0,z)}z=p.indexOf("?");if(z>-1){q.query=p.substring(z+1)||null;p=p.substring(0,z)}if(p.substring(0,2)==="//"){q.protocol=null;p=p.substring(2);p=j.parseAuthority(p,q)}else{z=p.indexOf(":");if(z>-1){q.protocol=p.substring(0,z)||null;if(q.protocol&&!q.protocol.match(j.protocol_expression)){q.protocol=undefined}else{if(q.protocol==="file"){p=p.substring(z+3)}else{if(p.substring(z+1,z+3)==="//"){p=p.substring(z+3);p=j.parseAuthority(p,q)}else{p=p.substring(z+1);q.urn=true}}}}}q.path=p;return q};j.parseHost=function(p,z){var B=p.indexOf("/");var A;var q;if(B===-1){B=p.length}if(p.charAt(0)==="["){A=p.indexOf("]");z.hostname=p.substring(1,A)||null;z.port=p.substring(A+2,B)||null}else{if(p.indexOf(":")!==p.lastIndexOf(":")){z.hostname=p.substring(0,B)||null;z.port=null}else{q=p.substring(0,B).split(":");z.hostname=q[0]||null;z.port=q[1]||null}}if(z.hostname&&p.substring(B).charAt(0)!=="/"){B++;p="/"+p}return p.substring(B)||"/"};j.parseAuthority=function(p,q){p=j.parseUserinfo(p,q);return j.parseHost(p,q)};j.parseUserinfo=function(q,A){var p=q.indexOf("/");var B=p>-1?q.lastIndexOf("@",p):q.indexOf("@");var z;if(B>-1&&(p===-1||B<p)){z=q.substring(0,B).split(":");A.username=z[0]?j.decode(z[0]):null;z.shift();A.password=z[0]?j.decode(z.join(":")):null;q=q.substring(B+1)}else{A.username=null;A.password=null}return q};j.parseQuery=function(A,B){if(!A){return{}}A=A.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!A){return{}}var C={};var D=A.split("&");var q=D.length;var F,p,E;for(var z=0;z<q;z++){F=D[z].split("=");p=j.decodeQuery(F.shift(),B);E=F.length?j.decodeQuery(F.join("="),B):null;if(C[p]){if(typeof C[p]==="string"){C[p]=[C[p]]}C[p].push(E)}else{C[p]=E}}return C};j.build=function(q){var p="";if(q.protocol){p+=q.protocol+":"}if(!q.urn&&(p||q.hostname)){p+="//"}p+=(j.buildAuthority(q)||"");if(typeof q.path==="string"){if(q.path.charAt(0)!=="/"&&typeof q.hostname==="string"){p+="/"}p+=q.path}if(typeof q.query==="string"&&q.query){p+="?"+q.query}if(typeof q.fragment==="string"&&q.fragment){p+="#"+q.fragment}return p};j.buildHost=function(q){var p="";if(!q.hostname){return""}else{if(j.ip6_expression.test(q.hostname)){if(q.port){p+="["+q.hostname+"]:"+q.port}else{p+=q.hostname}}else{p+=q.hostname;if(q.port){p+=":"+q.port}}}return p};j.buildAuthority=function(p){return j.buildUserinfo(p)+j.buildHost(p)};j.buildUserinfo=function(q){var p="";if(q.username){p+=j.encode(q.username);if(q.password){p+=":"+j.encode(q.password)}p+="@"}return p};j.buildQuery=function(C,E,A){var z="";var D,q,p,B;for(q in C){if(o.call(C,q)&&q){if(m(C[q])){D={};for(p=0,B=C[q].length;p<B;p++){if(C[q][p]!==undefined&&D[C[q][p]+""]===undefined){z+="&"+j.buildQueryParameter(q,C[q][p],A);if(E!==true){D[C[q][p]+""]=true}}}}else{if(C[q]!==undefined){z+="&"+j.buildQueryParameter(q,C[q],A)}}}}return z.substring(1)};j.buildQueryParameter=function(p,z,q){return j.encodeQuery(p,q)+(z!==null?"="+j.encodeQuery(z,q):"")};j.addQuery=function(A,p,z){if(typeof p==="object"){for(var q in p){if(o.call(p,q)){j.addQuery(A,q,p[q])}}}else{if(typeof p==="string"){if(A[p]===undefined){A[p]=z;return}else{if(typeof A[p]==="string"){A[p]=[A[p]]}}if(!m(z)){z=[z]}A[p]=A[p].concat(z)}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")}}};j.removeQuery=function(C,p,B){var z,A,q;if(m(p)){for(z=0,A=p.length;z<A;z++){C[p[z]]=undefined}}else{if(typeof p==="object"){for(q in p){if(o.call(p,q)){j.removeQuery(C,q,p[q])}}}else{if(typeof p==="string"){if(B!==undefined){if(C[p]===B){C[p]=undefined}else{if(m(C[p])){C[p]=l(C[p],B)}}}else{C[p]=undefined}}else{throw new TypeError("URI.addQuery() accepts an object, string as the first parameter")}}}};j.hasQuery=function(B,p,A,z){if(typeof p==="object"){for(var q in p){if(o.call(p,q)){if(!j.hasQuery(B,q,p[q])){return false}}}return true}else{if(typeof p!=="string"){throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter")}}switch(w(A)){case"Undefined":return p in B;case"Boolean":var D=Boolean(m(B[p])?B[p].length:B[p]);return A===D;case"Function":return !!A(B[p],p,B);case"Array":if(!m(B[p])){return false}var C=z?y:h;return C(B[p],A);case"RegExp":if(!m(B[p])){return Boolean(B[p]&&B[p].match(A))}if(!z){return false}return y(B[p],A);case"Number":A=String(A);case"String":if(!m(B[p])){return B[p]===A}if(!z){return false}return y(B[p],A);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}};j.commonPath=function(q,p){var z=Math.min(q.length,p.length);var A;for(A=0;A<z;A++){if(q.charAt(A)!==p.charAt(A)){A--;break}}if(A<1){return q.charAt(0)===p.charAt(0)&&q.charAt(0)==="/"?"/":""}if(q.charAt(A)!=="/"||p.charAt(A)!=="/"){A=q.substring(0,A).lastIndexOf("/")}return q.substring(0,A+1)};j.withinString=function(D,G,J){J||(J={});var z=J.start||j.findUri.start;var E=J.end||j.findUri.end;var I=J.trim||j.findUri.trim;var B=/[a-z0-9-]=["']?$/i;z.lastIndex=0;while(true){var C=z.exec(D);if(!C){break}var q=C.index;if(J.ignoreHtml){var p=D.slice(Math.max(q-3,0),q);if(p&&B.test(p)){continue}}var A=q+D.slice(q).search(E);var F=D.slice(q,A).replace(I,"");if(J.ignore&&J.ignore.test(F)){continue}A=q+F.length;var H=G(F,q,A,D);D=D.slice(0,q)+H+D.slice(A);z.lastIndex=q+H.length}z.lastIndex=0;return D};j.ensureValidHostname=function(p){if(p.match(j.invalid_hostname_characters)){if(!c){throw new TypeError("Hostname '"+p+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available")}if(c.toASCII(p).match(j.invalid_hostname_characters)){throw new TypeError("Hostname '"+p+"' contains characters other than [A-Z0-9.-]")}}};j.noConflict=function(p){if(p){var q={URI:this.noConflict()};if(URITemplate&&typeof URITemplate.noConflict=="function"){q.URITemplate=URITemplate.noConflict()}if(d&&typeof d.noConflict=="function"){q.IPv6=d.noConflict()}if(SecondLevelDomains&&typeof SecondLevelDomains.noConflict=="function"){q.SecondLevelDomains=SecondLevelDomains.noConflict()}return q}else{if(v.URI===this){v.URI=n}}return this};s.build=function(p){if(p===true){this._deferred_build=true}else{if(p===undefined||this._deferred_build){this._string=j.build(this._parts);this._deferred_build=false}}return this};s.clone=function(){return new j(this)};s.valueOf=s.toString=function(){return this.build(false)._string};f={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"};k=function(p){return function(q,z){if(q===undefined){return this._parts[p]||""}else{this._parts[p]=q||null;this.build(!z);return this}}};for(g in f){s[g]=k(f[g])}f={query:"?",fragment:"#"};k=function(p,q){return function(z,A){if(z===undefined){return this._parts[p]||""}else{if(z!==null){z=z+"";if(z.charAt(0)===q){z=z.substring(1)}}this._parts[p]=z;this.build(!A);return this}}};for(g in f){s[g]=k(g,f[g])}f={search:["?","query"],hash:["#","fragment"]};k=function(p,q){return function(z,B){var A=this[p](z,B);return typeof A==="string"&&A.length?(q+A):A}};for(g in f){s[g]=k(f[g][1],f[g][0])}s.pathname=function(p,z){if(p===undefined||p===true){var q=this._parts.path||(this._parts.hostname?"/":"");return p?j.decodePath(q):q}else{this._parts.path=p?j.recodePath(p):"/";this.build(!z);return this}};s.path=s.pathname;s.href=function(p,D){var z;if(p===undefined){return this.toString()}this._string="";this._parts=j._parts();var q=p instanceof j;var B=typeof p==="object"&&(p.hostname||p.path||p.pathname);if(p.nodeName){var A=j.getDomAttribute(p);p=p[A]||"";B=false}if(!q&&B&&p.pathname!==undefined){p=p.toString()}if(typeof p==="string"){this._parts=j.parse(p,this._parts)}else{if(q||B){var C=q?p._parts:p;for(z in C){if(o.call(this._parts,z)){this._parts[z]=C[z]}}}else{throw new TypeError("invalid input")}}this.build(!D);return this};s.is=function(F){var C=false;var D=false;var B=false;var z=false;var q=false;var A=false;var E=false;var p=!this._parts.urn;if(this._parts.hostname){p=false;D=j.ip4_expression.test(this._parts.hostname);B=j.ip6_expression.test(this._parts.hostname);C=D||B;z=!C;q=z&&i&&i.has(this._parts.hostname);A=z&&j.idn_expression.test(this._parts.hostname);E=z&&j.punycode_expression.test(this._parts.hostname)}switch(F.toLowerCase()){case"relative":return p;case"absolute":return !p;case"domain":case"name":return z;case"sld":return q;case"ip":return C;case"ip4":case"ipv4":case"inet4":return D;case"ip6":case"ipv6":case"inet6":return B;case"idn":return A;case"url":return !this._parts.urn;case"urn":return !!this._parts.urn;case"punycode":return E}return null};var x=s.protocol;var a=s.port;var u=s.hostname;s.protocol=function(p,q){if(p!==undefined){if(p){p=p.replace(/:(\/\/)?$/,"");if(!p.match(j.protocol_expression)){throw new TypeError("Protocol '"+p+"' contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]")}}}return x.call(this,p,q)};s.scheme=s.protocol;s.port=function(p,q){if(this._parts.urn){return p===undefined?"":this}if(p!==undefined){if(p===0){p=null}if(p){p+="";if(p.charAt(0)===":"){p=p.substring(1)}if(p.match(/[^0-9]/)){throw new TypeError("Port '"+p+"' contains characters other than [0-9]")}}}return a.call(this,p,q)};s.hostname=function(q,z){if(this._parts.urn){return q===undefined?"":this}if(q!==undefined){var p={};j.parseHost(q,p);q=p.hostname}return u.call(this,q,z)};s.host=function(p,q){if(this._parts.urn){return p===undefined?"":this}if(p===undefined){return this._parts.hostname?j.buildHost(this._parts):""}else{j.parseHost(p,this._parts);this.build(!q);return this}};s.authority=function(p,q){if(this._parts.urn){return p===undefined?"":this}if(p===undefined){return this._parts.hostname?j.buildAuthority(this._parts):""}else{j.parseAuthority(p,this._parts);this.build(!q);return this}};s.userinfo=function(p,z){if(this._parts.urn){return p===undefined?"":this}if(p===undefined){if(!this._parts.username){return""}var q=j.buildUserinfo(this._parts);return q.substring(0,q.length-1)}else{if(p[p.length-1]!=="@"){p+="@"}j.parseUserinfo(p,this._parts);this.build(!z);return this}};s.resource=function(p,z){var q;if(p===undefined){return this.path()+this.search()+this.hash()}q=j.parse(p);this._parts.path=q.path;this._parts.query=q.query;this._parts.fragment=q.fragment;this.build(!z);return this};s.subdomain=function(q,C){if(this._parts.urn){return q===undefined?"":this}if(q===undefined){if(!this._parts.hostname||this.is("IP")){return""}var p=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,p)||""}else{var B=this._parts.hostname.length-this.domain().length;var A=this._parts.hostname.substring(0,B);var z=new RegExp("^"+e(A));if(q&&q.charAt(q.length-1)!=="."){q+="."}if(q){j.ensureValidHostname(q)}this._parts.hostname=this._parts.hostname.replace(z,q);this.build(!C);return this}};s.domain=function(q,B){if(this._parts.urn){return q===undefined?"":this}if(typeof q==="boolean"){B=q;q=undefined}if(q===undefined){if(!this._parts.hostname||this.is("IP")){return""}var A=this._parts.hostname.match(/\./g);if(A&&A.length<2){return this._parts.hostname}var p=this._parts.hostname.length-this.tld(B).length-1;p=this._parts.hostname.lastIndexOf(".",p-1)+1;return this._parts.hostname.substring(p)||""}else{if(!q){throw new TypeError("cannot set domain empty")}j.ensureValidHostname(q);if(!this._parts.hostname||this.is("IP")){this._parts.hostname=q}else{var z=new RegExp(e(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(z,q)}this.build(!B);return this}};s.tld=function(p,A){if(this._parts.urn){return p===undefined?"":this}if(typeof p==="boolean"){A=p;p=undefined}if(p===undefined){if(!this._parts.hostname||this.is("IP")){return""}var B=this._parts.hostname.lastIndexOf(".");var q=this._parts.hostname.substring(B+1);if(A!==true&&i&&i.list[q.toLowerCase()]){return i.get(this._parts.hostname)||q}return q}else{var z;if(!p){throw new TypeError("cannot set TLD empty")}else{if(p.match(/[^a-zA-Z0-9-]/)){if(i&&i.is(p)){z=new RegExp(e(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(z,p)}else{throw new TypeError("TLD '"+p+"' contains characters other than [A-Z0-9]")}}else{if(!this._parts.hostname||this.is("IP")){throw new ReferenceError("cannot set TLD on non-domain host")}else{z=new RegExp(e(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(z,p)}}}this.build(!A);return this}};s.directory=function(z,D){if(this._parts.urn){return z===undefined?"":this}if(z===undefined||z===true){if(!this._parts.path&&!this._parts.hostname){return""}if(this._parts.path==="/"){return"/"}var q=this._parts.path.length-this.filename().length-1;var B=this._parts.path.substring(0,q)||(this._parts.hostname?"/":"");return z?j.decodePath(B):B}else{var C=this._parts.path.length-this.filename().length;var p=this._parts.path.substring(0,C);var A=new RegExp("^"+e(p));if(!this.is("relative")){if(!z){z="/"}if(z.charAt(0)!=="/"){z="/"+z}}if(z&&z.charAt(z.length-1)!=="/"){z+="/"}z=j.recodePath(z);this._parts.path=this._parts.path.replace(A,z);this.build(!D);return this}};s.filename=function(q,B){if(this._parts.urn){return q===undefined?"":this}if(q===undefined||q===true){if(!this._parts.path||this._parts.path==="/"){return""}var C=this._parts.path.lastIndexOf("/");var A=this._parts.path.substring(C+1);return q?j.decodePathSegment(A):A}else{var p=false;if(q.charAt(0)==="/"){q=q.substring(1)}if(q.match(/\.?\//)){p=true}var z=new RegExp(e(this.filename())+"$");q=j.recodePath(q);this._parts.path=this._parts.path.replace(z,q);if(p){this.normalizePath(B)}else{this.build(!B)}return this}};s.suffix=function(q,D){if(this._parts.urn){return q===undefined?"":this}if(q===undefined||q===true){if(!this._parts.path||this._parts.path==="/"){return""}var p=this.filename();var E=p.lastIndexOf(".");var B,A;if(E===-1){return""}B=p.substring(E+1);A=(/^[a-z0-9%]+$/i).test(B)?B:"";return q?j.decodePathSegment(A):A}else{if(q.charAt(0)==="."){q=q.substring(1)}var C=this.suffix();var z;if(!C){if(!q){return this}this._parts.path+="."+j.recodePath(q)}else{if(!q){z=new RegExp(e("."+C)+"$")}else{z=new RegExp(e(C)+"$")}}if(z){q=j.recodePath(q);this._parts.path=this._parts.path.replace(z,q)}this.build(!D);return this}};s.segment=function(B,E,D){var z=this._parts.urn?":":"/";var F=this.path();var C=F.substring(0,1)==="/";var A=F.split(z);if(B!==undefined&&typeof B!=="number"){D=E;E=B;B=undefined}if(B!==undefined&&typeof B!=="number"){throw new Error("Bad segment '"+B+"', must be 0-based integer")}if(C){A.shift()}if(B<0){B=Math.max(A.length+B,0)}if(E===undefined){return B===undefined?A:A[B]}else{if(B===null||A[B]===undefined){if(m(E)){A=[];for(var q=0,p=E.length;q<p;q++){if(!E[q].length&&(!A.length||!A[A.length-1].length)){continue}if(A.length&&!A[A.length-1].length){A.pop()}A.push(E[q])}}else{if(E||(typeof E==="string")){if(A[A.length-1]===""){A[A.length-1]=E}else{A.push(E)}}}}else{if(E||(typeof E==="string"&&E.length)){A[B]=E}else{A.splice(B,1)}}}if(C){A.unshift("")}return this.path(A.join(z),D)};s.segmentCoded=function(B,q,C){var z,A,p;if(typeof B!=="number"){C=q;q=B;B=undefined}if(q===undefined){z=this.segment(B,q,C);if(!m(z)){z=z!==undefined?j.decode(z):undefined}else{for(A=0,p=z.length;A<p;A++){z[A]=j.decode(z[A])}}return z}if(!m(q)){q=typeof q==="string"?j.encode(q):q}else{for(A=0,p=q.length;A<p;A++){q[A]=j.decode(q[A])}}return this.segment(B,q,C)};var r=s.query;s.query=function(q,A){if(q===true){return j.parseQuery(this._parts.query,this._parts.escapeQuerySpace)}else{if(typeof q==="function"){var z=j.parseQuery(this._parts.query,this._parts.escapeQuerySpace);var p=q.call(this,z);this._parts.query=j.buildQuery(p||z,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!A);return this}else{if(q!==undefined&&typeof q!=="string"){this._parts.query=j.buildQuery(q,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!A);return this}else{return r.call(this,q,A)}}}};s.setQuery=function(p,A,B){var z=j.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof p==="object"){for(var q in p){if(o.call(p,q)){z[q]=p[q]}}}else{if(typeof p==="string"){z[p]=A!==undefined?A:null}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")}}this._parts.query=j.buildQuery(z,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);if(typeof p!=="string"){B=A}this.build(!B);return this};s.addQuery=function(p,z,A){var q=j.parseQuery(this._parts.query,this._parts.escapeQuerySpace);j.addQuery(q,p,z===undefined?null:z);this._parts.query=j.buildQuery(q,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);if(typeof p!=="string"){A=z}this.build(!A);return this};s.removeQuery=function(p,z,A){var q=j.parseQuery(this._parts.query,this._parts.escapeQuerySpace);j.removeQuery(q,p,z);this._parts.query=j.buildQuery(q,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);if(typeof p!=="string"){A=z}this.build(!A);return this};s.hasQuery=function(p,A,z){var q=j.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return j.hasQuery(q,p,A,z)};s.setSearch=s.setQuery;s.addSearch=s.addQuery;s.removeSearch=s.removeQuery;s.hasSearch=s.hasQuery;s.normalize=function(){if(this._parts.urn){return this.normalizeProtocol(false).normalizeQuery(false).normalizeFragment(false).build()}return this.normalizeProtocol(false).normalizeHostname(false).normalizePort(false).normalizePath(false).normalizeQuery(false).normalizeFragment(false).build()};s.normalizeProtocol=function(p){if(typeof this._parts.protocol==="string"){this._parts.protocol=this._parts.protocol.toLowerCase();this.build(!p)}return this};s.normalizeHostname=function(p){if(this._parts.hostname){if(this.is("IDN")&&c){this._parts.hostname=c.toASCII(this._parts.hostname)}else{if(this.is("IPv6")&&d){this._parts.hostname=d.best(this._parts.hostname)}}this._parts.hostname=this._parts.hostname.toLowerCase();this.build(!p)}return this};s.normalizePort=function(p){if(typeof this._parts.protocol==="string"&&this._parts.port===j.defaultPorts[this._parts.protocol]){this._parts.port=null;this.build(!p)}return this};s.normalizePath=function(C){if(this._parts.urn){return this}if(!this._parts.path||this._parts.path==="/"){return this}var z;var A=this._parts.path;var q="";var B,p;if(A.charAt(0)!=="/"){z=true;A="/"+A}A=A.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");if(z){q=A.substring(1).match(/^(\.\.\/)+/)||"";if(q){q=q[0]}}while(true){B=A.indexOf("/..");if(B===-1){break}else{if(B===0){A=A.substring(3);continue}}p=A.substring(0,B).lastIndexOf("/");if(p===-1){p=B}A=A.substring(0,p)+A.substring(B+3)}if(z&&this.is("relative")){A=q+A.substring(1)}A=j.recodePath(A);this._parts.path=A;this.build(!C);return this};s.normalizePathname=s.normalizePath;s.normalizeQuery=function(p){if(typeof this._parts.query==="string"){if(!this._parts.query.length){this._parts.query=null}else{this.query(j.parseQuery(this._parts.query,this._parts.escapeQuerySpace))}this.build(!p)}return this};s.normalizeFragment=function(p){if(!this._parts.fragment){this._parts.fragment=null;this.build(!p)}return this};s.normalizeSearch=s.normalizeQuery;s.normalizeHash=s.normalizeFragment;s.iso8859=function(){var p=j.encode;var q=j.decode;j.encode=escape;j.decode=decodeURIComponent;this.normalize();j.encode=p;j.decode=q;return this};s.unicode=function(){var p=j.encode;var q=j.decode;j.encode=t;j.decode=unescape;this.normalize();j.encode=p;j.decode=q;return this};s.readable=function(){var C=this.clone();C.username("").password("").normalize();var B="";if(C._parts.protocol){B+=C._parts.protocol+"://"}if(C._parts.hostname){if(C.is("punycode")&&c){B+=c.toUnicode(C._parts.hostname);if(C._parts.port){B+=":"+C._parts.port}}else{B+=C.host()}}if(C._parts.hostname&&C._parts.path&&C._parts.path.charAt(0)!=="/"){B+="/"}B+=C.path(true);if(C._parts.query){var E="";for(var A=0,z=C._parts.query.split("&"),p=z.length;A<p;A++){var D=(z[A]||"").split("=");E+="&"+j.decodeQuery(D[0],this._parts.escapeQuerySpace).replace(/&/g,"%26");if(D[1]!==undefined){E+="="+j.decodeQuery(D[1],this._parts.escapeQuerySpace).replace(/&/g,"%26")}}B+="?"+E.substring(1)}B+=j.decodeQuery(C.hash(),true);return B};s.absoluteTo=function(B){var q=this.clone();var A=["protocol","username","password","hostname","port"];var D,z,C;if(this._parts.urn){throw new Error("URNs do not have any generally defined hierarchical components")}if(!(B instanceof j)){B=new j(B)}if(!q._parts.protocol){q._parts.protocol=B._parts.protocol}if(this._parts.hostname){return q}for(z=0;C=A[z];z++){q._parts[C]=B._parts[C]}if(!q._parts.path){q._parts.path=B._parts.path;if(!q._parts.query){q._parts.query=B._parts.query}}else{if(q._parts.path.substring(-2)===".."){q._parts.path+="/"}}if(q.path().charAt(0)!=="/"){D=B.directory();q._parts.path=(D?(D+"/"):"")+q._parts.path;q.normalizePath()}q.build();return q};s.relativeTo=function(D){var C=this.clone().normalize();var p,B,A,q,E;if(C._parts.urn){throw new Error("URNs do not have any generally defined hierarchical components")}D=new j(D).normalize();p=C._parts;B=D._parts;q=C.path();E=D.path();if(q.charAt(0)!=="/"){throw new Error("URI is already relative")}if(E.charAt(0)!=="/"){throw new Error("Cannot calculate a URI relative to another relative URI")}if(p.protocol===B.protocol){p.protocol=null}if(p.username!==B.username||p.password!==B.password){return C.build()}if(p.protocol!==null||p.username!==null||p.password!==null){return C.build()}if(p.hostname===B.hostname&&p.port===B.port){p.hostname=null;p.port=null}else{return C.build()}if(q===E){p.path="";return C.build()}A=j.commonPath(C.path(),D.path());if(!A){return C.build()}var z=B.path.substring(A.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");p.path=z+p.path.substring(A.length);return C.build()};s.equals=function(q){var z=this.clone();var F=new j(q);var A={};var p={};var C={};var B,E,D;z.normalize();F.normalize();if(z.toString()===F.toString()){return true}B=z.query();E=F.query();z.query("");F.query("");if(z.toString()!==F.toString()){return false}if(B.length!==E.length){return false}A=j.parseQuery(B,this._parts.escapeQuerySpace);p=j.parseQuery(E,this._parts.escapeQuerySpace);for(D in A){if(o.call(A,D)){if(!m(A[D])){if(A[D]!==p[D]){return false}}else{if(!h(A[D],p[D])){return false}}C[D]=true}}for(D in p){if(o.call(p,D)){if(!C[D]){return false}}}return true};s.duplicateQueryParameters=function(p){this._parts.duplicateQueryParameters=!!p;return this};s.escapeQuerySpace=function(p){this._parts.escapeQuerySpace=!!p;return this};return j}));(function(){var a=false,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(g){var f=this.prototype;a=true;var e=new this();a=false;for(var d in g){e[d]=typeof g[d]=="function"&&typeof f[d]=="function"&&b.test(g[d])?(function(h,i){return function(){var k=this._super;this._super=f[h];var j=i.apply(this,arguments);this._super=k;return j}})(d,g[d]):g[d]}function c(){if(!a&&this.init){this.init.apply(this,arguments)}}c.prototype=e;c.prototype.constructor=c;c.extend=arguments.callee;return c}})();
/*!
 * Cookies.js - 0.3.1
 * Wednesday, April 24 2013 @ 2:28 AM EST
 *
 * Copyright (c) 2013, Scott Hamper
 * Licensed under the MIT license,
 * http://www.opensource.org/licenses/MIT
 */
(function(b){var a=function(d,e,c){return arguments.length===1?a.get(d):a.set(d,e,c)};a._document=document;a._navigator=navigator;a.defaults={path:"/"};a.get=function(c){if(a._cachedDocumentCookie!==a._document.cookie){a._renewCache()}return a._cache[c]};a.set=function(d,e,c){c=a._getExtendedOptions(c);c.expires=a._getExpiresDate(e===b?-1:c.expires);a._document.cookie=a._generateCookieString(d,e,c);return a};a.expire=function(d,c){return a.set(d,b,c)};a._getExtendedOptions=function(c){return{path:c&&c.path||a.defaults.path,domain:c&&c.domain||a.defaults.domain,expires:c&&c.expires||a.defaults.expires,secure:c&&c.secure!==b?c.secure:a.defaults.secure}};a._isValidDate=function(c){return Object.prototype.toString.call(c)==="[object Date]"&&!isNaN(c.getTime())};a._getExpiresDate=function(c,d){d=d||new Date();switch(typeof c){case"number":c=new Date(d.getTime()+c*1000);break;case"string":c=new Date(c);break}if(c&&!a._isValidDate(c)){throw new Error("`expires` parameter cannot be converted to a valid Date instance")}return c};a._generateCookieString=function(d,f,c){d=encodeURIComponent(d);f=(f+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent);c=c||{};var e=d+"="+f;e+=c.path?";path="+c.path:"";e+=c.domain?";domain="+c.domain:"";e+=c.expires?";expires="+c.expires.toGMTString():"";e+=c.secure?";secure":"";return e};a._getCookieObjectFromString=function(c){var e={};var g=c?c.split("; "):[];for(var d=0;d<g.length;d++){var f=a._getKeyValuePairFromCookieString(g[d]);if(e[f.key]===b){e[f.key]=f.value}}return e};a._getKeyValuePairFromCookieString=function(c){var d=c.indexOf("=");d=d<0?c.length:d;return{key:decodeURIComponent(c.substr(0,d)),value:decodeURIComponent(c.substr(d+1))}};a._renewCache=function(){a._cache=a._getCookieObjectFromString(a._document.cookie);a._cachedDocumentCookie=a._document.cookie};a._areEnabled=function(){return a._navigator.cookieEnabled||a.set("cookies.js",1).get("cookies.js")==="1"};a.enabled=a._areEnabled();if(typeof define==="function"&&define.amd){define(function(){return a})}else{if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=a}exports.Cookies=a}else{window.Cookies=a}}})();(function(){var l;var g=[],r=[];var H=0;var a=+new Date+"";var b=75;var j=40;var E=(" \t\x0B\f\xA0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000");var w=/\b__p \+= '';/g,R=/\b(__p \+=) '' \+/g,e=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var z=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var C=/\w*$/;var p=/^\s*function[ \n\r\t]+\w/;var m=/<%=([\s\S]+?)%>/g;var W=RegExp("^["+E+"]*0+(?=.$)");var P=/($^)/;var i=/\bthis\b/;var T=/['\n\r\t\u2028\u2029\\]/g;var x=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"];var Z=0;var S="[object Arguments]",t="[object Array]",A="[object Boolean]",I="[object Date]",ab="[object Function]",F="[object Number]",c="[object Object]",J="[object RegExp]",G="[object String]";var u={};u[ab]=false;u[S]=u[t]=u[A]=u[I]=u[F]=u[c]=u[J]=u[G]=true;var M={leading:false,maxWait:0,trailing:false};var k={configurable:false,enumerable:false,value:null,writable:false};var D={"boolean":false,"function":true,object:true,number:false,string:false,"undefined":false};var L={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"};var B=(D[typeof window]&&window)||this;var U=D[typeof exports]&&exports&&!exports.nodeType&&exports;var y=D[typeof module]&&module&&!module.nodeType&&module;var O=y&&y.exports===U&&U;var v=D[typeof global]&&global;if(v&&(v.global===v||v.window===v)){B=v}function h(ag,af,ad){var ac=(ad||0)-1,ae=ag?ag.length:0;while(++ac<ae){if(ag[ac]===af){return ac}}return -1}function N(ac,af){var ae=typeof af;ac=ac.cache;if(ae=="boolean"||af==null){return ac[af]?0:-1}if(ae!="number"&&ae!="string"){ae="object"}var ad=ae=="number"?af:a+af;ac=(ac=ac[ae])&&ac[ad];return ae=="object"?(ac&&h(ac,af)>-1?0:-1):(ac?0:-1)}function K(ag){var ad=this.cache,af=typeof ag;if(af=="boolean"||ag==null){ad[ag]=true}else{if(af!="number"&&af!="string"){af="object"}var ae=af=="number"?ag:a+ag,ac=ad[af]||(ad[af]={});if(af=="object"){(ac[ae]||(ac[ae]=[])).push(ag)}else{ac[ae]=true}}}function o(ac){return ac.charCodeAt(0)}function V(ae,ad){var af=ae.criteria,ag=ad.criteria;if(af!==ag){if(af>ag||typeof af=="undefined"){return 1}if(af<ag||typeof ag=="undefined"){return -1}}return ae.index-ad.index}function Y(aj){var af=-1,ah=aj.length,ai=aj[0],ae=aj[(ah/2)|0],ag=aj[ah-1];if(ai&&typeof ai=="object"&&ae&&typeof ae=="object"&&ag&&typeof ag=="object"){return false}var ad=q();ad["false"]=ad["null"]=ad["true"]=ad["undefined"]=false;var ac=q();ac.array=aj;ac.cache=ad;ac.push=K;while(++af<ah){ac.push(aj[af])}return ac}function f(ac){return"\\"+L[ac]}function d(){return g.pop()||[]}function q(){return r.pop()||{array:null,cache:null,criteria:null,"false":false,index:0,"null":false,number:null,object:null,push:null,string:null,"true":false,"undefined":false,value:null}}function Q(ac){ac.length=0;if(g.length<j){g.push(ac)}}function n(ad){var ac=ad.cache;if(ac){n(ac)}ad.array=ad.cache=ad.criteria=ad.object=ad.number=ad.string=ad.value=null;if(r.length<j){r.push(ad)}}function s(ah,ag,ad){ag||(ag=0);if(typeof ad=="undefined"){ad=ah?ah.length:0}var ae=-1,af=ad-ag||0,ac=Array(af<0?0:af);while(++ae<af){ac[ae]=ah[ag+ae]}return ac}function X(ah){ah=ah?aa.defaults(B.Object(),ah,aa.pick(B,x)):B;var aF=ah.Array,ca=ah.Boolean,cb=ah.Date,aY=ah.Function,b1=ah.Math,bc=ah.Number,cW=ah.Object,cB=ah.RegExp,cl=ah.String,aG=ah.TypeError;var b4=[];var cE=cW.prototype;var cQ=ah._;var az=cE.toString;var bY=cB("^"+cl(az).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");var aV=b1.ceil,bP=ah.clearTimeout,cI=b1.floor,bz=aY.prototype.toString,ar=bY.test(ar=cW.getPrototypeOf)&&ar,aZ=cE.hasOwnProperty,cc=bY.test(cc=cb.now)&&cc||function(){return +new cb},aw=b4.push,aW=ah.setTimeout,cj=b4.splice;var bV=typeof(bV=v&&O&&v.setImmediate)=="function"&&!bY.test(bV)&&bV;var cC=(function(){try{var dc={},da=bY.test(da=cW.defineProperty)&&da,at=da(dc,dc,dc)&&da}catch(db){}return at}());var av=bY.test(av=cW.create)&&av,bd=bY.test(bd=aF.isArray)&&bd,aI=ah.isFinite,bB=ah.isNaN,cf=bY.test(cf=cW.keys)&&cf,cg=b1.max,am=b1.min,c5=ah.parseInt,bH=b1.random;var cF={};cF[t]=aF;cF[A]=ca;cF[I]=cb;cF[ab]=aY;cF[c]=cW;cF[F]=bc;cF[J]=cB;cF[G]=cl;function aT(at){return(at&&typeof at=="object"&&!bA(at)&&aZ.call(at,"__wrapped__"))?at:new cK(at)}function cK(da,at){this.__chain__=!!at;this.__wrapped__=da}cK.prototype=aT.prototype;var aE=aT.support={};aE.funcDecomp=!bY.test(ah.WinRTError)&&i.test(X);aE.funcNames=typeof aY.name=="string";aT.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:m,variable:"",imports:{_:aT}};function ap(dd){var dc=dd[0],da=dd[2],at=dd[4];function db(){if(da){var dg=da.slice();aw.apply(dg,arguments)}if(this instanceof db){var df=bX(dc.prototype),de=dc.apply(df,dg||arguments);return c8(de)?de:df}return dc.apply(at,dg||arguments)}ad(db,dd);return db}function bg(di,df,dj,dd,db){if(dj){var dk=dj(di);if(typeof dk!="undefined"){return dk}}var dc=c8(di);if(dc){var dg=az.call(di);if(!u[dg]){return di}var dh=cF[dg];switch(dg){case A:case I:return new dh(+di);case F:case G:return new dh(di);case J:dk=dh(di.source,C.exec(di));dk.lastIndex=di.lastIndex;return dk}}else{return di}var de=bA(di);if(df){var da=!dd;dd||(dd=d());db||(db=d());var at=dd.length;while(at--){if(dd[at]==di){return db[at]}}dk=de?dh(di.length):{}}else{dk=de?s(di):bp({},di)}if(de){if(aZ.call(di,"index")){dk.index=di.index}if(aZ.call(di,"input")){dk.input=di.input}}if(!df){return dk}dd.push(di);db.push(dk);(de?by:bL)(di,function(dl,dm){dk[dm]=bg(dl,df,dj,dd,db)});if(da){Q(dd);Q(db)}return dk}function bX(at,da){return c8(at)?av(at):{}}if(!av){bX=(function(){function at(){}return function(db){if(c8(db)){at.prototype=db;var da=new at;at.prototype=null}return da||ah.Object()}}())}function cq(da,at,dd){if(typeof da!="function"){return bh}if(typeof at=="undefined"||!("prototype" in da)){return da}var dc=da.__bindData__;if(typeof dc=="undefined"){if(aE.funcNames){dc=!da.name}dc=dc||!aE.funcDecomp;if(!dc){var db=bz.call(da);if(!aE.funcNames){dc=!p.test(db)}if(!dc){dc=i.test(db);ad(da,dc)}}}if(dc===false||(dc!==true&&dc[1]&1)){return da}switch(dd){case 1:return function(de){return da.call(at,de)};case 2:return function(df,de){return da.call(at,df,de)};case 3:return function(df,de,dg){return da.call(at,df,de,dg)};case 4:return function(de,dg,df,dh){return da.call(at,de,dg,df,dh)}}return bW(da,at)}function bj(dc){var de=dc[0],db=dc[1],dg=dc[2],da=dc[3],dj=dc[4],at=dc[5];var dd=db&1,dl=db&2,di=db&4,dh=db&8,dk=de;function df(){var dn=dd?dj:this;if(dg){var dp=dg.slice();aw.apply(dp,arguments)}if(da||di){dp||(dp=s(arguments));if(da){aw.apply(dp,da)}if(di&&dp.length<at){db|=16&~32;return bj([de,(dh?db:db&~3),dp,null,dj,at])}}dp||(dp=arguments);if(dl){de=dn[dk]}if(this instanceof df){dn=bX(de.prototype);var dm=de.apply(dn,dp);return c8(dm)?dm:dn}return de.apply(dn,dp)}ad(df,dc);return df}function c7(dc,dg){var db=-1,dd=b2(),da=dc?dc.length:0,de=da>=b&&dd===h,dh=[];if(de){var at=Y(dg);if(at){dd=N;dg=at}else{de=false}}while(++db<da){var df=dc[db];if(dd(dg,df)<0){dh.push(df)}}if(de){n(dg)}return dh}function bR(dc,de,da,df){var db=(df||0)-1,at=dc?dc.length:0,dj=[];while(++db<at){var dg=dc[db];if(dg&&typeof dg=="object"&&typeof dg.length=="number"&&(bA(dg)||a3(dg))){if(!de){dg=bR(dg,de,da)}var di=-1,dd=dg.length,dh=dj.length;dj.length+=dd;while(++di<dd){dj[dh++]=dg[di]}}else{if(!da){dj.push(dg)}}}return dj}function ba(ds,dr,dg,dn,du,dt){if(dg){var dl=dg(ds,dr);if(typeof dl!="undefined"){return !!dl}}if(ds===dr){return ds!==0||(1/ds==1/dr)}var df=typeof ds,dd=typeof dr;if(ds===ds&&!(ds&&D[df])&&!(dr&&D[dd])){return false}if(ds==null||dr==null){return ds===dr}var da=az.call(ds),dj=az.call(dr);if(da==S){da=c}if(dj==S){dj=c}if(da!=dj){return false}switch(da){case A:case I:return +ds==+dr;case F:return(ds!=+ds)?dr!=+dr:(ds==0?(1/ds==1/dr):ds==+dr);case J:case G:return ds==cl(dr)}var dh=da==t;if(!dh){var dm=aZ.call(ds,"__wrapped__"),at=aZ.call(dr,"__wrapped__");if(dm||at){return ba(dm?ds.__wrapped__:ds,at?dr.__wrapped__:dr,dg,dn,du,dt)}if(da!=c){return false}var de=ds.constructor,db=dr.constructor;if(de!=db&&!(ax(de)&&de instanceof de&&ax(db)&&db instanceof db)&&("constructor" in ds&&"constructor" in dr)){return false}}var dk=!du;du||(du=d());dt||(dt=d());var dc=du.length;while(dc--){if(du[dc]==ds){return dt[dc]==dr}}var dp=0;dl=true;du.push(ds);dt.push(dr);if(dh){dc=ds.length;dp=dr.length;dl=dp==ds.length;if(!dl&&!dn){return dl}while(dp--){var di=dc,dq=dr[dp];if(dn){while(di--){if((dl=ba(ds[di],dq,dg,dn,du,dt))){break}}}else{if(!(dl=ba(ds[dp],dq,dg,dn,du,dt))){break}}}return dl}ai(dr,function(dx,dw,dv){if(aZ.call(dv,dw)){dp++;return(dl=aZ.call(ds,dw)&&ba(ds[dw],dx,dg,dn,du,dt))}});if(dl&&!dn){ai(ds,function(dx,dw,dv){if(aZ.call(dv,dw)){return(dl=--dp>-1)}})}if(dk){Q(du);Q(dt)}return dl}function ag(da,db,dd,at,dc){(bA(db)?by:bL)(db,function(dk,dg){var dj,dh,df=dk,di=da[dg];if(dk&&((dh=bA(dk))||aN(dk))){var dl=at.length;while(dl--){if((dj=at[dl]==dk)){di=dc[dl];break}}if(!dj){var de;if(dd){df=dd(di,dk);if((de=typeof df!="undefined")){di=df}}if(!de){di=dh?(bA(di)?di:[]):(aN(di)?di:{})}at.push(dk);dc.push(di);if(!de){ag(di,dk,dd,at,dc)}}}else{if(dd){df=dd(di,dk);if(typeof df=="undefined"){df=dk}}if(typeof df!="undefined"){di=df}}da[dg]=di})}function ao(da,at){return da+cI(bH()*(at-da+1))}function ae(df,dc,dj){var de=-1,dg=b2(),db=df?df.length:0,dk=[];var dh=!dc&&db>=b&&dg===h,da=(dj||dh)?d():dk;if(dh){var at=Y(da);if(at){dg=N;da=at}else{dh=false;da=dj?da:(Q(da),dk)}}while(++de<db){var di=df[de],dd=dj?dj(di,de,df):di;if(dc?!de||da[da.length-1]!==dd:dg(da,dd)<0){if(dj||dh){da.push(dd)}dk.push(di)}}if(dh){Q(da.array);n(da)}else{if(dj){Q(da)}}return dk}function bQ(at){return function(df,dg,db){var da={};dg=aT.createCallback(dg,db,3);var dc=-1,dd=df?df.length:0;if(typeof dd=="number"){while(++dc<dd){var de=df[dc];at(da,de,dg(de,dc,df),df)}}else{bL(df,function(di,dh,dj){at(da,di,dg(di,dh,dj),dj)})}return da}}function cG(df,dc,dg,db,dl,at){var de=dc&1,dm=dc&2,dj=dc&4,di=dc&8,da=dc&16,dh=dc&32;if(!dm&&!ax(df)){throw new aG}if(da&&!dg.length){dc&=~16;da=dg=false}if(dh&&!db.length){dc&=~32;dh=db=false}var dd=df&&df.__bindData__;if(dd&&dd!==true){dd=dd.slice();if(de&&!(dd[1]&1)){dd[4]=dl}if(!de&&dd[1]&1){dc|=8}if(dj&&!(dd[1]&4)){dd[5]=at}if(da){aw.apply(dd[2]||(dd[2]=[]),dg)}if(dh){aw.apply(dd[3]||(dd[3]=[]),db)}dd[1]|=dc;return cG.apply(null,dd)}var dk=(dc==1||dc===17)?ap:bj;return dk([df,dc,dg,db,dl,at])}function bl(at){return aS[at]}function b2(){var at=(at=aT.indexOf)===cZ?h:at;return at}var ad=!cC?af:function(at,da){k.value=da;cC(at,"__bindData__",k)};function aK(db){var da,at;if(!(db&&az.call(db)==c)||(da=db.constructor,ax(da)&&!(da instanceof da))){return false}ai(db,function(dd,dc){at=dc});return typeof at=="undefined"||aZ.call(db,at)}function bm(at){return bS[at]}function a3(at){return at&&typeof at=="object"&&typeof at.length=="number"&&az.call(at)==S||false}var bA=bd||function(at){return at&&typeof at=="object"&&typeof at.length=="number"&&az.call(at)==t||false};var bb=function(db){var da,dc=db,at=[];if(!dc){return at}if(!(D[typeof db])){return at}for(da in dc){if(aZ.call(dc,da)){at.push(da)}}return at};var b6=!cf?bb:function(at){if(!c8(at)){return[]}return cf(at)};var aS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var bS=b3(aS);var b7=cB("("+b6(bS).join("|")+")","g"),cd=cB("["+b6(aS).join("")+"]","g");var bp=function(dd,at,dg){var df,dc=dd,dl=dc;if(!dc){return dl}var di=arguments,da=0,de=typeof dg=="number"?2:di.length;if(de>3&&typeof di[de-2]=="function"){var dk=cq(di[--de-1],di[de--],2)}else{if(de>2&&typeof di[de-1]=="function"){dk=di[--de]}}while(++da<de){dc=di[da];if(dc&&D[typeof dc]){var dh=-1,dj=D[typeof dc]&&b6(dc),db=dj?dj.length:0;while(++dh<db){df=dj[dh];dl[df]=dk?dk(dl[df],dc[df]):dc[df]}}}return dl};function cx(db,da,dc,at){if(typeof da!="boolean"&&da!=null){at=dc;dc=da;da=false}return bg(db,da,typeof dc=="function"&&cq(dc,at,1))}function c4(da,db,at){return bg(da,true,typeof db=="function"&&cq(db,at,1))}function aP(da,db){var at=bX(da);return db?bp(at,db):at}var bq=function(dd,at,dg){var df,dc=dd,dk=dc;if(!dc){return dk}var di=arguments,da=0,de=typeof dg=="number"?2:di.length;while(++da<de){dc=di[da];if(dc&&D[typeof dc]){var dh=-1,dj=D[typeof dc]&&b6(dc),db=dj?dj.length:0;while(++dh<db){df=dj[dh];if(typeof dk[df]=="undefined"){dk[df]=dc[df]}}}}return dk};function co(db,dc,da){var at;dc=aT.createCallback(dc,da,3);bL(db,function(df,de,dd){if(dc(df,de,dd)){at=de;return false}});return at}function bK(db,dc,da){var at;dc=aT.createCallback(dc,da,3);cV(db,function(df,de,dd){if(dc(df,de,dd)){at=de;return false}});return at}var ai=function(dd,de,da){var db,dc=dd,at=dc;if(!dc){return at}if(!D[typeof dc]){return at}de=de&&typeof da=="undefined"?de:cq(de,da,3);for(db in dc){if(de(dc[db],db,dd)===false){return at}}return at};function cp(da,dd,at){var dc=[];ai(da,function(df,de){dc.push(de,df)});var db=dc.length;dd=cq(dd,at,3);while(db--){if(dd(dc[db--],dc[db],da)===false){break}}return da}var bL=function(db,dg,de){var dc,da=db,dh=da;if(!da){return dh}if(!D[typeof da]){return dh}dg=dg&&typeof de=="undefined"?dg:cq(dg,de,3);var dd=-1,df=D[typeof da]&&b6(da),at=df?df.length:0;while(++dd<at){dc=df[dd];if(dg(da[dc],dc,db)===false){return dh}}return dh};function cV(da,de,at){var dc=b6(da),dd=dc.length;de=cq(de,at,3);while(dd--){var db=dc[dd];if(de(da[db],db,da)===false){break}}return da}function cD(da){var at=[];ai(da,function(dc,db){if(ax(dc)){at.push(db)}});return at.sort()}function cS(at,da){return at?aZ.call(at,da):false}function b3(db){var da=-1,dd=b6(db),de=dd.length,at={};while(++da<de){var dc=dd[da];at[db[dc]]=dc}return at}function bE(at){return at===true||at===false||at&&typeof at=="object"&&az.call(at)==A||false}function a6(at){return at&&typeof at=="object"&&az.call(at)==I||false}function bZ(at){return at&&at.nodeType===1||false}function cm(dc){var at=true;if(!dc){return at}var da=az.call(dc),db=dc.length;if((da==t||da==G||da==S)||(da==c&&typeof db=="number"&&ax(dc.splice))){return !db}bL(dc,function(){return(at=false)});return at}function b0(db,at,dc,da){return ba(db,at,typeof dc=="function"&&cq(dc,da,2))}function aJ(at){return aI(at)&&!bB(parseFloat(at))}function ax(at){return typeof at=="function"}function c8(at){return !!(at&&D[typeof at])}function bN(at){return bo(at)&&at!=+at}function cY(at){return at===null}function bo(at){return typeof at=="number"||at&&typeof at=="object"&&az.call(at)==F||false}var aN=function(db){if(!(db&&az.call(db)==c)){return false}var at=db.valueOf,da=typeof at=="function"&&(da=ar(at))&&ar(da);return da?(db==da||ar(db)==da):aK(db)};function cM(at){return at&&typeof at=="object"&&az.call(at)==J||false}function cu(at){return typeof at=="string"||at&&typeof at=="object"&&az.call(at)==G||false}function bU(at){return typeof at=="undefined"}function bG(dd){var dc=arguments,de=2;if(!c8(dd)){return dd}if(typeof dc[2]!="number"){de=dc.length}if(de>3&&typeof dc[de-2]=="function"){var dg=cq(dc[--de-1],dc[de--],2)}else{if(de>2&&typeof dc[de-1]=="function"){dg=dc[--de]}}var db=s(arguments,1,de),da=-1,at=d(),df=d();while(++da<de){ag(dd,db[da],dg,at,df)}Q(at);Q(df);return dd}function cr(dc,dg,da){var at={};if(typeof dg!="function"){var de=[];ai(dc,function(di,dh){de.push(dh)});de=c7(de,bR(arguments,true,false,1));var db=-1,df=de.length;while(++db<df){var dd=de[db];at[dd]=dc[dd]}}else{dg=aT.createCallback(dg,da,3);ai(dc,function(dj,di,dh){if(!dg(dj,di,dh)){at[di]=dj}})}return at}function bw(db){var da=-1,dd=b6(db),de=dd.length,at=aF(de);while(++da<de){var dc=dd[da];at[da]=[dc,db[dc]]}return at}function bI(dc,dg,da){var at={};if(typeof dg!="function"){var db=-1,de=bR(arguments,true,false,1),df=c8(dc)?de.length:0;while(++db<df){var dd=de[db];if(dd in dc){at[dd]=dc[dd]}}}else{dg=aT.createCallback(dg,da,3);ai(dc,function(dj,di,dh){if(dg(dj,di,dh)){at[di]=dj}})}return at}function cR(db,df,da,at){var de=bA(db);if(da==null){if(de){da=[]}else{var dd=db&&db.constructor,dc=dd&&dd.prototype;da=bX(dc)}}if(df){df=aT.createCallback(df,at,4);(de?by:bL)(db,function(di,dh,dg){return df(da,di,dh,dg)})}return da}function bt(db){var da=-1,dc=b6(db),dd=dc.length,at=aF(dd);while(++da<dd){at[da]=db[dc[da]]}return at}function cH(de){var db=arguments,da=-1,dc=bR(db,true,false,1),dd=(db[2]&&db[2][db[1]]===de)?1:dc.length,at=aF(dd);while(++da<dd){at[da]=de[dc[da]]}return at}function a2(df,de,dc){var da=-1,db=b2(),dd=df?df.length:0,at=false;dc=(dc<0?cg(0,dd+dc):dc)||0;if(bA(df)){at=db(df,de,dc)>-1}else{if(typeof dd=="number"){at=(cu(df)?df.indexOf(de,dc):db(df,de,dc))>-1}else{bL(df,function(dg){if(++da>=dc){return !(at=dg===de)}})}}return at}var bF=bQ(function(at,db,da){(aZ.call(at,da)?at[da]++:at[da]=1)});function ay(dd,de,da){var at=true;de=aT.createCallback(de,da,3);var db=-1,dc=dd?dd.length:0;if(typeof dc=="number"){while(++db<dc){if(!(at=!!de(dd[db],db,dd))){break}}}else{bL(dd,function(dg,df,dh){return(at=!!de(dg,df,dh))})}return at}function bM(de,df,da){var at=[];df=aT.createCallback(df,da,3);var db=-1,dc=de?de.length:0;if(typeof dc=="number"){while(++db<dc){var dd=de[db];if(df(dd,db,de)){at.push(dd)}}}else{bL(de,function(dh,dg,di){if(df(dh,dg,di)){at.push(dh)}})}return at}function bD(de,df,da){df=aT.createCallback(df,da,3);var db=-1,dc=de?de.length:0;if(typeof dc=="number"){while(++db<dc){var dd=de[db];if(df(dd,db,de)){return dd}}}else{var at;bL(de,function(dh,dg,di){if(df(dh,dg,di)){at=dh;return false}});return at}}function c2(db,dc,da){var at;dc=aT.createCallback(dc,da,3);aq(db,function(de,dd,df){if(dc(de,dd,df)){at=de;return false}});return at}function by(dc,dd,at){var da=-1,db=dc?dc.length:0;dd=dd&&typeof at=="undefined"?dd:cq(dd,at,3);if(typeof db=="number"){while(++da<db){if(dd(dc[da],da,dc)===false){break}}}else{bL(dc,dd)}return dc}function aq(dc,dd,at){var db=dc?dc.length:0;dd=dd&&typeof at=="undefined"?dd:cq(dd,at,3);if(typeof db=="number"){while(db--){if(dd(dc[db],db,dc)===false){break}}}else{var da=b6(dc);db=da.length;bL(dc,function(df,de,dg){de=da?da[--db]:--db;return dd(dg[de],de,dg)})}return dc}var bn=bQ(function(at,db,da){(aZ.call(at,da)?at[da]:at[da]=[]).push(db)});var c0=bQ(function(at,db,da){at[da]=db});function aH(df,da){var dc=s(arguments,2),db=-1,de=typeof da=="function",dd=df?df.length:0,at=aF(typeof dd=="number"?dd:0);by(df,function(dg){at[++db]=(de?da:dg[da]).apply(dg,dc)});return at}function bi(dd,de,da){var db=-1,dc=dd?dd.length:0;de=aT.createCallback(de,da,3);if(typeof dc=="number"){var at=aF(dc);while(++db<dc){at[db]=de(dd[db],db,dd)}}else{at=[];bL(dd,function(dg,df,dh){at[++db]=de(dg,df,dh)})}return at}function bf(df,dg,da){var dd=-Infinity,at=dd;if(typeof dg!="function"&&da&&da[dg]===df){dg=null}if(dg==null&&bA(df)){var db=-1,dc=df.length;while(++db<dc){var de=df[db];if(de>at){at=de}}}else{dg=(dg==null&&cu(df))?o:aT.createCallback(dg,da,3);by(df,function(di,dh,dk){var dj=dg(di,dh,dk);if(dj>dd){dd=dj;at=di}})}return at}function ci(df,dg,da){var dd=Infinity,at=dd;if(typeof dg!="function"&&da&&da[dg]===df){dg=null}if(dg==null&&bA(df)){var db=-1,dc=df.length;while(++db<dc){var de=df[db];if(de<at){at=de}}}else{dg=(dg==null&&cu(df))?o:aT.createCallback(dg,da,3);by(df,function(di,dh,dk){var dj=dg(di,dh,dk);if(dj<dd){dd=dj;at=di}})}return at}function c3(dd,dc){var da=-1,db=dd?dd.length:0;if(typeof db=="number"){var at=aF(db);while(++da<db){at[da]=dd[da][dc]}}return at||bi(dd,dc)}function ck(de,df,da,at){if(!de){return da}var dc=arguments.length<3;df=aT.createCallback(df,at,4);var db=-1,dd=de.length;if(typeof dd=="number"){if(dc){da=de[++db]}while(++db<dd){da=df(da,de[db],db,de)}}else{bL(de,function(dh,dg,di){da=dc?(dc=false,dh):df(da,dh,dg,di)})}return da}function cO(dc,dd,da,at){var db=arguments.length<3;dd=aT.createCallback(dd,at,4);aq(dc,function(df,de,dg){da=db?(db=false,df):dd(da,df,de,dg)});return da}function aA(da,db,at){db=aT.createCallback(db,at,3);return bM(da,function(dd,dc,de){return !db(dd,dc,de)})}function cN(db,dc,da){if(db&&typeof db.length!="number"){db=bt(db)}if(dc==null||da){return db?db[ao(0,db.length-1)]:l}var at=bu(db);at.length=am(cg(0,dc),at.length);return at}function bu(dc){var da=-1,db=dc?dc.length:0,at=aF(typeof db=="number"?db:0);by(dc,function(de){var dd=ao(0,++da);at[da]=at[dd];at[dd]=de});return at}function a5(da){var at=da?da.length:0;return typeof at=="number"?at:b6(da).length}function a4(dd,de,da){var at;de=aT.createCallback(de,da,3);var db=-1,dc=dd?dd.length:0;if(typeof dc=="number"){while(++db<dc){if((at=de(dd[db],db,dd))){break}}}else{bL(dd,function(dg,df,dh){return !(at=de(dg,df,dh))})}return !!at}function a7(de,df,da){var dc=-1,dd=de?de.length:0,at=aF(typeof dd=="number"?dd:0);df=aT.createCallback(df,da,3);by(de,function(di,dh,dj){var dg=at[++dc]=q();dg.criteria=df(di,dh,dj);dg.index=dc;dg.value=di});dd=at.length;at.sort(V);while(dd--){var db=at[dd];at[dd]=db.value;n(db)}return at}function aC(at){if(at&&typeof at.length=="number"){return s(at)}return bt(at)}var aj=bM;function aO(dd){var da=-1,db=dd?dd.length:0,at=[];while(++da<db){var dc=dd[da];if(dc){at.push(dc)}}return at}function ac(at){return c7(at,bR(arguments,true,true,1))}function cX(dd,dc,at){var da=-1,db=dd?dd.length:0;dc=aT.createCallback(dc,at,3);while(++da<db){if(dc(dd[da],da,dd)){return da}}return -1}function aL(dc,db,at){var da=dc?dc.length:0;db=aT.createCallback(db,at,3);while(da--){if(db(dc[da],da,dc)){return da}}return -1}function be(de,dd,at){var dc=0,db=de?de.length:0;if(typeof dd!="number"&&dd!=null){var da=-1;dd=aT.createCallback(dd,at,3);while(++da<db&&dd(de[da],da,de)){dc++}}else{dc=dd;if(dc==null||at){return de?de[0]:l}}return s(de,0,am(cg(0,dc),db))}function cw(dc,at,db,da){if(typeof at!="boolean"&&at!=null){da=db;db=(typeof at!="function"&&da&&da[at]===dc)?null:at;at=false}if(db!=null){dc=bi(dc,db,da)}return bR(dc,at)}function cZ(dd,dc,da){if(typeof da=="number"){var db=dd?dd.length:0;da=(da<0?cg(0,db+da):da||0)}else{if(da){var at=a8(dd,dc);return dd[at]===dc?at:-1}}return h(dd,dc,da)}function c1(de,dd,at){var dc=0,db=de?de.length:0;if(typeof dd!="number"&&dd!=null){var da=db;dd=aT.createCallback(dd,at,3);while(da--&&dd(de[da],da,de)){dc++}}else{dc=(dd==null||at)?1:dd||dc}return s(de,0,am(cg(0,db-dc),db))}function ct(df){var dh=arguments,dd=dh.length,db=-1,dg=d(),de=-1,di=b2(),dc=df?df.length:0,dk=[],da=d();while(++db<dd){var dj=dh[db];dg[db]=di===h&&(dj?dj.length:0)>=b&&Y(db?dh[db]:da)}outer:while(++de<dc){var at=dg[0];dj=df[de];if((at?N(at,dj):di(da,dj))<0){db=dd;(at||da).push(dj);while(--db){at=dg[db];if((at?N(at,dj):di(dh[db],dj))<0){continue outer}}dk.push(dj)}}while(dd--){at=dg[dd];if(at){n(at)}}Q(dg);Q(da);return dk}function br(de,dd,at){var dc=0,db=de?de.length:0;if(typeof dd!="number"&&dd!=null){var da=db;dd=aT.createCallback(dd,at,3);while(da--&&dd(de[da],da,de)){dc++}}else{dc=dd;if(dc==null||at){return de?de[db-1]:l}}return s(de,cg(0,db-dc))}function c9(dc,db,da){var at=dc?dc.length:0;if(typeof da=="number"){at=(da<0?cg(0,at+da):am(da,at-1))+1}while(at--){if(dc[at]===db){return at}}return -1}function b8(df){var db=arguments,at=0,dd=db.length,dc=df?df.length:0;while(++at<dd){var da=-1,de=db[at];while(++da<dc){if(df[da]===de){cj.call(df,da--,1);dc--}}}return df}function aX(de,da,dd){de=+de||0;dd=typeof dd=="number"?dd:(+dd||1);if(da==null){da=de;de=0}var db=-1,dc=cg(0,aV((da-de)/(dd||1))),at=aF(dc);while(++db<dc){at[db]=de;de+=dd}return at}function aM(df,de,da){var db=-1,dc=df?df.length:0,at=[];de=aT.createCallback(de,da,3);while(++db<dc){var dd=df[db];if(de(dd,db,df)){at.push(dd);cj.call(df,db--,1);dc--}}return at}function b5(de,dd,at){if(typeof dd!="number"&&dd!=null){var dc=0,da=-1,db=de?de.length:0;dd=aT.createCallback(dd,at,3);while(++da<db&&dd(de[da],da,de)){dc++}}else{dc=(dd==null||at)?1:cg(0,dd)}return s(de,dc)}function a8(df,dd,de,da){var at=0,dc=df?df.length:at;de=de?aT.createCallback(de,da,1):bh;dd=de(dd);while(at<dc){var db=(at+dc)>>>1;(de(df[db])<dd)?at=db+1:dc=db}return at}function au(at){return ae(bR(arguments,true,true))}function bO(dc,db,da,at){if(typeof db!="boolean"&&db!=null){at=da;da=(typeof db!="function"&&at&&at[db]===dc)?null:db;db=false}if(da!=null){da=aT.createCallback(da,at,3)}return ae(dc,db,da)}function cU(at){return c7(at,s(arguments,1))}function an(){var dc=arguments.length>1?arguments:arguments[0],da=-1,db=dc?bf(c3(dc,"length")):0,at=aF(db<0?0:db);while(++da<db){at[da]=c3(dc,da)}return at}function cy(de,da){var db=-1,dd=de?de.length:0,at={};while(++db<dd){var dc=de[db];if(da){at[dc]=da[db]}else{if(dc){at[dc[0]]=dc[1]}}}return at}function aR(da,at){if(!ax(at)){throw new aG}return function(){if(--da<1){return at.apply(this,arguments)}}}function bW(da,at){return arguments.length>2?cG(da,17,s(arguments,2),null,at):cG(da,1,null,null,at)}function bs(db){var at=arguments.length>1?bR(arguments,true,false,1):cD(db),da=-1,dd=at.length;while(++da<dd){var dc=at[da];db[dc]=cG(db[dc],1,null,null,db)}return db}function cL(at,da){return arguments.length>2?cG(da,19,s(arguments,2),null,at):cG(da,3,null,null,at)}function cA(){var at=arguments,da=at.length;while(da--){if(!ax(at[da])){throw new aG}}return function(){var db=arguments,dc=at.length;while(dc--){db=[at[dc].apply(this,db)]}return db[0]}}function aD(de,da,df){var dd=typeof de;if(de==null||dd=="function"){return cq(de,da,df)}if(dd!="object"){return function(dg){return dg[de]}}var dc=b6(de),db=dc[0],at=de[db];if(dc.length==1&&at===at&&!c8(at)){return function(dh){var dg=dh[db];return at===dg&&(at!==0||(1/at==1/dg))}}return function(dh){var di=dc.length,dg=false;while(di--){if(!(dg=ba(dh[dc[di]],de[dc[di]],null,true))){break}}return dg}}function cJ(at,da){da=typeof da=="number"?da:(+da||at.length);return cG(at,4,null,null,null,da)}function cz(dc,dh,dn){var dj,df,dp,at,dl,dm,dk,dg=0,de=false,di=true;if(!ax(dc)){throw new aG}dh=cg(0,dh)||0;if(dn===true){var db=true;di=false}else{if(c8(dn)){db=dn.leading;de="maxWait" in dn&&(cg(dh,dn.maxWait)||0);di="trailing" in dn?dn.trailing:di}}var dd=function(){var dr=dh-(cc()-at);if(dr<=0){if(df){bP(df)}var dq=dk;df=dm=dk=l;if(dq){dg=cc();dp=dc.apply(dl,dj);if(!dm&&!df){dj=dl=null}}}else{dm=aW(dd,dr)}};var da=function(){if(dm){bP(dm)}df=dm=dk=l;if(di||(de!==dh)){dg=cc();dp=dc.apply(dl,dj);if(!dm&&!df){dj=dl=null}}};return function(){dj=arguments;at=cc();dl=this;dk=di&&(dm||!db);if(de===false){var dq=db&&!dm}else{if(!df&&!db){dg=at}var ds=de-(at-dg),dr=ds<=0;if(dr){if(df){df=bP(df)}dg=at;dp=dc.apply(dl,dj)}else{if(!df){df=aW(da,ds)}}}if(dr&&dm){dm=bP(dm)}else{if(!dm&&dh!==de){dm=aW(dd,dh)}}if(dq){dr=true;dp=dc.apply(dl,dj)}if(dr&&!dm&&!df){dj=dl=null}return dp}}function a0(da){if(!ax(da)){throw new aG}var at=s(arguments,1);return aW(function(){da.apply(l,at)},1)}if(bV){a0=function(at){if(!ax(at)){throw new aG}return bV.apply(ah,arguments)}}function bJ(da,db){if(!ax(da)){throw new aG}var at=s(arguments,2);return aW(function(){da.apply(l,at)},db)}function a1(da,db){if(!ax(da)){throw new aG}var at=function(){var dc=at.cache,dd=db?db.apply(this,arguments):a+arguments[0];return aZ.call(dc,dd)?dc[dd]:(dc[dd]=da.apply(this,arguments))};at.cache={};return at}function cs(db){var da,at;if(!ax(db)){throw new aG}return function(){if(da){return at}da=true;at=db.apply(this,arguments);db=null;return at}}function cP(at){return cG(at,16,s(arguments,1))}function cn(at){return cG(at,32,null,s(arguments,1))}function ch(da,db,at){var dd=true,dc=true;if(!ax(da)){throw new aG}if(at===false){dd=false}else{if(c8(at)){dd="leading" in at?at.leading:dd;dc="trailing" in at?at.trailing:dc}}M.leading=dd;M.maxWait=db;M.trailing=dc;return cz(da,db,M)}function bT(at,da){return cG(da,16,[at])}function a9(at){return at==null?"":cl(at).replace(cd,bl)}function bh(at){return at}function aB(at,dc){var da=at,db=!dc||ax(da);if(!dc){da=cK;dc=at;at=aT}by(cD(dc),function(dd){var de=at[dd]=dc[dd];if(db){da.prototype[dd]=function(){var dh=this.__wrapped__,dg=[dh];aw.apply(dg,arguments);var df=de.apply(at,dg);if(dh&&typeof dh=="object"&&dh===df){return this}df=new da(df);df.__chain__=this.__chain__;return df}}})}function cT(){ah._=cQ;return this}function af(){}var c6=c5(E+"08")==8?c5:function(da,at){return c5(cu(da)?da.replace(W,""):da,at||0)};function b9(db,at,de){var dd=db==null,da=at==null;if(de==null){if(typeof db=="boolean"&&da){de=db;db=1}else{if(!da&&typeof at=="boolean"){de=at;da=true}}}if(dd&&da){at=1}db=+db||0;if(da){at=db;db=0}else{at=+at||0}if(de||db%1||at%1){var dc=bH();return am(db+(dc*(at-db+parseFloat("1e-"+((dc+"").length-1)))),at)}return ao(db,at)}function aQ(at,db){if(at){var da=at[db];return ax(da)?at[db]():da}}function bC(dm,dg,dq){var dd=aT.templateSettings;dm=cl(dm||"");dq=bq({},dq,dd);var db=bq({},dq.imports,dd.imports),dh=b6(db),dc=bt(db);var dl,di=0,dk=dq.interpolate||P,da="__p += '";var dp=cB((dq.escape||P).source+"|"+dk.source+"|"+(dk===m?z:P).source+"|"+(dq.evaluate||P).source+"|$","g");dm.replace(dp,function(dr,dv,dt,ds,du,dw){dt||(dt=ds);da+=dm.slice(di,dw).replace(T,f);if(dv){da+="' +\n__e("+dv+") +\n'"}if(du){dl=true;da+="';\n"+du+";\n__p += '"}if(dt){da+="' +\n((__t = ("+dt+")) == null ? '' : __t) +\n'"}di=dw+dr.length;return dr});da+="';\n";var de=dq.variable,df=de;if(!df){de="obj";da="with ("+de+") {\n"+da+"\n}\n"}da=(dl?da.replace(w,""):da).replace(R,"$1").replace(e,"$1;");da="function("+de+") {\n"+(df?"":de+" || ("+de+" = {});\n")+"var __t, __p = '', __e = _.escape"+(dl?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+da+"return __p\n}";var at="\n/*\n//# sourceURL="+(dq.sourceURL||"/lodash/template/source["+(Z++)+"]")+"\n*/";try{var dn=aY(dh,"return "+da+at).apply(l,dc)}catch(dj){dj.source=da;throw dj}if(dg){return dn(dg)}dn.source=da;return dn}function ak(dd,dc,da){dd=(dd=+dd)>-1?dd:0;var db=-1,at=aF(dd);dc=cq(dc,da,1);while(++db<dd){at[db]=dc(db)}return at}function al(at){return at==null?"":cl(at).replace(b7,bm)}function ce(at){var da=++H;return cl(at==null?"":at)+da}function bv(at){at=new cK(at);at.__chain__=true;return at}function cv(at,da){da(at);return at}function bx(){this.__chain__=true;return this}function bk(){return cl(this.__wrapped__)}function aU(){return this.__wrapped__}aT.after=aR;aT.assign=bp;aT.at=cH;aT.bind=bW;aT.bindAll=bs;aT.bindKey=cL;aT.chain=bv;aT.compact=aO;aT.compose=cA;aT.countBy=bF;aT.create=aP;aT.createCallback=aD;aT.curry=cJ;aT.debounce=cz;aT.defaults=bq;aT.defer=a0;aT.delay=bJ;aT.difference=ac;aT.filter=bM;aT.flatten=cw;aT.forEach=by;aT.forEachRight=aq;aT.forIn=ai;aT.forInRight=cp;aT.forOwn=bL;aT.forOwnRight=cV;aT.functions=cD;aT.groupBy=bn;aT.indexBy=c0;aT.initial=c1;aT.intersection=ct;aT.invert=b3;aT.invoke=aH;aT.keys=b6;aT.map=bi;aT.max=bf;aT.memoize=a1;aT.merge=bG;aT.min=ci;aT.omit=cr;aT.once=cs;aT.pairs=bw;aT.partial=cP;aT.partialRight=cn;aT.pick=bI;aT.pluck=c3;aT.pull=b8;aT.range=aX;aT.reject=aA;aT.remove=aM;aT.rest=b5;aT.shuffle=bu;aT.sortBy=a7;aT.tap=cv;aT.throttle=ch;aT.times=ak;aT.toArray=aC;aT.transform=cR;aT.union=au;aT.uniq=bO;aT.values=bt;aT.where=aj;aT.without=cU;aT.wrap=bT;aT.zip=an;aT.zipObject=cy;aT.collect=bi;aT.drop=b5;aT.each=by;aT.eachRight=aq;aT.extend=bp;aT.methods=cD;aT.object=cy;aT.select=bM;aT.tail=b5;aT.unique=bO;aT.unzip=an;aB(aT);aT.clone=cx;aT.cloneDeep=c4;aT.contains=a2;aT.escape=a9;aT.every=ay;aT.find=bD;aT.findIndex=cX;aT.findKey=co;aT.findLast=c2;aT.findLastIndex=aL;aT.findLastKey=bK;aT.has=cS;aT.identity=bh;aT.indexOf=cZ;aT.isArguments=a3;aT.isArray=bA;aT.isBoolean=bE;aT.isDate=a6;aT.isElement=bZ;aT.isEmpty=cm;aT.isEqual=b0;aT.isFinite=aJ;aT.isFunction=ax;aT.isNaN=bN;aT.isNull=cY;aT.isNumber=bo;aT.isObject=c8;aT.isPlainObject=aN;aT.isRegExp=cM;aT.isString=cu;aT.isUndefined=bU;aT.lastIndexOf=c9;aT.mixin=aB;aT.noConflict=cT;aT.noop=af;aT.parseInt=c6;aT.random=b9;aT.reduce=ck;aT.reduceRight=cO;aT.result=aQ;aT.runInContext=X;aT.size=a5;aT.some=a4;aT.sortedIndex=a8;aT.template=bC;aT.unescape=al;aT.uniqueId=ce;aT.all=ay;aT.any=a4;aT.detect=bD;aT.findWhere=bD;aT.foldl=ck;aT.foldr=cO;aT.include=a2;aT.inject=ck;bL(aT,function(da,at){if(!aT.prototype[at]){aT.prototype[at]=function(){var dd=[this.__wrapped__],dc=this.__chain__;aw.apply(dd,arguments);var db=da.apply(aT,dd);return dc?new cK(db,dc):db}}});aT.first=be;aT.last=br;aT.sample=cN;aT.take=be;aT.head=be;bL(aT,function(db,da){var at=da!=="sample";if(!aT.prototype[da]){aT.prototype[da]=function(df,de){var dd=this.__chain__,dc=db(this.__wrapped__,df,de);return !dd&&(df==null||(de&&!(at&&typeof df=="function")))?dc:new cK(dc,dd)}}});aT.VERSION="2.3.0";aT.prototype.chain=bx;aT.prototype.toString=bk;aT.prototype.value=aU;aT.prototype.valueOf=aU;by(["join","pop","shift"],function(at){var da=b4[at];aT.prototype[at]=function(){var dc=this.__chain__,db=da.apply(this.__wrapped__,arguments);return dc?new cK(db,dc):db}});by(["push","reverse","sort","unshift"],function(at){var da=b4[at];aT.prototype[at]=function(){da.apply(this.__wrapped__,arguments);return this}});by(["concat","slice","splice"],function(at){var da=b4[at];aT.prototype[at]=function(){return new cK(da.apply(this.__wrapped__,arguments),this.__chain__)}});return aT}var aa=X();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){B._=aa;define(function(){return aa})}else{if(U&&y){if(O){(y.exports=aa)._=aa}else{U._=aa}}else{B._=aa}}}.call(this));(function(l,p,g){var c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},k={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},E={"~":"`","!":"1","@":"2","#":"3","$":"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},u={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},F,j={},J={},A={},I,v=false,a=false,w=false;for(var y=1;y<20;++y){c[111+y]="f"+y}for(y=0;y<=9;++y){c[y+96]=y}function C(i,K,L){if(i.addEventListener){i.addEventListener(K,L,false);return}i.attachEvent("on"+K,L)}function B(K){if(K.type=="keypress"){var i=String.fromCharCode(K.which);if(!K.shiftKey){i=i.toLowerCase()}return i}if(c[K.which]){return c[K.which]}if(k[K.which]){return k[K.which]}return String.fromCharCode(K.which).toLowerCase()}function n(K,i){return K.sort().join(",")===i.sort().join(",")}function b(i){i=i||{};var L=false,K;for(K in A){if(i[K]){L=true;continue}A[K]=0}if(!L){w=false}}function q(P,T,Q,V,R,K){var N,U,O=[],L=Q.type;if(!j[P]){return[]}if(L=="keyup"&&s(P)){T=[P]}for(N=0;N<j[P].length;++N){U=j[P][N];if(!V&&U.seq&&A[U.seq]!=U.level){continue}if(L!=U.action){continue}if((L=="keypress"&&!Q.metaKey&&!Q.ctrlKey)||n(T,U.modifiers)){var S=!V&&U.combo==R;var M=V&&U.seq==V&&U.level==K;if(S||M){j[P].splice(N,1)}O.push(U)}}return O}function f(K){var i=[];if(K.shiftKey){i.push("shift")}if(K.altKey){i.push("alt")}if(K.ctrlKey){i.push("ctrl")}if(K.metaKey){i.push("meta")}return i}function o(L,K,i){if(h.stopCallback(K,K.target||K.srcElement,i)){return}if(L(K,i)===false){if(K.preventDefault){K.preventDefault()}if(K.stopPropagation){K.stopPropagation()}K.returnValue=false;K.cancelBubble=true}}function D(O,R,P){var Q=q(O,R,P),M,L={},S=0,N=false;for(M=0;M<Q.length;++M){if(Q[M].seq){S=Math.max(S,Q[M].level)}}for(M=0;M<Q.length;++M){if(Q[M].seq){if(Q[M].level!=S){continue}N=true;L[Q[M].seq]=1;o(Q[M].callback,P,Q[M].combo);continue}if(!N){o(Q[M].callback,P,Q[M].combo)}}var K=P.type=="keypress"&&a;if(P.type==w&&!s(O)&&!K){b(L)}a=N&&P.type=="keydown"}function t(K){if(typeof K.which!=="number"){K.which=K.keyCode}var i=B(K);if(!i){return}if(K.type=="keyup"&&v===i){v=false;return}h.handleKey(i,f(K),K)}function s(i){return i=="shift"||i=="ctrl"||i=="alt"||i=="meta"}function H(){clearTimeout(I);I=setTimeout(b,1000)}function e(){if(!F){F={};for(var i in c){if(i>95&&i<112){continue}if(c.hasOwnProperty(i)){F[c[i]]=i}}}return F}function r(K,i,L){if(!L){L=e()[K]?"keydown":"keypress"}if(L=="keypress"&&i.length){L="keydown"}return L}function G(M,R,P,N){A[M]=0;function Q(i){return function(){w=i;++A[M];H()}}function S(i){o(P,i,M);if(N!=="keyup"){v=B(i)}setTimeout(b,10)}for(var O=0;O<R.length;++O){var L=O+1===R.length;var K=L?S:Q(N||x(R[O+1]).action);z(R[O],K,N,M,O)}}function d(i){if(i==="+"){return["+"]}return i.split("+")}function x(N,P){var O,M,L,K=[];O=d(N);for(L=0;L<O.length;++L){M=O[L];if(u[M]){M=u[M]}if(P&&P!="keypress"&&E[M]){M=E[M];K.push("shift")}if(s(M)){K.push(M)}}P=r(M,K,P);return{key:M,modifiers:K,action:P}}function z(i,P,K,M,O){J[i+":"+K]=P;i=i.replace(/\s+/g," ");var N=i.split(" "),L;if(N.length>1){G(i,N,P,K);return}L=x(i,K);j[L.key]=j[L.key]||[];q(L.key,L.modifiers,{type:L.action},M,i,O);j[L.key][M?"unshift":"push"]({callback:P,modifiers:L.modifiers,action:L.action,seq:M,level:O,combo:i})}function m(L,N,M){for(var K=0;K<L.length;++K){z(L[K],N,M)}}C(p,"keypress",t);C(p,"keydown",t);C(p,"keyup",t);var h={bind:function(i,L,K){i=i instanceof Array?i:[i];m(i,L,K);return this},unbind:function(i,K){return h.bind(i,function(){},K)},trigger:function(i,K){if(J[i+":"+K]){J[i+":"+K]({},i)}return this},reset:function(){j={};J={};return this},stopCallback:function(K,i){if((" "+i.className+" ").indexOf(" mousetrap ")>-1){return false}return i.tagName=="INPUT"||i.tagName=="SELECT"||i.tagName=="TEXTAREA"||i.isContentEditable},handleKey:D};l.Mousetrap=h;if(typeof define==="function"&&define.amd){define(h)}})(window,document);
/*!
 * jQuery JavaScript Library v1.8.3+1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Wed Mar 26 2014 11:04:46 GMT-0400 (EDT)
 */
(function(a2,aB){var w,af,o=a2.document,aI=a2.location,d=a2.navigator,bg=a2.jQuery,I=a2.$,am=Array.prototype.push,a4=Array.prototype.slice,aK=Array.prototype.indexOf,z=Object.prototype.toString,V=Object.prototype.hasOwnProperty,aO=String.prototype.trim,bG=function(e,bZ){return new bG.fn.init(e,bZ,w)},bx=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,aa=/\S/,aV=/\s+/,C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,bo=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,a=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,bf=/^[\],:{}\s]*$/,bi=/(?:^|:|,)(?:\s*\[)+/g,bD=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,a0=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,bP=/^-ms-/,aU=/-([\da-z])/gi,N=function(e,bZ){return(bZ+"").toUpperCase()},aF=function(){if(o.addEventListener){o.removeEventListener("DOMContentLoaded",aF,false);bG.ready()}else{if(o.readyState==="complete"){o.detachEvent("onreadystatechange",aF);bG.ready()}}},Z={};bG.fn=bG.prototype={constructor:bG,init:function(e,b2,b1){var b0,b3,bZ,b4;if(!e){return this}if(e.nodeType){this.context=this[0]=e;this.length=1;return this}if(typeof e==="string"){if(e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3){b0=[null,e,null]}else{b0=bo.exec(e)}if(b0&&(b0[1]||!b2)){if(b0[1]){b2=b2 instanceof bG?b2[0]:b2;b4=(b2&&b2.nodeType?b2.ownerDocument||b2:o);e=bG.parseHTML(b0[1],b4,true);if(a.test(b0[1])&&bG.isPlainObject(b2)){this.attr.call(e,b2,true)}return bG.merge(this,e)}else{b3=o.getElementById(b0[2]);if(b3&&b3.parentNode){if(b3.id!==b0[2]){return b1.find(e)}this.length=1;this[0]=b3}this.context=o;this.selector=e;return this}}else{if(!b2||b2.jquery){return(b2||b1).find(e)}else{return this.constructor(b2).find(e)}}}else{if(bG.isFunction(e)){return b1.ready(e)}}if(e.selector!==aB){this.selector=e.selector;this.context=e.context}return bG.makeArray(e,this)},selector:"",jquery:"1.8.3+1",length:0,size:function(){return this.length},toArray:function(){return a4.call(this)},get:function(e){return e==null?this.toArray():(e<0?this[this.length+e]:this[e])},pushStack:function(bZ,b1,e){var b0=bG.merge(this.constructor(),bZ);b0.prevObject=this;b0.context=this.context;if(b1==="find"){b0.selector=this.selector+(this.selector?" ":"")+e}else{if(b1){b0.selector=this.selector+"."+b1+"("+e+")"}}return b0},each:function(bZ,e){return bG.each(this,bZ,e)},ready:function(e){bG.ready.promise().done(e);return this},eq:function(e){e=+e;return e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(a4.apply(this,arguments),"slice",a4.call(arguments).join(","))},map:function(e){return this.pushStack(bG.map(this,function(b0,bZ){return e.call(b0,bZ,b0)}))},end:function(){return this.prevObject||this.constructor(null)},push:am,sort:[].sort,splice:[].splice};bG.fn.init.prototype=bG.fn;bG.extend=bG.fn.extend=function(){var b7,b0,e,bZ,b4,b5,b3=arguments[0]||{},b2=1,b1=arguments.length,b6=false;if(typeof b3==="boolean"){b6=b3;b3=arguments[1]||{};b2=2}if(typeof b3!=="object"&&!bG.isFunction(b3)){b3={}}if(b1===b2){b3=this;--b2}for(;b2<b1;b2++){if((b7=arguments[b2])!=null){for(b0 in b7){e=b3[b0];bZ=b7[b0];if(b3===bZ){continue}if(b6&&bZ&&(bG.isPlainObject(bZ)||(b4=bG.isArray(bZ)))){if(b4){b4=false;b5=e&&bG.isArray(e)?e:[]}else{b5=e&&bG.isPlainObject(e)?e:{}}b3[b0]=bG.extend(b6,b5,bZ)}else{if(bZ!==aB){b3[b0]=bZ}}}}}return b3};bG.extend({noConflict:function(e){if(a2.$===bG){a2.$=I}if(e&&a2.jQuery===bG){a2.jQuery=bg}return bG},isReady:false,readyWait:1,holdReady:function(e){if(e){bG.readyWait++}else{bG.ready(true)}},ready:function(e){if(e===true?--bG.readyWait:bG.isReady){return}if(!o.body){return setTimeout(bG.ready,1)}bG.isReady=true;if(e!==true&&--bG.readyWait>0){return}af.resolveWith(o,[bG]);if(bG.fn.trigger){bG(o).trigger("ready").off("ready")}},isFunction:function(e){return bG.type(e)==="function"},isArray:Array.isArray||function(e){return bG.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return !isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):Z[z.call(e)]||"object"},isPlainObject:function(b1){if(!b1||bG.type(b1)!=="object"||b1.nodeType||bG.isWindow(b1)){return false}try{if(b1.constructor&&!V.call(b1,"constructor")&&!V.call(b1.constructor.prototype,"isPrototypeOf")){return false}}catch(b0){return false}var bZ;for(bZ in b1){}return bZ===aB||V.call(b1,bZ)},isEmptyObject:function(bZ){var e;for(e in bZ){return false}return true},error:function(e){throw new Error(e)},parseHTML:function(b1,b0,e){var bZ;if(!b1||typeof b1!=="string"){return null}if(typeof b0==="boolean"){e=b0;b0=0}b0=b0||o;if((bZ=a.exec(b1))){return[b0.createElement(bZ[1])]}bZ=bG.buildFragment([b1],b0,e?null:[]);return bG.merge([],(bZ.cacheable?bG.clone(bZ.fragment):bZ.fragment).childNodes)},parseJSON:function(e){if(!e||typeof e!=="string"){return null}e=bG.trim(e);if(a2.JSON&&a2.JSON.parse){return a2.JSON.parse(e)}if(bf.test(e.replace(bD,"@").replace(a0,"]").replace(bi,""))){return(new Function("return "+e))()}bG.error("Invalid JSON: "+e)},parseXML:function(b1){var bZ,b0;if(!b1||typeof b1!=="string"){return null}try{if(a2.DOMParser){b0=new DOMParser();bZ=b0.parseFromString(b1,"text/xml")}else{bZ=new ActiveXObject("Microsoft.XMLDOM");bZ.async="false";bZ.loadXML(b1)}}catch(b2){bZ=aB}if(!bZ||!bZ.documentElement||bZ.getElementsByTagName("parsererror").length){bG.error("Invalid XML: "+b1)}return bZ},noop:function(){},globalEval:function(e){if(e&&aa.test(e)){(a2.execScript||function(bZ){a2["eval"].call(a2,bZ)})(e)}},camelCase:function(e){return e.replace(bP,"ms-").replace(aU,N)},nodeName:function(bZ,e){return bZ.nodeName&&bZ.nodeName.toLowerCase()===e.toLowerCase()},each:function(b3,b4,b0){var bZ,b1=0,b2=b3.length,e=b2===aB||bG.isFunction(b3);if(b0){if(e){for(bZ in b3){if(b4.apply(b3[bZ],b0)===false){break}}}else{for(;b1<b2;){if(b4.apply(b3[b1++],b0)===false){break}}}}else{if(e){for(bZ in b3){if(b4.call(b3[bZ],bZ,b3[bZ])===false){break}}}else{for(;b1<b2;){if(b4.call(b3[b1],b1,b3[b1++])===false){break}}}}return b3},trim:aO&&!aO.call("\uFEFF\xA0")?function(e){return e==null?"":aO.call(e)}:function(e){return e==null?"":(e+"").replace(C,"")},makeArray:function(e,b0){var b1,bZ=b0||[];if(e!=null){b1=bG.type(e);if(e.length==null||b1==="string"||b1==="function"||b1==="regexp"||bG.isWindow(e)){am.call(bZ,e)}else{bG.merge(bZ,e)}}return bZ},inArray:function(b1,bZ,b0){var e;if(bZ){if(aK){return aK.call(bZ,b1,b0)}e=bZ.length;b0=b0?b0<0?Math.max(0,e+b0):b0:0;for(;b0<e;b0++){if(b0 in bZ&&bZ[b0]===b1){return b0}}}return -1},merge:function(b2,b0){var e=b0.length,b1=b2.length,bZ=0;if(typeof e==="number"){for(;bZ<e;bZ++){b2[b1++]=b0[bZ]}}else{while(b0[bZ]!==aB){b2[b1++]=b0[bZ++]}}b2.length=b1;return b2},grep:function(bZ,b4,e){var b3,b0=[],b1=0,b2=bZ.length;e=!!e;for(;b1<b2;b1++){b3=!!b4(bZ[b1],b1);if(e!==b3){b0.push(bZ[b1])}}return b0},map:function(e,b5,b6){var b3,b4,b2=[],b0=0,bZ=e.length,b1=e instanceof bG||bZ!==aB&&typeof bZ==="number"&&((bZ>0&&e[0]&&e[bZ-1])||bZ===0||bG.isArray(e));if(b1){for(;b0<bZ;b0++){b3=b5(e[b0],b0,b6);if(b3!=null){b2[b2.length]=b3}}}else{for(b4 in e){b3=b5(e[b4],b4,b6);if(b3!=null){b2[b2.length]=b3}}}return b2.concat.apply([],b2)},guid:1,proxy:function(b2,b1){var b0,e,bZ;if(typeof b1==="string"){b0=b2[b1];b1=b2;b2=b0}if(!bG.isFunction(b2)){return aB}e=a4.call(arguments,2);bZ=function(){return b2.apply(b1,e.concat(a4.call(arguments)))};bZ.guid=b2.guid=b2.guid||bG.guid++;return bZ},access:function(e,b4,b7,b5,b2,b8,b6){var b0,b3=b7==null,b1=0,bZ=e.length;if(b7&&typeof b7==="object"){for(b1 in b7){bG.access(e,b4,b1,b7[b1],1,b8,b5)}b2=1}else{if(b5!==aB){b0=b6===aB&&bG.isFunction(b5);if(b3){if(b0){b0=b4;b4=function(ca,b9,cb){return b0.call(bG(ca),cb)}}else{b4.call(e,b5);b4=null}}if(b4){for(;b1<bZ;b1++){b4(e[b1],b7,b0?b5.call(e[b1],b1,b4(e[b1],b7)):b5,b6)}}b2=1}}return b2?e:b3?b4.call(e):bZ?b4(e[0],b7):b8},now:function(){return(new Date()).getTime()}});bG.ready.promise=function(b2){if(!af){af=bG.Deferred();if(o.readyState==="complete"){setTimeout(bG.ready,1)}else{if(o.addEventListener){o.addEventListener("DOMContentLoaded",aF,false);a2.addEventListener("load",bG.ready,false)}else{o.attachEvent("onreadystatechange",aF);a2.attachEvent("onload",bG.ready);var b1=false;try{b1=a2.frameElement==null&&o.documentElement}catch(b0){}if(b1&&b1.doScroll){(function bZ(){if(!bG.isReady){try{b1.doScroll("left")}catch(b3){return setTimeout(bZ,50)}bG.ready()}})()}}}}return af.promise(b2)};bG.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(bZ,e){Z["[object "+e+"]"]=e.toLowerCase()});w=bG(o);var bU={};function ac(bZ){var e=bU[bZ]={};bG.each(bZ.split(aV),function(b1,b0){e[b0]=true});return e}bG.Callbacks=function(b8){b8=typeof b8==="string"?(bU[b8]||ac(b8)):bG.extend({},b8);var b1,e,b2,b0,b3,b4,b5=[],b6=!b8.once&&[],bZ=function(b9){b1=b8.memory&&b9;e=true;b4=b0||0;b0=0;b3=b5.length;b2=true;for(;b5&&b4<b3;b4++){if(b5[b4].apply(b9[0],b9[1])===false&&b8.stopOnFalse){b1=false;break}}b2=false;if(b5){if(b6){if(b6.length){bZ(b6.shift())}}else{if(b1){b5=[]}else{b7.disable()}}}},b7={add:function(){if(b5){var ca=b5.length;(function b9(cb){bG.each(cb,function(cd,cc){var ce=bG.type(cc);if(ce==="function"){if(!b8.unique||!b7.has(cc)){b5.push(cc)}}else{if(cc&&cc.length&&ce!=="string"){b9(cc)}}})})(arguments);if(b2){b3=b5.length}else{if(b1){b0=ca;bZ(b1)}}}return this},remove:function(){if(b5){bG.each(arguments,function(cb,b9){var ca;while((ca=bG.inArray(b9,b5,ca))>-1){b5.splice(ca,1);if(b2){if(ca<=b3){b3--}if(ca<=b4){b4--}}}})}return this},has:function(b9){return bG.inArray(b9,b5)>-1},empty:function(){b5=[];return this},disable:function(){b5=b6=b1=aB;return this},disabled:function(){return !b5},lock:function(){b6=aB;if(!b1){b7.disable()}return this},locked:function(){return !b6},fireWith:function(ca,b9){b9=b9||[];b9=[ca,b9.slice?b9.slice():b9];if(b5&&(!e||b6)){if(b2){b6.push(b9)}else{bZ(b9)}}return this},fire:function(){b7.fireWith(this,arguments);return this},fired:function(){return !!e}};return b7};bG.extend({Deferred:function(b0){var bZ=[["resolve","done",bG.Callbacks("once memory"),"resolved"],["reject","fail",bG.Callbacks("once memory"),"rejected"],["notify","progress",bG.Callbacks("memory")]],b1="pending",b2={state:function(){return b1},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var b3=arguments;return bG.Deferred(function(b4){bG.each(bZ,function(b6,b5){var b8=b5[0],b7=b3[b6];e[b5[1]](bG.isFunction(b7)?function(){var b9=b7.apply(this,arguments);if(b9&&bG.isFunction(b9.promise)){b9.promise().done(b4.resolve).fail(b4.reject).progress(b4.notify)}else{b4[b8+"With"](this===e?b4:this,[b9])}}:b4[b8])});b3=null}).promise()},promise:function(b3){return b3!=null?bG.extend(b3,b2):b2}},e={};b2.pipe=b2.then;bG.each(bZ,function(b4,b3){var b6=b3[2],b5=b3[3];b2[b3[1]]=b6.add;if(b5){b6.add(function(){b1=b5},bZ[b4^1][2].disable,bZ[2][2].lock)}e[b3[0]]=b6.fire;e[b3[0]+"With"]=b6.fireWith});b2.promise(e);if(b0){b0.call(e,e)}return e},when:function(b2){var b0=0,b4=a4.call(arguments),e=b4.length,bZ=e!==1||(b2&&bG.isFunction(b2.promise))?e:0,b7=bZ===1?b2:bG.Deferred(),b1=function(b9,ca,b8){return function(cb){ca[b9]=this;b8[b9]=arguments.length>1?a4.call(arguments):cb;if(b8===b6){b7.notifyWith(ca,b8)}else{if(!(--bZ)){b7.resolveWith(ca,b8)}}}},b6,b3,b5;if(e>1){b6=new Array(e);b3=new Array(e);b5=new Array(e);for(;b0<e;b0++){if(b4[b0]&&bG.isFunction(b4[b0].promise)){b4[b0].promise().done(b1(b0,b5,b4)).fail(b7.reject).progress(b1(b0,b3,b6))}else{--bZ}}}if(!bZ){b7.resolveWith(b5,b4)}return b7.promise()}});bG.support=(function(){var cb,ca,b8,b9,b2,b7,b6,b4,b3,b1,bZ,b0=o.createElement("div");b0.setAttribute("className","t");b0.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";ca=b0.getElementsByTagName("*");b8=b0.getElementsByTagName("a")[0];if(!ca||!b8||!ca.length){return{}}b9=o.createElement("select");b2=b9.appendChild(o.createElement("option"));b7=b0.getElementsByTagName("input")[0];b8.style.cssText="top:1px;float:left;opacity:.5";cb={leadingWhitespace:(b0.firstChild.nodeType===3),tbody:!b0.getElementsByTagName("tbody").length,htmlSerialize:!!b0.getElementsByTagName("link").length,style:/top/.test(b8.getAttribute("style")),hrefNormalized:(b8.getAttribute("href")==="/a"),opacity:/^0.5/.test(b8.style.opacity),cssFloat:!!b8.style.cssFloat,checkOn:(b7.value==="on"),optSelected:b2.selected,getSetAttribute:b0.className!=="t",enctype:!!o.createElement("form").enctype,html5Clone:o.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:(o.compatMode==="CSS1Compat"),submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};b7.checked=true;cb.noCloneChecked=b7.cloneNode(true).checked;b9.disabled=true;cb.optDisabled=!b2.disabled;try{delete b0.test}catch(b5){cb.deleteExpando=false}if(!b0.addEventListener&&b0.attachEvent&&b0.fireEvent){b0.attachEvent("onclick",bZ=function(){cb.noCloneEvent=false});b0.cloneNode(true).fireEvent("onclick");b0.detachEvent("onclick",bZ)}b7=o.createElement("input");b7.value="t";b7.setAttribute("type","radio");cb.radioValue=b7.value==="t";b7.setAttribute("checked","checked");b7.setAttribute("name","t");b0.appendChild(b7);b6=o.createDocumentFragment();b6.appendChild(b0.lastChild);cb.checkClone=b6.cloneNode(true).cloneNode(true).lastChild.checked;cb.appendChecked=b7.checked;b6.removeChild(b7);b6.appendChild(b0);if(b0.attachEvent){for(b3 in {submit:true,change:true,focusin:true}){b4="on"+b3;b1=(b4 in b0);if(!b1){b0.setAttribute(b4,"return;");b1=(typeof b0[b4]==="function")}cb[b3+"Bubbles"]=b1}}bG(function(){var cc,cg,ce,cf,cd="padding:0;margin:0;border:0;display:block;overflow:hidden;",e=o.getElementsByTagName("body")[0];if(!e){return}cc=o.createElement("div");cc.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";e.insertBefore(cc,e.firstChild);cg=o.createElement("div");cc.appendChild(cg);cg.innerHTML="<table><tr><td></td><td>t</td></tr></table>";ce=cg.getElementsByTagName("td");ce[0].style.cssText="padding:0;margin:0;border:0;display:none";b1=(ce[0].offsetHeight===0);ce[0].style.display="";ce[1].style.display="none";cb.reliableHiddenOffsets=b1&&(ce[0].offsetHeight===0);cg.innerHTML="";cg.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";cb.boxSizing=(cg.offsetWidth===4);cb.doesNotIncludeMarginInBodyOffset=(e.offsetTop!==1);if(a2.getComputedStyle){cb.pixelPosition=(a2.getComputedStyle(cg,null)||{}).top!=="1%";cb.boxSizingReliable=(a2.getComputedStyle(cg,null)||{width:"4px"}).width==="4px";cf=o.createElement("div");cf.style.cssText=cg.style.cssText=cd;cf.style.marginRight=cf.style.width="0";cg.style.width="1px";cg.appendChild(cf);cb.reliableMarginRight=!parseFloat((a2.getComputedStyle(cf,null)||{}).marginRight)}if(typeof cg.style.zoom!=="undefined"){cg.innerHTML="";cg.style.cssText=cd+"width:1px;padding:1px;display:inline;zoom:1";cb.inlineBlockNeedsLayout=(cg.offsetWidth===3);cg.style.display="block";cg.style.overflow="visible";cg.innerHTML="<div></div>";cg.firstChild.style.width="5px";cb.shrinkWrapBlocks=(cg.offsetWidth!==3);cc.style.zoom=1}e.removeChild(cc);cc=cg=ce=cf=null});b6.removeChild(b0);ca=b8=b9=b2=b7=b6=b0=null;return cb})();var bt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,aL=/([A-Z])/g;bG.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(bG.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?bG.cache[e[bG.expando]]:e[bG.expando];return !!e&&!O(e)},data:function(b1,bZ,b3,b2){if(!bG.acceptData(b1)){return}var b4,b6,b7=bG.expando,b5=typeof bZ==="string",b8=b1.nodeType,e=b8?bG.cache:b1,b0=b8?b1[b7]:b1[b7]&&b7;if((!b0||!e[b0]||(!b2&&!e[b0].data))&&b5&&b3===aB){return}if(!b0){if(b8){b1[b7]=b0=bG.deletedIds.pop()||bG.guid++}else{b0=b7}}if(!e[b0]){e[b0]={};if(!b8){e[b0].toJSON=bG.noop}}if(typeof bZ==="object"||typeof bZ==="function"){if(b2){e[b0]=bG.extend(e[b0],bZ)}else{e[b0].data=bG.extend(e[b0].data,bZ)}}b4=e[b0];if(!b2){if(!b4.data){b4.data={}}b4=b4.data}if(b3!==aB){b4[bG.camelCase(bZ)]=b3}if(b5){b6=b4[bZ];if(b6==null){b6=b4[bG.camelCase(bZ)]}}else{b6=b4}return b6},removeData:function(b1,bZ,b2){if(!bG.acceptData(b1)){return}var b5,b4,b3,b6=b1.nodeType,e=b6?bG.cache:b1,b0=b6?b1[bG.expando]:bG.expando;if(!e[b0]){return}if(bZ){b5=b2?e[b0]:e[b0].data;if(b5){if(!bG.isArray(bZ)){if(bZ in b5){bZ=[bZ]}else{bZ=bG.camelCase(bZ);if(bZ in b5){bZ=[bZ]}else{bZ=bZ.split(" ")}}}for(b4=0,b3=bZ.length;b4<b3;b4++){delete b5[bZ[b4]]}if(!(b2?O:bG.isEmptyObject)(b5)){return}}}if(!b2){delete e[b0].data;if(!O(e[b0])){return}}if(b6){bG.cleanData([b1],true)}else{if(bG.support.deleteExpando||e!=e.window){delete e[b0]}else{e[b0]=null}}},_data:function(bZ,e,b0){return bG.data(bZ,e,b0,true)},acceptData:function(bZ){var e=bZ.nodeName&&bG.noData[bZ.nodeName.toLowerCase()];return !e||e!==true&&bZ.getAttribute("classid")===e}});bG.fn.extend({data:function(b7,b6){var b2,bZ,b5,e,b1,b0=this[0],b4=0,b3=null;if(b7===aB){if(this.length){b3=bG.data(b0);if(b0.nodeType===1&&!bG._data(b0,"parsedAttrs")){b5=b0.attributes;for(b1=b5.length;b4<b1;b4++){e=b5[b4].name;if(!e.indexOf("data-")){e=bG.camelCase(e.substring(5));bv(b0,e,b3[e])}}bG._data(b0,"parsedAttrs",true)}}return b3}if(typeof b7==="object"){return this.each(function(){bG.data(this,b7)})}b2=b7.split(".",2);b2[1]=b2[1]?"."+b2[1]:"";bZ=b2[1]+"!";return bG.access(this,function(b8){if(b8===aB){b3=this.triggerHandler("getData"+bZ,[b2[0]]);if(b3===aB&&b0){b3=bG.data(b0,b7);b3=bv(b0,b7,b3)}return b3===aB&&b2[1]?this.data(b2[0]):b3}b2[1]=b8;this.each(function(){var b9=bG(this);b9.triggerHandler("setData"+bZ,b2);bG.data(this,b7,b8);b9.triggerHandler("changeData"+bZ,b2)})},null,b6,arguments.length>1,null,false)},removeData:function(e){return this.each(function(){bG.removeData(this,e)})}});function bv(b1,b0,b2){if(b2===aB&&b1.nodeType===1){var bZ="data-"+b0.replace(aL,"-$1").toLowerCase();b2=b1.getAttribute(bZ);if(typeof b2==="string"){try{b2=b2==="true"?true:b2==="false"?false:b2==="null"?null:+b2+""===b2?+b2:bt.test(b2)?bG.parseJSON(b2):b2}catch(b3){}bG.data(b1,b0,b2)}else{b2=aB}}return b2}function O(bZ){var e;for(e in bZ){if(e==="data"&&bG.isEmptyObject(bZ[e])){continue}if(e!=="toJSON"){return false}}return true}bG.extend({queue:function(b0,bZ,b1){var e;if(b0){bZ=(bZ||"fx")+"queue";e=bG._data(b0,bZ);if(b1){if(!e||bG.isArray(b1)){e=bG._data(b0,bZ,bG.makeArray(b1))}else{e.push(b1)}}return e||[]}},dequeue:function(b3,b2){b2=b2||"fx";var bZ=bG.queue(b3,b2),b4=bZ.length,b1=bZ.shift(),e=bG._queueHooks(b3,b2),b0=function(){bG.dequeue(b3,b2)};if(b1==="inprogress"){b1=bZ.shift();b4--}if(b1){if(b2==="fx"){bZ.unshift("inprogress")}delete e.stop;b1.call(b3,b0,e)}if(!b4&&e){e.empty.fire()}},_queueHooks:function(b0,bZ){var e=bZ+"queueHooks";return bG._data(b0,e)||bG._data(b0,e,{empty:bG.Callbacks("once memory").add(function(){bG.removeData(b0,bZ+"queue",true);bG.removeData(b0,e,true)})})}});bG.fn.extend({queue:function(e,bZ){var b0=2;if(typeof e!=="string"){bZ=e;e="fx";b0--}if(arguments.length<b0){return bG.queue(this[0],e)}return bZ===aB?this:this.each(function(){var b1=bG.queue(this,e,bZ);bG._queueHooks(this,e);if(e==="fx"&&b1[0]!=="inprogress"){bG.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){bG.dequeue(this,e)})},delay:function(bZ,e){bZ=bG.fx?bG.fx.speeds[bZ]||bZ:bZ;e=e||"fx";return this.queue(e,function(b1,b0){var b2=setTimeout(b1,bZ);b0.stop=function(){clearTimeout(b2)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(b0,b4){var bZ,b1=1,b5=bG.Deferred(),b3=this,e=this.length,b2=function(){if(!(--b1)){b5.resolveWith(b3,[b3])}};if(typeof b0!=="string"){b4=b0;b0=aB}b0=b0||"fx";while(e--){bZ=bG._data(b3[e],b0+"queueHooks");if(bZ&&bZ.empty){b1++;bZ.empty.add(b2)}}b2();return b5.promise(b4)}});var a7,bV,n,bJ=/[\t\r\n]/g,ai=/\r/g,j=/^(?:button|input)$/i,aA=/^(?:button|input|object|select|textarea)$/i,D=/^a(?:rea|)$/i,M=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,bL=bG.support.getSetAttribute;bG.fn.extend({attr:function(e,bZ){return bG.access(this,bG.attr,e,bZ,arguments.length>1)},removeAttr:function(e){return this.each(function(){bG.removeAttr(this,e)})},prop:function(e,bZ){return bG.access(this,bG.prop,e,bZ,arguments.length>1)},removeProp:function(e){e=bG.propFix[e]||e;return this.each(function(){try{this[e]=aB;delete this[e]}catch(bZ){}})},addClass:function(b2){var b4,b0,bZ,b1,b3,b5,e;if(bG.isFunction(b2)){return this.each(function(b6){bG(this).addClass(b2.call(this,b6,this.className))})}if(b2&&typeof b2==="string"){b4=b2.split(aV);for(b0=0,bZ=this.length;b0<bZ;b0++){b1=this[b0];if(b1.nodeType===1){if(!b1.className&&b4.length===1){b1.className=b2}else{b3=" "+b1.className+" ";for(b5=0,e=b4.length;b5<e;b5++){if(b3.indexOf(" "+b4[b5]+" ")<0){b3+=b4[b5]+" "}}b1.className=bG.trim(b3)}}}}return this},removeClass:function(b4){var b1,b2,b3,b5,bZ,b0,e;if(bG.isFunction(b4)){return this.each(function(b6){bG(this).removeClass(b4.call(this,b6,this.className))})}if((b4&&typeof b4==="string")||b4===aB){b1=(b4||"").split(aV);for(b0=0,e=this.length;b0<e;b0++){b3=this[b0];if(b3.nodeType===1&&b3.className){b2=(" "+b3.className+" ").replace(bJ," ");for(b5=0,bZ=b1.length;b5<bZ;b5++){while(b2.indexOf(" "+b1[b5]+" ")>=0){b2=b2.replace(" "+b1[b5]+" "," ")}}b3.className=b4?bG.trim(b2):""}}}return this},toggleClass:function(b1,bZ){var b0=typeof b1,e=typeof bZ==="boolean";if(bG.isFunction(b1)){return this.each(function(b2){bG(this).toggleClass(b1.call(this,b2,this.className,bZ),bZ)})}return this.each(function(){if(b0==="string"){var b4,b3=0,b2=bG(this),b5=bZ,b6=b1.split(aV);while((b4=b6[b3++])){b5=e?b5:!b2.hasClass(b4);b2[b5?"addClass":"removeClass"](b4)}}else{if(b0==="undefined"||b0==="boolean"){if(this.className){bG._data(this,"__className__",this.className)}this.className=this.className||b1===false?"":bG._data(this,"__className__")||""}}})},hasClass:function(e){var b1=" "+e+" ",b0=0,bZ=this.length;for(;b0<bZ;b0++){if(this[b0].nodeType===1&&(" "+this[b0].className+" ").replace(bJ," ").indexOf(b1)>=0){return true}}return false},val:function(b1){var e,bZ,b2,b0=this[0];if(!arguments.length){if(b0){e=bG.valHooks[b0.type]||bG.valHooks[b0.nodeName.toLowerCase()];if(e&&"get" in e&&(bZ=e.get(b0,"value"))!==aB){return bZ}bZ=b0.value;return typeof bZ==="string"?bZ.replace(ai,""):bZ==null?"":bZ}return}b2=bG.isFunction(b1);return this.each(function(b4){var b5,b3=bG(this);if(this.nodeType!==1){return}if(b2){b5=b1.call(this,b4,b3.val())}else{b5=b1}if(b5==null){b5=""}else{if(typeof b5==="number"){b5+=""}else{if(bG.isArray(b5)){b5=bG.map(b5,function(b6){return b6==null?"":b6+""})}}}e=bG.valHooks[this.type]||bG.valHooks[this.nodeName.toLowerCase()];if(!e||!("set" in e)||e.set(this,b5,"value")===aB){this.value=b5}})}});bG.extend({valHooks:{option:{get:function(e){var bZ=e.attributes.value;return !bZ||bZ.specified?e.value:e.text}},select:{get:function(e){var b4,b0,b6=e.options,b2=e.selectedIndex,b1=e.type==="select-one"||b2<0,b5=b1?null:[],b3=b1?b2+1:b6.length,bZ=b2<0?b3:b1?b2:0;for(;bZ<b3;bZ++){b0=b6[bZ];if((b0.selected||bZ===b2)&&(bG.support.optDisabled?!b0.disabled:b0.getAttribute("disabled")===null)&&(!b0.parentNode.disabled||!bG.nodeName(b0.parentNode,"optgroup"))){b4=bG(b0).val();if(b1){return b4}b5.push(b4)}}return b5},set:function(bZ,b0){var e=bG.makeArray(b0);bG(bZ).find("option").each(function(){this.selected=bG.inArray(bG(this).val(),e)>=0});if(!e.length){bZ.selectedIndex=-1}return e}}},attrFn:{},attr:function(b4,b1,b5,b3){var b0,e,b2,bZ=b4.nodeType;if(!b4||bZ===3||bZ===8||bZ===2){return}if(b3&&bG.isFunction(bG.fn[b1])){return bG(b4)[b1](b5)}if(typeof b4.getAttribute==="undefined"){return bG.prop(b4,b1,b5)}b2=bZ!==1||!bG.isXMLDoc(b4);if(b2){b1=b1.toLowerCase();e=bG.attrHooks[b1]||(M.test(b1)?bV:a7)}if(b5!==aB){if(b5===null){bG.removeAttr(b4,b1);return}else{if(e&&"set" in e&&b2&&(b0=e.set(b4,b5,b1))!==aB){return b0}else{b4.setAttribute(b1,b5+"");return b5}}}else{if(e&&"get" in e&&b2&&(b0=e.get(b4,b1))!==null){return b0}else{b0=b4.getAttribute(b1);return b0===null?aB:b0}}},removeAttr:function(b1,b3){var b2,b4,bZ,e,b0=0;if(b3&&b1.nodeType===1){b4=b3.split(aV);for(;b0<b4.length;b0++){bZ=b4[b0];if(bZ){b2=bG.propFix[bZ]||bZ;e=M.test(bZ);if(!e){bG.attr(b1,bZ,"")}b1.removeAttribute(bL?bZ:b2);if(e&&b2 in b1){b1[b2]=false}}}}},attrHooks:{type:{set:function(e,bZ){if(j.test(e.nodeName)&&e.parentNode){bG.error("type property can't be changed")}else{if(!bG.support.radioValue&&bZ==="radio"&&bG.nodeName(e,"input")){var b0=e.value;e.setAttribute("type",bZ);if(b0){e.value=b0}return bZ}}}},value:{get:function(bZ,e){if(a7&&bG.nodeName(bZ,"button")){return a7.get(bZ,e)}return e in bZ?bZ.value:null},set:function(bZ,b0,e){if(a7&&bG.nodeName(bZ,"button")){return a7.set(bZ,b0,e)}bZ.value=b0}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b3,b1,b4){var b0,e,b2,bZ=b3.nodeType;if(!b3||bZ===3||bZ===8||bZ===2){return}b2=bZ!==1||!bG.isXMLDoc(b3);if(b2){b1=bG.propFix[b1]||b1;e=bG.propHooks[b1]}if(b4!==aB){if(e&&"set" in e&&(b0=e.set(b3,b4,b1))!==aB){return b0}else{return(b3[b1]=b4)}}else{if(e&&"get" in e&&(b0=e.get(b3,b1))!==null){return b0}else{return b3[b1]}}},propHooks:{tabIndex:{get:function(bZ){var e=bZ.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):aA.test(bZ.nodeName)||D.test(bZ.nodeName)&&bZ.href?0:aB}}}});bV={get:function(bZ,e){var b1,b0=bG.prop(bZ,e);return b0===true||typeof b0!=="boolean"&&(b1=bZ.getAttributeNode(e))&&b1.nodeValue!==false?e.toLowerCase():aB},set:function(bZ,b1,e){var b0;if(b1===false){bG.removeAttr(bZ,e)}else{b0=bG.propFix[e]||e;if(b0 in bZ){bZ[b0]=true}bZ.setAttribute(e,e.toLowerCase())}return e}};if(!bL){n={name:true,id:true,coords:true};a7=bG.valHooks.button={get:function(b0,bZ){var e;e=b0.getAttributeNode(bZ);return e&&(n[bZ]?e.value!=="":e.specified)?e.value:aB},set:function(b0,b1,bZ){var e=b0.getAttributeNode(bZ);if(!e){e=o.createAttribute(bZ);b0.setAttributeNode(e)}return(e.value=b1+"")}};bG.each(["width","height"],function(bZ,e){bG.attrHooks[e]=bG.extend(bG.attrHooks[e],{set:function(b0,b1){if(b1===""){b0.setAttribute(e,"auto");return b1}}})});bG.attrHooks.contenteditable={get:a7.get,set:function(bZ,b0,e){if(b0===""){b0="false"}a7.set(bZ,b0,e)}}}if(!bG.support.hrefNormalized){bG.each(["href","src","width","height"],function(bZ,e){bG.attrHooks[e]=bG.extend(bG.attrHooks[e],{get:function(b1){var b0=b1.getAttribute(e,2);return b0===null?aB:b0}})})}if(!bG.support.style){bG.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||aB},set:function(e,bZ){return(e.style.cssText=bZ+"")}}}if(!bG.support.optSelected){bG.propHooks.selected=bG.extend(bG.propHooks.selected,{get:function(bZ){var e=bZ.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}return null}})}if(!bG.support.enctype){bG.propFix.enctype="encoding"}if(!bG.support.checkOn){bG.each(["radio","checkbox"],function(){bG.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}bG.each(["radio","checkbox"],function(){bG.valHooks[this]=bG.extend(bG.valHooks[this],{set:function(e,bZ){if(bG.isArray(bZ)){return(e.checked=bG.inArray(bG(e).val(),bZ)>=0)}}})});var bE=/^(?:textarea|input|select)$/i,br=/^([^\.]*|)(?:\.(.+)|)$/,ba=/(?:^|\s)hover(\.\S+|)\b/,a3=/^key/,bK=/^(?:mouse|contextmenu)|click/,by=/^(?:focusinfocus|focusoutblur)$/,aq=function(e){return bG.event.special.hover?e:e.replace(ba,"mouseenter$1 mouseleave$1")};bG.event={add:function(b1,b5,cc,b3,b2){var b6,b4,cd,cb,ca,b8,e,b9,bZ,b0,b7;if(b1.nodeType===3||b1.nodeType===8||!b5||!cc||!(b6=bG._data(b1))){return}if(cc.handler){bZ=cc;cc=bZ.handler;b2=bZ.selector}if(!cc.guid){cc.guid=bG.guid++}cd=b6.events;if(!cd){b6.events=cd={}}b4=b6.handle;if(!b4){b6.handle=b4=function(ce){return typeof bG!=="undefined"&&(!ce||bG.event.triggered!==ce.type)?bG.event.dispatch.apply(b4.elem,arguments):aB};b4.elem=b1}b5=bG.trim(aq(b5)).split(" ");for(cb=0;cb<b5.length;cb++){ca=br.exec(b5[cb])||[];b8=ca[1];e=(ca[2]||"").split(".").sort();b7=bG.event.special[b8]||{};b8=(b2?b7.delegateType:b7.bindType)||b8;b7=bG.event.special[b8]||{};b9=bG.extend({type:b8,origType:ca[1],data:b3,handler:cc,guid:cc.guid,selector:b2,needsContext:b2&&bG.expr.match.needsContext.test(b2),namespace:e.join(".")},bZ);b0=cd[b8];if(!b0){b0=cd[b8]=[];b0.delegateCount=0;if(!b7.setup||b7.setup.call(b1,b3,e,b4)===false){if(b1.addEventListener){b1.addEventListener(b8,b4,false)}else{if(b1.attachEvent){b1.attachEvent("on"+b8,b4)}}}}if(b7.add){b7.add.call(b1,b9);if(!b9.handler.guid){b9.handler.guid=cc.guid}}if(b2){b0.splice(b0.delegateCount++,0,b9)}else{b0.push(b9)}bG.event.global[b8]=true}b1=null},global:{},remove:function(b1,b6,cc,b2,b5){var cd,ce,b9,b0,bZ,b3,b4,cb,b8,e,ca,b7=bG.hasData(b1)&&bG._data(b1);if(!b7||!(cb=b7.events)){return}b6=bG.trim(aq(b6||"")).split(" ");for(cd=0;cd<b6.length;cd++){ce=br.exec(b6[cd])||[];b9=b0=ce[1];bZ=ce[2];if(!b9){for(b9 in cb){bG.event.remove(b1,b9+b6[cd],cc,b2,true)}continue}b8=bG.event.special[b9]||{};b9=(b2?b8.delegateType:b8.bindType)||b9;e=cb[b9]||[];b3=e.length;bZ=bZ?new RegExp("(^|\\.)"+bZ.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(b4=0;b4<e.length;b4++){ca=e[b4];if((b5||b0===ca.origType)&&(!cc||cc.guid===ca.guid)&&(!bZ||bZ.test(ca.namespace))&&(!b2||b2===ca.selector||b2==="**"&&ca.selector)){e.splice(b4--,1);if(ca.selector){e.delegateCount--}if(b8.remove){b8.remove.call(b1,ca)}}}if(e.length===0&&b3!==e.length){if(!b8.teardown||b8.teardown.call(b1,bZ,b7.handle)===false){bG.removeEvent(b1,b9,b7.handle)}delete cb[b9]}}if(bG.isEmptyObject(cb)){delete b7.handle;bG.removeData(b1,"events",true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(bZ,b6,b4,cd){if(b4&&(b4.nodeType===3||b4.nodeType===8)){return}var e,b1,b7,cb,b3,b2,b9,b8,b5,cc,ca=bZ.type||bZ,b0=[];if(by.test(ca+bG.event.triggered)){return}if(ca.indexOf("!")>=0){ca=ca.slice(0,-1);b1=true}if(ca.indexOf(".")>=0){b0=ca.split(".");ca=b0.shift();b0.sort()}if((!b4||bG.event.customEvent[ca])&&!bG.event.global[ca]){return}bZ=typeof bZ==="object"?bZ[bG.expando]?bZ:new bG.Event(ca,bZ):new bG.Event(ca);bZ.type=ca;bZ.isTrigger=true;bZ.exclusive=b1;bZ.namespace=b0.join(".");bZ.namespace_re=bZ.namespace?new RegExp("(^|\\.)"+b0.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;b2=ca.indexOf(":")<0?"on"+ca:"";if(!b4){e=bG.cache;for(b7 in e){if(e[b7].events&&e[b7].events[ca]){bG.event.trigger(bZ,b6,e[b7].handle.elem,true)}}return}bZ.result=aB;if(!bZ.target){bZ.target=b4}b6=b6!=null?bG.makeArray(b6):[];b6.unshift(bZ);b9=bG.event.special[ca]||{};if(b9.trigger&&b9.trigger.apply(b4,b6)===false){return}b5=[[b4,b9.bindType||ca]];if(!cd&&!b9.noBubble&&!bG.isWindow(b4)){cc=b9.delegateType||ca;cb=by.test(cc+ca)?b4:b4.parentNode;for(b3=b4;cb;cb=cb.parentNode){b5.push([cb,cc]);b3=cb}if(b3===(b4.ownerDocument||o)){b5.push([b3.defaultView||b3.parentWindow||a2,cc])}}for(b7=0;b7<b5.length&&!bZ.isPropagationStopped();b7++){cb=b5[b7][0];bZ.type=b5[b7][1];b8=(bG._data(cb,"events")||{})[bZ.type]&&bG._data(cb,"handle");if(b8){b8.apply(cb,b6)}b8=b2&&cb[b2];if(b8&&bG.acceptData(cb)&&b8.apply&&b8.apply(cb,b6)===false){bZ.preventDefault()}}bZ.type=ca;if(!cd&&!bZ.isDefaultPrevented()){if((!b9._default||b9._default.apply(b4.ownerDocument,b6)===false)&&!(ca==="click"&&bG.nodeName(b4,"a"))&&bG.acceptData(b4)){if(b2&&b4[ca]&&((ca!=="focus"&&ca!=="blur")||bZ.target.offsetWidth!==0)&&!bG.isWindow(b4)){b3=b4[b2];if(b3){b4[b2]=null}bG.event.triggered=ca;b4[ca]();bG.event.triggered=aB;if(b3){b4[b2]=b3}}}}return bZ.result},dispatch:function(e){e=bG.event.fix(e||a2.event);var b5,b4,ce,b8,b7,bZ,b6,cc,b1,cd,b2=((bG._data(this,"events")||{})[e.type]||[]),b3=b2.delegateCount,ca=a4.call(arguments),b0=!e.exclusive&&!e.namespace,b9=bG.event.special[e.type]||{},cb=[];ca[0]=e;e.delegateTarget=this;if(b9.preDispatch&&b9.preDispatch.call(this,e)===false){return}if(b3&&!(e.button&&e.type==="click")){for(ce=e.target;ce!=this;ce=ce.parentNode||this){if(ce.disabled!==true||e.type!=="click"){b7={};b6=[];for(b5=0;b5<b3;b5++){cc=b2[b5];b1=cc.selector;if(b7[b1]===aB){b7[b1]=cc.needsContext?bG(b1,this).index(ce)>=0:bG.find(b1,this,null,[ce]).length}if(b7[b1]){b6.push(cc)}}if(b6.length){cb.push({elem:ce,matches:b6})}}}}if(b2.length>b3){cb.push({elem:this,matches:b2.slice(b3)})}for(b5=0;b5<cb.length&&!e.isPropagationStopped();b5++){bZ=cb[b5];e.currentTarget=bZ.elem;for(b4=0;b4<bZ.matches.length&&!e.isImmediatePropagationStopped();b4++){cc=bZ.matches[b4];if(b0||(!e.namespace&&!cc.namespace)||e.namespace_re&&e.namespace_re.test(cc.namespace)){e.data=cc.data;e.handleObj=cc;b8=((bG.event.special[cc.origType]||{}).handle||cc.handler).apply(bZ.elem,ca);if(b8!==aB){e.result=b8;if(b8===false){e.preventDefault();e.stopPropagation()}}}}}if(b9.postDispatch){b9.postDispatch.call(this,e)}return e.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(bZ,e){if(bZ.which==null){bZ.which=e.charCode!=null?e.charCode:e.keyCode}return bZ}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b1,b0){var b2,b3,e,bZ=b0.button,b4=b0.fromElement;if(b1.pageX==null&&b0.clientX!=null){b2=b1.target.ownerDocument||o;b3=b2.documentElement;e=b2.body;b1.pageX=b0.clientX+(b3&&b3.scrollLeft||e&&e.scrollLeft||0)-(b3&&b3.clientLeft||e&&e.clientLeft||0);b1.pageY=b0.clientY+(b3&&b3.scrollTop||e&&e.scrollTop||0)-(b3&&b3.clientTop||e&&e.clientTop||0)}if(!b1.relatedTarget&&b4){b1.relatedTarget=b4===b1.target?b0.toElement:b4}if(!b1.which&&bZ!==aB){b1.which=(bZ&1?1:(bZ&2?3:(bZ&4?2:0)))}return b1}},fix:function(b0){if(b0[bG.expando]){return b0}var bZ,b3,e=b0,b1=bG.event.fixHooks[b0.type]||{},b2=b1.props?this.props.concat(b1.props):this.props;b0=bG.Event(e);for(bZ=b2.length;bZ;){b3=b2[--bZ];b0[b3]=e[b3]}if(!b0.target){b0.target=e.srcElement||o}if(b0.target.nodeType===3){b0.target=b0.target.parentNode}b0.metaKey=!!b0.metaKey;return b1.filter?b1.filter(b0,e):b0},special:{load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(b0,bZ,e){if(bG.isWindow(this)){this.onbeforeunload=e}},teardown:function(bZ,e){if(this.onbeforeunload===e){this.onbeforeunload=null}}}},simulate:function(b0,b2,b1,bZ){var b3=bG.extend(new bG.Event(),b1,{type:b0,isSimulated:true,originalEvent:{}});if(bZ){bG.event.trigger(b3,null,b2)}else{bG.event.dispatch.call(b2,b3)}if(b3.isDefaultPrevented()){b1.preventDefault()}}};bG.event.handle=bG.event.dispatch;bG.removeEvent=o.removeEventListener?function(bZ,e,b0){if(bZ.removeEventListener){bZ.removeEventListener(e,b0,false)}}:function(b0,bZ,b1){var e="on"+bZ;if(b0.detachEvent){if(typeof b0[e]==="undefined"){b0[e]=null}b0.detachEvent(e,b1)}};bG.Event=function(bZ,e){if(!(this instanceof bG.Event)){return new bG.Event(bZ,e)}if(bZ&&bZ.type){this.originalEvent=bZ;this.type=bZ.type;this.isDefaultPrevented=(bZ.defaultPrevented||bZ.returnValue===false||bZ.getPreventDefault&&bZ.getPreventDefault())?R:X}else{this.type=bZ}if(e){bG.extend(this,e)}this.timeStamp=bZ&&bZ.timeStamp||bG.now();this[bG.expando]=true};function X(){return false}function R(){return true}bG.Event.prototype={preventDefault:function(){this.isDefaultPrevented=R;var bZ=this.originalEvent;if(!bZ){return}if(bZ.preventDefault){bZ.preventDefault()}else{bZ.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=R;var bZ=this.originalEvent;if(!bZ){return}if(bZ.stopPropagation){bZ.stopPropagation()}bZ.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=R;this.stopPropagation()},isDefaultPrevented:X,isPropagationStopped:X,isImmediatePropagationStopped:X};bG.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(bZ,e){bG.event.special[bZ]={delegateType:e,bindType:e,handle:function(b3){var b1,b5=this,b4=b3.relatedTarget,b2=b3.handleObj,b0=b2.selector;if(!b4||(b4!==b5&&!bG.contains(b5,b4))){b3.type=b2.origType;b1=b2.handler.apply(this,arguments);b3.type=e}return b1}}});if(!bG.support.submitBubbles){bG.event.special.submit={setup:function(){if(bG.nodeName(this,"form")){return false}bG.event.add(this,"click._submit keypress._submit",function(b1){var b0=b1.target,bZ=bG.nodeName(b0,"input")||bG.nodeName(b0,"button")?b0.form:aB;if(bZ&&!bG._data(bZ,"_submit_attached")){bG.event.add(bZ,"submit._submit",function(e){e._submit_bubble=true});bG._data(bZ,"_submit_attached",true)}})},postDispatch:function(e){if(e._submit_bubble){delete e._submit_bubble;if(this.parentNode&&!e.isTrigger){bG.event.simulate("submit",this.parentNode,e,true)}}},teardown:function(){if(bG.nodeName(this,"form")){return false}bG.event.remove(this,"._submit")}}}if(!bG.support.changeBubbles){bG.event.special.change={setup:function(){if(bE.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){bG.event.add(this,"propertychange._change",function(e){if(e.originalEvent.propertyName==="checked"){this._just_changed=true}});bG.event.add(this,"click._change",function(e){if(this._just_changed&&!e.isTrigger){this._just_changed=false}bG.event.simulate("change",this,e,true)})}return false}bG.event.add(this,"beforeactivate._change",function(b0){var bZ=b0.target;if(bE.test(bZ.nodeName)&&!bG._data(bZ,"_change_attached")){bG.event.add(bZ,"change._change",function(e){if(this.parentNode&&!e.isSimulated&&!e.isTrigger){bG.event.simulate("change",this.parentNode,e,true)}});bG._data(bZ,"_change_attached",true)}})},handle:function(bZ){var e=bZ.target;if(this!==e||bZ.isSimulated||bZ.isTrigger||(e.type!=="radio"&&e.type!=="checkbox")){return bZ.handleObj.handler.apply(this,arguments)}},teardown:function(){bG.event.remove(this,"._change");return !bE.test(this.nodeName)}}}if(!bG.support.focusinBubbles){bG.each({focus:"focusin",blur:"focusout"},function(b1,e){var bZ=0,b0=function(b2){bG.event.simulate(e,b2.target,bG.event.fix(b2),true)};bG.event.special[e]={setup:function(){if(bZ++===0){o.addEventListener(b1,b0,true)}},teardown:function(){if(--bZ===0){o.removeEventListener(b1,b0,true)}}}})}bG.fn.extend({on:function(b0,e,b3,b2,bZ){var b4,b1;if(typeof b0==="object"){if(typeof e!=="string"){b3=b3||e;e=aB}for(b1 in b0){this.on(b1,e,b3,b0[b1],bZ)}return this}if(b3==null&&b2==null){b2=e;b3=e=aB}else{if(b2==null){if(typeof e==="string"){b2=b3;b3=aB}else{b2=b3;b3=e;e=aB}}}if(b2===false){b2=X}else{if(!b2){return this}}if(bZ===1){b4=b2;b2=function(b5){bG().off(b5);return b4.apply(this,arguments)};b2.guid=b4.guid||(b4.guid=bG.guid++)}return this.each(function(){bG.event.add(this,b0,b2,b3,e)})},one:function(bZ,e,b1,b0){return this.on(bZ,e,b1,b0,1)},off:function(b0,e,b2){var bZ,b1;if(b0&&b0.preventDefault&&b0.handleObj){bZ=b0.handleObj;bG(b0.delegateTarget).off(bZ.namespace?bZ.origType+"."+bZ.namespace:bZ.origType,bZ.selector,bZ.handler);return this}if(typeof b0==="object"){for(b1 in b0){this.off(b1,e,b0[b1])}return this}if(e===false||typeof e==="function"){b2=e;e=aB}if(b2===false){b2=X}return this.each(function(){bG.event.remove(this,b0,b2,e)})},bind:function(e,b0,bZ){return this.on(e,null,b0,bZ)},unbind:function(e,bZ){return this.off(e,null,bZ)},live:function(e,b0,bZ){bG(this.context).on(e,this.selector,b0,bZ);return this},die:function(e,bZ){bG(this.context).off(e,this.selector||"**",bZ);return this},delegate:function(e,bZ,b1,b0){return this.on(bZ,e,b1,b0)},undelegate:function(e,bZ,b0){return arguments.length===1?this.off(e,"**"):this.off(bZ,e||"**",b0)},trigger:function(e,bZ){return this.each(function(){bG.event.trigger(e,bZ,this)})},triggerHandler:function(e,bZ){if(this[0]){return bG.event.trigger(e,bZ,this[0],true)}},toggle:function(b1){var bZ=arguments,e=b1.guid||bG.guid++,b0=0,b2=function(b3){var b4=(bG._data(this,"lastToggle"+b1.guid)||0)%b0;bG._data(this,"lastToggle"+b1.guid,b4+1);b3.preventDefault();return bZ[b4].apply(this,arguments)||false};b2.guid=e;while(b0<bZ.length){bZ[b0++].guid=e}return this.click(b2)},hover:function(e,bZ){return this.mouseenter(e).mouseleave(bZ||e)}});bG.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(bZ,e){bG.fn[e]=function(b1,b0){if(b0==null){b0=b1;b1=null}return arguments.length>0?this.on(e,null,b1,b0):this.trigger(e)};if(a3.test(e)){bG.event.fixHooks[e]=bG.event.keyHooks}if(bK.test(e)){bG.event.fixHooks[e]=bG.event.mouseHooks}});
/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
(function(cS,ch){var cX,ca,cL,b0,cm,cA,cd,cg,cc,cJ,b9=true,cu="undefined",cZ=("sizcache"+Math.random()).replace(".",""),b4=String,b8=cS.document,cb=b8.documentElement,cr=0,cf=0,cE=[].pop,cW=[].push,cl=[].slice,co=[].indexOf||function(c8){var c7=0,e=this.length;for(;c7<e;c7++){if(this[c7]===c8){return c7}}return -1},c1=function(e,c7){e[cZ]=c7==null||c7;return e},c5=function(){var e={},c7=[];return c1(function(c8,c9){if(c7.push(c8)>cL.cacheLength){delete e[c7.shift()]}return(e[c8+" "]=c9)},e)},cU=c5(),cV=c5(),cn=c5(),cy="[\\x20\\t\\r\\n\\f]",ck="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",ci=ck.replace("w","w#"),c4="([*^$|!~]?=)",cP="\\["+cy+"*("+ck+")"+cy+"*(?:"+c4+cy+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ci+")|)|)"+cy+"*\\]",c6=":("+ck+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+cP+")|[^:]|\\\\.)*|.*))\\)|)",cz=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+cy+"*((?:-\\d)?\\d*)"+cy+"*\\)|)(?=[^-]|$)",cT=new RegExp("^"+cy+"+|((?:^|[^\\\\])(?:\\\\.)*)"+cy+"+$","g"),b5=new RegExp("^"+cy+"*,"+cy+"*"),cH=new RegExp("^"+cy+"*([\\x20\\t\\r\\n\\f>+~])"+cy+"*"),cM=new RegExp(c6),cO=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,cD=/^:not/,cR=/[\x20\t\r\n\f]*[+~]/,c0=/:not\($/,cs=/h\d/i,cN=/input|select|textarea|button/i,ct=/\\(?!\\)/g,cG={ID:new RegExp("^#("+ck+")"),CLASS:new RegExp("^\\.("+ck+")"),NAME:new RegExp("^\\[name=['\"]?("+ck+")['\"]?\\]"),TAG:new RegExp("^("+ck.replace("w","w*")+")"),ATTR:new RegExp("^"+cP),PSEUDO:new RegExp("^"+c6),POS:new RegExp(cz,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+cy+"*(even|odd|(([+-]|)(\\d*)n|)"+cy+"*(?:([+-]|)"+cy+"*(\\d+)|))"+cy+"*\\)|)","i"),needsContext:new RegExp("^"+cy+"*[>+~]|"+cz,"i")},cK=function(c7){var c9=b8.createElement("div");try{return c7(c9)}catch(c8){return false}finally{c9=null}},b7=cK(function(e){e.appendChild(b8.createComment(""));return !e.getElementsByTagName("*").length}),cC=cK(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild&&typeof e.firstChild.getAttribute!==cu&&e.firstChild.getAttribute("href")==="#"}),cq=cK(function(c7){c7.innerHTML="<select></select>";var e=typeof c7.lastChild.getAttribute("multiple");return e!=="boolean"&&e!=="string"}),cB=cK(function(e){e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!e.getElementsByClassName||!e.getElementsByClassName("e").length){return false}e.lastChild.className="e";return e.getElementsByClassName("e").length===2}),bZ=cK(function(c7){c7.id=cZ+0;c7.innerHTML="<a name='"+cZ+"'></a><div name='"+cZ+"'></div>";cb.insertBefore(c7,cb.firstChild);var e=b8.getElementsByName&&b8.getElementsByName(cZ).length===2+b8.getElementsByName(cZ+0).length;ca=!b8.getElementById(cZ);cb.removeChild(c7);return e});try{cl.call(cb.childNodes,0)[0].nodeType}catch(c3){cl=function(c7){var c8,e=[];for(;(c8=this[c7]);c7++){e.push(c8)}return e}}function cQ(c9,e,db,de){db=db||[];e=e||b8;var dc,c7,dd,c8,da=e.nodeType;if(!c9||typeof c9!=="string"){return db}if(da!==1&&da!==9){return[]}dd=cm(e);if(!dd&&!de){if((dc=cO.exec(c9))){if((c8=dc[1])){if(da===9){c7=e.getElementById(c8);if(c7&&c7.parentNode){if(c7.id===c8){db.push(c7);return db}}else{return db}}else{if(e.ownerDocument&&(c7=e.ownerDocument.getElementById(c8))&&cA(e,c7)&&c7.id===c8){db.push(c7);return db}}}else{if(dc[2]){cW.apply(db,cl.call(e.getElementsByTagName(c9),0));return db}else{if((c8=dc[3])&&cB&&e.getElementsByClassName){cW.apply(db,cl.call(e.getElementsByClassName(c8),0));return db}}}}}return cY(c9.replace(cT,"$1"),e,db,de,dd)}cQ.matches=function(c7,e){return cQ(c7,null,null,e)};cQ.matchesSelector=function(e,c7){return cQ(c7,null,null,[e]).length>0};function cI(e){return function(c8){var c7=c8.nodeName.toLowerCase();return c7==="input"&&c8.type===e}}function b3(e){return function(c8){var c7=c8.nodeName.toLowerCase();return(c7==="input"||c7==="button")&&c8.type===e}}function cF(e){return c1(function(c7){c7=+c7;return c1(function(c8,dc){var da,c9=e([],c8.length,c7),db=c9.length;while(db--){if(c8[(da=c9[db])]){c8[da]=!(dc[da]=c8[da])}}})})}b0=cQ.getText=function(da){var c9,c7="",c8=0,e=da.nodeType;if(e){if(e===1||e===9||e===11){if(typeof da.textContent==="string"){return da.textContent}else{for(da=da.firstChild;da;da=da.nextSibling){c7+=b0(da)}}}else{if(e===3||e===4){return da.nodeValue}}}else{for(;(c9=da[c8]);c8++){c7+=b0(c9)}}return c7};cm=cQ.isXML=function(e){var c7=e&&(e.ownerDocument||e).documentElement;return c7?c7.nodeName!=="HTML":false};cA=cQ.contains=cb.contains?function(c7,e){var c9=c7.nodeType===9?c7.documentElement:c7,c8=e&&e.parentNode;return c7===c8||!!(c8&&c8.nodeType===1&&c9.contains&&c9.contains(c8))}:cb.compareDocumentPosition?function(c7,e){return e&&!!(c7.compareDocumentPosition(e)&16)}:function(c7,e){while((e=e.parentNode)){if(e===c7){return true}}return false};cQ.attr=function(c8,c7){var c9,e=cm(c8);if(!e){c7=c7.toLowerCase()}if((c9=cL.attrHandle[c7])){return c9(c8)}if(e||cq){return c8.getAttribute(c7)}c9=c8.getAttributeNode(c7);return c9?typeof c8[c7]==="boolean"?c8[c7]?c7:null:c9.specified?c9.value:null:null};cL=cQ.selectors={cacheLength:50,createPseudo:c1,match:cG,attrHandle:cC?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:ca?function(c9,c8,c7){if(typeof c8.getElementById!==cu&&!c7){var e=c8.getElementById(c9);return e&&e.parentNode?[e]:[]}}:function(c9,c8,c7){if(typeof c8.getElementById!==cu&&!c7){var e=c8.getElementById(c9);return e?e.id===c9||typeof e.getAttributeNode!==cu&&e.getAttributeNode("id").value===c9?[e]:ch:[]}},TAG:b7?function(e,c7){if(typeof c7.getElementsByTagName!==cu){return c7.getElementsByTagName(e)}}:function(e,da){var c9=da.getElementsByTagName(e);if(e==="*"){var db,c8=[],c7=0;for(;(db=c9[c7]);c7++){if(db.nodeType===1){c8.push(db)}}return c8}return c9},NAME:bZ&&function(e,c7){if(typeof c7.getElementsByName!==cu){return c7.getElementsByName(name)}},CLASS:cB&&function(c8,c7,e){if(typeof c7.getElementsByClassName!==cu&&!e){return c7.getElementsByClassName(c8)}}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(ct,"");e[3]=(e[4]||e[5]||"").replace(ct,"");if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1]==="nth"){if(!e[2]){cQ.error(e[0])}e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd"));e[4]=+((e[6]+e[7])||e[2]==="odd")}else{if(e[2]){cQ.error(e[0])}}return e},PSEUDO:function(c7){var c8,e;if(cG.CHILD.test(c7[0])){return null}if(c7[3]){c7[2]=c7[3]}else{if((c8=c7[4])){if(cM.test(c8)&&(e=b1(c8,true))&&(e=c8.indexOf(")",c8.length-e)-c8.length)){c8=c8.slice(0,e);c7[0]=c7[0].slice(0,e)}c7[2]=c8}}return c7.slice(0,3)}},filter:{ID:ca?function(e){e=e.replace(ct,"");return function(c7){return c7.getAttribute("id")===e}}:function(e){e=e.replace(ct,"");return function(c8){var c7=typeof c8.getAttributeNode!==cu&&c8.getAttributeNode("id");return c7&&c7.value===e}},TAG:function(e){if(e==="*"){return function(){return true}}e=e.replace(ct,"").toLowerCase();return function(c7){return c7.nodeName&&c7.nodeName.toLowerCase()===e}},CLASS:function(e){var c7=cU[cZ][e+" "];return c7||(c7=new RegExp("(^|"+cy+")"+e+"("+cy+"|$)"))&&cU(e,function(c8){return c7.test(c8.className||(typeof c8.getAttribute!==cu&&c8.getAttribute("class"))||"")})},ATTR:function(c8,c7,e){return function(db,da){var c9=cQ.attr(db,c8);if(c9==null){return c7==="!="}if(!c7){return true}c9+="";return c7==="="?c9===e:c7==="!="?c9!==e:c7==="^="?e&&c9.indexOf(e)===0:c7==="*="?e&&c9.indexOf(e)>-1:c7==="$="?e&&c9.substr(c9.length-e.length)===e:c7==="~="?(" "+c9+" ").indexOf(e)>-1:c7==="|="?c9===e||c9.substr(0,e.length+1)===e+"-":false}},CHILD:function(e,c8,c9,c7){if(e==="nth"){return function(dc){var db,dd,da=dc.parentNode;if(c9===1&&c7===0){return true}if(da){dd=0;for(db=da.firstChild;db;db=db.nextSibling){if(db.nodeType===1){dd++;if(dc===db){break}}}}dd-=c7;return dd===c9||(dd%c9===0&&dd/c9>=0)}}return function(db){var da=db;switch(e){case"only":case"first":while((da=da.previousSibling)){if(da.nodeType===1){return false}}if(e==="first"){return true}da=db;case"last":while((da=da.nextSibling)){if(da.nodeType===1){return false}}return true}}},PSEUDO:function(c9,c8){var e,c7=cL.pseudos[c9]||cL.setFilters[c9.toLowerCase()]||cQ.error("unsupported pseudo: "+c9);if(c7[cZ]){return c7(c8)}if(c7.length>1){e=[c9,c9,"",c8];return cL.setFilters.hasOwnProperty(c9.toLowerCase())?c1(function(dc,de){var db,da=c7(dc,c8),dd=da.length;while(dd--){db=co.call(dc,da[dd]);dc[db]=!(de[db]=da[dd])}}):function(da){return c7(da,0,e)}}return c7}},pseudos:{not:c1(function(e){var c7=[],c8=[],c9=cd(e.replace(cT,"$1"));return c9[cZ]?c1(function(db,dg,de,dc){var df,da=c9(db,null,dc,[]),dd=db.length;while(dd--){if((df=da[dd])){db[dd]=!(dg[dd]=df)}}}):function(dc,db,da){c7[0]=dc;c9(c7,null,da,c8);return !c8.pop()}}),has:c1(function(e){return function(c7){return cQ(e,c7).length>0}}),contains:c1(function(e){return function(c7){return(c7.textContent||c7.innerText||b0(c7)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var c7=e.nodeName.toLowerCase();return(c7==="input"&&!!e.checked)||(c7==="option"&&!!e.selected)},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return !cL.pseudos.empty(e)},empty:function(c7){var e;c7=c7.firstChild;while(c7){if(c7.nodeName>"@"||(e=c7.nodeType)===3||e===4){return false}c7=c7.nextSibling}return true},header:function(e){return cs.test(e.nodeName)},text:function(c8){var c7,e;return c8.nodeName.toLowerCase()==="input"&&(c7=c8.type)==="text"&&((e=c8.getAttribute("type"))==null||e.toLowerCase()===c7)},radio:cI("radio"),checkbox:cI("checkbox"),file:cI("file"),password:cI("password"),image:cI("image"),submit:b3("submit"),reset:b3("reset"),button:function(c7){var e=c7.nodeName.toLowerCase();return e==="input"&&c7.type==="button"||e==="button"},input:function(e){return cN.test(e.nodeName)},focus:function(e){var c7=e.ownerDocument;return e===c7.activeElement&&(!c7.hasFocus||c7.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:cF(function(){return[0]}),last:cF(function(e,c7){return[c7-1]}),eq:cF(function(e,c8,c7){return[c7<0?c7+c8:c7]}),even:cF(function(e,c8){for(var c7=0;c7<c8;c7+=2){e.push(c7)}return e}),odd:cF(function(e,c8){for(var c7=1;c7<c8;c7+=2){e.push(c7)}return e}),lt:cF(function(e,c9,c8){for(var c7=c8<0?c8+c9:c8;--c7>=0;){e.push(c7)}return e}),gt:cF(function(e,c9,c8){for(var c7=c8<0?c8+c9:c8;++c7<c9;){e.push(c7)}return e})}};function b2(c7,e,c8){if(c7===e){return c8}var c9=c7.nextSibling;while(c9){if(c9===e){return -1}c9=c9.nextSibling}return 1}cg=cb.compareDocumentPosition?function(c7,e){if(c7===e){cc=true;return 0}return(!c7.compareDocumentPosition||!e.compareDocumentPosition?c7.compareDocumentPosition:c7.compareDocumentPosition(e)&4)?-1:1}:function(de,dd){if(de===dd){cc=true;return 0}else{if(de.sourceIndex&&dd.sourceIndex){return de.sourceIndex-dd.sourceIndex}}var db,c7,c8=[],e=[],da=de.parentNode,dc=dd.parentNode,df=da;if(da===dc){return b2(de,dd)}else{if(!da){return -1}else{if(!dc){return 1}}}while(df){c8.unshift(df);df=df.parentNode}df=dc;while(df){e.unshift(df);df=df.parentNode}db=c8.length;c7=e.length;for(var c9=0;c9<db&&c9<c7;c9++){if(c8[c9]!==e[c9]){return b2(c8[c9],e[c9])}}return c9===db?b2(de,e[c9],-1):b2(c8[c9],dd,1)};[0,0].sort(cg);b9=!cc;cQ.uniqueSort=function(c8){var c9,da=[],c7=1,e=0;cc=b9;c8.sort(cg);if(cc){for(;(c9=c8[c7]);c7++){if(c9===c8[c7-1]){e=da.push(c7)}}while(e--){c8.splice(da[e],1)}}return c8};cQ.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};function b1(da,df){var c7,db,dd,de,dc,c8,e,c9=cV[cZ][da+" "];if(c9){return df?0:c9.slice(0)}dc=da;c8=[];e=cL.preFilter;while(dc){if(!c7||(db=b5.exec(dc))){if(db){dc=dc.slice(db[0].length)||dc}c8.push(dd=[])}c7=false;if((db=cH.exec(dc))){dd.push(c7=new b4(db.shift()));dc=dc.slice(c7.length);c7.type=db[0].replace(cT," ")}for(de in cL.filter){if((db=cG[de].exec(dc))&&(!e[de]||(db=e[de](db)))){dd.push(c7=new b4(db.shift()));dc=dc.slice(c7.length);c7.type=de;c7.matches=db}}if(!c7){break}}return df?dc.length:dc?cQ.error(da):cV(da,c8).slice(0)}function cw(da,c8,c9){var e=c8.dir,db=c9&&c8.dir==="parentNode",c7=cf++;return c8.first?function(de,dd,dc){while((de=de[e])){if(db||de.nodeType===1){return da(de,dd,dc)}}}:function(df,de,dd){if(!dd){var dc,dg=cr+" "+c7+" ",dh=dg+cX;while((df=df[e])){if(db||df.nodeType===1){if((dc=df[cZ])===dh){return df.sizset}else{if(typeof dc==="string"&&dc.indexOf(dg)===0){if(df.sizset){return df}}else{df[cZ]=dh;if(da(df,de,dd)){df.sizset=true;return df}df.sizset=false}}}}}else{while((df=df[e])){if(db||df.nodeType===1){if(da(df,de,dd)){return df}}}}}}function ce(e){return e.length>1?function(da,c9,c7){var c8=e.length;while(c8--){if(!e[c8](da,c9,c7)){return false}}return true}:e[0]}function cv(e,c7,c8,c9,dc){var da,df=[],db=0,dd=e.length,de=c7!=null;for(;db<dd;db++){if((da=e[db])){if(!c8||c8(da,c9,dc)){df.push(da);if(de){c7.push(db)}}}}return df}function c2(c8,c7,da,c9,db,e){if(c9&&!c9[cZ]){c9=c2(c9)}if(db&&!db[cZ]){db=c2(db,e)}return c1(function(dm,dj,de,dl){var dp,dk,dg,df=[],dn=[],dd=dj.length,dc=dm||cp(c7||"*",de.nodeType?[de]:de,[]),dh=c8&&(dm||!c7)?cv(dc,df,c8,de,dl):dc,di=da?db||(dm?c8:dd||c9)?[]:dj:dh;if(da){da(dh,di,de,dl)}if(c9){dp=cv(di,dn);c9(dp,[],de,dl);dk=dp.length;while(dk--){if((dg=dp[dk])){di[dn[dk]]=!(dh[dn[dk]]=dg)}}}if(dm){if(db||c8){if(db){dp=[];dk=di.length;while(dk--){if((dg=di[dk])){dp.push((dh[dk]=dg))}}db(null,(di=[]),dp,dl)}dk=di.length;while(dk--){if((dg=di[dk])&&(dp=db?co.call(dm,dg):df[dk])>-1){dm[dp]=!(dj[dp]=dg)}}}}else{di=cv(di===dj?di.splice(dd,di.length):di);if(db){db(null,dj,di,dl)}else{cW.apply(dj,di)}}})}function cx(dc){var c7,da,c8,db=dc.length,df=cL.relative[dc[0].type],dg=df||cL.relative[" "],c9=df?1:0,dd=cw(function(dh){return dh===c7},dg,true),de=cw(function(dh){return co.call(c7,dh)>-1},dg,true),e=[function(dj,di,dh){return(!df&&(dh||di!==cJ))||((c7=di).nodeType?dd(dj,di,dh):de(dj,di,dh))}];for(;c9<db;c9++){if((da=cL.relative[dc[c9].type])){e=[cw(ce(e),da)]}else{da=cL.filter[dc[c9].type].apply(null,dc[c9].matches);if(da[cZ]){c8=++c9;for(;c8<db;c8++){if(cL.relative[dc[c8].type]){break}}return c2(c9>1&&ce(e),c9>1&&dc.slice(0,c9-1).join("").replace(cT,"$1"),da,c9<c8&&cx(dc.slice(c9,c8)),c8<db&&cx((dc=dc.slice(c8))),c8<db&&dc.join(""))}e.push(da)}}return ce(e)}function b6(c9,c8){var e=c8.length>0,da=c9.length>0,c7=function(dk,de,dj,di,dr){var df,dg,dl,dq=[],dp=0,dh="0",db=dk&&[],dm=dr!=null,dn=cJ,dd=dk||da&&cL.find.TAG("*",dr&&de.parentNode||de),dc=(cr+=dn==null?1:Math.E);if(dm){cJ=de!==b8&&de;cX=c7.el}for(;(df=dd[dh])!=null;dh++){if(da&&df){for(dg=0;(dl=c9[dg]);dg++){if(dl(df,de,dj)){di.push(df);break}}if(dm){cr=dc;cX=++c7.el}}if(e){if((df=!dl&&df)){dp--}if(dk){db.push(df)}}}dp+=dh;if(e&&dh!==dp){for(dg=0;(dl=c8[dg]);dg++){dl(db,dq,de,dj)}if(dk){if(dp>0){while(dh--){if(!(db[dh]||dq[dh])){dq[dh]=cE.call(di)}}}dq=cv(dq)}cW.apply(di,dq);if(dm&&!dk&&dq.length>0&&(dp+c8.length)>1){cQ.uniqueSort(di)}}if(dm){cr=dc;cJ=dn}return db};c7.el=0;return e?c1(c7):c7}cd=cQ.compile=function(e,db){var c8,c7=[],da=[],c9=cn[cZ][e+" "];if(!c9){if(!db){db=b1(e)}c8=db.length;while(c8--){c9=cx(db[c8]);if(c9[cZ]){c7.push(c9)}else{da.push(c9)}}c9=cn(e,b6(da,c7))}return c9};function cp(c7,da,c9){var c8=0,e=da.length;for(;c8<e;c8++){cQ(c7,da[c8],c9)}return c9}function cY(c8,e,da,de,dd){var db,dh,c7,dg,df,dc=b1(c8),c9=dc.length;if(!de){if(dc.length===1){dh=dc[0]=dc[0].slice(0);if(dh.length>2&&(c7=dh[0]).type==="ID"&&e.nodeType===9&&!dd&&cL.relative[dh[1].type]){e=cL.find.ID(c7.matches[0].replace(ct,""),e,dd)[0];if(!e){return da}c8=c8.slice(dh.shift().length)}for(db=cG.POS.test(c8)?-1:dh.length-1;db>=0;db--){c7=dh[db];if(cL.relative[(dg=c7.type)]){break}if((df=cL.find[dg])){if((de=df(c7.matches[0].replace(ct,""),cR.test(dh[0].type)&&e.parentNode||e,dd))){dh.splice(db,1);c8=de.length&&dh.join("");if(!c8){cW.apply(da,cl.call(de,0));return da}break}}}}}cd(c8,dc)(de,e,dd,da,cR.test(c8));return da}if(b8.querySelectorAll){(function(){var db,dc=cY,da=/'|\\/g,c8=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,c7=[":focus"],e=[":active"],c9=cb.matchesSelector||cb.mozMatchesSelector||cb.webkitMatchesSelector||cb.oMatchesSelector||cb.msMatchesSelector;cK(function(dd){dd.innerHTML="<select><option selected=''></option></select>";if(!dd.querySelectorAll("[selected]").length){c7.push("\\["+cy+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!dd.querySelectorAll(":checked").length){c7.push(":checked")}});cK(function(dd){dd.innerHTML="<p test=''></p>";if(dd.querySelectorAll("[test^='']").length){c7.push("[*^$]="+cy+"*(?:\"\"|'')")}dd.innerHTML="<input type='hidden'/>";if(!dd.querySelectorAll(":enabled").length){c7.push(":enabled",":disabled")}});c7=new RegExp(c7.join("|"));cY=function(dj,de,dl,dp,dn){if(!dp&&!dn&&!c7.test(dj)){var dh,dm,dg=true,dd=cZ,df=de,dk=de.nodeType===9&&dj;if(de.nodeType===1&&de.nodeName.toLowerCase()!=="object"){dh=b1(dj);if((dg=de.getAttribute("id"))){dd=dg.replace(da,"\\$&")}else{de.setAttribute("id",dd)}dd="[id='"+dd+"'] ";dm=dh.length;while(dm--){dh[dm]=dd+dh[dm].join("")}df=cR.test(dj)&&de.parentNode||de;dk=dh.join(",")}if(dk){try{cW.apply(dl,cl.call(df.querySelectorAll(dk),0));return dl}catch(di){}finally{if(!dg){de.removeAttribute("id")}}}}return dc(dj,de,dl,dp,dn)};if(c9){cK(function(de){db=c9.call(de,"div");try{c9.call(de,"[test!='']:sizzle");e.push("!=",c6)}catch(dd){}});e=new RegExp(e.join("|"));cQ.matchesSelector=function(de,dg){dg=dg.replace(c8,"='$1']");if(!cm(de)&&!e.test(dg)&&!c7.test(dg)){try{var dd=c9.call(de,dg);if(dd||db||de.document&&de.document.nodeType!==11){return dd}}catch(df){}}return cQ(dg,null,null,[de]).length>0}}})()}cL.pseudos.nth=cL.pseudos.eq;function cj(){}cL.filters=cj.prototype=cL.pseudos;cL.setFilters=new cj();cQ.attr=bG.attr;bG.find=cQ;bG.expr=cQ.selectors;bG.expr[":"]=bG.expr.pseudos;bG.unique=cQ.uniqueSort;bG.text=cQ.getText;bG.isXMLDoc=cQ.isXML;bG.contains=cQ.contains})(a2);var ag=/Until$/,bq=/^(?:parents|prev(?:Until|All))/,al=/^.[^:#\[\.,]*$/,y=bG.expr.match.needsContext,bu={children:true,contents:true,next:true,prev:true};bG.fn.extend({find:function(e){var b2,bZ,b4,b5,b3,b1,b0=this;if(typeof e!=="string"){return bG(e).filter(function(){for(b2=0,bZ=b0.length;b2<bZ;b2++){if(bG.contains(b0[b2],this)){return true}}})}b1=this.pushStack("","find",e);for(b2=0,bZ=this.length;b2<bZ;b2++){b4=b1.length;bG.find(e,this[b2],b1);if(b2>0){for(b5=b4;b5<b1.length;b5++){for(b3=0;b3<b4;b3++){if(b1[b3]===b1[b5]){b1.splice(b5--,1);break}}}}}return b1},has:function(b1){var b0,bZ=bG(b1,this),e=bZ.length;return this.filter(function(){for(b0=0;b0<e;b0++){if(bG.contains(this,bZ[b0])){return true}}})},not:function(e){return this.pushStack(aM(this,e,false),"not",e)},filter:function(e){return this.pushStack(aM(this,e,true),"filter",e)},is:function(e){return !!e&&(typeof e==="string"?y.test(e)?bG(e,this.context).index(this[0])>=0:bG.filter(e,this).length>0:this.filter(e).length>0)},closest:function(b2,b1){var b3,b0=0,e=this.length,bZ=[],b4=y.test(b2)||typeof b2!=="string"?bG(b2,b1||this.context):0;for(;b0<e;b0++){b3=this[b0];while(b3&&b3.ownerDocument&&b3!==b1&&b3.nodeType!==11){if(b4?b4.index(b3)>-1:bG.find.matchesSelector(b3,b2)){bZ.push(b3);break}b3=b3.parentNode}}bZ=bZ.length>1?bG.unique(bZ):bZ;return this.pushStack(bZ,"closest",b2)},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1}if(typeof e==="string"){return bG.inArray(this[0],bG(e))}return bG.inArray(e.jquery?e[0]:e,this)},add:function(e,bZ){var b1=typeof e==="string"?bG(e,bZ):bG.makeArray(e&&e.nodeType?[e]:e),b0=bG.merge(this.get(),b1);return this.pushStack(aR(b1[0])||aR(b0[0])?b0:bG.unique(b0))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});bG.fn.andSelf=bG.fn.addBack;function aR(e){return !e||!e.parentNode||e.parentNode.nodeType===11}function aY(bZ,e){do{bZ=bZ[e]}while(bZ&&bZ.nodeType!==1);return bZ}bG.each({parent:function(bZ){var e=bZ.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return bG.dir(e,"parentNode")},parentsUntil:function(bZ,e,b0){return bG.dir(bZ,"parentNode",b0)},next:function(e){return aY(e,"nextSibling")},prev:function(e){return aY(e,"previousSibling")},nextAll:function(e){return bG.dir(e,"nextSibling")},prevAll:function(e){return bG.dir(e,"previousSibling")},nextUntil:function(bZ,e,b0){return bG.dir(bZ,"nextSibling",b0)},prevUntil:function(bZ,e,b0){return bG.dir(bZ,"previousSibling",b0)},siblings:function(e){return bG.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return bG.sibling(e.firstChild)},contents:function(e){return bG.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:bG.merge([],e.childNodes)}},function(e,bZ){bG.fn[e]=function(b2,b0){var b1=bG.map(this,bZ,b2);if(!ag.test(e)){b0=b2}if(b0&&typeof b0==="string"){b1=bG.filter(b0,b1)}b1=this.length>1&&!bu[e]?bG.unique(b1):b1;if(this.length>1&&bq.test(e)){b1=b1.reverse()}return this.pushStack(b1,e,a4.call(arguments).join(","))}});bG.extend({filter:function(b0,e,bZ){if(bZ){b0=":not("+b0+")"}return e.length===1?bG.find.matchesSelector(e[0],b0)?[e[0]]:[]:bG.find.matches(b0,e)},dir:function(b0,bZ,b2){var e=[],b1=b0[bZ];while(b1&&b1.nodeType!==9&&(b2===aB||b1.nodeType!==1||!bG(b1).is(b2))){if(b1.nodeType===1){e.push(b1)}b1=b1[bZ]}return e},sibling:function(b0,bZ){var e=[];for(;b0;b0=b0.nextSibling){if(b0.nodeType===1&&b0!==bZ){e.push(b0)}}return e}});function aM(b1,b0,e){b0=b0||0;if(bG.isFunction(b0)){return bG.grep(b1,function(b3,b2){var b4=!!b0.call(b3,b2,b3);return b4===e})}else{if(b0.nodeType){return bG.grep(b1,function(b3,b2){return(b3===b0)===e})}else{if(typeof b0==="string"){var bZ=bG.grep(b1,function(b2){return b2.nodeType===1});if(al.test(b0)){return bG.filter(b0,bZ,!e)}else{b0=bG.filter(b0,bZ)}}}}return bG.grep(b1,function(b3,b2){return(bG.inArray(b3,b0)>=0)===e})}function A(e){var b0=c.split("|"),bZ=e.createDocumentFragment();if(bZ.createElement){while(b0.length){bZ.createElement(b0.pop())}}return bZ}var c="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",av=/ jQuery\d+="(?:null|\d+)"/g,bY=/^\s+/,ay=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,p=/<([\w:]+)/,bT=/<tbody/i,J=/<|&#?\w+;/,aj=/<(?:script|style|link)/i,ap=/<(?:script|object|embed|option|style)/i,K=new RegExp("<(?:"+c+")[\\s/>]","i"),aE=/^(?:checkbox|radio)$/,bR=/checked\s*(?:[^=]|=\s*.checked.)/i,bw=/\/(java|ecma)script/i,aH=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,T={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},aQ=A(o),l=aQ.appendChild(o.createElement("div"));T.optgroup=T.option;T.tbody=T.tfoot=T.colgroup=T.caption=T.thead;T.th=T.td;if(!bG.support.htmlSerialize){T._default=[1,"X<div>","</div>"]}bG.fn.extend({text:function(e){return bG.access(this,function(bZ){return bZ===aB?bG.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(bZ))},null,e,arguments.length)},wrapAll:function(e){if(bG.isFunction(e)){return this.each(function(b0){bG(this).wrapAll(e.call(this,b0))})}if(this[0]){var bZ=bG(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){bZ.insertBefore(this[0])}bZ.map(function(){var b0=this;while(b0.firstChild&&b0.firstChild.nodeType===1){b0=b0.firstChild}return b0}).append(this)}return this},wrapInner:function(e){if(bG.isFunction(e)){return this.each(function(bZ){bG(this).wrapInner(e.call(this,bZ))})}return this.each(function(){var bZ=bG(this),b0=bZ.contents();if(b0.length){b0.wrapAll(e)}else{bZ.append(e)}})},wrap:function(e){var bZ=bG.isFunction(e);return this.each(function(b0){bG(this).wrapAll(bZ?e.call(this,b0):e)})},unwrap:function(){return this.parent().each(function(){if(!bG.nodeName(this,"body")){bG(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1||this.nodeType===11){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1||this.nodeType===11){this.insertBefore(e,this.firstChild)}})},before:function(){if(!aR(this[0])){return this.domManip(arguments,false,function(bZ){this.parentNode.insertBefore(bZ,this)})}if(arguments.length){var e=bG.clean(arguments);return this.pushStack(bG.merge(e,this),"before",this.selector)}},after:function(){if(!aR(this[0])){return this.domManip(arguments,false,function(bZ){this.parentNode.insertBefore(bZ,this.nextSibling)})}if(arguments.length){var e=bG.clean(arguments);return this.pushStack(bG.merge(this,e),"after",this.selector)}},remove:function(e,b1){var b0,bZ=0;for(;(b0=this[bZ])!=null;bZ++){if(!e||bG.filter(e,[b0]).length){if(!b1&&b0.nodeType===1){bG.cleanData(b0.getElementsByTagName("*"));bG.cleanData([b0])}if(b0.parentNode){b0.parentNode.removeChild(b0)}}}return this},empty:function(){var bZ,e=0;for(;(bZ=this[e])!=null;e++){if(bZ.nodeType===1){bG.cleanData(bZ.getElementsByTagName("*"))}while(bZ.firstChild){bZ.removeChild(bZ.firstChild)}}return this},clone:function(bZ,e){bZ=bZ==null?false:bZ;e=e==null?bZ:e;return this.map(function(){return bG.clone(this,bZ,e)})},html:function(e){return bG.access(this,function(b2){var b1=this[0]||{},b0=0,bZ=this.length;if(b2===aB){return b1.nodeType===1?b1.innerHTML.replace(av,""):aB}if(typeof b2==="string"&&!aj.test(b2)&&(bG.support.htmlSerialize||!K.test(b2))&&(bG.support.leadingWhitespace||!bY.test(b2))&&!T[(p.exec(b2)||["",""])[1].toLowerCase()]){b2=b2.replace(ay,"<$1></$2>");try{for(;b0<bZ;b0++){b1=this[b0]||{};if(b1.nodeType===1){bG.cleanData(b1.getElementsByTagName("*"));b1.innerHTML=b2}}b1=0}catch(b3){}}if(b1){this.empty().append(b2)}},null,e,arguments.length)},replaceWith:function(e){if(!aR(this[0])){if(bG.isFunction(e)){return this.each(function(b1){var b0=bG(this),bZ=b0.html();b0.replaceWith(e.call(this,b1,bZ))})}if(typeof e!=="string"){e=bG(e).detach()}return this.each(function(){var b0=this.nextSibling,bZ=this.parentNode;bG(this).remove();if(b0){bG(b0).before(e)}else{bG(bZ).append(e)}})}return this.length?this.pushStack(bG(bG.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,true)},domManip:function(b4,b8,b7){b4=[].concat.apply([],b4);var b0,b2,b3,b6,b1=0,b5=b4[0],bZ=[],e=this.length;if(!bG.support.checkClone&&e>1&&typeof b5==="string"&&bR.test(b5)){return this.each(function(){bG(this).domManip(b4,b8,b7)})}if(bG.isFunction(b5)){return this.each(function(ca){var b9=bG(this);b4[0]=b5.call(this,ca,b8?b9.html():aB);b9.domManip(b4,b8,b7)})}if(this[0]){b0=bG.buildFragment(b4,this,bZ);b3=b0.fragment;b2=b3.firstChild;if(b3.childNodes.length===1){b3=b2}if(b2){b8=b8&&bG.nodeName(b2,"tr");for(b6=b0.cacheable||e-1;b1<e;b1++){b7.call(b8&&bG.nodeName(this[b1],"table")?x(this[b1],"tbody"):this[b1],b1===b6?b3:bG.clone(b3,true,true))}}b3=b2=null;if(bZ.length){bG.each(bZ,function(b9,ca){if(ca.src){if(bG.ajax){bG.ajax({url:ca.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})}else{bG.error("no ajax")}}else{bG.globalEval((ca.text||ca.textContent||ca.innerHTML||"").replace(aH,""))}if(ca.parentNode){ca.parentNode.removeChild(ca)}})}}return this}});function x(bZ,e){return bZ.getElementsByTagName(e)[0]||bZ.appendChild(bZ.ownerDocument.createElement(e))}function ao(b5,bZ){if(bZ.nodeType!==1||!bG.hasData(b5)){return}var b2,b1,e,b4=bG._data(b5),b3=bG._data(bZ,b4),b0=b4.events;if(b0){delete b3.handle;b3.events={};for(b2 in b0){for(b1=0,e=b0[b2].length;b1<e;b1++){bG.event.add(bZ,b2,b0[b2][b1])}}}if(b3.data){b3.data=bG.extend({},b3.data)}}function F(bZ,e){var b0;if(e.nodeType!==1){return}if(e.clearAttributes){e.clearAttributes()}if(e.mergeAttributes){e.mergeAttributes(bZ)}b0=e.nodeName.toLowerCase();if(b0==="object"){if(e.parentNode){e.outerHTML=bZ.outerHTML}if(bG.support.html5Clone&&(bZ.innerHTML&&!bG.trim(e.innerHTML))){e.innerHTML=bZ.innerHTML}}else{if(b0==="input"&&aE.test(bZ.type)){e.defaultChecked=e.checked=bZ.checked;if(e.value!==bZ.value){e.value=bZ.value}}else{if(b0==="option"){e.selected=bZ.defaultSelected}else{if(b0==="input"||b0==="textarea"){e.defaultValue=bZ.defaultValue}else{if(b0==="script"&&e.text!==bZ.text){e.text=bZ.text}}}}}e.removeAttribute(bG.expando)}bG.buildFragment=function(b1,b2,bZ){var b0,e,b3,b4=b1[0];b2=b2||o;b2=!b2.nodeType&&b2[0]||b2;b2=b2.ownerDocument||b2;if(b1.length===1&&typeof b4==="string"&&b4.length<512&&b2===o&&b4.charAt(0)==="<"&&!ap.test(b4)&&(bG.support.checkClone||!bR.test(b4))&&(bG.support.html5Clone||!K.test(b4))){e=true;b0=bG.fragments[b4];b3=b0!==aB}if(!b0){b0=b2.createDocumentFragment();bG.clean(b1,b2,b0,bZ);if(e){bG.fragments[b4]=b3&&b0}}return{fragment:b0,cacheable:e}};bG.fragments={};bG.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,bZ){bG.fn[e]=function(b0){var b2,b4=0,b3=[],b6=bG(b0),b1=b6.length,b5=this.length===1&&this[0].parentNode;if((b5==null||b5&&b5.nodeType===11&&b5.childNodes.length===1)&&b1===1){b6[bZ](this[0]);return this}else{for(;b4<b1;b4++){b2=(b4>0?this.clone(true):this).get();bG(b6[b4])[bZ](b2);b3=b3.concat(b2)}return this.pushStack(b3,e,b6.selector)}}});function m(e){if(typeof e.getElementsByTagName!=="undefined"){return e.getElementsByTagName("*")}else{if(typeof e.querySelectorAll!=="undefined"){return e.querySelectorAll("*")}else{return[]}}}function bS(e){if(aE.test(e.type)){e.defaultChecked=e.checked}}bG.extend({clone:function(b2,b4,b0){var e,bZ,b1,b3;if(bG.support.html5Clone||bG.isXMLDoc(b2)||!K.test("<"+b2.nodeName+">")){b3=b2.cloneNode(true)}else{l.innerHTML=b2.outerHTML;l.removeChild(b3=l.firstChild)}if((!bG.support.noCloneEvent||!bG.support.noCloneChecked)&&(b2.nodeType===1||b2.nodeType===11)&&!bG.isXMLDoc(b2)){F(b2,b3);e=m(b2);bZ=m(b3);for(b1=0;e[b1];++b1){if(bZ[b1]){F(e[b1],bZ[b1])}}}if(b4){ao(b2,b3);if(b0){e=m(b2);bZ=m(b3);for(b1=0;e[b1];++b1){ao(e[b1],bZ[b1])}}}e=bZ=null;return b3},clean:function(cb,b0,e,b1){var b8,b7,ca,cf,b4,ce,b5,b2,bZ,b9,cd,b6,b3=b0===o&&aQ,cc=[];if(!b0||typeof b0.createDocumentFragment==="undefined"){b0=o}for(b8=0;(ca=cb[b8])!=null;b8++){if(typeof ca==="number"){ca+=""}if(!ca){continue}if(typeof ca==="string"){if(!J.test(ca)){ca=b0.createTextNode(ca)}else{b3=b3||A(b0);b5=b0.createElement("div");b3.appendChild(b5);ca=ca.replace(ay,"<$1></$2>");cf=(p.exec(ca)||["",""])[1].toLowerCase();b4=T[cf]||T._default;ce=b4[0];b5.innerHTML=b4[1]+ca+b4[2];while(ce--){b5=b5.lastChild}if(!bG.support.tbody){b2=bT.test(ca);bZ=cf==="table"&&!b2?b5.firstChild&&b5.firstChild.childNodes:b4[1]==="<table>"&&!b2?b5.childNodes:[];for(b7=bZ.length-1;b7>=0;--b7){if(bG.nodeName(bZ[b7],"tbody")&&!bZ[b7].childNodes.length){bZ[b7].parentNode.removeChild(bZ[b7])}}}if(!bG.support.leadingWhitespace&&bY.test(ca)){b5.insertBefore(b0.createTextNode(bY.exec(ca)[0]),b5.firstChild)}ca=b5.childNodes;b5.parentNode.removeChild(b5)}}if(ca.nodeType){cc.push(ca)}else{bG.merge(cc,ca)}}if(b5){ca=b5=b3=null}if(!bG.support.appendChecked){for(b8=0;(ca=cc[b8])!=null;b8++){if(bG.nodeName(ca,"input")){bS(ca)}else{if(typeof ca.getElementsByTagName!=="undefined"){bG.grep(ca.getElementsByTagName("input"),bS)}}}}if(e){cd=function(cg){if(!cg.type||bw.test(cg.type)){return b1?b1.push(cg.parentNode?cg.parentNode.removeChild(cg):cg):e.appendChild(cg)}};for(b8=0;(ca=cc[b8])!=null;b8++){if(!(bG.nodeName(ca,"script")&&cd(ca))){e.appendChild(ca);if(typeof ca.getElementsByTagName!=="undefined"){b6=bG.grep(bG.merge([],ca.getElementsByTagName("script")),cd);cc.splice.apply(cc,[b8+1,0].concat(b6));b8+=b6.length}}}}return cc},cleanData:function(bZ,b7){var b2,b0,b1,b6,b3=0,b8=bG.expando,e=bG.cache,b4=bG.support.deleteExpando,b5=bG.event.special;for(;(b1=bZ[b3])!=null;b3++){if(b7||bG.acceptData(b1)){b0=b1[b8];b2=b0&&e[b0];if(b2){if(b2.events){for(b6 in b2.events){if(b5[b6]){bG.event.remove(b1,b6)}else{bG.removeEvent(b1,b6,b2.handle)}}}if(e[b0]){delete e[b0];if(b4){delete b1[b8]}else{if(b1.removeAttribute){b1.removeAttribute(b8)}else{b1[b8]=null}}bG.deletedIds.push(b0)}}}}}});(function(){var e,bZ;bG.uaMatch=function(b1){b1=b1.toLowerCase();var b0=/(chrome)[ \/]([\w.]+)/.exec(b1)||/(webkit)[ \/]([\w.]+)/.exec(b1)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b1)||/(msie) ([\w.]+)/.exec(b1)||b1.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b1)||[];return{browser:b0[1]||"",version:b0[2]||"0"}};e=bG.uaMatch(d.userAgent);bZ={};if(e.browser){bZ[e.browser]=true;bZ.version=e.version}if(bZ.chrome){bZ.webkit=true}else{if(bZ.webkit){bZ.safari=true}}bG.browser=bZ;bG.sub=function(){function b0(b3,b4){return new b0.fn.init(b3,b4)}bG.extend(true,b0,this);b0.superclass=this;b0.fn=b0.prototype=this();b0.fn.constructor=b0;b0.sub=this.sub;b0.fn.init=function b2(b3,b4){if(b4&&b4 instanceof bG&&!(b4 instanceof b0)){b4=b0(b4)}return bG.fn.init.call(this,b3,b4,b1)};b0.fn.init.prototype=b0.fn;var b1=b0(o);return b0}})();var E,az,aW,be=/alpha\([^)]*\)/i,aS=/opacity=([^)]*)/,bk=/^(top|right|bottom|left)$/,G=/^(none|table(?!-c[ea]).+)/,aZ=/^margin/,a8=new RegExp("^("+bx+")(.*)$","i"),W=new RegExp("^("+bx+")(?!px)[a-z%]+$","i"),S=new RegExp("^([-+])=("+bx+")","i"),bh={BODY:"block"},a9={position:"absolute",visibility:"hidden",display:"block"},bA={letterSpacing:0,fontWeight:400},bQ=["Top","Right","Bottom","Left"],ar=["Webkit","O","Moz","ms"],aJ=bG.fn.toggle;function b(b1,bZ){if(bZ in b1){return bZ}var b2=bZ.charAt(0).toUpperCase()+bZ.slice(1),e=bZ,b0=ar.length;while(b0--){bZ=ar[b0]+b2;if(bZ in b1){return bZ}}return e}function Q(bZ,e){bZ=e||bZ;return bG.css(bZ,"display")==="none"||!bG.contains(bZ.ownerDocument,bZ)}function s(b3,e){var b2,b4,bZ=[],b0=0,b1=b3.length;for(;b0<b1;b0++){b2=b3[b0];if(!b2.style){continue}bZ[b0]=bG._data(b2,"olddisplay");if(e){if(!bZ[b0]&&b2.style.display==="none"){b2.style.display=""}if(b2.style.display===""&&Q(b2)){bZ[b0]=bG._data(b2,"olddisplay",bC(b2.nodeName))}}else{b4=E(b2,"display");if(!bZ[b0]&&b4!=="none"){bG._data(b2,"olddisplay",b4)}}}for(b0=0;b0<b1;b0++){b2=b3[b0];if(!b2.style){continue}if(!e||b2.style.display==="none"||b2.style.display===""){b2.style.display=e?bZ[b0]||"":"none"}}return b3}bG.fn.extend({css:function(e,bZ){return bG.access(this,function(b1,b0,b2){return b2!==aB?bG.style(b1,b0,b2):bG.css(b1,b0)},e,bZ,arguments.length>1)},show:function(){return s(this,true)},hide:function(){return s(this)},toggle:function(b0,bZ){var e=typeof b0==="boolean";if(bG.isFunction(b0)&&bG.isFunction(bZ)){return aJ.apply(this,arguments)}return this.each(function(){if(e?b0:Q(this)){bG(this).show()}else{bG(this).hide()}})}});bG.extend({cssHooks:{opacity:{get:function(b0,bZ){if(bZ){var e=E(b0,"opacity");return e===""?"1":e}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":bG.support.cssFloat?"cssFloat":"styleFloat"},style:function(b1,b0,b7,b2){if(!b1||b1.nodeType===3||b1.nodeType===8||!b1.style){return}var b5,b6,b8,b3=bG.camelCase(b0),bZ=b1.style;b0=bG.cssProps[b3]||(bG.cssProps[b3]=b(bZ,b3));b8=bG.cssHooks[b0]||bG.cssHooks[b3];if(b7!==aB){b6=typeof b7;if(b6==="string"&&(b5=S.exec(b7))){b7=(b5[1]+1)*b5[2]+parseFloat(bG.css(b1,b0));b6="number"}if(b7==null||b6==="number"&&isNaN(b7)){return}if(b6==="number"&&!bG.cssNumber[b3]){b7+="px"}if(!b8||!("set" in b8)||(b7=b8.set(b1,b7,b2))!==aB){try{bZ[b0]=b7}catch(b4){}}}else{if(b8&&"get" in b8&&(b5=b8.get(b1,false,b2))!==aB){return b5}return bZ[b0]}},css:function(b4,b2,b3,bZ){var b5,b1,e,b0=bG.camelCase(b2);b2=bG.cssProps[b0]||(bG.cssProps[b0]=b(b4.style,b0));e=bG.cssHooks[b2]||bG.cssHooks[b0];if(e&&"get" in e){b5=e.get(b4,true,bZ)}if(b5===aB){b5=E(b4,b2)}if(b5==="normal"&&b2 in bA){b5=bA[b2]}if(b3||bZ!==aB){b1=parseFloat(b5);return b3||bG.isNumeric(b1)?b1||0:b5}return b5},swap:function(b2,b1,b3){var b0,bZ,e={};for(bZ in b1){e[bZ]=b2.style[bZ];b2.style[bZ]=b1[bZ]}b0=b3.call(b2);for(bZ in b1){b2.style[bZ]=e[bZ]}return b0}});if(a2.getComputedStyle){E=function(b5,bZ){var e,b2,b1,b4,b3=a2.getComputedStyle(b5,null),b0=b5.style;if(b3){e=b3.getPropertyValue(bZ)||b3[bZ];if(e===""&&!bG.contains(b5.ownerDocument,b5)){e=bG.style(b5,bZ)}if(W.test(e)&&aZ.test(bZ)){b2=b0.width;b1=b0.minWidth;b4=b0.maxWidth;b0.minWidth=b0.maxWidth=b0.width=e;e=b3.width;b0.width=b2;b0.minWidth=b1;b0.maxWidth=b4}}return e}}else{if(o.documentElement.currentStyle){E=function(b2,b0){var b3,e,bZ=b2.currentStyle&&b2.currentStyle[b0],b1=b2.style;if(bZ==null&&b1&&b1[b0]){bZ=b1[b0]}if(W.test(bZ)&&!bk.test(b0)){b3=b1.left;e=b2.runtimeStyle&&b2.runtimeStyle.left;if(e){b2.runtimeStyle.left=b2.currentStyle.left}b1.left=b0==="fontSize"?"1em":bZ;bZ=b1.pixelLeft+"px";b1.left=b3;if(e){b2.runtimeStyle.left=e}}return bZ===""?"auto":bZ}}}function aG(e,b0,b1){var bZ=a8.exec(b0);return bZ?Math.max(0,bZ[1]-(b1||0))+(bZ[2]||"px"):b0}function at(b1,bZ,e,b3){var b0=e===(b3?"border":"content")?4:bZ==="width"?1:0,b2=0;for(;b0<4;b0+=2){if(e==="margin"){b2+=bG.css(b1,e+bQ[b0],true)}if(b3){if(e==="content"){b2-=parseFloat(E(b1,"padding"+bQ[b0]))||0}if(e!=="margin"){b2-=parseFloat(E(b1,"border"+bQ[b0]+"Width"))||0}}else{b2+=parseFloat(E(b1,"padding"+bQ[b0]))||0;if(e!=="padding"){b2+=parseFloat(E(b1,"border"+bQ[b0]+"Width"))||0}}}return b2}function u(b1,bZ,e){var b2=bZ==="width"?b1.offsetWidth:b1.offsetHeight,b0=true,b3=bG.support.boxSizing&&bG.css(b1,"boxSizing")==="border-box";if(b2<=0||b2==null){b2=E(b1,bZ);if(b2<0||b2==null){b2=b1.style[bZ]}if(W.test(b2)){return b2}b0=b3&&(bG.support.boxSizingReliable||b2===b1.style[bZ]);b2=parseFloat(b2)||0}return(b2+at(b1,bZ,e||(b3?"border":"content"),b0))+"px"}function bC(b0){if(bh[b0]){return bh[b0]}var e=bG("<"+b0+">").appendTo(o.body),bZ=e.css("display");e.remove();if(bZ==="none"||bZ===""){az=o.body.appendChild(az||bG.extend(o.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!aW||!az.createElement){aW=(az.contentWindow||az.contentDocument).document;aW.write("<!doctype html><html><body>");aW.close()}e=aW.body.appendChild(aW.createElement(b0));bZ=E(e,"display");o.body.removeChild(az)}bh[b0]=bZ;return bZ}bG.each(["height","width"],function(bZ,e){bG.cssHooks[e]={get:function(b2,b1,b0){if(b1){if(b2.offsetWidth===0&&G.test(E(b2,"display"))){return bG.swap(b2,a9,function(){return u(b2,e,b0)})}else{return u(b2,e,b0)}}},set:function(b1,b2,b0){return aG(b1,b2,b0?at(b1,e,b0,bG.support.boxSizing&&bG.css(b1,"boxSizing")==="border-box"):0)}}});if(!bG.support.opacity){bG.cssHooks.opacity={get:function(bZ,e){return aS.test((e&&bZ.currentStyle?bZ.currentStyle.filter:bZ.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":e?"1":""},set:function(b2,b3){var b1=b2.style,bZ=b2.currentStyle,e=bG.isNumeric(b3)?"alpha(opacity="+b3*100+")":"",b0=bZ&&bZ.filter||b1.filter||"";b1.zoom=1;if(b3>=1&&bG.trim(b0.replace(be,""))===""&&b1.removeAttribute){b1.removeAttribute("filter");if(bZ&&!bZ.filter){return}}b1.filter=be.test(b0)?b0.replace(be,e):b0+" "+e}}}bG(function(){if(!bG.support.reliableMarginRight){bG.cssHooks.marginRight={get:function(bZ,e){return bG.swap(bZ,{display:"inline-block"},function(){if(e){return E(bZ,"marginRight")}})}}}if(!bG.support.pixelPosition&&bG.fn.position){bG.each(["top","left"],function(e,bZ){bG.cssHooks[bZ]={get:function(b2,b1){if(b1){var b0=E(b2,bZ);return W.test(b0)?bG(b2).position()[bZ]+"px":b0}}}})}});if(bG.expr&&bG.expr.filters){bG.expr.filters.hidden=function(e){return(e.offsetWidth===0&&e.offsetHeight===0)||(!bG.support.reliableHiddenOffsets&&((e.style&&e.style.display)||E(e,"display"))==="none")};bG.expr.filters.visible=function(e){return !bG.expr.filters.hidden(e)}}bG.each({margin:"",padding:"",border:"Width"},function(e,bZ){bG.cssHooks[e+bZ]={expand:function(b2){var b1,b3=typeof b2==="string"?b2.split(" "):[b2],b0={};for(b1=0;b1<4;b1++){b0[e+bQ[b1]+bZ]=b3[b1]||b3[b1-2]||b3[0]}return b0}};if(!aZ.test(e)){bG.cssHooks[e+bZ].set=aG}});var bs=/%20/g,aP=/\[\]$/,U=/\r?\n/g,bz=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aD=/^(?:select|textarea)/i;bG.fn.extend({serialize:function(){return bG.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?bG.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||aD.test(this.nodeName)||bz.test(this.type))}).map(function(e,bZ){var b0=bG(this).val();return b0==null?null:bG.isArray(b0)?bG.map(b0,function(b2,b1){return{name:bZ.name,value:b2.replace(U,"\r\n")}}):{name:bZ.name,value:b0.replace(U,"\r\n")}}).get()}});bG.param=function(e,b0){var b1,bZ=[],b2=function(b3,b4){b4=bG.isFunction(b4)?b4():(b4==null?"":b4);bZ[bZ.length]=encodeURIComponent(b3)+"="+encodeURIComponent(b4)};if(b0===aB){b0=bG.ajaxSettings&&bG.ajaxSettings.traditional}if(bG.isArray(e)||(e.jquery&&!bG.isPlainObject(e))){bG.each(e,function(){b2(this.name,this.value)})}else{for(b1 in e){k(b1,e[b1],b0,b2)}}return bZ.join("&").replace(bs,"+")};function k(b0,b2,bZ,b1){var e;if(bG.isArray(b2)){bG.each(b2,function(b4,b3){if(bZ||aP.test(b0)){b1(b0,b3)}else{k(b0+"["+(typeof b3==="object"?b4:"")+"]",b3,bZ,b1)}})}else{if(!bZ&&bG.type(b2)==="object"){for(e in b2){k(b0+"["+e+"]",b2[e],bZ,b1)}}else{b1(b0,b2)}}}var bX,Y,an=/#.*$/,ad=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,B=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,r=/^(?:GET|HEAD)$/,aC=/^\/\//,bN=/\?/,g=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,P=/([?&])_=[^&]*/,aT=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,bW=bG.fn.load,v={},a6={},aX=["*/"]+["*"];try{Y=aI.href}catch(bd){Y=o.createElement("a");Y.href="";Y=Y.href}bX=aT.exec(Y.toLowerCase())||[];function bI(e){return function(b2,b4){if(typeof b2!=="string"){b4=b2;b2="*"}var bZ,b5,b6,b1=b2.toLowerCase().split(aV),b0=0,b3=b1.length;if(bG.isFunction(b4)){for(;b0<b3;b0++){bZ=b1[b0];b6=/^\+/.test(bZ);if(b6){bZ=bZ.substr(1)||"*"}b5=e[bZ]=e[bZ]||[];b5[b6?"unshift":"push"](b4)}}}}function q(bZ,b8,b3,b6,b5,b1){b5=b5||b8.dataTypes[0];b1=b1||{};b1[b5]=true;var b7,b4=bZ[b5],b0=0,e=b4?b4.length:0,b2=(bZ===v);for(;b0<e&&(b2||!b7);b0++){b7=b4[b0](b8,b3,b6);if(typeof b7==="string"){if(!b2||b1[b7]){b7=aB}else{b8.dataTypes.unshift(b7);b7=q(bZ,b8,b3,b6,b7,b1)}}}if((b2||!b7)&&!b1["*"]){b7=q(bZ,b8,b3,b6,"*",b1)}return b7}function t(b0,b1){var bZ,e,b2=bG.ajaxSettings.flatOptions||{};for(bZ in b1){if(b1[bZ]!==aB){(b2[bZ]?b0:(e||(e={})))[bZ]=b1[bZ]}}if(e){bG.extend(true,b0,e)}}bG.fn.load=function(b1,b4,b5){if(typeof b1!=="string"&&bW){return bW.apply(this,arguments)}if(!this.length){return this}var e,b2,b0,bZ=this,b3=b1.indexOf(" ");if(b3>=0){e=b1.slice(b3,b1.length);b1=b1.slice(0,b3)}if(bG.isFunction(b4)){b5=b4;b4=aB}else{if(b4&&typeof b4==="object"){b2="POST"}}bG.ajax({url:b1,type:b2,dataType:"html",data:b4,complete:function(b7,b6){if(b5){bZ.each(b5,b0||[b7.responseText,b6,b7])}}}).done(function(b6){b0=arguments;bZ.html(e?bG("<div>").append(b6.replace(g,"")).find(e):b6)});return this};bG.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,bZ){bG.fn[bZ]=function(b0){return this.on(bZ,b0)}});bG.each(["get","post"],function(e,bZ){bG[bZ]=function(b0,b2,b3,b1){if(bG.isFunction(b2)){b1=b1||b3;b3=b2;b2=aB}return bG.ajax({type:bZ,url:b0,data:b2,success:b3,dataType:b1})}});bG.extend({getScript:function(e,bZ){return bG.get(e,aB,bZ,"script")},getJSON:function(e,bZ,b0){return bG.get(e,bZ,b0,"json")},ajaxSetup:function(bZ,e){if(e){t(bZ,bG.ajaxSettings)}else{e=bZ;bZ=bG.ajaxSettings}t(bZ,e);return bZ},ajaxSettings:{url:Y,isLocal:B.test(bX[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":aX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a2.String,"text html":true,"text json":bG.parseJSON,"text xml":bG.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:bI(v),ajaxTransport:bI(a6),ajax:function(b4,b1){if(typeof b4==="object"){b1=b4;b4=aB}b1=b1||{};var b7,cl,b2,cg,b9,cd,b0,cf,b8=bG.ajaxSetup({},b1),cn=b8.context||b8,cb=cn!==b8&&(cn.nodeType||cn instanceof bG)?bG(cn):bG.event,cm=bG.Deferred(),ci=bG.Callbacks("once memory"),b5=b8.statusCode||{},cc={},cj={},b3=0,b6="canceled",ce={readyState:0,setRequestHeader:function(co,cp){if(!b3){var e=co.toLowerCase();co=cj[e]=cj[e]||co;cc[co]=cp}return this},getAllResponseHeaders:function(){return b3===2?cl:null},getResponseHeader:function(co){var e;if(b3===2){if(!b2){b2={};while((e=ad.exec(cl))){b2[e[1].toLowerCase()]=e[2]}}e=b2[co.toLowerCase()]}return e===aB?null:e},overrideMimeType:function(e){if(!b3){b8.mimeType=e}return this},abort:function(e){e=e||b6;if(cg){cg.abort(e)}ca(0,e);return this}};function ca(cs,co,ct,cq){var e,cw,cu,cr,cv,cp=co;if(b3===2){return}b3=2;if(b9){clearTimeout(b9)}cg=aB;cl=cq||"";ce.readyState=cs>0?4:0;if(ct){cr=h(b8,ce,ct)}if(cs>=200&&cs<300||cs===304){if(b8.ifModified){cv=ce.getResponseHeader("Last-Modified");if(cv){bG.lastModified[b7]=cv}cv=ce.getResponseHeader("Etag");if(cv){bG.etag[b7]=cv}}if(cs===304){cp="notmodified";e=true}else{e=ae(b8,cr);cp=e.state;cw=e.data;cu=e.error;e=!cu}}else{cu=cp;if(!cp||cs){cp="error";if(cs<0){cs=0}}}ce.status=cs;ce.statusText=(co||cp)+"";if(e){cm.resolveWith(cn,[cw,cp,ce])}else{cm.rejectWith(cn,[ce,cp,cu])}ce.statusCode(b5);b5=aB;if(b0){cb.trigger("ajax"+(e?"Success":"Error"),[ce,b8,e?cw:cu])}ci.fireWith(cn,[ce,cp]);if(b0){cb.trigger("ajaxComplete",[ce,b8]);if(!(--bG.active)){bG.event.trigger("ajaxStop")}}}cm.promise(ce);ce.success=ce.done;ce.error=ce.fail;ce.complete=ci.add;ce.statusCode=function(co){if(co){var e;if(b3<2){for(e in co){b5[e]=[b5[e],co[e]]}}else{e=co[ce.status];ce.always(e)}}return this};b8.url=((b4||b8.url)+"").replace(an,"").replace(aC,bX[1]+"//");b8.dataTypes=bG.trim(b8.dataType||"*").toLowerCase().split(aV);if(b8.crossDomain==null){cd=aT.exec(b8.url.toLowerCase());b8.crossDomain=!!(cd&&(cd[1]!==bX[1]||cd[2]!==bX[2]||(cd[3]||(cd[1]==="http:"?80:443))!=(bX[3]||(bX[1]==="http:"?80:443))))}if(b8.data&&b8.processData&&typeof b8.data!=="string"){b8.data=bG.param(b8.data,b8.traditional)}q(v,b8,b1,ce);if(b3===2){return ce}b0=b8.global;b8.type=b8.type.toUpperCase();b8.hasContent=!r.test(b8.type);if(b0&&bG.active++===0){bG.event.trigger("ajaxStart")}if(!b8.hasContent){if(b8.data){b8.url+=(bN.test(b8.url)?"&":"?")+b8.data;delete b8.data}b7=b8.url;if(b8.cache===false){var bZ=bG.now(),ck=b8.url.replace(P,"$1_="+bZ);b8.url=ck+((ck===b8.url)?(bN.test(b8.url)?"&":"?")+"_="+bZ:"")}}if(b8.data&&b8.hasContent&&b8.contentType!==false||b1.contentType){ce.setRequestHeader("Content-Type",b8.contentType)}if(b8.ifModified){b7=b7||b8.url;if(bG.lastModified[b7]){ce.setRequestHeader("If-Modified-Since",bG.lastModified[b7])}if(bG.etag[b7]){ce.setRequestHeader("If-None-Match",bG.etag[b7])}}ce.setRequestHeader("Accept",b8.dataTypes[0]&&b8.accepts[b8.dataTypes[0]]?b8.accepts[b8.dataTypes[0]]+(b8.dataTypes[0]!=="*"?", "+aX+"; q=0.01":""):b8.accepts["*"]);for(cf in b8.headers){ce.setRequestHeader(cf,b8.headers[cf])}if(b8.beforeSend&&(b8.beforeSend.call(cn,ce,b8)===false||b3===2)){return ce.abort()}b6="abort";for(cf in {success:1,error:1,complete:1}){ce[cf](b8[cf])}cg=q(a6,b8,b1,ce);if(!cg){ca(-1,"No Transport")}else{ce.readyState=1;if(b0){cb.trigger("ajaxSend",[ce,b8])}if(b8.async&&b8.timeout>0){b9=setTimeout(function(){ce.abort("timeout")},b8.timeout)}try{b3=1;cg.send(cc,ca)}catch(ch){if(b3<2){ca(-1,ch)}else{throw ch}}}return ce},active:0,lastModified:{},etag:{}});function h(b7,b6,b3){var b2,b4,b1,e,bZ=b7.contents,b5=b7.dataTypes,b0=b7.responseFields;for(b4 in b0){if(b4 in b3){b6[b0[b4]]=b3[b4]}}while(b5[0]==="*"){b5.shift();if(b2===aB){b2=b7.mimeType||b6.getResponseHeader("content-type")}}if(b2){for(b4 in bZ){if(bZ[b4]&&bZ[b4].test(b2)){b5.unshift(b4);break}}}if(b5[0] in b3){b1=b5[0]}else{for(b4 in b3){if(!b5[0]||b7.converters[b4+" "+b5[0]]){b1=b4;break}if(!e){e=b4}}b1=b1||e}if(b1){if(b1!==b5[0]){b5.unshift(b1)}return b3[b1]}}function ae(b9,b1){var b7,bZ,b5,b3,b6=b9.dataTypes.slice(),b0=b6[0],b8={},b2=0;if(b9.dataFilter){b1=b9.dataFilter(b1,b9.dataType)}if(b6[1]){for(b7 in b9.converters){b8[b7.toLowerCase()]=b9.converters[b7]}}for(;(b5=b6[++b2]);){if(b5!=="*"){if(b0!=="*"&&b0!==b5){b7=b8[b0+" "+b5]||b8["* "+b5];if(!b7){for(bZ in b8){b3=bZ.split(" ");if(b3[1]===b5){b7=b8[b0+" "+b3[0]]||b8["* "+b3[0]];if(b7){if(b7===true){b7=b8[bZ]}else{if(b8[bZ]!==true){b5=b3[0];b6.splice(b2--,0,b5)}}break}}}}if(b7!==true){if(b7&&b9["throws"]){b1=b7(b1)}else{try{b1=b7(b1)}catch(b4){return{state:"parsererror",error:b7?b4:"No conversion from "+b0+" to "+b5}}}}}b0=b5}}return{state:"success",data:b1}}var bp=[],aw=/\?/,a5=/(=)\?(?=&|$)|\?\?/,bl=bG.now();bG.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=bp.pop()||(bG.expando+"_"+(bl++));this[e]=true;return e}});bG.ajaxPrefilter("json jsonp",function(b8,b3,b7){var b6,e,b5,b1=b8.data,bZ=b8.url,b0=b8.jsonp!==false,b4=b0&&a5.test(bZ),b2=b0&&!b4&&typeof b1==="string"&&!(b8.contentType||"").indexOf("application/x-www-form-urlencoded")&&a5.test(b1);if(b8.dataTypes[0]==="jsonp"||b4||b2){b6=b8.jsonpCallback=bG.isFunction(b8.jsonpCallback)?b8.jsonpCallback():b8.jsonpCallback;e=a2[b6];if(b4){b8.url=bZ.replace(a5,"$1"+b6)}else{if(b2){b8.data=b1.replace(a5,"$1"+b6)}else{if(b0){b8.url+=(aw.test(bZ)?"&":"?")+b8.jsonp+"="+b6}}}b8.converters["script json"]=function(){if(!b5){bG.error(b6+" was not called")}return b5[0]};b8.dataTypes[0]="json";a2[b6]=function(){b5=arguments};b7.always(function(){a2[b6]=e;if(b8[b6]){b8.jsonpCallback=b3.jsonpCallback;bp.push(b6)}if(b5&&bG.isFunction(e)){e(b5[0])}b5=e=aB});return"script"}});bG.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){bG.globalEval(e);return e}}});bG.ajaxPrefilter("script",function(e){if(e.cache===aB){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});bG.ajaxTransport("script",function(b0){if(b0.crossDomain){var e,bZ=o.head||o.getElementsByTagName("head")[0]||o.documentElement;return{send:function(b1,b2){e=o.createElement("script");e.async="async";if(b0.scriptCharset){e.charset=b0.scriptCharset}e.src=b0.url;e.onload=e.onreadystatechange=function(b4,b3){if(b3||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(bZ&&e.parentNode){bZ.removeChild(e)}e=aB;if(!b3){b2(200,"success")}}};bZ.insertBefore(e,bZ.firstChild)},abort:function(){if(e){e.onload(0,1)}}}}});var ah,aN=a2.ActiveXObject?function(){for(var e in ah){ah[e](0,1)}}:false,au=0;function bB(){try{return new a2.XMLHttpRequest()}catch(bZ){}}function bb(){try{return new a2.ActiveXObject("Microsoft.XMLHTTP")}catch(bZ){}}bG.ajaxSettings.xhr=a2.ActiveXObject?function(){return !this.isLocal&&bB()||bb()}:bB;(function(e){bG.extend(bG.support,{ajax:!!e,cors:!!e&&("withCredentials" in e)})})(bG.ajaxSettings.xhr());if(bG.support.ajax){bG.ajaxTransport(function(e){if(!e.crossDomain||bG.support.cors){var bZ;return{send:function(b5,b0){var b3,b2,b4=e.xhr();if(e.username){b4.open(e.type,e.url,e.async,e.username,e.password)}else{b4.open(e.type,e.url,e.async)}if(e.xhrFields){for(b2 in e.xhrFields){b4[b2]=e.xhrFields[b2]}}if(e.mimeType&&b4.overrideMimeType){b4.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!b5["X-Requested-With"]){b5["X-Requested-With"]="XMLHttpRequest"}try{for(b2 in b5){b4.setRequestHeader(b2,b5[b2])}}catch(b1){}b4.send((e.hasContent&&e.data)||null);bZ=function(ce,b8){var b9,b7,b6,cc,cb;try{if(bZ&&(b8||b4.readyState===4)){bZ=aB;if(b3){b4.onreadystatechange=bG.noop;if(aN){delete ah[b3]}}if(b8){if(b4.readyState!==4){b4.abort()}}else{b9=b4.status;b6=b4.getAllResponseHeaders();cc={};cb=b4.responseXML;if(cb&&cb.documentElement){cc.xml=cb}try{cc.text=b4.responseText}catch(cd){}try{b7=b4.statusText}catch(cd){b7=""}if(!b9&&e.isLocal&&!e.crossDomain){b9=cc.text?200:404}else{if(b9===1223){b9=204}}}}}catch(ca){if(!b8){b0(-1,ca)}}if(cc){b0(b9,b7,cc,b6)}};if(!e.async){bZ()}else{if(b4.readyState===4){setTimeout(bZ,0)}else{b3=++au;if(aN){if(!ah){ah={};bG(a2).unload(aN)}ah[b3]=bZ}b4.onreadystatechange=bZ}}},abort:function(){if(bZ){bZ(0,1)}}}}})}var L,ab,bO=/^(?:toggle|show|hide)$/,bH=new RegExp("^(?:([-+])=|)("+bx+")([a-z%]*)$","i"),bM=/queueHooks$/,ax=[i],a1={"*":[function(e,b5){var b1,b6,b7=this.createTween(e,b5),b2=bH.exec(b5),b3=b7.cur(),bZ=+b3||0,b0=1,b4=20;if(b2){b1=+b2[2];b6=b2[3]||(bG.cssNumber[e]?"":"px");if(b6!=="px"&&bZ){bZ=bG.css(b7.elem,e,true)||b1||1;do{b0=b0||".5";bZ=bZ/b0;bG.style(b7.elem,e,bZ+b6)}while(b0!==(b0=b7.cur()/b3)&&b0!==1&&--b4)}b7.unit=b6;b7.start=bZ;b7.end=b2[1]?bZ+(b2[1]+1)*b1:b1}return b7}]};function bj(){setTimeout(function(){L=aB},0);return(L=bG.now())}function bc(bZ,e){bG.each(e,function(b4,b2){var b3=(a1[b4]||[]).concat(a1["*"]),b0=0,b1=b3.length;for(;b0<b1;b0++){if(b3[b0].call(bZ,b4,b2)){return}}})}function f(b0,b4,b7){var b8,b3=0,e=0,bZ=ax.length,b6=bG.Deferred().always(function(){delete b2.elem}),b2=function(){var ce=L||bj(),cb=Math.max(0,b1.startTime+b1.duration-ce),b9=cb/b1.duration||0,cd=1-b9,ca=0,cc=b1.tweens.length;for(;ca<cc;ca++){b1.tweens[ca].run(cd)}b6.notifyWith(b0,[b1,cd,cb]);if(cd<1&&cc){return cb}else{b6.resolveWith(b0,[b1]);return false}},b1=b6.promise({elem:b0,props:bG.extend({},b4),opts:bG.extend(true,{specialEasing:{}},b7),originalProperties:b4,originalOptions:b7,startTime:L||bj(),duration:b7.duration,tweens:[],createTween:function(cc,b9,cb){var ca=bG.Tween(b0,b1.opts,cc,b9,b1.opts.specialEasing[cc]||b1.opts.easing);b1.tweens.push(ca);return ca},stop:function(ca){var b9=0,cb=ca?b1.tweens.length:0;for(;b9<cb;b9++){b1.tweens[b9].run(1)}if(ca){b6.resolveWith(b0,[b1,ca])}else{b6.rejectWith(b0,[b1,ca])}return this}}),b5=b1.props;ak(b5,b1.opts.specialEasing);for(;b3<bZ;b3++){b8=ax[b3].call(b1,b0,b5,b1.opts);if(b8){return b8}}bc(b1,b5);if(bG.isFunction(b1.opts.start)){b1.opts.start.call(b0,b1)}bG.fx.timer(bG.extend(b2,{anim:b1,queue:b1.opts.queue,elem:b0}));return b1.progress(b1.opts.progress).done(b1.opts.done,b1.opts.complete).fail(b1.opts.fail).always(b1.opts.always)}function ak(b1,b3){var b0,bZ,b4,b2,e;for(b0 in b1){bZ=bG.camelCase(b0);b4=b3[bZ];b2=b1[b0];if(bG.isArray(b2)){b4=b2[1];b2=b1[b0]=b2[0]}if(b0!==bZ){b1[bZ]=b2;delete b1[b0]}e=bG.cssHooks[bZ];if(e&&"expand" in e){b2=e.expand(b2);delete b1[bZ];for(b0 in b2){if(!(b0 in b1)){b1[b0]=b2[b0];b3[b0]=b4}}}else{b3[bZ]=b4}}}bG.Animation=bG.extend(f,{tweener:function(bZ,b2){if(bG.isFunction(bZ)){b2=bZ;bZ=["*"]}else{bZ=bZ.split(" ")}var b1,e=0,b0=bZ.length;for(;e<b0;e++){b1=bZ[e];a1[b1]=a1[b1]||[];a1[b1].unshift(b2)}},prefilter:function(bZ,e){if(e){ax.unshift(bZ)}else{ax.push(bZ)}}});function i(b2,b8,e){var b7,b0,ca,b1,ce,b4,cd,cc,cb,b3=this,bZ=b2.style,b9={},b6=[],b5=b2.nodeType&&Q(b2);if(!e.queue){cc=bG._queueHooks(b2,"fx");if(cc.unqueued==null){cc.unqueued=0;cb=cc.empty.fire;cc.empty.fire=function(){if(!cc.unqueued){cb()}}}cc.unqueued++;b3.always(function(){b3.always(function(){cc.unqueued--;if(!bG.queue(b2,"fx").length){cc.empty.fire()}})})}if(b2.nodeType===1&&("height" in b8||"width" in b8)){e.overflow=[bZ.overflow,bZ.overflowX,bZ.overflowY];if(bG.css(b2,"display")==="inline"&&bG.css(b2,"float")==="none"){if(!bG.support.inlineBlockNeedsLayout||bC(b2.nodeName)==="inline"){bZ.display="inline-block"}else{bZ.zoom=1}}}if(e.overflow){bZ.overflow="hidden";if(!bG.support.shrinkWrapBlocks){b3.done(function(){bZ.overflow=e.overflow[0];bZ.overflowX=e.overflow[1];bZ.overflowY=e.overflow[2]})}}for(b7 in b8){ca=b8[b7];if(bO.exec(ca)){delete b8[b7];b4=b4||ca==="toggle";if(ca===(b5?"hide":"show")){continue}b6.push(b7)}}b1=b6.length;if(b1){ce=bG._data(b2,"fxshow")||bG._data(b2,"fxshow",{});if("hidden" in ce){b5=ce.hidden}if(b4){ce.hidden=!b5}if(b5){bG(b2).show()}else{b3.done(function(){bG(b2).hide()})}b3.done(function(){var cf;bG.removeData(b2,"fxshow",true);for(cf in b9){bG.style(b2,cf,b9[cf])}});for(b7=0;b7<b1;b7++){b0=b6[b7];cd=b3.createTween(b0,b5?ce[b0]:0);b9[b0]=ce[b0]||bG.style(b2,b0);if(!(b0 in ce)){ce[b0]=cd.start;if(b5){cd.end=cd.start;cd.start=b0==="width"||b0==="height"?1:0}}}}}function H(b0,bZ,b2,e,b1){return new H.prototype.init(b0,bZ,b2,e,b1)}bG.Tween=H;H.prototype={constructor:H,init:function(b1,bZ,b3,e,b2,b0){this.elem=b1;this.prop=b3;this.easing=b2||"swing";this.options=bZ;this.start=this.now=this.cur();this.end=e;this.unit=b0||(bG.cssNumber[b3]?"":"px")},cur:function(){var e=H.propHooks[this.prop];return e&&e.get?e.get(this):H.propHooks._default.get(this)},run:function(b0){var bZ,e=H.propHooks[this.prop];if(this.options.duration){this.pos=bZ=bG.easing[this.easing](b0,this.options.duration*b0,0,1,this.options.duration)}else{this.pos=bZ=b0}this.now=(this.end-this.start)*bZ+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(e&&e.set){e.set(this)}else{H.propHooks._default.set(this)}return this}};H.prototype.init.prototype=H.prototype;H.propHooks={_default:{get:function(bZ){var e;if(bZ.elem[bZ.prop]!=null&&(!bZ.elem.style||bZ.elem.style[bZ.prop]==null)){return bZ.elem[bZ.prop]}e=bG.css(bZ.elem,bZ.prop,false,"");return !e||e==="auto"?0:e},set:function(e){if(bG.fx.step[e.prop]){bG.fx.step[e.prop](e)}else{if(e.elem.style&&(e.elem.style[bG.cssProps[e.prop]]!=null||bG.cssHooks[e.prop])){bG.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}}};H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};bG.each(["toggle","show","hide"],function(bZ,e){var b0=bG.fn[e];bG.fn[e]=function(b1,b3,b2){return b1==null||typeof b1==="boolean"||(!bZ&&bG.isFunction(b1)&&bG.isFunction(b3))?b0.apply(this,arguments):this.animate(bF(e,true),b1,b3,b2)}});bG.fn.extend({fadeTo:function(e,b1,b0,bZ){return this.filter(Q).css("opacity",0).show().end().animate({opacity:b1},e,b0,bZ)},animate:function(b4,b1,b3,b2){var b0=bG.isEmptyObject(b4),e=bG.speed(b1,b3,b2),bZ=function(){var b5=f(this,bG.extend({},b4),e);if(b0){b5.stop(true)}};return b0||e.queue===false?this.each(bZ):this.queue(e.queue,bZ)},stop:function(b0,bZ,e){var b1=function(b2){var b3=b2.stop;delete b2.stop;b3(e)};if(typeof b0!=="string"){e=bZ;bZ=b0;b0=aB}if(bZ&&b0!==false){this.queue(b0||"fx",[])}return this.each(function(){var b5=true,b2=b0!=null&&b0+"queueHooks",b4=bG.timers,b3=bG._data(this);if(b2){if(b3[b2]&&b3[b2].stop){b1(b3[b2])}}else{for(b2 in b3){if(b3[b2]&&b3[b2].stop&&bM.test(b2)){b1(b3[b2])}}}for(b2=b4.length;b2--;){if(b4[b2].elem===this&&(b0==null||b4[b2].queue===b0)){b4[b2].anim.stop(e);b5=false;b4.splice(b2,1)}}if(b5||!e){bG.dequeue(this,b0)}})}});function bF(b0,b2){var b1,e={height:b0},bZ=0;b2=b2?1:0;for(;bZ<4;bZ+=2-b2){b1=bQ[bZ];e["margin"+b1]=e["padding"+b1]=b0}if(b2){e.opacity=e.width=b0}return e}bG.each({slideDown:bF("show"),slideUp:bF("hide"),slideToggle:bF("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,bZ){bG.fn[e]=function(b0,b2,b1){return this.animate(bZ,b0,b2,b1)}});bG.speed=function(b0,b1,bZ){var e=b0&&typeof b0==="object"?bG.extend({},b0):{complete:bZ||!bZ&&b1||bG.isFunction(b0)&&b0,duration:b0,easing:bZ&&b1||b1&&!bG.isFunction(b1)&&b1};e.duration=bG.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in bG.fx.speeds?bG.fx.speeds[e.duration]:bG.fx.speeds._default;if(e.queue==null||e.queue===true){e.queue="fx"}e.old=e.complete;e.complete=function(){if(bG.isFunction(e.old)){e.old.call(this)}if(e.queue){bG.dequeue(this,e.queue)}};return e};bG.easing={linear:function(e){return e},swing:function(e){return 0.5-Math.cos(e*Math.PI)/2}};bG.timers=[];bG.fx=H.prototype.init;bG.fx.tick=function(){var b0,bZ=bG.timers,e=0;L=bG.now();for(;e<bZ.length;e++){b0=bZ[e];if(!b0()&&bZ[e]===b0){bZ.splice(e--,1)}}if(!bZ.length){bG.fx.stop()}L=aB};bG.fx.timer=function(e){if(e()&&bG.timers.push(e)&&!ab){ab=setInterval(bG.fx.tick,bG.fx.interval)}};bG.fx.interval=13;bG.fx.stop=function(){clearInterval(ab);ab=null};bG.fx.speeds={slow:600,fast:200,_default:400};bG.fx.step={};if(bG.expr&&bG.expr.filters){bG.expr.filters.animated=function(e){return bG.grep(bG.timers,function(bZ){return e===bZ.elem}).length}}var bm=/^(?:body|html)$/i;bG.fn.offset=function(b8){if(arguments.length){return b8===aB?this:this.each(function(b9){bG.offset.setOffset(this,b8,b9)})}var bZ,b4,b5,b2,b6,e,b1,b3={top:0,left:0},b0=this[0],b7=b0&&b0.ownerDocument;if(!b7){return}if((b4=b7.body)===b0){return bG.offset.bodyOffset(b0)}bZ=b7.documentElement;if(!bG.contains(bZ,b0)){return b3}if(typeof b0.getBoundingClientRect!=="undefined"){b3=b0.getBoundingClientRect()}b5=bn(b7);b2=bZ.clientTop||b4.clientTop||0;b6=bZ.clientLeft||b4.clientLeft||0;e=b5.pageYOffset||bZ.scrollTop;b1=b5.pageXOffset||bZ.scrollLeft;return{top:b3.top+e-b2,left:b3.left+b1-b6}};bG.offset={bodyOffset:function(e){var b0=e.offsetTop,bZ=e.offsetLeft;if(bG.support.doesNotIncludeMarginInBodyOffset){b0+=parseFloat(bG.css(e,"marginTop"))||0;bZ+=parseFloat(bG.css(e,"marginLeft"))||0}return{top:b0,left:bZ}},setOffset:function(b1,ca,b4){var b5=bG.css(b1,"position");if(b5==="static"){b1.style.position="relative"}var b3=bG(b1),bZ=b3.offset(),e=bG.css(b1,"top"),b8=bG.css(b1,"left"),b9=(b5==="absolute"||b5==="fixed")&&bG.inArray("auto",[e,b8])>-1,b7={},b6={},b0,b2;if(b9){b6=b3.position();b0=b6.top;b2=b6.left}else{b0=parseFloat(e)||0;b2=parseFloat(b8)||0}if(bG.isFunction(ca)){ca=ca.call(b1,b4,bZ)}if(ca.top!=null){b7.top=(ca.top-bZ.top)+b0}if(ca.left!=null){b7.left=(ca.left-bZ.left)+b2}if("using" in ca){ca.using.call(b1,b7)}else{b3.css(b7)}}};bG.fn.extend({position:function(){if(!this[0]){return}var b0=this[0],bZ=this.offsetParent(),b1=this.offset(),e=bm.test(bZ[0].nodeName)?{top:0,left:0}:bZ.offset();b1.top-=parseFloat(bG.css(b0,"marginTop"))||0;b1.left-=parseFloat(bG.css(b0,"marginLeft"))||0;e.top+=parseFloat(bG.css(bZ[0],"borderTopWidth"))||0;e.left+=parseFloat(bG.css(bZ[0],"borderLeftWidth"))||0;return{top:b1.top-e.top,left:b1.left-e.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.body;while(e&&(!bm.test(e.nodeName)&&bG.css(e,"position")==="static")){e=e.offsetParent}return e||o.body})}});bG.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b0,bZ){var e=/Y/.test(bZ);bG.fn[b0]=function(b1){return bG.access(this,function(b2,b5,b4){var b3=bn(b2);if(b4===aB){return b3?(bZ in b3)?b3[bZ]:b3.document.documentElement[b5]:b2[b5]}if(b3){b3.scrollTo(!e?b4:bG(b3).scrollLeft(),e?b4:bG(b3).scrollTop())}else{b2[b5]=b4}},b0,b1,arguments.length,null)}});function bn(e){return bG.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}bG.each({Height:"height",Width:"width"},function(e,bZ){bG.each({padding:"inner"+e,content:bZ,"":"outer"+e},function(b0,b1){bG.fn[b1]=function(b5,b4){var b3=arguments.length&&(b0||typeof b5!=="boolean"),b2=b0||(b5===true||b4===true?"margin":"border");return bG.access(this,function(b7,b6,b8){var b9;if(bG.isWindow(b7)){return b7.document.documentElement["client"+e]}if(b7.nodeType===9){b9=b7.documentElement;return Math.max(b7.body["scroll"+e],b9["scroll"+e],b7.body["offset"+e],b9["offset"+e],b9["client"+e])}return b8===aB?bG.css(b7,b6,b8,b2):bG.style(b7,b6,b8,b2)},bZ,b3?b5:aB,b3,null)}})});a2.jQuery=a2.$=bG;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return bG})}})(window);jQuery.noConflict();
/*!
* Parsleyjs
* Guillaume Potier - <guillaume@wisembly.com>
* Version 2.0.0-rc5 - built Sat Mar 29 2014 20:19:11
* MIT Licensed
*
*/
!(function(k){var f={attr:function(o,q,t){var s,u={},r=new RegExp("^"+q,"i");if("undefined"===typeof o||"undefined"===typeof o[0]){return{}}for(var p in o[0].attributes){s=o[0].attributes[p];if("undefined"!==typeof s&&null!==s&&s.specified&&r.test(s.name)){if("undefined"!==typeof t&&new RegExp(t+"$","i").test(s.name)){return true}u[this.camelize(s.name.replace(q,""))]=this.deserializeValue(s.value)}}return"undefined"===typeof t?u:false},setAttr:function(p,q,o,r){p[0].setAttribute(this.dasherize(q+o),String(r))},get:function(q,p){var o=0,r=(p||"").split(".");while(this.isObject(q)||this.isArray(q)){q=q[r[o++]];if(o===r.length){return q}}return undefined},hash:function(o){return String(Math.random()).substring(2,o?o+2:9)},isArray:function(o){return Object.prototype.toString.call(o)==="[object Array]"},isObject:function(o){return o===Object(o)},deserializeValue:function(p){var o;try{return p?p=="true"||(p=="false"?false:p=="null"?null:!isNaN(o=Number(p))?o:/^[\[\{]/.test(p)?k.parseJSON(p):p):p}catch(q){return p}},camelize:function(o){return o.replace(/-+(.)?/g,function(p,q){return q?q.toUpperCase():""})},dasherize:function(o){return o.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}};var j={namespace:"data-parsley-",inputs:"input, textarea, select",excluded:"input[type=button], input[type=submit], input[type=reset], input[type=hidden]",priorityEnabled:true,uiEnabled:true,validationThreshold:3,focus:"first",trigger:false,errorClass:"parsley-error",successClass:"parsley-success",classHandler:function(o){},errorsContainer:function(o){},errorsWrapper:'<ul class="parsley-errors-list"></ul>',errorTemplate:"<li></li>"};var b=function(){};b.prototype={asyncSupport:false,actualizeOptions:function(){this.options=this.parsleyInstance.OptionsFactory.get(this);return this},validateThroughValidator:function(p,q,o){return window.ParsleyValidator.validate.apply(window.ParsleyValidator,[p,q,o])},subscribe:function(o,p){k.listenTo(this,o.toLowerCase(),p);return this},unsubscribe:function(o){k.unsubscribeTo(this,o.toLowerCase());return this},reset:function(){if("ParsleyForm"!==this.__class__){return k.emit("parsley:field:reset",this)}for(var o=0;o<this.fields.length;o++){k.emit("parsley:field:reset",this.fields[o])}k.emit("parsley:form:reset",this)},destroy:function(){if("ParsleyForm"!==this.__class__){k.emit("parsley:field:destroy",this);this.$element.removeData("Parsley");return}for(var o=0;o<this.fields.length;o++){this.fields[o].destroy()}k.emit("parsley:form:destroy",this);this.$element.removeData("Parsley")}};
/*!
* validator.js
* Guillaume Potier - <guillaume@wisembly.com>
* Version 0.5.8 - built Sun Mar 16 2014 17:18:21
* MIT Licensed
*
*/
(function(q){var s=function(w){this.__class__="Validator";this.__version__="0.5.8";this.options=w||{};this.bindingKey=this.options.bindingKey||"_validatorjsConstraint";return this};s.prototype={constructor:s,validate:function(w,x,y){if("string"!==typeof w&&"object"!==typeof w){throw new Error("You must validate an object or a string")}if("string"===typeof w||o(w)){return this._validateString(w,x,y)}if(this.isBinded(w)){return this._validateBindedObject(w,x)}return this._validateObject(w,x,y)},bind:function(w,x){if("object"!==typeof w){throw new Error("Must bind a Constraint to an object")}w[this.bindingKey]=new r(x);return this},unbind:function(w){if("undefined"===typeof w._validatorjsConstraint){return this}delete w[this.bindingKey];return this},isBinded:function(w){return"undefined"!==typeof w[this.bindingKey]},getBinded:function(w){return this.isBinded(w)?w[this.bindingKey]:null},_validateString:function(y,x,B){var w,A=[];if(!o(x)){x=[x]}for(var z=0;z<x.length;z++){if(!(x[z] instanceof v)){throw new Error("You must give an Assert or an Asserts array to validate a string")}w=x[z].check(y,B);if(w instanceof p){A.push(w)}}return A.length?A:true},_validateObject:function(w,y,x){if("object"!==typeof y){throw new Error("You must give a constraint to validate an object")}if(y instanceof r){return y.check(w,x)}return new r(y).check(w,x)},_validateBindedObject:function(w,x){return w[this.bindingKey].check(w,x)}};s.errorCode={must_be_a_string:"must_be_a_string",must_be_an_array:"must_be_an_array",must_be_a_number:"must_be_a_number",must_be_a_string_or_array:"must_be_a_string_or_array"};var r=function(y,w){this.__class__="Constraint";this.options=w||{};this.nodes={};if(y){try{this._bootstrap(y)}catch(x){throw new Error("Should give a valid mapping object to Constraint",x,y)}}return this};r.prototype={constructor:r,check:function(y,B){var w,z={};for(var A in this.options.strict?this.nodes:y){if(this.options.strict?this.has(A,y):this.has(A)){w=this._check(A,y[A],B);if((o(w)&&w.length>0)||(!o(w)&&!t(w))){z[A]=w}}else{if(this.options.strict){try{new v().HaveProperty(A).validate(y)}catch(x){z[A]=x}}}}return t(z)?true:z},add:function(x,w){if(w instanceof v||(o(w)&&w[0] instanceof v)){this.nodes[x]=w;return this}if("object"===typeof w&&!o(w)){this.nodes[x]=w instanceof r?w:new r(w);return this}throw new Error("Should give an Assert, an Asserts array, a Constraint",w)},has:function(x,w){w="undefined"!==typeof w?w:this.nodes;return"undefined"!==typeof w[x]},get:function(w,x){return this.has(w)?this.nodes[w]:x||null},remove:function(x){var y=[];for(var w in this.nodes){if(w!==x){y[w]=this.nodes[w]}}this.nodes=y;return this},_bootstrap:function(x){if(x instanceof r){return this.nodes=x.nodes}for(var w in x){this.add(w,x[w])}},_check:function(w,x,y){if(this.nodes[w] instanceof v){return this._checkAsserts(x,[this.nodes[w]],y)}if(o(this.nodes[w])){return this._checkAsserts(x,this.nodes[w],y)}if(this.nodes[w] instanceof r){return this.nodes[w].check(x,y)}throw new Error("Invalid node",this.nodes[w])},_checkAsserts:function(z,B,A){var w,y=[];for(var x=0;x<B.length;x++){w=B[x].check(z,A);if("undefined"!==typeof w&&true!==w){y.push(w)}}return y}};var p=function(w,y,x){this.__class__="Violation";if(!(w instanceof v)){throw new Error("Should give an assertion implementing the Assert interface")}this.assert=w;this.value=y;if("undefined"!==typeof x){this.violation=x}};p.prototype={show:function(){var w={assert:this.assert.__class__,value:this.value};if(this.violation){w.violation=this.violation}return w},__toString:function(){if("undefined"!==typeof this.violation){this.violation='", '+this.getViolation().constraint+" expected was "+this.getViolation().expected}return this.assert.__class__+' assert failed for "'+this.value+this.violation||""},getViolation:function(){var x,w;for(x in this.violation){w=this.violation[x]}return{constraint:x,expected:w}}};var v=function(w){this.__class__="Assert";this.__parentClass__=this.__class__;this.groups=[];if("undefined"!==typeof w){this.addGroup(w)}return this};v.prototype={construct:v,check:function(x,y){if(y&&!this.hasGroup(y)){return}if(!y&&this.hasGroups()){return}try{return this.validate(x,y)}catch(w){return w}},hasGroup:function(w){if(o(w)){return this.hasOneOf(w)}if("Any"===w){return true}if(!this.hasGroups()){return"Default"===w}return -1!==this.groups.indexOf(w)},hasOneOf:function(w){for(var x=0;x<w.length;x++){if(this.hasGroup(w[x])){return true}}return false},hasGroups:function(){return this.groups.length>0},addGroup:function(w){if(o(w)){return this.addGroups(w)}if(!this.hasGroup(w)){this.groups.push(w)}return this},removeGroup:function(y){var x=[];for(var w=0;w<this.groups.length;w++){if(y!==this.groups[w]){x.push(this.groups[w])}}this.groups=x;return this},addGroups:function(w){for(var x=0;x<w.length;x++){this.addGroup(w[x])}return this},HaveProperty:function(w){this.__class__="HaveProperty";this.node=w;this.validate=function(x){if("undefined"===typeof x[this.node]){throw new p(this,x,{value:this.node})}return true};return this},Blank:function(){this.__class__="Blank";this.validate=function(w){if("string"!==typeof w){throw new p(this,w,{value:s.errorCode.must_be_a_string})}if(""!==w.replace(/^\s+/g,"").replace(/\s+$/g,"")){throw new p(this,w)}return true};return this},Callback:function(w){this.__class__="Callback";this.arguments=Array.prototype.slice.call(arguments);if(1===this.arguments.length){this.arguments=[]}else{this.arguments.splice(0,1)}if("function"!==typeof w){throw new Error("Callback must be instanciated with a function")}this.fn=w;this.validate=function(y){var x=this.fn.apply(this,[y].concat(this.arguments));if(true!==x){throw new p(this,y,{result:x})}return true};return this},Choice:function(w){this.__class__="Choice";if(!o(w)&&"function"!==typeof w){throw new Error("Choice must be instanciated with an array or a function")}this.list=w;this.validate=function(z){var y="function"===typeof this.list?this.list():this.list;for(var x=0;x<y.length;x++){if(z===y[x]){return true}}throw new p(this,z,{choices:y})};return this},Collection:function(w){this.__class__="Collection";this.constraint="undefined"!==typeof w?new r(w):false;this.validate=function(E,D){var y,A=new s(),C=0,B={},x=this.groups.length?this.groups:D;if(!o(E)){throw new p(this,array,{value:s.errorCode.must_be_an_array})}for(var z=0;z<E.length;z++){y=this.constraint?A.validate(E[z],this.constraint,x):A.validate(E[z],x);if(!t(y)){B[C]=y}C++}return !t(B)?B:true};return this},Count:function(w){this.__class__="Count";this.count=w;this.validate=function(y){if(!o(y)){throw new p(this,y,{value:s.errorCode.must_be_an_array})}var x="function"===typeof this.count?this.count(y):this.count;if(isNaN(Number(x))){throw new Error("Count must be a valid interger",x)}if(x!==y.length){throw new p(this,y,{count:x})}return true};return this},Email:function(){this.__class__="Email";this.validate=function(x){var w=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;if("string"!==typeof x){throw new p(this,x,{value:s.errorCode.must_be_a_string})}if(!w.test(x)){throw new p(this,x)}return true};return this},Eql:function(w){this.__class__="Eql";if("undefined"===typeof w){throw new Error("Equal must be instanciated with an Array or an Object")}this.eql=w;this.validate=function(x){var y="function"===typeof this.eql?this.eql(x):this.eql;if(!u.eql(y,x)){throw new p(this,x,{eql:y})}return true};return this},EqualTo:function(w){this.__class__="EqualTo";if("undefined"===typeof w){throw new Error("EqualTo must be instanciated with a value or a function")}this.reference=w;this.validate=function(y){var x="function"===typeof this.reference?this.reference(y):this.reference;if(x!==y){throw new p(this,y,{value:x})}return true};return this},GreaterThan:function(w){this.__class__="GreaterThan";if("undefined"===typeof w){throw new Error("Should give a threshold value")}this.threshold=w;this.validate=function(x){if(""===x||isNaN(Number(x))){throw new p(this,x,{value:s.errorCode.must_be_a_number})}if(this.threshold>=x){throw new p(this,x,{threshold:this.threshold})}return true};return this},GreaterThanOrEqual:function(w){this.__class__="GreaterThanOrEqual";if("undefined"===typeof w){throw new Error("Should give a threshold value")}this.threshold=w;this.validate=function(x){if(""===x||isNaN(Number(x))){throw new p(this,x,{value:s.errorCode.must_be_a_number})}if(this.threshold>x){throw new p(this,x,{threshold:this.threshold})}return true};return this},InstanceOf:function(w){this.__class__="InstanceOf";if("undefined"===typeof w){throw new Error("InstanceOf must be instanciated with a value")}this.classRef=w;this.validate=function(x){if(true!==(x instanceof this.classRef)){throw new p(this,x,{classRef:this.classRef})}return true};return this},IPv4:function(){this.__class__="IPv4";this.validate=function(x){var w=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;if("string"!==typeof x){throw new p(this,x,{value:s.errorCode.must_be_a_string})}if(!w.test(x)){throw new p(this,x)}return true};return this},Length:function(w){this.__class__="Length";if(!w.min&&!w.max){throw new Error("Lenth assert must be instanciated with a { min: x, max: y } object")}this.min=w.min;this.max=w.max;this.validate=function(x){if("string"!==typeof x&&!o(x)){throw new p(this,x,{value:s.errorCode.must_be_a_string_or_array})}if("undefined"!==typeof this.min&&this.min===this.max&&x.length!==this.min){throw new p(this,x,{min:this.min,max:this.max})}if("undefined"!==typeof this.max&&x.length>this.max){throw new p(this,x,{max:this.max})}if("undefined"!==typeof this.min&&x.length<this.min){throw new p(this,x,{min:this.min})}return true};return this},LessThan:function(w){this.__class__="LessThan";if("undefined"===typeof w){throw new Error("Should give a threshold value")}this.threshold=w;this.validate=function(x){if(""===x||isNaN(Number(x))){throw new p(this,x,{value:s.errorCode.must_be_a_number})}if(this.threshold<=x){throw new p(this,x,{threshold:this.threshold})}return true};return this},LessThanOrEqual:function(w){this.__class__="LessThanOrEqual";if("undefined"===typeof w){throw new Error("Should give a threshold value")}this.threshold=w;this.validate=function(x){if(""===x||isNaN(Number(x))){throw new p(this,x,{value:s.errorCode.must_be_a_number})}if(this.threshold<x){throw new p(this,x,{threshold:this.threshold})}return true};return this},Mac:function(){this.__class__="Mac";this.validate=function(x){var w=/^(?:[0-9A-F]{2}:){5}[0-9A-F]{2}$/i;if("string"!==typeof x){throw new p(this,x,{value:s.errorCode.must_be_a_string})}if(!w.test(x)){throw new p(this,x)}return true};return this},NotNull:function(){this.__class__="NotNull";this.validate=function(w){if(null===w||"undefined"===typeof w){throw new p(this,w)}return true};return this},NotBlank:function(){this.__class__="NotBlank";this.validate=function(w){if("string"!==typeof w){throw new p(this,w,{value:s.errorCode.must_be_a_string})}if(""===w.replace(/^\s+/g,"").replace(/\s+$/g,"")){throw new p(this,w)}return true};return this},Null:function(){this.__class__="Null";this.validate=function(w){if(null!==w){throw new p(this,w)}return true};return this},Range:function(x,w){this.__class__="Range";if("undefined"===typeof x||"undefined"===typeof w){throw new Error("Range assert expects min and max values")}this.min=x;this.max=w;this.validate=function(z){try{if(("string"===typeof z&&isNaN(Number(z)))||o(z)){new v().Length({min:this.min,max:this.max}).validate(z)}else{new v().GreaterThanOrEqual(this.min).validate(z)&&new v().LessThanOrEqual(this.max).validate(z)}return true}catch(y){throw new p(this,z,y.violation)}return true};return this},Regexp:function(x,w){this.__class__="Regexp";if("undefined"===typeof x){throw new Error("You must give a regexp")}this.regexp=x;this.flag=w||"";this.validate=function(y){if("string"!==typeof y){throw new p(this,y,{value:s.errorCode.must_be_a_string})}if(!new RegExp(this.regexp,this.flag).test(y)){throw new p(this,y,{regexp:this.regexp,flag:this.flag})}return true};return this},Required:function(){this.__class__="Required";this.validate=function(x){if("undefined"===typeof x){throw new p(this,x)}try{if("string"===typeof x){new v().NotNull().validate(x)&&new v().NotBlank().validate(x)}else{if(true===o(x)){new v().Length({min:1}).validate(x)}}}catch(w){throw new p(this,x)}return true};return this},Unique:function(w){this.__class__="Unique";if("object"===typeof w){this.key=w.key}this.validate=function(A){var z,x=[];if(!o(A)){throw new p(this,A,{value:s.errorCode.must_be_an_array})}for(var y=0;y<A.length;y++){z="object"===typeof A[y]?A[y][this.key]:A[y];if("undefined"===typeof z){continue}if(-1!==x.indexOf(z)){throw new p(this,A,{value:z})}x.push(z)}return true};return this}};q.Assert=v;q.Validator=s;q.Violation=p;q.Constraint=r;if(!Array.prototype.indexOf){Array.prototype.indexOf=function(y){if(this===null){throw new TypeError()}var z=Object(this);var w=z.length>>>0;if(w===0){return -1}var A=0;if(arguments.length>1){A=Number(arguments[1]);if(A!=A){A=0}else{if(A!==0&&A!=Infinity&&A!=-Infinity){A=(A>0||-1)*Math.floor(Math.abs(A))}}}if(A>=w){return -1}var x=A>=0?A:Math.max(w-Math.abs(A),0);for(;x<w;x++){if(x in z&&z[x]===y){return x}}return -1}}var t=function(x){for(var w in x){return false}return true};var o=function(w){return Object.prototype.toString.call(w)==="[object Array]"};var u={eql:function(y,x){if(y===x){return true}else{if("undefined"!==typeof Buffer&&Buffer.isBuffer(y)&&Buffer.isBuffer(x)){if(y.length!==x.length){return false}for(var w=0;w<y.length;w++){if(y[w]!==x[w]){return false}}return true}else{if(y instanceof Date&&x instanceof Date){return y.getTime()===x.getTime()}else{if(typeof y!=="object"&&typeof x!=="object"){return y==x}else{return this.objEquiv(y,x)}}}}},isUndefinedOrNull:function(w){return w===null||typeof w==="undefined"},isArguments:function(w){return Object.prototype.toString.call(w)=="[object Arguments]"},keys:function(y){if(Object.keys){return Object.keys(y)}var x=[];for(var w in y){if(Object.prototype.hasOwnProperty.call(y,w)){x.push(w)}}return x},objEquiv:function(x,w){if(this.isUndefinedOrNull(x)||this.isUndefinedOrNull(w)){return false}if(x.prototype!==w.prototype){return false}if(this.isArguments(x)){if(!this.isArguments(w)){return false}return eql(pSlice.call(x),pSlice.call(w))}try{var B=this.keys(x),A=this.keys(w),z,y;if(B.length!==A.length){return false}B.sort();A.sort();for(y=B.length-1;y>=0;y--){if(B[y]!=A[y]){return false}}for(y=B.length-1;y>=0;y--){z=B[y];if(!this.eql(x[z],w[z])){return false}}return true}catch(C){return false}}};if("function"===typeof define&&define.amd){define("validator",[],function(){return q})}})("undefined"===typeof exports?this["undefined"!==typeof validatorjs_ns?validatorjs_ns:"Validator"]={}:exports);var h=function(p,o){this.__class__="ParsleyValidator";this.Validator=Validator;this.locale="en";this.init(p||{},o||{})};h.prototype={init:function(p,o){this.catalog=o;for(var q in p){this.addValidator(q,p[q].fn,p[q].priority)}k.emit("parsley:validator:init")},setLocale:function(o){if("undefined"===typeof this.catalog[o]){throw new Error(o+" is not available in the catalog")}this.locale=o;return this},addCatalog:function(o,p,q){if("object"===typeof p){this.catalog[o]=p}if(true===q){return this.setLocale(o)}return this},addMessage:function(o,p,q){if(undefined===typeof this.catalog[o]){this.catalog[o]={}}this.catalog[o][p.toLowerCase()]=q;return this},validate:function(p,q,o){return new this.Validator.Validator().validate.apply(new Validator.Validator(),arguments)},addValidator:function(o,q,p){this.validators[o.toLowerCase()]=function(r){return k.extend(new Validator.Assert().Callback(q,r),{priority:p})};return this},updateValidator:function(o,q,p){return addValidator(o,q,p)},removeValidator:function(o){delete this.validators[o];return this},getErrorMessage:function(p){var o;if("type"===p.name){o=this.catalog[this.locale][p.name][p.requirements]}else{o=this.formatMesssage(this.catalog[this.locale][p.name],p.requirements)}return""!==o?o:this.catalog[this.locale].defaultMessage},formatMesssage:function(o,q){if("object"===typeof q){for(var p in q){o=this.formatMesssage(o,q[p])}return o}return"string"===typeof o?o.replace(new RegExp("%s","i"),q):""},validators:{notblank:function(){return k.extend(new Validator.Assert().NotBlank(),{priority:2})},required:function(){return k.extend(new Validator.Assert().Required(),{priority:512})},type:function(p){var o;switch(p){case"email":o=new Validator.Assert().Email();break;case"number":o=new Validator.Assert().Regexp("^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$");break;case"integer":o=new Validator.Assert().Regexp("^-?\\d+$");break;case"digits":o=new Validator.Assert().Regexp("^\\d+$");break;case"alphanum":o=new Validator.Assert().Regexp("^\\w+$","i");break;case"url":o=new Validator.Assert().Regexp("(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,4}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)","i");break;default:throw new Error("validator type `"+p+"` is not supported")}return k.extend(o,{priority:256})},pattern:function(p){var o="";if(!!(/^\/.*\/(?:[gimy]*)$/.test(p))){o=p.replace(/.*\/([gimy]*)$/,"$1");p=p.replace(new RegExp("^/(.*?)/"+o+"$"),"$1")}return k.extend(new Validator.Assert().Regexp(p,o),{priority:64})},minlength:function(o){return k.extend(new Validator.Assert().Length({min:o}),{priority:30,requirementsTransformer:function(){return"string"===typeof o&&!isNaN(o)?parseInt(o,10):o}})},maxlength:function(o){return k.extend(new Validator.Assert().Length({max:o}),{priority:30,requirementsTransformer:function(){return"string"===typeof o&&!isNaN(o)?parseInt(o,10):o}})},length:function(o){return k.extend(new Validator.Assert().Length({min:o[0],max:o[1]}),{priority:32})},mincheck:function(o){return this.minlength(o)},maxcheck:function(o){return this.maxlength(o)},check:function(o){return this.length(o)},min:function(o){return k.extend(new Validator.Assert().GreaterThanOrEqual(o),{priority:30,requirementsTransformer:function(){return"string"===typeof o&&!isNaN(o)?parseInt(o,10):o}})},max:function(o){return k.extend(new Validator.Assert().LessThanOrEqual(o),{priority:30,requirementsTransformer:function(){return"string"===typeof o&&!isNaN(o)?parseInt(o,10):o}})},range:function(o){return k.extend(new Validator.Assert().Range(o[0],o[1]),{priority:32,requirementsTransformer:function(){for(var p=0;p<o.length;p++){o[p]="string"===typeof o[p]&&!isNaN(o[p])?parseInt(o[p],10):o[p]}return o}})},equalto:function(o){return k.extend(new Validator.Assert().EqualTo(o),{priority:256,requirementsTransformer:function(){return k(o).length?k(o).val():o}})}}};var g=function(o){this.__class__="ParsleyUI"};g.prototype={listen:function(){k.listen("parsley:form:init",this,this.setupForm);k.listen("parsley:field:init",this,this.setupField);k.listen("parsley:field:validated",this,this.reflow);k.listen("parsley:form:validated",this,this.focus);k.listen("parsley:field:reset",this,this.reset);k.listen("parsley:form:destroy",this,this.destroy);k.listen("parsley:field:destroy",this,this.destroy);return this},reflow:function(o){if("undefined"===typeof o._ui||false===o._ui.active){return}var p=this._diff(o.validationResult,o._ui.lastValidationResult);o._ui.lastValidationResult=o.validationResult;o._ui.validatedOnce=true;this.manageStatusClass(o);this.manageErrorsMessages(o,p);this.actualizeTriggers(o);if((p.kept.length||p.added.length)&&"undefined"===typeof o._ui.failedOnce){this.manageFailingFieldTrigger(o)}},manageStatusClass:function(o){if(true===o.validationResult){this._successClass(o)}else{if(o.validationResult.length>0){this._errorClass(o)}else{this._resetClass(o)}}},manageErrorsMessages:function(o,q){if("undefined"!==typeof o.options.errorsMessagesDisabled){return}if("undefined"!==typeof o.options.errorMessage){if((q.added.length||q.kept.length)){if(0===o._ui.$errorsWrapper.find(".parsley-custom-error-message").length){o._ui.$errorsWrapper.append(k(o.options.errorTemplate).addClass("parsley-custom-error-message"))}o._ui.$errorsWrapper.addClass("filled").find(".parsley-custom-error-message").html(o.options.errorMessage)}else{o._ui.$errorsWrapper.removeClass("filled").find(".parsley-custom-error-message").remove()}return}for(var p=0;p<q.removed.length;p++){this.removeError(o,q.removed[p].assert.name,true)}for(p=0;p<q.added.length;p++){this.addError(o,q.added[p].assert.name,undefined,q.added[p].assert,true)}for(p=0;p<q.kept.length;p++){this.updateError(o,q.kept[p].assert.name,undefined,q.kept[p].assert,true)}},addError:function(p,q,r,o,s){p._ui.$errorsWrapper.addClass("filled").append(k(p.options.errorTemplate).addClass("parsley-"+q).html(r||this._getErrorMessage(p,o)));if(true!==s){this._errorClass(p)}},updateError:function(p,q,r,o,s){p._ui.$errorsWrapper.addClass("filled").find(".parsley-"+q).html(r||this._getErrorMessage(p,o));if(true!==s){this._errorClass(p)}},removeError:function(o,p,q){o._ui.$errorsWrapper.removeClass("filled").find(".parsley-"+p).remove();if(true!==q){this.manageStatusClass(o)}},focus:function(p){if(true===p.validationResult||"none"===p.options.focus){return p._focusedField=null}p._focusedField=null;for(var o=0;o<p.fields.length;o++){if(true!==p.fields[o].validationResult&&p.fields[o].validationResult.length>0&&"undefined"===typeof p.fields[o].options.noFocus){if("first"===p.options.focus){p._focusedField=p.fields[o].$element;return p._focusedField.focus()}p._focusedField=p.fields[o].$element}}if(null===p._focusedField){return null}return p._focusedField.focus()},_getErrorMessage:function(p,q){var o=q.name+"Message";if("undefined"!==typeof p.options[o]){return p.options[o]}return window.ParsleyValidator.getErrorMessage(q)},_diff:function(p,v,o){var s=[],u=[];for(var r=0;r<p.length;r++){var t=false;for(var q=0;q<v.length;q++){if(p[r].assert.name===v[q].assert.name){t=true;break}}if(t){u.push(p[r])}else{s.push(p[r])}}return{kept:u,added:s,removed:!o?this._diff(v,p,true).added:[]}},setupForm:function(o){o.$element.on("submit.Parsley",false,k.proxy(o.onSubmitValidate,o));if(false===o.options.uiEnabled){return}o.$element.attr("novalidate","")},setupField:function(p){var o={active:false};if(false===p.options.uiEnabled){return}o.active=true;p.$element.attr(p.options.namespace+"id",p.__id__);o.$errorClassHandler=this._manageClassHandler(p);o.errorsWrapperId="parsley-id-"+("undefined"!==typeof p.options.multiple?"multiple-"+p.options.multiple:p.__id__);o.$errorsWrapper=k(p.options.errorsWrapper).attr("id",o.errorsWrapperId);o.lastValidationResult=[];o.validatedOnce=false;o.validationInformationVisible=false;p._ui=o;this._insertErrorWrapper(p);this.actualizeTriggers(p)},_manageClassHandler:function(p){if("string"===typeof p.options.classHandler&&k(p.options.classHandler).length){return k(p.options.classHandler)}var o=p.options.classHandler(p);if("undefined"!==typeof o&&o.length){return o}if("undefined"===typeof p.options.multiple||p.$element.is("select")){return p.$element}return p.$element.parent()},_insertErrorWrapper:function(o){var p;if("string"===typeof o.options.errorsContainer){if(k(o.options.errorsContainer+"").length){return k(o.options.errorsContainer).append(o._ui.$errorsWrapper)}else{if(window.console&&window.console.warn){window.console.warn("The errors container `"+o.options.errorsContainer+"` does not exist in DOM")}}}if("function"===typeof o.options.errorsContainer){p=o.options.errorsContainer(o)}if("undefined"!==typeof p&&p.length){return p.append(o._ui.$errorsWrapper)}return"undefined"===typeof o.options.multiple?o.$element.after(o._ui.$errorsWrapper):o.$element.parent().after(o._ui.$errorsWrapper)},actualizeTriggers:function(o){var q=this;if(o.options.multiple){k("["+o.options.namespace+'multiple="'+o.options.multiple+'"]').each(function(){k(this).off(".Parsley")})}else{o.$element.off(".Parsley")}if(false===o.options.trigger){return}var p=o.options.trigger.replace(/^\s+/g,"").replace(/\s+$/g,"");if(""===p){return}if(o.options.multiple){k("["+o.options.namespace+'multiple="'+o.options.multiple+'"]').each(function(){k(this).on(p.split(" ").join(".Parsley ")+".Parsley",false,k.proxy("function"===typeof o.eventValidate?o.eventValidate:q.eventValidate,o))})}else{o.$element.on(p.split(" ").join(".Parsley ")+".Parsley",false,k.proxy("function"===typeof o.eventValidate?o.eventValidate:this.eventValidate,o))}},eventValidate:function(o){if(new RegExp("key").test(o.type)){if(!this._ui.validationInformationVisible&&this.getValue().length<=this.options.validationThreshold){return}}this._ui.validatedOnce=true;this.validate()},manageFailingFieldTrigger:function(o){o._ui.failedOnce=true;if(o.options.multiple){k("["+o.options.namespace+'multiple="'+o.options.multiple+'"]').each(function(){if(!new RegExp("change","i").test(k(this).parsley().options.trigger||"")){return k(this).on("change.ParsleyFailedOnce",false,k.proxy(o.validate,o))}})}if(o.$element.is("select")){if(!new RegExp("change","i").test(o.options.trigger||"")){return o.$element.on("change.ParsleyFailedOnce",false,k.proxy(o.validate,o))}}if(!new RegExp("keyup","i").test(o.options.trigger||"")){return o.$element.on("keyup.ParsleyFailedOnce",false,k.proxy(o.validate,o))}},reset:function(o){if("undefined"===typeof o._ui){return}o.$element.off(".Parsley");o.$element.off(".ParsleyFailedOnce");if("ParsleyForm"===o.__class__){return}o._ui.$errorsWrapper.children().each(function(){k(this).remove()});this._resetClass(o);o._ui.validatedOnce=false;o._ui.lastValidationResult=[];o._ui.validationInformationVisible=false},destroy:function(o){if("undefined"===typeof o._ui){return}this.reset(o);if("ParsleyForm"===o.__class__){return}o._ui.$errorsWrapper.remove();delete o._ui},_successClass:function(o){o._ui.validationInformationVisible=true;o._ui.$errorClassHandler.removeClass(o.options.errorClass).addClass(o.options.successClass)},_errorClass:function(o){o._ui.validationInformationVisible=true;o._ui.$errorClassHandler.removeClass(o.options.successClass).addClass(o.options.errorClass)},_resetClass:function(o){o._ui.$errorClassHandler.removeClass(o.options.successClass).removeClass(o.options.errorClass)}};var n=function(o,q,r,p){this.__class__="OptionsFactory";this.__id__=f.hash(4);this.formOptions=null;this.fieldOptions=null;this.staticOptions=k.extend(true,{},o,q,r,{namespace:p})};n.prototype={get:function(o){if("undefined"===typeof o.__class__){throw new Error("Parsley Instance expected")}switch(o.__class__){case"Parsley":return this.staticOptions;case"ParsleyForm":return this.getFormOptions(o);case"ParsleyField":case"ParsleyFieldMultiple":return this.getFieldOptions(o);default:throw new Error("Instance "+o.__class__+" is not supported")}},getFormOptions:function(o){this.formOptions=f.attr(o.$element,this.staticOptions.namespace);return k.extend({},this.staticOptions,this.formOptions)},getFieldOptions:function(o){this.fieldOptions=f.attr(o.$element,this.staticOptions.namespace);if(null===this.formOptions&&"ParsleyForm"===o.parsleyInstance.__proxy__){this.formOptions=getFormOptions(o.parsleyInstance)}return k.extend({},this.staticOptions,this.formOptions,this.fieldOptions)}};var c=function(o,p){this.__class__="ParsleyForm";this.__id__=f.hash(4);if("Parsley"!==f.get(p,"__class__")){throw new Error("You must give a Parsley instance")}this.parsleyInstance=p;this.$element=k(o)};c.prototype={init:function(){this.validationResult=null;this.options=this.parsleyInstance.OptionsFactory.get(this);this._bindFields();return this},onSubmitValidate:function(o){this.validate(undefined,undefined,o);if(false===this.validationResult&&o instanceof k.Event){o.stopImmediatePropagation();o.preventDefault()}return this},validate:function(s,r,q){this.submitEvent=q;this.validationResult=true;var o=[];this._refreshFields();k.emit("parsley:form:validate",this);for(var p=0;p<this.fields.length;p++){if(s&&s!==this.fields[p].options.group){continue}o=this.fields[p].validate(r);if(true!==o&&o.length>0&&this.validationResult){this.validationResult=false}}k.emit("parsley:form:validated",this);return this.validationResult},isValid:function(q,p){this._refreshFields();for(var o=0;o<this.fields.length;o++){if(q&&q!==this.fields[o].options.group){continue}if(false===this.fields[o].isValid(p)){return false}}return true},_refreshFields:function(){return this.actualizeOptions()._bindFields()},_bindFields:function(){var o=this;this.fields=[];this.fieldsMappedById={};this.$element.find(this.options.inputs).each(function(){var p=new window.Parsley(this,{},o.parsleyInstance);if(("ParsleyField"===p.__class__||"ParsleyFieldMultiple"===p.__class__)&&!p.$element.is(p.options.excluded)){if("undefined"===typeof o.fieldsMappedById[p.__class__+"-"+p.__id__]){o.fieldsMappedById[p.__class__+"-"+p.__id__]=p;o.fields.push(p)}}});return this}};var m=function(r,p,s,q,o){if(!new RegExp("ParsleyField").test(f.get(r,"__class__"))){throw new Error("ParsleyField or ParsleyFieldMultiple instance expected")}if("function"!==typeof window.ParsleyValidator.validators[p]&&"Assert"!==window.ParsleyValidator.validators[p](s).__parentClass__){throw new Error("Valid validator expected")}var t=function(v,u){if("undefined"!==typeof v.options[u+"Priority"]){return v.options[u+"Priority"]}return f.get(window.ParsleyValidator.validators[u](s),"priority")||2};q=q||t(r,p);if("function"===typeof window.ParsleyValidator.validators[p](s).requirementsTransformer){s=window.ParsleyValidator.validators[p](s).requirementsTransformer()}return k.extend(window.ParsleyValidator.validators[p](s),{name:p,requirements:s,priority:q,groups:[q],isDomConstraint:o||f.attr(r.$element,r.options.namespace,p)})};var d=function(p,o){this.__class__="ParsleyField";this.__id__=f.hash(4);if("Parsley"!==f.get(o,"__class__")){throw new Error("You must give a Parsley instance")}this.parsleyInstance=o;this.$element=k(p);this.options=this.parsleyInstance.OptionsFactory.get(this)};d.prototype={init:function(){this.constraints=[];this.constraintsByName={};this.validationResult=[];this.bindConstraints();return this},validate:function(o){this.value=this.getValue();k.emit("parsley:field:validate",this);k.emit("parsley:field:"+(this.isValid(o,this.value)?"success":"error"),this);k.emit("parsley:field:validated",this);return this.validationResult},getConstraintsSortedPriorities:function(){var o=[];for(var p=0;p<this.constraints.length;p++){if(-1===o.indexOf(this.constraints[p].priority)){o.push(this.constraints[p].priority)}}o.sort(function(r,q){return q-r});return o},isValid:function(r,q){this.refreshConstraints();var o=this.getConstraintsSortedPriorities();q=q||this.getValue();if(0===q.length&&!this.isRequired()&&"undefined"===typeof this.options.validateIfEmpty&&true!==r){return this.validationResult=[]}if(false===this.options.priorityEnabled){return true===(this.validationResult=this.validateThroughValidator(q,this.constraints,"Any"))}for(var p=0;p<o.length;p++){if(true!==(this.validationResult=this.validateThroughValidator(q,this.constraints,o[p]))){return false}}return true},isRequired:function(){if("undefined"===typeof this.constraintsByName.required){return false}return false!==this.constraintsByName.required.requirements},getValue:function(){var o;if("undefined"!==typeof this.options.value){o=this.options.value}else{o=this.$element.val()}if(true===this.options.trimValue){return o.replace(/^\s+|\s+$/g,"")}return o},refreshConstraints:function(){this.actualizeOptions().bindConstraints();return this},bindConstraints:function(){var q=[];for(var p=0;p<this.constraints.length;p++){if(false===this.constraints[p].isDomConstraint){q.push(this.constraints[p])}}this.constraints=q;for(var o in this.options){this.addConstraint(o,this.options[o])}return this.bindHtml5Constraints()},bindHtml5Constraints:function(){if(this.$element.hasClass("required")||this.$element.attr("required")){this.addConstraint("required",true,undefined,true)}if("string"===typeof this.$element.attr("pattern")){this.addConstraint("pattern",this.$element.attr("pattern"),undefined,true)}if("undefined"!==typeof this.$element.attr("min")&&"undefined"!==typeof this.$element.attr("max")){this.addConstraint("range",[this.$element.attr("min"),this.$element.attr("max")],undefined,true)}else{if("undefined"!==typeof this.$element.attr("min")){this.addConstraint("min",this.$element.attr("min"),undefined,true)}else{if("undefined"!==typeof this.$element.attr("max")){this.addConstraint("max",this.$element.attr("max"),undefined,true)}}}var o=this.$element.attr("type");if("undefined"===typeof o){return this}if("number"===o){return this.addConstraint("type","integer",undefined,true)}else{if(new RegExp(o,"i").test("email url range")){return this.addConstraint("type",o,undefined,true)}}},addConstraint:function(p,r,q,o){p=p.toLowerCase();if("function"===typeof window.ParsleyValidator.validators[p]){var s=new m(this,p,r,q,o);if("undefined"!==this.constraintsByName[s.name]){this.removeConstraint(s.name)}this.constraints.push(s);this.constraintsByName[s.name]=s}return this},removeConstraint:function(o){for(var p=0;p<this.constraints.length;p++){if(o===this.constraints[p].name){this.constraints.splice(p,1);break}}return this},updateConstraint:function(o,q,p){return this.removeConstraint(o).addConstraint(o,q,p)}};var a=function(){this.__class__="ParsleyFieldMultiple"};a.prototype={init:function(o){this.$elements=[this.$element];this.options.multiple=o;return this},addElement:function(o){this.$elements.push(o);return this},refreshConstraints:function(){var p;this.constraints=[];if(this.$element.is("select")){this.actualizeOptions().bindConstraints();return this}for(var q=0;q<this.$elements.length;q++){p=this.$elements[q].data("ParsleyFieldMultiple").refreshConstraints().constraints;for(var o=0;o<p.length;o++){this.addConstraint(p[o].name,p[o].requirements,p[o].priority,p[o].isDomConstraint)}}return this},getValue:function(){if("undefined"!==typeof this.options.value){return this.options.value}if(this.$element.is("input[type=radio]")){return k("["+this.options.namespace+'multiple="'+this.options.multiple+'"]:checked').val()||""}if(this.$element.is("input[type=checkbox]")){var o=[];k("["+this.options.namespace+'multiple="'+this.options.multiple+'"]:checked').each(function(){o.push(k(this).val())});return o.length?o:[]}if(this.$element.is("select")){return null===this.$element.val()?[]:this.$element.val()}}};var e=k({}),l={};k.listen=function(o){if("undefined"===typeof l[o]){l[o]=[]}if("function"===typeof arguments[1]){return l[o].push({fn:arguments[1]})}if("object"===typeof arguments[1]&&"function"===typeof arguments[2]){return l[o].push({fn:arguments[2],ctxt:arguments[1]})}throw new Error("Wrong parameters")};k.listenTo=function(o,p,q){if("undefined"===typeof l[p]){l[p]=[]}if(!(o instanceof d)&&!(o instanceof c)){throw new Error("Must give Parsley instance")}if("string"!==typeof p||"function"!==typeof q){throw new Error("Wrong parameters")}l[p].push({instance:o,fn:q})};k.unsubscribe=function(o,q){if("undefined"===typeof l[o]){return}if("string"!==typeof o||"function"!==typeof q){throw new Error("Wrong arguments")}for(var p=0;p<l[o].length;p++){if(l[o][p].fn===q){return l[o].splice(p,1)}}};k.unsubscribeTo=function(o,p){if("undefined"===typeof l[p]){return}if(!(o instanceof d)&&!(o instanceof c)){throw new Error("Must give Parsley instance")}for(var q=0;q<l[p].length;q++){if("undefined"!==typeof l[p][q].instance&&l[p][q].instance.__id__===o.__id__){return l[p].splice(q,1)}}};k.unsubscribeAll=function(o){if("undefined"===typeof l[o]){return}delete l[o]};k.emit=function(q,o){if("undefined"===typeof l[q]){return}for(var r=0;r<l[q].length;r++){if("undefined"===typeof l[q][r].instance){l[q][r].fn.apply("undefined"!==typeof l[q][r].ctxt?l[q][r].ctxt:e,Array.prototype.slice.call(arguments,1));continue}if(!(o instanceof d)&&!(o instanceof c)){continue}if(l[q][r].instance.__id__===o.__id__){l[q][r].fn.apply(e,Array.prototype.slice.call(arguments,1));continue}if(l[q][r].instance instanceof c&&o instanceof d){for(var p=0;p<l[q][r].instance.fields.length;p++){if(l[q][r].instance.fields[p].__id__===o.__id__){l[q][r].fn.apply(e,Array.prototype.slice.call(arguments,1));continue}}}}};k.subscribed=function(){return l};window.ParsleyConfig=window.ParsleyConfig||{};window.ParsleyConfig.i18n=window.ParsleyConfig.i18n||{};window.ParsleyConfig.i18n.en=k.extend(window.ParsleyConfig.i18n.en||{},{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"This value is required.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",check:"You must select between %s and %s choices.",equalto:"This value should be the same."});if("undefined"!==typeof window.ParsleyValidator){window.ParsleyValidator.addCatalog("en",window.ParsleyConfig.i18n.en,true)}var i=function(p,o,q){this.__class__="Parsley";this.__version__="2.0.0-rc5";this.__id__=f.hash(4);if("undefined"===typeof p){throw new Error("You must give an element")}return this.init(k(p),o,q)};i.prototype={init:function(o,p,r){if(!o.length){throw new Error("You must bind Parsley on an existing element.")}this.$element=o;if(this.$element.data("Parsley")){var q=this.$element.data("Parsley");if("undefined"!==typeof r&&"ParsleyField"===q.parsleyInstance.__proxy__){q.parsleyInstance=r}return q}this.OptionsFactory=new n(j,f.get(window,"ParsleyConfig")||{},p,this.getNamespace(p));this.options=this.OptionsFactory.get(this);if(this.$element.is("form")||(f.attr(this.$element,this.options.namespace,"validate")&&!this.$element.is(this.options.inputs))){return this.bind("parsleyForm",r)}else{if(this.$element.is(this.options.inputs)&&!this.$element.is(this.options.excluded)){return this.isMultiple()?this.handleMultiple(r):this.bind("parsleyField",r)}}return this},isMultiple:function(){return(this.$element.is("input[type=radio], input[type=checkbox]")&&"undefined"===typeof this.options.multiple)||(this.$element.is("select")&&"undefined"!==typeof this.$element.attr("multiple"))},handleMultiple:function(s){var r=this,p,o,t;this.options=k.extend(this.options,f.attr(this.$element,this.options.namespace));if(this.options.multiple){o=this.options.multiple}else{if("undefined"!==typeof this.$element.attr("name")&&this.$element.attr("name").length){o=p=this.$element.attr("name")}else{if("undefined"!==typeof this.$element.attr("id")&&this.$element.attr("id").length){o=this.$element.attr("id")}}}if(this.$element.is("select")&&"undefined"!==typeof this.$element.attr("multiple")){return this.bind("parsleyFieldMultiple",s,o||this.__id__)}else{if("undefined"===typeof o){if(window.console&&window.console.warn){window.console.warn("To be binded by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.",this.$element)}return this}}o=o.replace(/(:|\.|\[|\]|\$)/g,"");if("undefined"!==typeof p){k('input[name="'+p+'"]').each(function(){if(k(this).is("input[type=radio], input[type=checkbox]")){k(this).attr(r.options.namespace+"multiple",o)}})}if(k("["+this.options.namespace+"multiple="+o+"]").length){for(var q=0;q<k("["+this.options.namespace+"multiple="+o+"]").length;q++){if("undefined"!==typeof k(k("["+this.options.namespace+"multiple="+o+"]").get(q)).data("Parsley")){t=k(k("["+this.options.namespace+"multiple="+o+"]").get(q)).data("Parsley");if(!this.$element.data("ParsleyFieldMultiple")){t.addElement(this.$element);this.$element.attr(this.options.namespace+"id",t.__id__)}break}}}this.bind("parsleyField",s,o,true);return t||this.bind("parsleyFieldMultiple",s,o)},getNamespace:function(o){if("undefined"!==typeof this.$element.data("parsleyNamespace")){return this.$element.data("parsleyNamespace")}if("undefined"!==typeof f.get(o,"namespace")){return o.namespace}if("undefined"!==typeof f.get(window,"ParsleyConfig.namespace")){return window.ParsleyConfig.namespace}return j.namespace},bind:function(q,p,o,s){var r;switch(q){case"parsleyForm":r=k.extend(new c(this.$element,p||this),new b(),window.ParsleyExtend).init();break;case"parsleyField":r=k.extend(new d(this.$element,p||this),new b(),window.ParsleyExtend).init();break;case"parsleyFieldMultiple":r=k.extend(new d(this.$element,p||this).init(),new b(),new a(),window.ParsleyExtend).init(o);break;default:throw new Error(q+"is not a supported Parsley type")}if("undefined"!==typeof o){f.setAttr(this.$element,this.options.namespace,"multiple",o)}if("undefined"!==typeof s){this.$element.data("ParsleyFieldMultiple",r);return r}if(new RegExp("ParsleyF","i").test(r.__class__)){this.$element.data("Parsley",r);this.__proxy__=r.__class__;k.emit("parsley:"+("parsleyForm"===q?"form":"field")+":init",r)}return r}};k.fn.parsley=k.fn.psly=function(o){if(this.length>1){var p=[];this.each(function(){p.push(k(this).parsley(o))});return p}if(!k(this).length){if(window.console&&window.console.warn){window.console.warn("You must bind Parsley on an existing element.")}return}return new i(this,o)};window.ParsleyUI="function"===typeof f.get(window,"ParsleyConfig.ParsleyUI")?new window.ParsleyConfig.ParsleyUI().listen():new g().listen();if("undefined"===typeof window.ParsleyExtend){window.ParsleyExtend={}}if("undefined"===typeof window.ParsleyConfig){window.ParsleyConfig={}}window.Parsley=window.psly=i;window.ParsleyUtils=f;window.ParsleyValidator=new h(window.ParsleyConfig.validators,window.ParsleyConfig.i18n);if(false!==f.get(window,"ParsleyConfig.autoBind")){k(document).ready(function(){if(k("[data-parsley-validate]").length){k("[data-parsley-validate]").parsley()}})}})(window.jQuery);(function(){(function(p){var A=this||(0,eval)("this"),w=A.document,K=A.navigator,t=A.jQuery,C=A.JSON;(function(p){"function"===typeof require&&"object"===typeof exports&&"object"===typeof module?p(module.exports||exports):"function"===typeof define&&define.amd?define(["exports"],p):p(A.ko={})})(function(z){function G(a,c){return null===a||typeof a in M?a===c:!1}function N(a,c){var d;return function(){d||(d=setTimeout(function(){d=p;a()},c))}}function O(a,c){var d;return function(){clearTimeout(d);d=setTimeout(a,c)}}function H(b,c,d,e){a.d[b]={init:function(b,h,g,k,l){var n,r;a.ba(function(){var g=a.a.c(h()),k=!d!==!g,s=!r;if(s||c||k!==n){s&&a.ca.fa()&&(r=a.a.lb(a.e.childNodes(b),!0)),k?(s||a.e.U(b,a.a.lb(r)),a.gb(e?e(l,g):l,b)):a.e.da(b),n=k}},null,{G:b});return{controlsDescendantBindings:!0}}};a.g.aa[b]=!1;a.e.Q[b]=!0}var a="undefined"!==typeof z?z:{};a.b=function(b,c){for(var d=b.split("."),e=a,f=0;f<d.length-1;f++){e=e[d[f]]}e[d[d.length-1]]=c};a.s=function(a,c,d){a[c]=d};a.version="3.1.0";a.b("version",a.version);a.a=function(){function b(a,b){for(var c in a){a.hasOwnProperty(c)&&b(c,a[c])}}function c(a,b){if(b){for(var c in b){b.hasOwnProperty(c)&&(a[c]=b[c])}}return a}function d(a,b){a.__proto__=b;return a}var e={__proto__:[]} instanceof Array,f={},h={};f[K&&/Firefox\/2/i.test(K.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"];f.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");b(f,function(a,b){if(b.length){for(var c=0,d=b.length;c<d;c++){h[b[c]]=a}}});var g={propertychange:!0},k=w&&function(){for(var a=3,b=w.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e",c[0];){}return 4<a?a:p}();return{mb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],r:function(a,b){for(var c=0,d=a.length;c<d;c++){b(a[c],c)}},l:function(a,b){if("function"==typeof Array.prototype.indexOf){return Array.prototype.indexOf.call(a,b)}for(var c=0,d=a.length;c<d;c++){if(a[c]===b){return c}}return -1},hb:function(a,b,c){for(var d=0,e=a.length;d<e;d++){if(b.call(c,a[d],d)){return a[d]}}return null},ma:function(b,c){var d=a.a.l(b,c);0<d?b.splice(d,1):0===d&&b.shift()},ib:function(b){b=b||[];for(var c=[],d=0,e=b.length;d<e;d++){0>a.a.l(c,b[d])&&c.push(b[d])}return c},ya:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;d<e;d++){c.push(b(a[d],d))}return c},la:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;d<e;d++){b(a[d],d)&&c.push(a[d])}return c},$:function(a,b){if(b instanceof Array){a.push.apply(a,b)}else{for(var c=0,d=b.length;c<d;c++){a.push(b[c])}}return a},Y:function(b,c,d){var e=a.a.l(a.a.Sa(b),c);0>e?d&&b.push(c):d||b.splice(e,1)},na:e,extend:c,ra:d,sa:e?d:c,A:b,Oa:function(a,b){if(!a){return a}var c={},d;for(d in a){a.hasOwnProperty(d)&&(c[d]=b(a[d],d,a))}return c},Fa:function(b){for(;b.firstChild;){a.removeNode(b.firstChild)}},ec:function(b){b=a.a.R(b);for(var c=w.createElement("div"),d=0,e=b.length;d<e;d++){c.appendChild(a.M(b[d]))}return c},lb:function(b,c){for(var d=0,e=b.length,g=[];d<e;d++){var k=b[d].cloneNode(!0);g.push(c?a.M(k):k)}return g},U:function(b,c){a.a.Fa(b);if(c){for(var d=0,e=c.length;d<e;d++){b.appendChild(c[d])}}},Bb:function(b,c){var d=b.nodeType?[b]:b;if(0<d.length){for(var e=d[0],g=e.parentNode,k=0,h=c.length;k<h;k++){g.insertBefore(c[k],e)}k=0;for(h=d.length;k<h;k++){a.removeNode(d[k])}}},ea:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;){a.shift()}if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;){if(a.push(c),c=c.nextSibling,!c){return}}a.push(d)}}return a},Db:function(a,b){7>k?a.setAttribute("selected",b):a.selected=b},ta:function(a){return null===a||a===p?"":a.trim?a.trim():a.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},oc:function(b,c){for(var d=[],e=(b||"").split(c),g=0,k=e.length;g<k;g++){var h=a.a.ta(e[g]);""!==h&&d.push(h)}return d},kc:function(a,b){a=a||"";return b.length>a.length?!1:a.substring(0,b.length)===b},Sb:function(a,b){if(a===b){return !0}if(11===a.nodeType){return !1}if(b.contains){return b.contains(3===a.nodeType?a.parentNode:a)}if(b.compareDocumentPosition){return 16==(b.compareDocumentPosition(a)&16)}for(;a&&a!=b;){a=a.parentNode}return !!a},Ea:function(b){return a.a.Sb(b,b.ownerDocument.documentElement)},eb:function(b){return !!a.a.hb(b,a.a.Ea)},B:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},q:function(b,c,d){var e=k&&g[c];if(!e&&t){t(b).bind(c,d)}else{if(e||"function"!=typeof b.addEventListener){if("undefined"!=typeof b.attachEvent){var h=function(a){d.call(b,a)},f="on"+c;b.attachEvent(f,h);a.a.u.ja(b,function(){b.detachEvent(f,h)})}else{throw Error("Browser doesn't support addEventListener or attachEvent")}}else{b.addEventListener(c,d,!1)}}},ha:function(b,c){if(!b||!b.nodeType){throw Error("element must be a DOM node when calling triggerEvent")}var d;"input"===a.a.B(b)&&b.type&&"click"==c.toLowerCase()?(d=b.type,d="checkbox"==d||"radio"==d):d=!1;if(t&&!d){t(b).trigger(c)}else{if("function"==typeof w.createEvent){if("function"==typeof b.dispatchEvent){d=w.createEvent(h[c]||"HTMLEvents"),d.initEvent(c,!0,!0,A,0,0,0,0,0,!1,!1,!1,!1,0,b),b.dispatchEvent(d)}else{throw Error("The supplied element doesn't support dispatchEvent")}}else{if(d&&b.click){b.click()}else{if("undefined"!=typeof b.fireEvent){b.fireEvent("on"+c)}else{throw Error("Browser doesn't support triggering events")}}}}},c:function(b){return a.v(b)?b():b},Sa:function(b){return a.v(b)?b.o():b},ua:function(b,c,d){if(c){var e=/\S+/g,g=b.className.match(e)||[];a.a.r(c.match(e),function(b){a.a.Y(g,b,d)});b.className=g.join(" ")}},Xa:function(b,c){var d=a.a.c(c);if(null===d||d===p){d=""}var e=a.e.firstChild(b);!e||3!=e.nodeType||a.e.nextSibling(e)?a.e.U(b,[b.ownerDocument.createTextNode(d)]):e.data=d;a.a.Vb(b)},Cb:function(a,b){a.name=b;if(7>=k){try{a.mergeAttributes(w.createElement("<input name='"+a.name+"'/>"),!1)}catch(c){}}},Vb:function(a){9<=k&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},Tb:function(a){if(k){var b=a.style.width;a.style.width=0;a.style.width=b}},ic:function(b,c){b=a.a.c(b);c=a.a.c(c);for(var d=[],e=b;e<=c;e++){d.push(e)}return d},R:function(a){for(var b=[],c=0,d=a.length;c<d;c++){b.push(a[c])}return b},mc:6===k,nc:7===k,oa:k,ob:function(b,c){for(var d=a.a.R(b.getElementsByTagName("input")).concat(a.a.R(b.getElementsByTagName("textarea"))),e="string"==typeof c?function(a){return a.name===c}:function(a){return c.test(a.name)},g=[],k=d.length-1;0<=k;k--){e(d[k])&&g.push(d[k])}return g},fc:function(b){return"string"==typeof b&&(b=a.a.ta(b))?C&&C.parse?C.parse(b):(new Function("return "+b))():null},Ya:function(b,c,d){if(!C||!C.stringify){throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js")}return C.stringify(a.a.c(b),c,d)},gc:function(c,d,e){e=e||{};var g=e.params||{},k=e.includeFields||this.mb,h=c;if("object"==typeof c&&"form"===a.a.B(c)){for(var h=c.action,f=k.length-1;0<=f;f--){for(var u=a.a.ob(c,k[f]),D=u.length-1;0<=D;D--){g[u[D].name]=u[D].value}}}d=a.a.c(d);var y=w.createElement("form");y.style.display="none";y.action=h;y.method="post";for(var p in d){c=w.createElement("input"),c.name=p,c.value=a.a.Ya(a.a.c(d[p])),y.appendChild(c)}b(g,function(a,b){var c=w.createElement("input");c.name=a;c.value=b;y.appendChild(c)});w.body.appendChild(y);e.submitter?e.submitter(y):y.submit();setTimeout(function(){y.parentNode.removeChild(y)},0)}}}();a.b("utils",a.a);a.b("utils.arrayForEach",a.a.r);a.b("utils.arrayFirst",a.a.hb);a.b("utils.arrayFilter",a.a.la);a.b("utils.arrayGetDistinctValues",a.a.ib);a.b("utils.arrayIndexOf",a.a.l);a.b("utils.arrayMap",a.a.ya);a.b("utils.arrayPushAll",a.a.$);a.b("utils.arrayRemoveItem",a.a.ma);a.b("utils.extend",a.a.extend);a.b("utils.fieldsIncludedWithJsonPost",a.a.mb);a.b("utils.getFormFields",a.a.ob);a.b("utils.peekObservable",a.a.Sa);a.b("utils.postJson",a.a.gc);a.b("utils.parseJson",a.a.fc);a.b("utils.registerEventHandler",a.a.q);a.b("utils.stringifyJson",a.a.Ya);a.b("utils.range",a.a.ic);a.b("utils.toggleDomNodeCssClass",a.a.ua);a.b("utils.triggerEvent",a.a.ha);a.b("utils.unwrapObservable",a.a.c);a.b("utils.objectForEach",a.a.A);a.b("utils.addOrRemoveItem",a.a.Y);a.b("unwrap",a.a.c);Function.prototype.bind||(Function.prototype.bind=function(a){var c=this,d=Array.prototype.slice.call(arguments);a=d.shift();return function(){return c.apply(a,d.concat(Array.prototype.slice.call(arguments)))}});a.a.f=new function(){function a(b,h){var g=b[d];if(!g||"null"===g||!e[g]){if(!h){return p}g=b[d]="ko"+c++;e[g]={}}return e[g]}var c=0,d="__ko__"+(new Date).getTime(),e={};return{get:function(c,d){var e=a(c,!1);return e===p?p:e[d]},set:function(c,d,e){if(e!==p||a(c,!1)!==p){a(c,!0)[d]=e}},clear:function(a){var b=a[d];return b?(delete e[b],a[d]=null,!0):!1},L:function(){return c+++d}}};a.b("utils.domData",a.a.f);a.b("utils.domData.clear",a.a.f.clear);a.a.u=new function(){function b(b,c){var e=a.a.f.get(b,d);e===p&&c&&(e=[],a.a.f.set(b,d,e));return e}function c(d){var e=b(d,!1);if(e){for(var e=e.slice(0),k=0;k<e.length;k++){e[k](d)}}a.a.f.clear(d);a.a.u.cleanExternalData(d);if(f[d.nodeType]){for(e=d.firstChild;d=e;){e=d.nextSibling,8===d.nodeType&&c(d)}}}var d=a.a.f.L(),e={1:!0,8:!0,9:!0},f={1:!0,9:!0};return{ja:function(a,c){if("function"!=typeof c){throw Error("Callback must be a function")}b(a,!0).push(c)},Ab:function(c,e){var k=b(c,!1);k&&(a.a.ma(k,e),0==k.length&&a.a.f.set(c,d,p))},M:function(b){if(e[b.nodeType]&&(c(b),f[b.nodeType])){var d=[];a.a.$(d,b.getElementsByTagName("*"));for(var k=0,l=d.length;k<l;k++){c(d[k])}}return b},removeNode:function(b){a.M(b);b.parentNode&&b.parentNode.removeChild(b)},cleanExternalData:function(a){t&&"function"==typeof t.cleanData&&t.cleanData([a])}}};a.M=a.a.u.M;a.removeNode=a.a.u.removeNode;a.b("cleanNode",a.M);a.b("removeNode",a.removeNode);a.b("utils.domNodeDisposal",a.a.u);a.b("utils.domNodeDisposal.addDisposeCallback",a.a.u.ja);a.b("utils.domNodeDisposal.removeDisposeCallback",a.a.u.Ab);(function(){a.a.Qa=function(b){var c;if(t){if(t.parseHTML){c=t.parseHTML(b)||[]}else{if((c=t.clean([b]))&&c[0]){for(b=c[0];b.parentNode&&11!==b.parentNode.nodeType;){b=b.parentNode}b.parentNode&&b.parentNode.removeChild(b)}}}else{var d=a.a.ta(b).toLowerCase();c=w.createElement("div");d=d.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!d.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!d.indexOf("<td")||!d.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];b="ignored<div>"+d[1]+b+d[2]+"</div>";for("function"==typeof A.innerShiv?c.appendChild(A.innerShiv(b)):c.innerHTML=b;d[0]--;){c=c.lastChild}c=a.a.R(c.lastChild.childNodes)}return c};a.a.Va=function(b,c){a.a.Fa(b);c=a.a.c(c);if(null!==c&&c!==p){if("string"!=typeof c&&(c=c.toString()),t){t(b).html(c)}else{for(var d=a.a.Qa(c),e=0;e<d.length;e++){b.appendChild(d[e])}}}}})();a.b("utils.parseHtmlFragment",a.a.Qa);a.b("utils.setHtml",a.a.Va);a.w=function(){function b(c,e){if(c){if(8==c.nodeType){var f=a.w.xb(c.nodeValue);null!=f&&e.push({Rb:c,cc:f})}else{if(1==c.nodeType){for(var f=0,h=c.childNodes,g=h.length;f<g;f++){b(h[f],e)}}}}}var c={};return{Na:function(a){if("function"!=typeof a){throw Error("You can only pass a function to ko.memoization.memoize()")}var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);c[b]=a;return"\x3c!--[ko_memo:"+b+"]--\x3e"},Hb:function(a,b){var f=c[a];if(f===p){throw Error("Couldn't find any memo with ID "+a+". Perhaps it's already been unmemoized.")}try{return f.apply(null,b||[]),!0}finally{delete c[a]}},Ib:function(c,e){var f=[];b(c,f);for(var h=0,g=f.length;h<g;h++){var k=f[h].Rb,l=[k];e&&a.a.$(l,e);a.w.Hb(f[h].cc,l);k.nodeValue="";k.parentNode&&k.parentNode.removeChild(k)}},xb:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}();a.b("memoization",a.w);a.b("memoization.memoize",a.w.Na);a.b("memoization.unmemoize",a.w.Hb);a.b("memoization.parseMemoText",a.w.xb);a.b("memoization.unmemoizeDomNodeAndDescendants",a.w.Ib);a.Ga={throttle:function(b,c){b.throttleEvaluation=c;var d=null;return a.h({read:b,write:function(a){clearTimeout(d);d=setTimeout(function(){b(a)},c)}})},rateLimit:function(a,c){var d,e,f;"number"==typeof c?d=c:(d=c.timeout,e=c.method);f="notifyWhenChangesStop"==e?O:N;a.Ma(function(a){return f(a,d)})},notify:function(a,c){a.equalityComparer="always"==c?null:G}};var M={undefined:1,"boolean":1,number:1,string:1};a.b("extenders",a.Ga);a.Fb=function(b,c,d){this.target=b;this.za=c;this.Qb=d;this.sb=!1;a.s(this,"dispose",this.F)};a.Fb.prototype.F=function(){this.sb=!0;this.Qb()};a.N=function(){a.a.sa(this,a.N.fn);this.H={}};var F="change";z={V:function(b,c,d){var e=this;d=d||F;var f=new a.Fb(e,c?b.bind(c):b,function(){a.a.ma(e.H[d],f)});e.o&&e.o();e.H[d]||(e.H[d]=[]);e.H[d].push(f);return f},notifySubscribers:function(b,c){c=c||F;if(this.qb(c)){try{a.k.jb();for(var d=this.H[c].slice(0),e=0,f;f=d[e];++e){f.sb||f.za(b)}}finally{a.k.end()}}},Ma:function(b){var c=this,d=a.v(c),e,f,h;c.ia||(c.ia=c.notifySubscribers,c.notifySubscribers=function(a,b){b&&b!==F?"beforeChange"===b?c.bb(a):c.ia(a,b):c.cb(a)});var g=b(function(){d&&h===c&&(h=c());e=!1;c.Ka(f,h)&&c.ia(f=h)});c.cb=function(a){e=!0;h=a;g()};c.bb=function(a){e||(f=a,c.ia(a,"beforeChange"))}},qb:function(a){return this.H[a]&&this.H[a].length},Wb:function(){var b=0;a.a.A(this.H,function(a,d){b+=d.length});return b},Ka:function(a,c){return !this.equalityComparer||!this.equalityComparer(a,c)},extend:function(b){var c=this;b&&a.a.A(b,function(b,e){var f=a.Ga[b];"function"==typeof f&&(c=f(c,e)||c)});return c}};a.s(z,"subscribe",z.V);a.s(z,"extend",z.extend);a.s(z,"getSubscriptionsCount",z.Wb);a.a.na&&a.a.ra(z,Function.prototype);a.N.fn=z;a.tb=function(a){return null!=a&&"function"==typeof a.V&&"function"==typeof a.notifySubscribers};a.b("subscribable",a.N);a.b("isSubscribable",a.tb);a.ca=a.k=function(){function b(a){d.push(e);e=a}function c(){e=d.pop()}var d=[],e,f=0;return{jb:b,end:c,zb:function(b){if(e){if(!a.tb(b)){throw Error("Only subscribable things can act as dependencies")}e.za(b,b.Kb||(b.Kb=++f))}},t:function(a,d,e){try{return b(),a.apply(d,e||[])}finally{c()}},fa:function(){if(e){return e.ba.fa()}},pa:function(){if(e){return e.pa}}}}();a.b("computedContext",a.ca);a.b("computedContext.getDependenciesCount",a.ca.fa);a.b("computedContext.isInitial",a.ca.pa);a.m=function(b){function c(){if(0<arguments.length){return c.Ka(d,arguments[0])&&(c.P(),d=arguments[0],c.O()),this}a.k.zb(c);return d}var d=b;a.N.call(c);a.a.sa(c,a.m.fn);c.o=function(){return d};c.O=function(){c.notifySubscribers(d)};c.P=function(){c.notifySubscribers(d,"beforeChange")};a.s(c,"peek",c.o);a.s(c,"valueHasMutated",c.O);a.s(c,"valueWillMutate",c.P);return c};a.m.fn={equalityComparer:G};var E=a.m.hc="__ko_proto__";a.m.fn[E]=a.m;a.a.na&&a.a.ra(a.m.fn,a.N.fn);a.Ha=function(b,c){return null===b||b===p||b[E]===p?!1:b[E]===c?!0:a.Ha(b[E],c)};a.v=function(b){return a.Ha(b,a.m)};a.ub=function(b){return"function"==typeof b&&b[E]===a.m||"function"==typeof b&&b[E]===a.h&&b.Yb?!0:!1};a.b("observable",a.m);a.b("isObservable",a.v);a.b("isWriteableObservable",a.ub);a.T=function(b){b=b||[];if("object"!=typeof b||!("length" in b)){throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.")}b=a.m(b);a.a.sa(b,a.T.fn);return b.extend({trackArrayChanges:!0})};a.T.fn={remove:function(b){for(var c=this.o(),d=[],e="function"!=typeof b||a.v(b)?function(a){return a===b}:b,f=0;f<c.length;f++){var h=c[f];e(h)&&(0===d.length&&this.P(),d.push(h),c.splice(f,1),f--)}d.length&&this.O();return d},removeAll:function(b){if(b===p){var c=this.o(),d=c.slice(0);this.P();c.splice(0,c.length);this.O();return d}return b?this.remove(function(c){return 0<=a.a.l(b,c)}):[]},destroy:function(b){var c=this.o(),d="function"!=typeof b||a.v(b)?function(a){return a===b}:b;this.P();for(var e=c.length-1;0<=e;e--){d(c[e])&&(c[e]._destroy=!0)}this.O()},destroyAll:function(b){return b===p?this.destroy(function(){return !0}):b?this.destroy(function(c){return 0<=a.a.l(b,c)}):[]},indexOf:function(b){var c=this();return a.a.l(c,b)},replace:function(a,c){var d=this.indexOf(a);0<=d&&(this.P(),this.o()[d]=c,this.O())}};a.a.r("pop push reverse shift sort splice unshift".split(" "),function(b){a.T.fn[b]=function(){var a=this.o();this.P();this.kb(a,b,arguments);a=a[b].apply(a,arguments);this.O();return a}});a.a.r(["slice"],function(b){a.T.fn[b]=function(){var a=this();return a[b].apply(a,arguments)}});a.a.na&&a.a.ra(a.T.fn,a.m.fn);a.b("observableArray",a.T);var I="arrayChange";a.Ga.trackArrayChanges=function(b){function c(){if(!d){d=!0;var c=b.notifySubscribers;b.notifySubscribers=function(a,b){b&&b!==F||++f;return c.apply(this,arguments)};var k=[].concat(b.o()||[]);e=null;b.V(function(c){c=[].concat(c||[]);if(b.qb(I)){var d;if(!e||1<f){e=a.a.Aa(k,c,{sparse:!0})}d=e;d.length&&b.notifySubscribers(d,I)}k=c;e=null;f=0})}}if(!b.kb){var d=!1,e=null,f=0,h=b.V;b.V=b.subscribe=function(a,b,d){d===I&&c();return h.apply(this,arguments)};b.kb=function(b,c,l){function h(a,b,c){return r[r.length]={status:a,value:b,index:c}}if(d&&!f){var r=[],m=b.length,q=l.length,s=0;switch(c){case"push":s=m;case"unshift":for(c=0;c<q;c++){h("added",l[c],s+c)}break;case"pop":s=m-1;case"shift":m&&h("deleted",b[s],s);break;case"splice":c=Math.min(Math.max(0,0>l[0]?m+l[0]:l[0]),m);for(var m=1===q?m:Math.min(c+(l[1]||0),m),q=c+q-2,s=Math.max(m,q),B=[],u=[],D=2;c<s;++c,++D){c<m&&u.push(h("deleted",b[c],c)),c<q&&B.push(h("added",l[D],c))}a.a.nb(u,B);break;default:return}e=r}}}};a.ba=a.h=function(b,c,d){function e(){q=!0;a.a.A(v,function(a,b){b.F()});v={};x=0;n=!1}function f(){var a=g.throttleEvaluation;a&&0<=a?(clearTimeout(t),t=setTimeout(h,a)):g.wa?g.wa():h()}function h(){if(!r&&!q){if(y&&y()){if(!m){p();return}}else{m=!1}r=!0;try{var b=v,d=x;a.k.jb({za:function(a,c){q||(d&&b[c]?(v[c]=b[c],++x,delete b[c],--d):v[c]||(v[c]=a.V(f),++x))},ba:g,pa:!x});v={};x=0;try{var e=c?s.call(c):s()}finally{a.k.end(),d&&a.a.A(b,function(a,b){b.F()}),n=!1}g.Ka(l,e)&&(g.notifySubscribers(l,"beforeChange"),l=e,g.wa&&!g.throttleEvaluation||g.notifySubscribers(l))}finally{r=!1}x||p()}}function g(){if(0<arguments.length){if("function"===typeof B){B.apply(c,arguments)}else{throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.")}return this}n&&h();a.k.zb(g);return l}function k(){return n||0<x}var l,n=!0,r=!1,m=!1,q=!1,s=b;s&&"object"==typeof s?(d=s,s=d.read):(d=d||{},s||(s=d.read));if("function"!=typeof s){throw Error("Pass a function that returns the value of the ko.computed")}var B=d.write,u=d.disposeWhenNodeIsRemoved||d.G||null,D=d.disposeWhen||d.Da,y=D,p=e,v={},x=0,t=null;c||(c=d.owner);a.N.call(g);a.a.sa(g,a.h.fn);g.o=function(){n&&!x&&h();return l};g.fa=function(){return x};g.Yb="function"===typeof d.write;g.F=function(){p()};g.ga=k;var w=g.Ma;g.Ma=function(a){w.call(g,a);g.wa=function(){g.bb(l);n=!0;g.cb(g)}};a.s(g,"peek",g.o);a.s(g,"dispose",g.F);a.s(g,"isActive",g.ga);a.s(g,"getDependenciesCount",g.fa);u&&(m=!0,u.nodeType&&(y=function(){return !a.a.Ea(u)||D&&D()}));!0!==d.deferEvaluation&&h();u&&k()&&u.nodeType&&(p=function(){a.a.u.Ab(u,p);e()},a.a.u.ja(u,p));return g};a.$b=function(b){return a.Ha(b,a.h)};z=a.m.hc;a.h[z]=a.m;a.h.fn={equalityComparer:G};a.h.fn[z]=a.h;a.a.na&&a.a.ra(a.h.fn,a.N.fn);a.b("dependentObservable",a.h);a.b("computed",a.h);a.b("isComputed",a.$b);(function(){function b(a,f,h){h=h||new d;a=f(a);if("object"!=typeof a||null===a||a===p||a instanceof Date||a instanceof String||a instanceof Number||a instanceof Boolean){return a}var g=a instanceof Array?[]:{};h.save(a,g);c(a,function(c){var d=f(a[c]);switch(typeof d){case"boolean":case"number":case"string":case"function":g[c]=d;break;case"object":case"undefined":var n=h.get(d);g[c]=n!==p?n:b(d,f,h)}});return g}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++){b(c)}"function"==typeof a.toJSON&&b("toJSON")}else{for(c in a){b(c)}}}function d(){this.keys=[];this.ab=[]}a.Gb=function(c){if(0==arguments.length){throw Error("When calling ko.toJS, pass the object you want to convert.")}return b(c,function(b){for(var c=0;a.v(b)&&10>c;c++){b=b()}return b})};a.toJSON=function(b,c,d){b=a.Gb(b);return a.a.Ya(b,c,d)};d.prototype={save:function(b,c){var d=a.a.l(this.keys,b);0<=d?this.ab[d]=c:(this.keys.push(b),this.ab.push(c))},get:function(b){b=a.a.l(this.keys,b);return 0<=b?this.ab[b]:p}}})();a.b("toJS",a.Gb);a.b("toJSON",a.toJSON);(function(){a.i={p:function(b){switch(a.a.B(b)){case"option":return !0===b.__ko__hasDomDataOptionValue__?a.a.f.get(b,a.d.options.Pa):7>=a.a.oa?b.getAttributeNode("value")&&b.getAttributeNode("value").specified?b.value:b.text:b.value;case"select":return 0<=b.selectedIndex?a.i.p(b.options[b.selectedIndex]):p;default:return b.value}},X:function(b,c,d){switch(a.a.B(b)){case"option":switch(typeof c){case"string":a.a.f.set(b,a.d.options.Pa,p);"__ko__hasDomDataOptionValue__" in b&&delete b.__ko__hasDomDataOptionValue__;b.value=c;break;default:a.a.f.set(b,a.d.options.Pa,c),b.__ko__hasDomDataOptionValue__=!0,b.value="number"===typeof c?c:""}break;case"select":if(""===c||null===c){c=p}for(var e=-1,f=0,h=b.options.length,g;f<h;++f){if(g=a.i.p(b.options[f]),g==c||""==g&&c===p){e=f;break}}if(d||0<=e||c===p&&1<b.size){b.selectedIndex=e}break;default:if(null===c||c===p){c=""}b.value=c}}}})();a.b("selectExtensions",a.i);a.b("selectExtensions.readValue",a.i.p);a.b("selectExtensions.writeValue",a.i.X);a.g=function(){function b(b){b=a.a.ta(b);123===b.charCodeAt(0)&&(b=b.slice(1,-1));var c=[],d=b.match(e),g,m,q=0;if(d){d.push(",");for(var s=0,B;B=d[s];++s){var u=B.charCodeAt(0);if(44===u){if(0>=q){g&&c.push(m?{key:g,value:m.join("")}:{unknown:g});g=m=q=0;continue}}else{if(58===u){if(!m){continue}}else{if(47===u&&s&&1<B.length){(u=d[s-1].match(f))&&!h[u[0]]&&(b=b.substr(b.indexOf(B)+1),d=b.match(e),d.push(","),s=-1,B="/")}else{if(40===u||123===u||91===u){++q}else{if(41===u||125===u||93===u){--q}else{if(!g&&!m){g=34===u||39===u?B.slice(1,-1):B;continue}}}}}}m?m.push(B):m=[B]}}return c}var c=["true","false","null","undefined"],d=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,e=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),f=/[\])"'A-Za-z0-9_$]+$/,h={"in":1,"return":1,"typeof":1},g={};return{aa:[],W:g,Ra:b,qa:function(e,l){function f(b,e){var l,k=a.getBindingHandler(b);if(k&&k.preprocess?e=k.preprocess(e,b,f):1){if(k=g[b]){l=e,0<=a.a.l(c,l)?l=!1:(k=l.match(d),l=null===k?!1:k[1]?"Object("+k[1]+")"+k[2]:l),k=l}k&&m.push("'"+b+"':function(_z){"+l+"=_z}");q&&(e="function(){return "+e+" }");h.push("'"+b+"':"+e)}}l=l||{};var h=[],m=[],q=l.valueAccessors,s="string"===typeof e?b(e):e;a.a.r(s,function(a){f(a.key||a.unknown,a.value)});m.length&&f("_ko_property_writers","{"+m.join(",")+" }");return h.join(",")},bc:function(a,b){for(var c=0;c<a.length;c++){if(a[c].key==b){return !0}}return !1},va:function(b,c,d,e,g){if(b&&a.v(b)){!a.ub(b)||g&&b.o()===e||b(e)}else{if((b=c.get("_ko_property_writers"))&&b[d]){b[d](e)}}}}}();a.b("expressionRewriting",a.g);a.b("expressionRewriting.bindingRewriteValidators",a.g.aa);a.b("expressionRewriting.parseObjectLiteral",a.g.Ra);a.b("expressionRewriting.preProcessBindings",a.g.qa);a.b("expressionRewriting._twoWayBindings",a.g.W);a.b("jsonExpressionRewriting",a.g);a.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",a.g.qa);(function(){function b(a){return 8==a.nodeType&&h.test(f?a.text:a.nodeValue)}function c(a){return 8==a.nodeType&&g.test(f?a.text:a.nodeValue)}function d(a,d){for(var e=a,g=1,k=[];e=e.nextSibling;){if(c(e)&&(g--,0===g)){return k}k.push(e);b(e)&&g++}if(!d){throw Error("Cannot find closing comment tag to match: "+a.nodeValue)}return null}function e(a,b){var c=d(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var f=w&&"\x3c!--test--\x3e"===w.createComment("test").text,h=f?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,g=f?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,k={ul:!0,ol:!0};a.e={Q:{},childNodes:function(a){return b(a)?d(a):a.childNodes},da:function(c){if(b(c)){c=a.e.childNodes(c);for(var d=0,e=c.length;d<e;d++){a.removeNode(c[d])}}else{a.a.Fa(c)}},U:function(c,d){if(b(c)){a.e.da(c);for(var e=c.nextSibling,g=0,k=d.length;g<k;g++){e.parentNode.insertBefore(d[g],e)}}else{a.a.U(c,d)}},yb:function(a,c){b(a)?a.parentNode.insertBefore(c,a.nextSibling):a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)},rb:function(c,d,e){e?b(c)?c.parentNode.insertBefore(d,e.nextSibling):e.nextSibling?c.insertBefore(d,e.nextSibling):c.appendChild(d):a.e.yb(c,d)},firstChild:function(a){return b(a)?!a.nextSibling||c(a.nextSibling)?null:a.nextSibling:a.firstChild},nextSibling:function(a){b(a)&&(a=e(a));return a.nextSibling&&c(a.nextSibling)?null:a.nextSibling},Xb:b,lc:function(a){return(a=(f?a.text:a.nodeValue).match(h))?a[1]:null},wb:function(d){if(k[a.a.B(d)]){var g=d.firstChild;if(g){do{if(1===g.nodeType){var f;f=g.firstChild;var h=null;if(f){do{if(h){h.push(f)}else{if(b(f)){var q=e(f,!0);q?f=q:h=[f]}else{c(f)&&(h=[f])}}}while(f=f.nextSibling)}if(f=h){for(h=g.nextSibling,q=0;q<f.length;q++){h?d.insertBefore(f[q],h):d.appendChild(f[q])}}}}while(g=g.nextSibling)}}}}})();a.b("virtualElements",a.e);a.b("virtualElements.allowedBindings",a.e.Q);a.b("virtualElements.emptyNode",a.e.da);a.b("virtualElements.insertAfter",a.e.rb);a.b("virtualElements.prepend",a.e.yb);a.b("virtualElements.setDomNodeChildren",a.e.U);(function(){a.J=function(){this.Nb={}};a.a.extend(a.J.prototype,{nodeHasBindings:function(b){switch(b.nodeType){case 1:return null!=b.getAttribute("data-bind");case 8:return a.e.Xb(b);default:return !1}},getBindings:function(a,c){var d=this.getBindingsString(a,c);return d?this.parseBindingsString(d,c,a):null},getBindingAccessors:function(a,c){var d=this.getBindingsString(a,c);return d?this.parseBindingsString(d,c,a,{valueAccessors:!0}):null},getBindingsString:function(b){switch(b.nodeType){case 1:return b.getAttribute("data-bind");case 8:return a.e.lc(b);default:return null}},parseBindingsString:function(b,c,d,e){try{var f=this.Nb,h=b+(e&&e.valueAccessors||""),g;if(!(g=f[h])){var k,l="with($context){with($data||{}){return{"+a.g.qa(b,e)+"}}}";k=new Function("$context","$element",l);g=f[h]=k}return g(c,d)}catch(n){throw n.message="Unable to parse bindings.\nBindings value: "+b+"\nMessage: "+n.message,n}}});a.J.instance=new a.J})();a.b("bindingProvider",a.J);(function(){function b(a){return function(){return a}}function c(a){return a()}function d(b){return a.a.Oa(a.k.t(b),function(a,c){return function(){return b()[c]}})}function e(a,b){return d(this.getBindings.bind(this,a,b))}function f(b,c,d){var e,g=a.e.firstChild(c),k=a.J.instance,f=k.preprocessNode;if(f){for(;e=g;){g=a.e.nextSibling(e),f.call(k,e)}g=a.e.firstChild(c)}for(;e=g;){g=a.e.nextSibling(e),h(b,e,d)}}function h(b,c,d){var e=!0,g=1===c.nodeType;g&&a.e.wb(c);if(g&&d||a.J.instance.nodeHasBindings(c)){e=k(c,null,b,d).shouldBindDescendants}e&&!n[a.a.B(c)]&&f(b,c,!g)}function g(b){var c=[],d={},e=[];a.a.A(b,function y(g){if(!d[g]){var k=a.getBindingHandler(g);k&&(k.after&&(e.push(g),a.a.r(k.after,function(c){if(b[c]){if(-1!==a.a.l(e,c)){throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+e.join(", "))}y(c)}}),e.length--),c.push({key:g,pb:k}));d[g]=!0}});return c}function k(b,d,k,f){var h=a.a.f.get(b,r);if(!d){if(h){throw Error("You cannot apply bindings multiple times to the same element.")}a.a.f.set(b,r,!0)}!h&&f&&a.Eb(b,k);var l;if(d&&"function"!==typeof d){l=d}else{var n=a.J.instance,m=n.getBindingAccessors||e,x=a.h(function(){(l=d?d(k,b):m.call(n,b,k))&&k.D&&k.D();return l},null,{G:b});l&&x.ga()||(x=null)}var t;if(l){var w=x?function(a){return function(){return c(x()[a])}}:function(a){return l[a]},z=function(){return a.a.Oa(x?x():l,c)};z.get=function(a){return l[a]&&c(w(a))};z.has=function(a){return a in l};f=g(l);a.a.r(f,function(c){var d=c.pb.init,e=c.pb.update,g=c.key;if(8===b.nodeType&&!a.e.Q[g]){throw Error("The binding '"+g+"' cannot be used with virtual elements")}try{"function"==typeof d&&a.k.t(function(){var a=d(b,w(g),z,k.$data,k);if(a&&a.controlsDescendantBindings){if(t!==p){throw Error("Multiple bindings ("+t+" and "+g+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.")}t=g}}),"function"==typeof e&&a.h(function(){e(b,w(g),z,k.$data,k)},null,{G:b})}catch(f){throw f.message='Unable to process binding "'+g+": "+l[g]+'"\nMessage: '+f.message,f}})}return{shouldBindDescendants:t===p}}function l(b){return b&&b instanceof a.I?b:new a.I(b)}a.d={};var n={script:!0};a.getBindingHandler=function(b){return a.d[b]};a.I=function(b,c,d,e){var g=this,k="function"==typeof b&&!a.v(b),f,h=a.h(function(){var f=k?b():b,l=a.a.c(f);c?(c.D&&c.D(),a.a.extend(g,c),h&&(g.D=h)):(g.$parents=[],g.$root=l,g.ko=a);g.$rawData=f;g.$data=l;d&&(g[d]=l);e&&e(g,c,l);return g.$data},null,{Da:function(){return f&&!a.a.eb(f)},G:!0});h.ga()&&(g.D=h,h.equalityComparer=null,f=[],h.Jb=function(b){f.push(b);a.a.u.ja(b,function(b){a.a.ma(f,b);f.length||(h.F(),g.D=h=p)})})};a.I.prototype.createChildContext=function(b,c,d){return new a.I(b,this,c,function(a,b){a.$parentContext=b;a.$parent=b.$data;a.$parents=(b.$parents||[]).slice(0);a.$parents.unshift(a.$parent);d&&d(a)})};a.I.prototype.extend=function(b){return new a.I(this.D||this.$data,this,null,function(c,d){c.$rawData=d.$rawData;a.a.extend(c,"function"==typeof b?b():b)})};var r=a.a.f.L(),m=a.a.f.L();a.Eb=function(b,c){if(2==arguments.length){a.a.f.set(b,m,c),c.D&&c.D.Jb(b)}else{return a.a.f.get(b,m)}};a.xa=function(b,c,d){1===b.nodeType&&a.e.wb(b);return k(b,c,l(d),!0)};a.Lb=function(c,e,g){g=l(g);return a.xa(c,"function"===typeof e?d(e.bind(null,g,c)):a.a.Oa(e,b),g)};a.gb=function(a,b){1!==b.nodeType&&8!==b.nodeType||f(l(a),b,!0)};a.fb=function(a,b){!t&&A.jQuery&&(t=A.jQuery);if(b&&1!==b.nodeType&&8!==b.nodeType){throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node")}b=b||A.document.body;h(l(a),b,!0)};a.Ca=function(b){switch(b.nodeType){case 1:case 8:var c=a.Eb(b);if(c){return c}if(b.parentNode){return a.Ca(b.parentNode)}}return p};a.Pb=function(b){return(b=a.Ca(b))?b.$data:p};a.b("bindingHandlers",a.d);a.b("applyBindings",a.fb);a.b("applyBindingsToDescendants",a.gb);a.b("applyBindingAccessorsToNode",a.xa);a.b("applyBindingsToNode",a.Lb);a.b("contextFor",a.Ca);a.b("dataFor",a.Pb)})();var L={"class":"className","for":"htmlFor"};a.d.attr={update:function(b,c){var d=a.a.c(c())||{};a.a.A(d,function(c,d){d=a.a.c(d);var h=!1===d||null===d||d===p;h&&b.removeAttribute(c);8>=a.a.oa&&c in L?(c=L[c],h?b.removeAttribute(c):b[c]=d):h||b.setAttribute(c,d.toString());"name"===c&&a.a.Cb(b,h?"":d.toString())})}};(function(){a.d.checked={after:["value","attr"],init:function(b,c,d){function e(){return d.has("checkedValue")?a.a.c(d.get("checkedValue")):b.value}function f(){var g=b.checked,f=r?e():g;if(!a.ca.pa()&&(!k||g)){var h=a.k.t(c);l?n!==f?(g&&(a.a.Y(h,f,!0),a.a.Y(h,n,!1)),n=f):a.a.Y(h,f,g):a.g.va(h,d,"checked",f,!0)}}function h(){var d=a.a.c(c());b.checked=l?0<=a.a.l(d,e()):g?d:e()===d}var g="checkbox"==b.type,k="radio"==b.type;if(g||k){var l=g&&a.a.c(c()) instanceof Array,n=l?e():p,r=k||l;k&&!b.name&&a.d.uniqueName.init(b,function(){return !0});a.ba(f,null,{G:b});a.a.q(b,"click",f);a.ba(h,null,{G:b})}}};a.g.W.checked=!0;a.d.checkedValue={update:function(b,c){b.value=a.a.c(c())}}})();a.d.css={update:function(b,c){var d=a.a.c(c());"object"==typeof d?a.a.A(d,function(c,d){d=a.a.c(d);a.a.ua(b,c,d)}):(d=String(d||""),a.a.ua(b,b.__ko__cssValue,!1),b.__ko__cssValue=d,a.a.ua(b,d,!0))}};a.d.enable={update:function(b,c){var d=a.a.c(c());d&&b.disabled?b.removeAttribute("disabled"):d||b.disabled||(b.disabled=!0)}};a.d.disable={update:function(b,c){a.d.enable.update(b,function(){return !a.a.c(c())})}};a.d.event={init:function(b,c,d,e,f){var h=c()||{};a.a.A(h,function(g){"string"==typeof g&&a.a.q(b,g,function(b){var h,n=c()[g];if(n){try{var r=a.a.R(arguments);e=f.$data;r.unshift(e);h=n.apply(e,r)}finally{!0!==h&&(b.preventDefault?b.preventDefault():b.returnValue=!1)}!1===d.get(g+"Bubble")&&(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation())}})})}};a.d.foreach={vb:function(b){return function(){var c=b(),d=a.a.Sa(c);if(!d||"number"==typeof d.length){return{foreach:c,templateEngine:a.K.Ja}}a.a.c(c);return{foreach:d.data,as:d.as,includeDestroyed:d.includeDestroyed,afterAdd:d.afterAdd,beforeRemove:d.beforeRemove,afterRender:d.afterRender,beforeMove:d.beforeMove,afterMove:d.afterMove,templateEngine:a.K.Ja}}},init:function(b,c){return a.d.template.init(b,a.d.foreach.vb(c))},update:function(b,c,d,e,f){return a.d.template.update(b,a.d.foreach.vb(c),d,e,f)}};a.g.aa.foreach=!1;a.e.Q.foreach=!0;a.d.hasfocus={init:function(b,c,d){function e(e){b.__ko_hasfocusUpdating=!0;var k=b.ownerDocument;if("activeElement" in k){var f;try{f=k.activeElement}catch(h){f=k.body}e=f===b}k=c();a.g.va(k,d,"hasfocus",e,!0);b.__ko_hasfocusLastValue=e;b.__ko_hasfocusUpdating=!1}var f=e.bind(null,!0),h=e.bind(null,!1);a.a.q(b,"focus",f);a.a.q(b,"focusin",f);a.a.q(b,"blur",h);a.a.q(b,"focusout",h)},update:function(b,c){var d=!!a.a.c(c());b.__ko_hasfocusUpdating||b.__ko_hasfocusLastValue===d||(d?b.focus():b.blur(),a.k.t(a.a.ha,null,[b,d?"focusin":"focusout"]))}};a.g.W.hasfocus=!0;a.d.hasFocus=a.d.hasfocus;a.g.W.hasFocus=!0;a.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.Va(b,c())}};H("if");H("ifnot",!1,!0);H("with",!0,!1,function(a,c){return a.createChildContext(c)});var J={};a.d.options={init:function(b){if("select"!==a.a.B(b)){throw Error("options binding applies only to SELECT elements")}for(;0<b.length;){b.remove(0)}return{controlsDescendantBindings:!0}},update:function(b,c,d){function e(){return a.a.la(b.options,function(a){return a.selected})}function f(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function h(c,d){if(r.length){var e=0<=a.a.l(r,a.i.p(d[0]));a.a.Db(d[0],e);m&&!e&&a.k.t(a.a.ha,null,[b,"change"])}}var g=0!=b.length&&b.multiple?b.scrollTop:null,k=a.a.c(c()),l=d.get("optionsIncludeDestroyed");c={};var n,r;r=b.multiple?a.a.ya(e(),a.i.p):0<=b.selectedIndex?[a.i.p(b.options[b.selectedIndex])]:[];k&&("undefined"==typeof k.length&&(k=[k]),n=a.a.la(k,function(b){return l||b===p||null===b||!a.a.c(b._destroy)}),d.has("optionsCaption")&&(k=a.a.c(d.get("optionsCaption")),null!==k&&k!==p&&n.unshift(J)));var m=!1;c.beforeRemove=function(a){b.removeChild(a)};k=h;d.has("optionsAfterRender")&&(k=function(b,c){h(0,c);a.k.t(d.get("optionsAfterRender"),null,[c[0],b!==J?b:p])});a.a.Ua(b,n,function(c,e,g){g.length&&(r=g[0].selected?[a.i.p(g[0])]:[],m=!0);e=b.ownerDocument.createElement("option");c===J?(a.a.Xa(e,d.get("optionsCaption")),a.i.X(e,p)):(g=f(c,d.get("optionsValue"),c),a.i.X(e,a.a.c(g)),c=f(c,d.get("optionsText"),g),a.a.Xa(e,c));return[e]},c,k);a.k.t(function(){d.get("valueAllowUnset")&&d.has("value")?a.i.X(b,a.a.c(d.get("value")),!0):(b.multiple?r.length&&e().length<r.length:r.length&&0<=b.selectedIndex?a.i.p(b.options[b.selectedIndex])!==r[0]:r.length||0<=b.selectedIndex)&&a.a.ha(b,"change")});a.a.Tb(b);g&&20<Math.abs(g-b.scrollTop)&&(b.scrollTop=g)}};a.d.options.Pa=a.a.f.L();a.d.selectedOptions={after:["options","foreach"],init:function(b,c,d){a.a.q(b,"change",function(){var e=c(),f=[];a.a.r(b.getElementsByTagName("option"),function(b){b.selected&&f.push(a.i.p(b))});a.g.va(e,d,"selectedOptions",f)})},update:function(b,c){if("select"!=a.a.B(b)){throw Error("values binding applies only to SELECT elements")}var d=a.a.c(c());d&&"number"==typeof d.length&&a.a.r(b.getElementsByTagName("option"),function(b){var c=0<=a.a.l(d,a.i.p(b));a.a.Db(b,c)})}};a.g.W.selectedOptions=!0;a.d.style={update:function(b,c){var d=a.a.c(c()||{});a.a.A(d,function(c,d){d=a.a.c(d);b.style[c]=d||""})}};a.d.submit={init:function(b,c,d,e,f){if("function"!=typeof c()){throw Error("The value for a submit binding must be a function")}a.a.q(b,"submit",function(a){var d,e=c();try{d=e.call(f.$data,b)}finally{!0!==d&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}})}};a.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.Xa(b,c())}};a.e.Q.text=!0;a.d.uniqueName={init:function(b,c){if(c()){var d="ko_unique_"+ ++a.d.uniqueName.Ob;a.a.Cb(b,d)}}};a.d.uniqueName.Ob=0;a.d.value={after:["options","foreach"],init:function(b,c,d){function e(){g=!1;var e=c(),f=a.i.p(b);a.g.va(e,d,"value",f)}var f=["change"],h=d.get("valueUpdate"),g=!1;h&&("string"==typeof h&&(h=[h]),a.a.$(f,h),f=a.a.ib(f));!a.a.oa||"input"!=b.tagName.toLowerCase()||"text"!=b.type||"off"==b.autocomplete||b.form&&"off"==b.form.autocomplete||-1!=a.a.l(f,"propertychange")||(a.a.q(b,"propertychange",function(){g=!0}),a.a.q(b,"focus",function(){g=!1}),a.a.q(b,"blur",function(){g&&e()}));a.a.r(f,function(c){var d=e;a.a.kc(c,"after")&&(d=function(){setTimeout(e,0)},c=c.substring(5));a.a.q(b,c,d)})},update:function(b,c,d){var e=a.a.c(c());c=a.i.p(b);if(e!==c){if("select"===a.a.B(b)){var f=d.get("valueAllowUnset");d=function(){a.i.X(b,e,f)};d();f||e===a.i.p(b)?setTimeout(d,0):a.k.t(a.a.ha,null,[b,"change"])}else{a.i.X(b,e)}}}};a.g.W.value=!0;a.d.visible={update:function(b,c){var d=a.a.c(c()),e="none"!=b.style.display;d&&!e?b.style.display="":!d&&e&&(b.style.display="none")}};(function(b){a.d[b]={init:function(c,d,e,f,h){return a.d.event.init.call(this,c,function(){var a={};a[b]=d();return a},e,f,h)}}})("click");a.C=function(){};a.C.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")};a.C.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")};a.C.prototype.makeTemplateSource=function(b,c){if("string"==typeof b){c=c||w;var d=c.getElementById(b);if(!d){throw Error("Cannot find template with ID "+b)}return new a.n.j(d)}if(1==b.nodeType||8==b.nodeType){return new a.n.Z(b)}throw Error("Unknown template type: "+b)};a.C.prototype.renderTemplate=function(a,c,d,e){a=this.makeTemplateSource(a,e);return this.renderTemplateSource(a,c,d)};a.C.prototype.isTemplateRewritten=function(a,c){return !1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,c).data("isRewritten")};a.C.prototype.rewriteTemplate=function(a,c,d){a=this.makeTemplateSource(a,d);c=c(a.text());a.text(c);a.data("isRewritten",!0)};a.b("templateEngine",a.C);a.Za=function(){function b(b,c,d,g){b=a.g.Ra(b);for(var k=a.g.aa,l=0;l<b.length;l++){var n=b[l].key;if(k.hasOwnProperty(n)){var r=k[n];if("function"===typeof r){if(n=r(b[l].value)){throw Error(n)}}else{if(!r){throw Error("This template engine does not support the '"+n+"' binding within its templates")}}}}d="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+a.g.qa(b,{valueAccessors:!0})+" } })()},'"+d.toLowerCase()+"')";return g.createJavaScriptEvaluatorBlock(d)+c}var c=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,d=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Ub:function(b,c,d){c.isTemplateRewritten(b,d)||c.rewriteTemplate(b,function(b){return a.Za.dc(b,c)},d)},dc:function(a,f){return a.replace(c,function(a,c,d,e,n){return b(n,c,d,f)}).replace(d,function(a,c){return b(c,"\x3c!-- ko --\x3e","#comment",f)})},Mb:function(b,c){return a.w.Na(function(d,g){var k=d.nextSibling;k&&k.nodeName.toLowerCase()===c&&a.xa(k,b,g)})}}}();a.b("__tr_ambtns",a.Za.Mb);(function(){a.n={};a.n.j=function(a){this.j=a};a.n.j.prototype.text=function(){var b=a.a.B(this.j),b="script"===b?"text":"textarea"===b?"value":"innerHTML";if(0==arguments.length){return this.j[b]}var c=arguments[0];"innerHTML"===b?a.a.Va(this.j,c):this.j[b]=c};var b=a.a.f.L()+"_";a.n.j.prototype.data=function(c){if(1===arguments.length){return a.a.f.get(this.j,b+c)}a.a.f.set(this.j,b+c,arguments[1])};var c=a.a.f.L();a.n.Z=function(a){this.j=a};a.n.Z.prototype=new a.n.j;a.n.Z.prototype.text=function(){if(0==arguments.length){var b=a.a.f.get(this.j,c)||{};b.$a===p&&b.Ba&&(b.$a=b.Ba.innerHTML);return b.$a}a.a.f.set(this.j,c,{$a:arguments[0]})};a.n.j.prototype.nodes=function(){if(0==arguments.length){return(a.a.f.get(this.j,c)||{}).Ba}a.a.f.set(this.j,c,{Ba:arguments[0]})};a.b("templateSources",a.n);a.b("templateSources.domElement",a.n.j);a.b("templateSources.anonymousTemplate",a.n.Z)})();(function(){function b(b,c,d){var e;for(c=a.e.nextSibling(c);b&&(e=b)!==c;){b=a.e.nextSibling(e),d(e,b)}}function c(c,d){if(c.length){var e=c[0],f=c[c.length-1],h=e.parentNode,m=a.J.instance,q=m.preprocessNode;if(q){b(e,f,function(a,b){var c=a.previousSibling,d=q.call(m,a);d&&(a===e&&(e=d[0]||b),a===f&&(f=d[d.length-1]||c))});c.length=0;if(!e){return}e===f?c.push(e):(c.push(e,f),a.a.ea(c,h))}b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.fb(d,b)});b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.w.Ib(b,[d])});a.a.ea(c,h)}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(b,e,h,n,r){r=r||{};var m=b&&d(b),m=m&&m.ownerDocument,q=r.templateEngine||f;a.Za.Ub(h,q,m);h=q.renderTemplate(h,n,r,m);if("number"!=typeof h.length||0<h.length&&"number"!=typeof h[0].nodeType){throw Error("Template engine must return an array of DOM nodes")}m=!1;switch(e){case"replaceChildren":a.e.U(b,h);m=!0;break;case"replaceNode":a.a.Bb(b,h);m=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+e)}m&&(c(h,n),r.afterRender&&a.k.t(r.afterRender,null,[h,n.$data]));return h}var f;a.Wa=function(b){if(b!=p&&!(b instanceof a.C)){throw Error("templateEngine must inherit from ko.templateEngine")}f=b};a.Ta=function(b,c,h,n,r){h=h||{};if((h.templateEngine||f)==p){throw Error("Set a template engine before calling renderTemplate")}r=r||"replaceChildren";if(n){var m=d(n);return a.h(function(){var f=c&&c instanceof a.I?c:new a.I(a.a.c(c)),p=a.v(b)?b():"function"==typeof b?b(f.$data,f):b,f=e(n,r,p,f,h);"replaceNode"==r&&(n=f,m=d(n))},null,{Da:function(){return !m||!a.a.Ea(m)},G:m&&"replaceNode"==r?m.parentNode:m})}return a.w.Na(function(d){a.Ta(b,c,h,d,"replaceNode")})};a.jc=function(b,d,f,h,r){function m(a,b){c(b,s);f.afterRender&&f.afterRender(b,a)}function q(a,c){s=r.createChildContext(a,f.as,function(a){a.$index=c});var d="function"==typeof b?b(a,s):b;return e(null,"ignoreTargetNode",d,s,f)}var s;return a.h(function(){var b=a.a.c(d)||[];"undefined"==typeof b.length&&(b=[b]);b=a.a.la(b,function(b){return f.includeDestroyed||b===p||null===b||!a.a.c(b._destroy)});a.k.t(a.a.Ua,null,[h,b,q,f,m])},null,{G:h})};var h=a.a.f.L();a.d.template={init:function(b,c){var d=a.a.c(c());"string"==typeof d||d.name?a.e.da(b):(d=a.e.childNodes(b),d=a.a.ec(d),(new a.n.Z(b)).nodes(d));return{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var m=c(),q;c=a.a.c(m);d=!0;e=null;"string"==typeof c?c={}:(m=c.name,"if" in c&&(d=a.a.c(c["if"])),d&&"ifnot" in c&&(d=!a.a.c(c.ifnot)),q=a.a.c(c.data));"foreach" in c?e=a.jc(m||b,d&&c.foreach||[],c,b,f):d?(f="data" in c?f.createChildContext(q,c.as):f,e=a.Ta(m||b,f,c,b)):a.e.da(b);f=e;(q=a.a.f.get(b,h))&&"function"==typeof q.F&&q.F();a.a.f.set(b,h,f&&f.ga()?f:p)}};a.g.aa.template=function(b){b=a.g.Ra(b);return 1==b.length&&b[0].unknown||a.g.bc(b,"name")?null:"This template engine does not support anonymous templates nested within its templates"};a.e.Q.template=!0})();a.b("setTemplateEngine",a.Wa);a.b("renderTemplate",a.Ta);a.a.nb=function(a,c,d){if(a.length&&c.length){var e,f,h,g,k;for(e=f=0;(!d||e<d)&&(g=a[f]);++f){for(h=0;k=c[h];++h){if(g.value===k.value){g.moved=k.index;k.moved=g.index;c.splice(h,1);e=h=0;break}}e+=h}}};a.a.Aa=function(){function b(b,d,e,f,h){var g=Math.min,k=Math.max,l=[],n,p=b.length,m,q=d.length,s=q-p||1,t=p+q+1,u,w,y;for(n=0;n<=p;n++){for(w=u,l.push(u=[]),y=g(q,n+s),m=k(0,n-1);m<=y;m++){u[m]=m?n?b[n-1]===d[m-1]?w[m-1]:g(w[m]||t,u[m-1]||t)+1:m+1:n+1}}g=[];k=[];s=[];n=p;for(m=q;n||m;){q=l[n][m]-1,m&&q===l[n][m-1]?k.push(g[g.length]={status:e,value:d[--m],index:m}):n&&q===l[n-1][m]?s.push(g[g.length]={status:f,value:b[--n],index:n}):(--m,--n,h.sparse||g.push({status:"retained",value:d[m]}))}a.a.nb(k,s,10*p);return g.reverse()}return function(a,d,e){e="boolean"===typeof e?{dontLimitMoves:e}:e||{};a=a||[];d=d||[];return a.length<=d.length?b(a,d,"added","deleted",e):b(d,a,"deleted","added",e)}}();a.b("utils.compareArrays",a.a.Aa);(function(){function b(b,c,f,h,g){var k=[],l=a.h(function(){var l=c(f,g,a.a.ea(k,b))||[];0<k.length&&(a.a.Bb(k,l),h&&a.k.t(h,null,[f,l,g]));k.length=0;a.a.$(k,l)},null,{G:b,Da:function(){return !a.a.eb(k)}});return{S:k,h:l.ga()?l:p}}var c=a.a.f.L();a.a.Ua=function(d,e,f,h,g){function k(b,c){v=r[c];u!==c&&(z[b]=v);v.Ia(u++);a.a.ea(v.S,d);s.push(v);y.push(v)}function l(b,c){if(b){for(var d=0,e=c.length;d<e;d++){c[d]&&a.a.r(c[d].S,function(a){b(a,d,c[d].ka)})}}}e=e||[];h=h||{};var n=a.a.f.get(d,c)===p,r=a.a.f.get(d,c)||[],m=a.a.ya(r,function(a){return a.ka}),q=a.a.Aa(m,e,h.dontLimitMoves),s=[],t=0,u=0,w=[],y=[];e=[];for(var z=[],m=[],v,x=0,A,C;A=q[x];x++){switch(C=A.moved,A.status){case"deleted":C===p&&(v=r[t],v.h&&v.h.F(),w.push.apply(w,a.a.ea(v.S,d)),h.beforeRemove&&(e[x]=v,y.push(v)));t++;break;case"retained":k(x,t++);break;case"added":C!==p?k(x,C):(v={ka:A.value,Ia:a.m(u++)},s.push(v),y.push(v),n||(m[x]=v))}}l(h.beforeMove,z);a.a.r(w,h.beforeRemove?a.M:a.removeNode);for(var x=0,n=a.e.firstChild(d),E;v=y[x];x++){v.S||a.a.extend(v,b(d,f,v.ka,g,v.Ia));for(t=0;q=v.S[t];n=q.nextSibling,E=q,t++){q!==n&&a.e.rb(d,q,E)}!v.Zb&&g&&(g(v.ka,v.S,v.Ia),v.Zb=!0)}l(h.beforeRemove,e);l(h.afterMove,z);l(h.afterAdd,m);a.a.f.set(d,c,s)}})();a.b("utils.setDomNodeChildrenFromArrayMapping",a.a.Ua);a.K=function(){this.allowTemplateRewriting=!1};a.K.prototype=new a.C;a.K.prototype.renderTemplateSource=function(b){var c=(9>a.a.oa?0:b.nodes)?b.nodes():null;if(c){return a.a.R(c.cloneNode(!0).childNodes)}b=b.text();return a.a.Qa(b)};a.K.Ja=new a.K;a.Wa(a.K.Ja);a.b("nativeTemplateEngine",a.K);(function(){a.La=function(){var a=this.ac=function(){if(!t||!t.tmpl){return 0}try{if(0<=t.tmpl.tag.tmpl.open.toString().indexOf("__")){return 2}}catch(a){}return 1}();this.renderTemplateSource=function(b,e,f){f=f||{};if(2>a){throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}var h=b.data("precompiled");h||(h=b.text()||"",h=t.template(null,"{{ko_with $item.koBindingContext}}"+h+"{{/ko_with}}"),b.data("precompiled",h));b=[e.$data];e=t.extend({koBindingContext:e},f.templateOptions);e=t.tmpl(h,b,e);e.appendTo(w.createElement("div"));t.fragments={};return e};this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"};this.addTemplate=function(a,b){w.write("<script type='text/html' id='"+a+"'>"+b+"\x3c/script>")};0<a&&(t.tmpl.tag.ko_code={open:"__.push($1 || '');"},t.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};a.La.prototype=new a.C;var b=new a.La;0<b.ac&&a.Wa(b);a.b("jqueryTmplTemplateEngine",a.La)})()})})()})();
/*! Magnific Popup - v0.9.8 - 2013-10-26
* http://dimsemenov.com/plugins/magnific-popup/
* Copyright (c) 2013 Dmitry Semenov; */
(function(D){var z="Close",I="BeforeClose",w="AfterClose",O="BeforeAppend",f="MarkupParse",l="Open",h="Change",E="mfp",d="."+E,J="mfp-ready",L="mfp-removing",e="mfp-prevent-close";var T,A=function(){},K=!!(window.jQuery),C,a=D(window),y,B,G,b,M;var j=function(X,Y){T.ev.on(E+X+d,Y)},o=function(ab,Y,Z,X){var aa=document.createElement("div");aa.className="mfp-"+ab;if(Z){aa.innerHTML=Z}if(!X){aa=D(aa);if(Y){aa.appendTo(Y)}}else{if(Y){Y.appendChild(aa)}}return aa},Q=function(Y,X){T.ev.triggerHandler(E+Y,X);if(T.st.callbacks){Y=Y.charAt(0).toLowerCase()+Y.slice(1);if(T.st.callbacks[Y]){T.st.callbacks[Y].apply(T,D.isArray(X)?X:[X])}}},i=function(){(T.st.focus?T.content.find(T.st.focus).eq(0):T.wrap).focus()},F=function(X){if(X!==M||!T.currTemplate.closeBtn){T.currTemplate.closeBtn=D(T.st.closeMarkup.replace("%title%",T.st.tClose));M=X}return T.currTemplate.closeBtn},t=function(){if(!D.magnificPopup.instance){T=new A();T.init();D.magnificPopup.instance=T}},W=function(){var Y=document.createElement("p").style,X=["ms","O","Moz","Webkit"];if(Y.transition!==undefined){return true}while(X.length){if(X.pop()+"Transition" in Y){return true}}return false};A.prototype={constructor:A,init:function(){var X=navigator.appVersion;T.isIE7=X.indexOf("MSIE 7.")!==-1;T.isIE8=X.indexOf("MSIE 8.")!==-1;T.isLowIE=T.isIE7||T.isIE8;T.isAndroid=(/android/gi).test(X);T.isIOS=(/iphone|ipad|ipod/gi).test(X);T.supportsTransition=W();T.probablyMobile=(T.isAndroid||T.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent));y=D(document.body);B=D(document);T.popupsCache={}},open:function(ac){var ad;if(ac.isObj===false){T.items=ac.items.toArray();T.index=0;var ae=ac.items,af;for(ad=0;ad<ae.length;ad++){af=ae[ad];if(af.parsed){af=af.el[0]}if(af===ac.el[0]){T.index=ad;break}}}else{T.items=D.isArray(ac.items)?ac.items:[ac.items];T.index=ac.index||0}if(T.isOpen){T.updateItemHTML();return}T.types=[];b="";if(ac.mainEl&&ac.mainEl.length){T.ev=ac.mainEl.eq(0)}else{T.ev=B}if(ac.key){if(!T.popupsCache[ac.key]){T.popupsCache[ac.key]={}}T.currTemplate=T.popupsCache[ac.key]}else{T.currTemplate={}}T.st=D.extend(true,{},D.magnificPopup.defaults,ac);T.fixedContentPos=T.st.fixedContentPos==="auto"?!T.probablyMobile:T.st.fixedContentPos;if(T.st.modal){T.st.closeOnContentClick=false;T.st.closeOnBgClick=false;T.st.showCloseBtn=false;T.st.enableEscapeKey=false}if(!T.bgOverlay){T.bgOverlay=o("bg").on("click"+d,function(){T.close()});T.wrap=o("wrap").attr("tabindex",-1).on("click"+d,function(ah){if(T._checkIfClose(ah.target)){T.close()}});T.container=o("container",T.wrap)}T.contentContainer=o("content");if(T.st.preloader){T.preloader=o("preloader",T.container,T.st.tLoading)}var ab=D.magnificPopup.modules;for(ad=0;ad<ab.length;ad++){var aa=ab[ad];aa=aa.charAt(0).toUpperCase()+aa.slice(1);T["init"+aa].call(T)}Q("BeforeOpen");if(T.st.showCloseBtn){if(!T.st.closeBtnInside){T.wrap.append(F())}else{j(f,function(ak,ai,ah,aj){ah.close_replaceWith=F(aj.type)});b+=" mfp-close-btn-in"}}if(T.st.alignTop){b+=" mfp-align-top"}if(T.fixedContentPos){T.wrap.css({overflow:T.st.overflowY,overflowX:"hidden",overflowY:T.st.overflowY})}else{T.wrap.css({top:a.scrollTop(),position:"absolute"})}if(T.st.fixedBgPos===false||(T.st.fixedBgPos==="auto"&&!T.fixedContentPos)){T.bgOverlay.css({height:B.height(),position:"absolute"})}if(T.st.enableEscapeKey){B.on("keyup"+d,function(ah){if(ah.keyCode===27){T.close()}})}a.on("resize"+d,function(){T.updateSize()});if(!T.st.closeOnContentClick){b+=" mfp-auto-cursor"}if(b){T.wrap.addClass(b)}var X=T.wH=a.height();var Z={};if(T.fixedContentPos){if(T._hasScrollBar(X)){var ag=T._getScrollbarSize();if(ag){Z.marginRight=ag}}}if(T.fixedContentPos){if(!T.isIE7){Z.overflow="hidden"}else{D("body, html").css("overflow","hidden")}}var Y=T.st.mainClass;if(T.isIE7){Y+=" mfp-ie7"}if(Y){T._addClassToMFP(Y)}T.updateItemHTML();Q("BuildControls");D("html").css(Z);T.bgOverlay.add(T.wrap).prependTo(document.body);T._lastFocusedEl=document.activeElement;setTimeout(function(){if(T.content){T._addClassToMFP(J);i()}else{T.bgOverlay.addClass(J)}B.on("focusin"+d,function(ah){if(ah.target!==T.wrap[0]&&!D.contains(T.wrap[0],ah.target)){i();return false}})},16);T.isOpen=true;T.updateSize(X);Q(l);return ac},close:function(){if(!T.isOpen){return}Q(I);T.isOpen=false;if(T.st.removalDelay&&!T.isLowIE&&T.supportsTransition){T._addClassToMFP(L);setTimeout(function(){T._close()},T.st.removalDelay)}else{T._close()}},_close:function(){Q(z);var X=L+" "+J+" ";T.bgOverlay.detach();T.wrap.detach();T.container.empty();if(T.st.mainClass){X+=T.st.mainClass+" "}T._removeClassFromMFP(X);if(T.fixedContentPos){var Y={marginRight:""};if(T.isIE7){D("body, html").css("overflow","")}else{Y.overflow=""}D("html").css(Y)}B.off("keyup"+d+" focusin"+d);T.ev.off(d);T.wrap.attr("class","mfp-wrap").removeAttr("style");T.bgOverlay.attr("class","mfp-bg");T.container.attr("class","mfp-container");if(T.st.showCloseBtn&&(!T.st.closeBtnInside||T.currTemplate[T.currItem.type]===true)){if(T.currTemplate.closeBtn){T.currTemplate.closeBtn.detach()}}if(T._lastFocusedEl){D(T._lastFocusedEl).focus()}T.currItem=null;T.content=null;T.currTemplate=null;T.prevHeight=0;Q(w)},updateSize:function(Y){if(T.isIOS){var Z=document.documentElement.clientWidth/window.innerWidth;var X=window.innerHeight*Z;T.wrap.css("height",X);T.wH=X}else{T.wH=Y||a.height()}if(!T.fixedContentPos){T.wrap.css("height",T.wH)}Q("Resize")},updateItemHTML:function(){var aa=T.items[T.index];T.contentContainer.detach();if(T.content){T.content.detach()}if(!aa.parsed){aa=T.parseEl(T.index)}var Z=aa.type;Q("BeforeChange",[T.currItem?T.currItem.type:"",Z]);T.currItem=aa;if(!T.currTemplate[Z]){var Y=T.st[Z]?T.st[Z].markup:false;Q("FirstMarkupParse",Y);if(Y){T.currTemplate[Z]=D(Y)}else{T.currTemplate[Z]=true}}if(G&&G!==aa.type){T.container.removeClass("mfp-"+G+"-holder")}var X=T["get"+Z.charAt(0).toUpperCase()+Z.slice(1)](aa,T.currTemplate[Z]);T.appendContent(X,Z);aa.preloaded=true;Q(h,aa);G=aa.type;T.container.prepend(T.contentContainer);Q("AfterChange")},appendContent:function(X,Y){T.content=X;if(X){if(T.st.showCloseBtn&&T.st.closeBtnInside&&T.currTemplate[Y]===true){if(!T.content.find(".mfp-close").length){T.content.append(F())}}else{T.content=X}}else{T.content=""}Q(O);T.container.addClass("mfp-"+Y+"-holder");T.contentContainer.append(T.content)},parseEl:function(X){var ab=T.items[X],aa=ab.type;if(ab.tagName){ab={el:D(ab)}}else{ab={data:ab,src:ab.src}}if(ab.el){var Z=T.types;for(var Y=0;Y<Z.length;Y++){if(ab.el.hasClass("mfp-"+Z[Y])){aa=Z[Y];break}}ab.src=ab.el.attr("data-mfp-src");if(!ab.src){ab.src=ab.el.attr("href")}}ab.type=aa||T.st.type||"inline";ab.index=X;ab.parsed=true;T.items[X]=ab;Q("ElementParse",ab);return T.items[X]},addGroup:function(Z,Y){var aa=function(ab){ab.mfpEl=this;T._openClick(ab,Z,Y)};if(!Y){Y={}}var X="click.magnificPopup";Y.mainEl=Z;if(Y.items){Y.isObj=true;Z.off(X).on(X,aa)}else{Y.isObj=false;if(Y.delegate){Z.off(X).on(X,Y.delegate,aa)}else{Y.items=Z;Z.off(X).on(X,aa)}}},_openClick:function(ab,Z,X){var Y=X.midClick!==undefined?X.midClick:D.magnificPopup.defaults.midClick;if(!Y&&(ab.which===2||ab.ctrlKey||ab.metaKey)){return}var aa=X.disableOn!==undefined?X.disableOn:D.magnificPopup.defaults.disableOn;if(aa){if(D.isFunction(aa)){if(!aa.call(T)){return true}}else{if(a.width()<aa){return true}}}if(ab.type){ab.preventDefault();if(T.isOpen){ab.stopPropagation()}}X.el=D(ab.mfpEl);if(X.delegate){X.items=Z.find(X.delegate)}T.open(X)},updateStatus:function(X,Z){if(T.preloader){if(C!==X){T.container.removeClass("mfp-s-"+C)}if(!Z&&X==="loading"){Z=T.st.tLoading}var Y={status:X,text:Z};Q("UpdateStatus",Y);X=Y.status;Z=Y.text;T.preloader.html(Z);T.preloader.find("a").on("click",function(aa){aa.stopImmediatePropagation()});T.container.addClass("mfp-s-"+X);C=X}},_checkIfClose:function(Z){if(D(Z).hasClass(e)){return}var X=T.st.closeOnContentClick;var Y=T.st.closeOnBgClick;if(X&&Y){return true}else{if(!T.content||D(Z).hasClass("mfp-close")||(T.preloader&&Z===T.preloader[0])){return true}if((Z!==T.content[0]&&!D.contains(T.content[0],Z))){if(Y){if(D.contains(document,Z)){return true}}}else{if(X){return true}}}return false},_addClassToMFP:function(X){T.bgOverlay.addClass(X);T.wrap.addClass(X)},_removeClassFromMFP:function(X){this.bgOverlay.removeClass(X);T.wrap.removeClass(X)},_hasScrollBar:function(X){return((T.isIE7?B.height():document.body.scrollHeight)>(X||a.height()))},_parseMarkup:function(Z,Y,aa){var X;if(aa.data){Y=D.extend(aa.data,Y)}Q(f,[Z,Y,aa]);D.each(Y,function(ac,ae){if(ae===undefined||ae===false){return true}X=ac.split("_");if(X.length>1){var ad=Z.find(d+"-"+X[0]);if(ad.length>0){var ab=X[1];if(ab==="replaceWith"){if(ad[0]!==ae[0]){ad.replaceWith(ae)}}else{if(ab==="img"){if(ad.is("img")){ad.attr("src",ae)}else{ad.replaceWith('<img src="'+ae+'" class="'+ad.attr("class")+'" />')}}else{ad.attr(X[1],ae)}}}}else{Z.find(d+"-"+ac).html(ae)}})},_getScrollbarSize:function(){if(T.scrollbarSize===undefined){var X=document.createElement("div");X.id="mfp-sbm";X.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;";document.body.appendChild(X);T.scrollbarSize=X.offsetWidth-X.clientWidth;document.body.removeChild(X)}return T.scrollbarSize}};D.magnificPopup={instance:null,proto:A.prototype,modules:[],open:function(Y,X){t();if(!Y){Y={}}else{Y=D.extend(true,{},Y)}Y.isObj=true;Y.index=X||0;return this.instance.open(Y)},close:function(){return D.magnificPopup.instance&&D.magnificPopup.instance.close()},registerModule:function(X,Y){if(Y.options){D.magnificPopup.defaults[X]=Y.options}D.extend(this.proto,Y.proto);this.modules.push(X)},defaults:{disableOn:0,key:null,midClick:false,mainClass:"",preloader:true,focus:"",closeOnContentClick:false,closeOnBgClick:true,closeBtnInside:true,showCloseBtn:true,enableEscapeKey:true,modal:false,alignTop:false,removalDelay:0,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}};D.fn.magnificPopup=function(Z){t();var aa=D(this);if(typeof Z==="string"){if(Z==="open"){var X,ab=K?aa.data("magnificPopup"):aa[0].magnificPopup,Y=parseInt(arguments[1],10)||0;if(ab.items){X=ab.items[Y]}else{X=aa;if(ab.delegate){X=X.find(ab.delegate)}X=X.eq(Y)}T._openClick({mfpEl:X},aa,ab)}else{if(T.isOpen){T[Z].apply(T,Array.prototype.slice.call(arguments,1))}}}else{Z=D.extend(true,{},Z);if(K){aa.data("magnificPopup",Z)}else{aa[0].magnificPopup=Z}T.addGroup(aa,Z)}return aa};var H="inline",S,P,s,m=function(){if(s){P.after(s.addClass(S)).detach();s=null}};D.magnificPopup.registerModule(H,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){T.types.push(H);j(z+"."+H,function(){m()})},getInline:function(ab,aa){m();if(ab.src){var X=T.st.inline,Z=D(ab.src);if(Z.length){var Y=Z[0].parentNode;if(Y&&Y.tagName){if(!P){S=X.hiddenClass;P=o(S);S="mfp-"+S}s=Z.after(P).detach().removeClass(S)}T.updateStatus("ready")}else{T.updateStatus("error",X.tNotFound);Z=D("<div>")}ab.inlineElement=Z;return Z}T.updateStatus("ready");T._parseMarkup(aa,{},ab);return aa}}});var u="ajax",V,v=function(){if(V){y.removeClass(V)}},U=function(){v();if(T.req){T.req.abort()}};D.magnificPopup.registerModule(u,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){T.types.push(u);V=T.st.ajax.cursor;j(z+"."+u,U);j("BeforeChange."+u,U)},getAjax:function(Y){if(V){y.addClass(V)}T.updateStatus("loading");var X=D.extend({url:Y.src,success:function(ab,ac,aa){var Z={data:ab,xhr:aa};Q("ParseAjax",Z);T.appendContent(D(Z.data),u);Y.finished=true;v();i();setTimeout(function(){T.wrap.addClass(J)},16);T.updateStatus("ready");Q("AjaxContentAdded")},error:function(){v();Y.finished=Y.loadError=true;T.updateStatus("error",T.st.ajax.tError.replace("%url%",Y.src))}},T.st.ajax.settings);T.req=D.ajax(X);return""}}});var g,c=function(X){if(X.data&&X.data.title!==undefined){return X.data.title}var Y=T.st.image.titleSrc;if(Y){if(D.isFunction(Y)){return Y.call(T,X)}else{if(X.el){return X.el.attr(Y)||""}}}return""};D.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:true,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var Y=T.st.image,X=".image";T.types.push("image");j(l+X,function(){if(T.currItem.type==="image"&&Y.cursor){y.addClass(Y.cursor)}});j(z+X,function(){if(Y.cursor){y.removeClass(Y.cursor)}a.off("resize"+d)});j("Resize"+X,T.resizeImage);if(T.isLowIE){j("AfterChange",T.resizeImage)}},resizeImage:function(){var Y=T.currItem;if(!Y||!Y.img){return}if(T.st.image.verticalFit){var X=0;if(T.isLowIE){X=parseInt(Y.img.css("padding-top"),10)+parseInt(Y.img.css("padding-bottom"),10)}Y.img.css("max-height",T.wH-X)}},_onImageHasSize:function(X){if(X.img){X.hasSize=true;if(g){clearInterval(g)}X.isCheckingImgSize=false;Q("ImageHasSize",X);if(X.imgHidden){if(T.content){T.content.removeClass("mfp-loading")}X.imgHidden=false}}},findImageSize:function(aa){var X=0,Y=aa.img[0],Z=function(ab){if(g){clearInterval(g)}g=setInterval(function(){if(Y.naturalWidth>0){T._onImageHasSize(aa);return}if(X>200){clearInterval(g)}X++;if(X===3){Z(10)}else{if(X===40){Z(50)}else{if(X===100){Z(500)}}}},ab)};Z(1)},getImage:function(ad,aa){var ac=0,ae=function(){if(ad){if(ad.img[0].complete){ad.img.off(".mfploader");if(ad===T.currItem){T._onImageHasSize(ad);T.updateStatus("ready")}ad.hasSize=true;ad.loaded=true;Q("ImageLoadComplete")}else{ac++;if(ac<200){setTimeout(ae,100)}else{X()}}}},X=function(){if(ad){ad.img.off(".mfploader");if(ad===T.currItem){T._onImageHasSize(ad);T.updateStatus("error",ab.tError.replace("%url%",ad.src))}ad.hasSize=true;ad.loaded=true;ad.loadError=true}},ab=T.st.image;var Z=aa.find(".mfp-img");if(Z.length){var Y=document.createElement("img");Y.className="mfp-img";ad.img=D(Y).on("load.mfploader",ae).on("error.mfploader",X);Y.src=ad.src;if(Z.is("img")){ad.img=ad.img.clone()}if(ad.img[0].naturalWidth>0){ad.hasSize=true}}T._parseMarkup(aa,{title:c(ad),img_replaceWith:ad.img},ad);T.resizeImage();if(ad.hasSize){if(g){clearInterval(g)}if(ad.loadError){aa.addClass("mfp-loading");T.updateStatus("error",ab.tError.replace("%url%",ad.src))}else{aa.removeClass("mfp-loading");T.updateStatus("ready")}return aa}T.updateStatus("loading");ad.loading=true;if(!ad.hasSize){ad.imgHidden=true;aa.addClass("mfp-loading");T.findImageSize(ad)}return aa}}});var k,N=function(){if(k===undefined){k=document.createElement("p").style.MozTransform!==undefined}return k};D.magnificPopup.registerModule("zoom",{options:{enabled:false,easing:"ease-in-out",duration:300,opener:function(X){return X.is("img")?X:X.find("img")}},proto:{initZoom:function(){var Y=T.st.zoom,ab=".zoom",ae;if(!Y.enabled||!T.supportsTransition){return}var ad=Y.duration,ac=function(ah){var ag=ah.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),ai="all "+(Y.duration/1000)+"s "+Y.easing,aj={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},af="transition";aj["-webkit-"+af]=aj["-moz-"+af]=aj["-o-"+af]=aj[af]=ai;ag.css(aj);return ag},X=function(){T.content.css("visibility","visible")},Z,aa;j("BuildControls"+ab,function(){if(T._allowZoom()){clearTimeout(Z);T.content.css("visibility","hidden");ae=T._getItemToZoom();if(!ae){X();return}aa=ac(ae);aa.css(T._getOffset());T.wrap.append(aa);Z=setTimeout(function(){aa.css(T._getOffset(true));Z=setTimeout(function(){X();setTimeout(function(){aa.remove();ae=aa=null;Q("ZoomAnimationEnded")},16)},ad)},16)}});j(I+ab,function(){if(T._allowZoom()){clearTimeout(Z);T.st.removalDelay=ad;if(!ae){ae=T._getItemToZoom();if(!ae){return}aa=ac(ae)}aa.css(T._getOffset(true));T.wrap.append(aa);T.content.css("visibility","hidden");setTimeout(function(){aa.css(T._getOffset())},16)}});j(z+ab,function(){if(T._allowZoom()){X();if(aa){aa.remove()}ae=null}})},_allowZoom:function(){return T.currItem.type==="image"},_getItemToZoom:function(){if(T.currItem.hasSize){return T.currItem.img}else{return false}},_getOffset:function(Z){var X;if(Z){X=T.currItem.img}else{X=T.st.zoom.opener(T.currItem.el||T.currItem)}var ac=X.offset();var Y=parseInt(X.css("padding-top"),10);var ab=parseInt(X.css("padding-bottom"),10);ac.top-=(D(window).scrollTop()-Y);var aa={width:X.width(),height:(K?X.innerHeight():X[0].offsetHeight)-ab-Y};if(N()){aa["-moz-transform"]=aa.transform="translate("+ac.left+"px,"+ac.top+"px)"}else{aa.left=ac.left;aa.top=ac.top}return aa}}});var r="iframe",q="//about:blank",R=function(X){if(T.currTemplate[r]){var Y=T.currTemplate[r].find("iframe");if(Y.length){if(!X){Y[0].src=q}if(T.isIE8){Y.css("display",X?"block":"none")}}}};D.magnificPopup.registerModule(r,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){T.types.push(r);j("BeforeChange",function(Z,X,Y){if(X!==Y){if(X===r){R()}else{if(Y===r){R(true)}}}});j(z+"."+r,function(){R()})},getIframe:function(ab,aa){var X=ab.src;var Z=T.st.iframe;D.each(Z.patterns,function(){if(X.indexOf(this.index)>-1){if(this.id){if(typeof this.id==="string"){X=X.substr(X.lastIndexOf(this.id)+this.id.length,X.length)}else{X=this.id.call(this,X)}}X=this.src.replace("%id%",X);return false}});var Y={};if(Z.srcAction){Y[Z.srcAction]=X}T._parseMarkup(aa,Y,ab);T.updateStatus("ready");return aa}}});var x=function(X){var Y=T.items.length;if(X>Y-1){return X-Y}else{if(X<0){return Y+X}}return X},p=function(Z,Y,X){return Z.replace(/%curr%/gi,Y+1).replace(/%total%/gi,X)};D.magnificPopup.registerModule("gallery",{options:{enabled:false,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:true,arrows:true,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var X=T.st.gallery,Z=".mfp-gallery",Y=Boolean(D.fn.mfpFastClick);T.direction=true;if(!X||!X.enabled){return false}b+=" mfp-gallery";j(l+Z,function(){if(X.navigateByImgClick){T.wrap.on("click"+Z,".mfp-img",function(){if(T.items.length>1){T.next();return false}})}B.on("keydown"+Z,function(aa){if(aa.keyCode===37){T.prev()}else{if(aa.keyCode===39){T.next()}}})});j("UpdateStatus"+Z,function(ab,aa){if(aa.text){aa.text=p(aa.text,T.currItem.index,T.items.length)}});j(f+Z,function(ae,ac,ab,ad){var aa=T.items.length;ab.counter=aa>1?p(X.tCounter,ad.index,aa):""});j("BuildControls"+Z,function(){if(T.items.length>1&&X.arrows&&!T.arrowLeft){var ac=X.arrowMarkup,ad=T.arrowLeft=D(ac.replace(/%title%/gi,X.tPrev).replace(/%dir%/gi,"left")).addClass(e),ab=T.arrowRight=D(ac.replace(/%title%/gi,X.tNext).replace(/%dir%/gi,"right")).addClass(e);var aa=Y?"mfpFastClick":"click";ad[aa](function(){T.prev()});ab[aa](function(){T.next()});if(T.isIE7){o("b",ad[0],false,true);o("a",ad[0],false,true);o("b",ab[0],false,true);o("a",ab[0],false,true)}T.container.append(ad.add(ab))}});j(h+Z,function(){if(T._preloadTimeout){clearTimeout(T._preloadTimeout)}T._preloadTimeout=setTimeout(function(){T.preloadNearbyImages();T._preloadTimeout=null},16)});j(z+Z,function(){B.off(Z);T.wrap.off("click"+Z);if(T.arrowLeft&&Y){T.arrowLeft.add(T.arrowRight).destroyMfpFastClick()}T.arrowRight=T.arrowLeft=null})},next:function(){T.direction=true;T.index=x(T.index+1);T.updateItemHTML()},prev:function(){T.direction=false;T.index=x(T.index-1);T.updateItemHTML()},goTo:function(X){T.direction=(X>=T.index);T.index=X;T.updateItemHTML()},preloadNearbyImages:function(){var aa=T.st.gallery.preload,Y=Math.min(aa[0],T.items.length),Z=Math.min(aa[1],T.items.length),X;for(X=1;X<=(T.direction?Z:Y);X++){T._preloadItem(T.index+X)}for(X=1;X<=(T.direction?Y:Z);X++){T._preloadItem(T.index-X)}},_preloadItem:function(X){X=x(X);if(T.items[X].preloaded){return}var Y=T.items[X];if(!Y.parsed){Y=T.parseEl(X)}Q("LazyLoad",Y);if(Y.type==="image"){Y.img=D('<img class="mfp-img" />').on("load.mfploader",function(){Y.hasSize=true}).on("error.mfploader",function(){Y.hasSize=true;Y.loadError=true;Q("LazyLoadError",Y)}).attr("src",Y.src)}Y.preloaded=true}}});var n="retina";D.magnificPopup.registerModule(n,{options:{replaceSrc:function(X){return X.src.replace(/\.\w+$/,function(Y){return"@2x"+Y})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var X=T.st.retina,Y=X.ratio;Y=!isNaN(Y)?Y:Y();if(Y>1){j("ImageHasSize."+n,function(aa,Z){Z.img.css({"max-width":Z.img[0].naturalWidth/Y,width:"100%"})});j("ElementParse."+n,function(aa,Z){Z.src=X.replaceSrc(Z,Y)})}}}}});(function(){var Y=1000,aa="ontouchstart" in window,ab=function(){a.off("touchmove"+Z+" touchend"+Z)},X="mfpFastClick",Z="."+X;D.fn.mfpFastClick=function(ac){return D(this).each(function(){var aj=D(this),ai;if(aa){var ak,af,ae,ah,ad,ag;aj.on("touchstart"+Z,function(al){ah=false;ag=1;ad=al.originalEvent?al.originalEvent.touches[0]:al.touches[0];af=ad.clientX;ae=ad.clientY;a.on("touchmove"+Z,function(am){ad=am.originalEvent?am.originalEvent.touches:am.touches;ag=ad.length;ad=ad[0];if(Math.abs(ad.clientX-af)>10||Math.abs(ad.clientY-ae)>10){ah=true;ab()}}).on("touchend"+Z,function(am){ab();if(ah||ag>1){return}ai=true;am.preventDefault();clearTimeout(ak);ak=setTimeout(function(){ai=false},Y);ac()})})}aj.on("click"+Z,function(){if(!ai){ac()}})})};D.fn.destroyMfpFastClick=function(){D(this).off("touchstart"+Z+" click"+Z);if(aa){a.off("touchmove"+Z+" touchend"+Z)}}})()})(window.jQuery||window.Zepto);(function(a,b){if(typeof define==="function"&&define.amd){define("sifter",b)}else{if(typeof exports==="object"){module.exports=b()}else{a.Sifter=b()}}}(this,function(){var f=function(h,i){this.items=h;this.settings=i||{diacritics:true}};f.prototype.tokenize=function(l){l=b(String(l||"").toLowerCase());if(!l||!l.length){return[]}var h,p,k,j;var m=[];var o=l.split(/ +/);for(h=0,p=o.length;h<p;h++){k=c(o[h]);if(this.settings.diacritics){for(j in a){if(a.hasOwnProperty(j)){k=k.replace(new RegExp(j,"g"),a[j])}}}m.push({string:o[h],regex:new RegExp(k,"i")})}return m};f.prototype.iterator=function(h,j){var i;if(d(h)){i=Array.prototype.forEach||function(m){for(var k=0,l=this.length;k<l;k++){m(this[k],k,this)}}}else{i=function(l){for(var k in this){if(this.hasOwnProperty(k)){l(this[k],k,this)}}}}i.apply(h,[j])};f.prototype.getScoreFunction=function(m,k){var j,i,o,n;j=this;m=j.prepareSearch(m,k);o=m.tokens;i=m.options.fields;n=o.length;var h=function(q,p){var r,s;if(!q){return 0}q=String(q||"");s=q.search(p.regex);if(s===-1){return 0}r=p.string.length/q.length;if(s===0){r+=0.5}return r};var l=(function(){var p=i.length;if(!p){return function(){return 0}}if(p===1){return function(q,r){return h(r[i[0]],q)}}return function(r,t){for(var q=0,s=0;q<p;q++){s+=h(t[i[q]],r)}return s/p}})();if(!n){return function(){return 0}}if(n===1){return function(p){return l(o[0],p)}}if(m.options.conjunction==="and"){return function(r){var s;for(var p=0,q=0;p<n;p++){s=l(o[p],r);if(s<=0){return 0}q+=s}return q/n}}else{return function(r){for(var p=0,q=0;p<n;p++){q+=l(o[p],r)}return q/n}}};f.prototype.getSortFunction=function(u,v){var p,h,t,r,q,k,s,m,j,l,o;t=this;u=t.prepareSearch(u,v);o=(!u.query&&v.sort_empty)||v.sort;j=function(n,i){if(n==="$score"){return i.score}return t.items[i.id][n]};q=[];if(o){for(p=0,h=o.length;p<h;p++){if(u.query||o[p].field!=="$score"){q.push(o[p])}}}if(u.query){l=true;for(p=0,h=q.length;p<h;p++){if(q[p].field==="$score"){l=false;break}}if(l){q.unshift({field:"$score",direction:"desc"})}}else{for(p=0,h=q.length;p<h;p++){if(q[p].field==="$score"){q.splice(p,1);break}}}m=[];for(p=0,h=q.length;p<h;p++){m.push(q[p].direction==="desc"?-1:1)}k=q.length;if(!k){return null}else{if(k===1){r=q[0].field;s=m[0];return function(n,i){return s*e(j(r,n),j(r,i))}}else{return function(y,w){var A,n,x,z,B;for(A=0;A<k;A++){B=q[A].field;n=m[A]*e(j(B,y),j(B,w));if(n){return n}}return 0}}}};f.prototype.prepareSearch=function(k,h){if(typeof k==="object"){return k}h=g({},h);var j=h.fields;var l=h.sort;var i=h.sort_empty;if(j&&!d(j)){h.fields=[j]}if(l&&!d(l)){h.sort=[l]}if(i&&!d(i)){h.sort_empty=[i]}return{options:h,query:String(k||"").toLowerCase(),tokens:this.tokenize(k),total:0,items:[]}};f.prototype.search=function(k,p){var n=this,m,i,o,j;var h;var l;o=this.prepareSearch(k,p);p=o.options;k=o.query;l=p.score||n.getScoreFunction(o);if(k.length){n.iterator(n.items,function(q,r){i=l(q);if(p.filter===false||i>0){o.items.push({score:i,id:r})}})}else{n.iterator(n.items,function(q,r){o.items.push({score:1,id:r})})}h=n.getSortFunction(o,p);if(h){o.items.sort(h)}o.total=o.items.length;if(typeof p.limit==="number"){o.items=o.items.slice(0,p.limit)}return o};var e=function(i,h){if(typeof i==="number"&&typeof h==="number"){return i>h?1:(i<h?-1:0)}i=String(i||"").toLowerCase();h=String(h||"").toLowerCase();if(i>h){return 1}if(h>i){return -1}return 0};var g=function(j,h){var o,p,l,m;for(o=1,p=arguments.length;o<p;o++){m=arguments[o];if(!m){continue}for(l in m){if(m.hasOwnProperty(l)){j[l]=m[l]}}}return j};var b=function(h){return(h+"").replace(/^\s+|\s+$|/g,"")};var c=function(h){return(h+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")};var d=Array.isArray||($&&$.isArray)||function(h){return Object.prototype.toString.call(h)==="[object Array]"};var a={a:"[aÀÁÂÃÄÅàáâãäå]",c:"[cÇçćĆčČ]",d:"[dđĐďĎ]",e:"[eÈÉÊËèéêëěĚ]",i:"[iÌÍÎÏìíîï]",n:"[nÑñňŇ]",o:"[oÒÓÔÕÕÖØòóôõöø]",r:"[rřŘ]",s:"[sŠš]",t:"[tťŤ]",u:"[uÙÚÛÜùúûüůŮ]",y:"[yŸÿýÝ]",z:"[zŽž]"};return f}));(function(a,b){if(typeof define==="function"&&define.amd){define("microplugin",b)}else{if(typeof exports==="object"){module.exports=b()}else{a.MicroPlugin=b()}}}(this,function(){var a={};a.mixin=function(c){c.plugins={};c.prototype.initializePlugins=function(e){var h,j,g;var f=this;var d=[];f.plugins={names:[],settings:{},requested:{},loaded:{}};if(b.isArray(e)){for(h=0,j=e.length;h<j;h++){if(typeof e[h]==="string"){d.push(e[h])}else{f.plugins.settings[e[h].name]=e[h].options;d.push(e[h].name)}}}else{if(e){for(g in e){if(e.hasOwnProperty(g)){f.plugins.settings[g]=e[g];d.push(g)}}}}while(d.length){f.require(d.shift())}};c.prototype.loadPlugin=function(f){var e=this;var d=e.plugins;var g=c.plugins[f];if(!c.plugins.hasOwnProperty(f)){throw new Error('Unable to find "'+f+'" plugin')}d.requested[f]=true;d.loaded[f]=g.fn.apply(e,[e.plugins.settings[f]||{}]);d.names.push(f)};c.prototype.require=function(f){var e=this;var d=e.plugins;if(!e.plugins.loaded.hasOwnProperty(f)){if(d.requested[f]){throw new Error('Plugin has circular dependency ("'+f+'")')}e.loadPlugin(f)}return d.loaded[f]};c.define=function(d,e){c.plugins[d]={name:d,fn:e}}};var b={isArray:Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"}};return a}));(function(a,b){if(typeof define==="function"&&define.amd){define("selectize",["jquery","sifter","microplugin"],b)}else{if(typeof exports==="object"){module.exports=b(require("jquery"),require("sifter"),require("microplugin"))}else{a.Selectize=b(a.jQuery,a.Sifter,a.MicroPlugin)}}}(this,function(v,m,i){var K=function(N,Q){if(typeof Q==="string"&&!Q.length){return}var P=(typeof Q==="string")?new RegExp(Q,"i"):Q;var O=function(T){var Z=0;if(T.nodeType===3){var Y=T.data.search(P);if(Y>=0&&T.data.length>0){var X=T.data.match(P);var W=document.createElement("span");W.className="highlight";var U=T.splitText(Y);var R=U.splitText(X[0].length);var S=U.cloneNode(true);W.appendChild(S);U.parentNode.replaceChild(W,U);Z=1}}else{if(T.nodeType===1&&T.childNodes&&!/(script|style)/i.test(T.tagName)){for(var V=0;V<T.childNodes.length;++V){V+=O(T.childNodes[V])}}}return Z};return N.each(function(){O(this)})};var E=function(){};E.prototype={on:function(O,N){this._events=this._events||{};this._events[O]=this._events[O]||[];this._events[O].push(N)},off:function(O,N){var P=arguments.length;if(P===0){return delete this._events}if(P===1){return delete this._events[O]}this._events=this._events||{};if(O in this._events===false){return}this._events[O].splice(this._events[O].indexOf(N),1)},trigger:function(O){this._events=this._events||{};if(O in this._events===false){return}for(var N=0;N<this._events[O].length;N++){this._events[O][N].apply(this,Array.prototype.slice.call(arguments,1))}}};E.mixin=function(N){var P=["on","off","trigger"];for(var O=0;O<P.length;O++){N.prototype[P[O]]=E.prototype[P[O]]}};var c=/Mac/.test(navigator.userAgent);var G=65;var L=188;var z=13;var w=27;var p=37;var F=38;var x=80;var t=39;var u=40;var B=78;var o=8;var q=46;var j=16;var H=c?91:17;var e=c?18:17;var D=9;var k=1;var h=2;var M=function(N){return typeof N!=="undefined"};var y=function(N){if(typeof N==="undefined"||N===null){return""}if(typeof N==="boolean"){return N?"1":"0"}return N+""};var C=function(N){return(N+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var f=function(N){return(N+"").replace(/\$/g,"$$$$")};var s={};s.before=function(N,Q,P){var O=N[Q];N[Q]=function(){P.apply(N,arguments);return O.apply(N,arguments)}};s.after=function(N,Q,P){var O=N[Q];N[Q]=function(){var R=O.apply(N,arguments);P.apply(N,arguments);return R}};var a=function(O,Q){if(!v.isArray(Q)){return Q}var N,R,P={};for(N=0,R=Q.length;N<R;N++){if(Q[N].hasOwnProperty(O)){P[Q[N][O]]=Q[N]}}return P};var r=function(N){var O=false;return function(){if(O){return}O=true;N.apply(this,arguments)}};var g=function(O,N){var P;return function(){var Q=this;var R=arguments;window.clearTimeout(P);P=window.setTimeout(function(){O.apply(Q,R)},N)}};var b=function(N,P,R){var Q;var O=N.trigger;var S={};N.trigger=function(){var T=arguments[0];if(P.indexOf(T)!==-1){S[T]=arguments}else{return O.apply(N,arguments)}};R.apply(N,[]);N.trigger=O;for(Q in S){if(S.hasOwnProperty(Q)){O.apply(N,S[Q])}}};var A=function(Q,P,N,O){Q.on(P,N,function(R){var S=R.target;while(S&&S.parentNode!==Q[0]){S=S.parentNode}R.currentTarget=S;return O.apply(this,[R])})};var l=function(P){var O={};if("selectionStart" in P){O.start=P.selectionStart;O.length=P.selectionEnd-O.start}else{if(document.selection){P.focus();var Q=document.selection.createRange();var N=document.selection.createRange().text.length;Q.moveStart("character",-P.value.length);O.start=Q.text.length-N;O.length=N}}return O};var n=function(Q,R,O){var N,S,P={};if(O){for(N=0,S=O.length;N<S;N++){P[O[N]]=Q.css(O[N])}}else{P=Q.css()}R.css(P)};var I=function(Q,P){if(!Q){return 0}var O=v("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(Q).appendTo("body");n(P,O,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var N=O.width();O.remove();return N};var J=function(P){var N=null;var O=function(T){var X,Y,U,W,Q;var R,S,V;T=T||window.event||{};if(T.metaKey||T.altKey){return}if(P.data("grow")===false){return}X=P.val();if(T.type&&T.type.toLowerCase()==="keydown"){Y=T.keyCode;U=((Y>=97&&Y<=122)||(Y>=65&&Y<=90)||(Y>=48&&Y<=57)||Y===32);if(Y===q||Y===o){V=l(P[0]);if(V.length){X=X.substring(0,V.start)+X.substring(V.start+V.length)}else{if(Y===o&&V.start){X=X.substring(0,V.start-1)+X.substring(V.start+1)}else{if(Y===q&&typeof V.start!=="undefined"){X=X.substring(0,V.start)+X.substring(V.start+1)}}}}else{if(U){R=T.shiftKey;S=String.fromCharCode(T.keyCode);if(R){S=S.toUpperCase()}else{S=S.toLowerCase()}X+=S}}}W=P.attr("placeholder")||"";if(!X.length&&W.length){X=W}Q=I(X,P)+4;if(Q!==N){N=Q;P.width(Q);P.triggerHandler("resize")}};P.on("keydown keyup update blur",O);O()};var d=function(U,S){var R,Q,T,P,O,N=this;O=U[0];O.selectize=N;P=window.getComputedStyle?window.getComputedStyle(O,null).getPropertyValue("direction"):O.currentStyle&&O.currentStyle.direction;P=P||U.parents("[dir]:first").attr("dir")||"";v.extend(N,{settings:S,$input:U,tagType:O.tagName.toLowerCase()==="select"?k:h,rtl:/rtl/i.test(P),eventNS:".selectize"+(++d.count),highlightedValue:null,isOpen:false,isDisabled:false,isRequired:U.is("[required]"),isInvalid:false,isLocked:false,isFocused:false,isInputHidden:false,isSetup:false,isShiftDown:false,isCmdDown:false,isCtrlDown:false,ignoreFocus:false,ignoreHover:false,hasOptions:false,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:g(N.onSearchChange,S.loadThrottle)});N.sifter=new m(this.options,{diacritics:S.diacritics});v.extend(N.options,a(S.valueField,S.options));delete N.settings.options;v.extend(N.optgroups,a(S.optgroupValueField,S.optgroups));delete N.settings.optgroups;N.settings.mode=N.settings.mode||(N.settings.maxItems===1?"single":"multi");if(typeof N.settings.hideSelected!=="boolean"){N.settings.hideSelected=N.settings.mode==="multi"}N.initializePlugins(N.settings.plugins);N.setupCallbacks();N.setupTemplates();N.setup()};E.mixin(d);i.mixin(d);v.extend(d.prototype,{setup:function(){var ad=this;var T=ad.settings;var O=ad.eventNS;var P=v(window);var U=v(document);var X;var aa;var ab;var Y;var ac;var Q;var N;var Z;var R;var W;var S;var V;N=ad.settings.mode;W=ad.$input.attr("tabindex")||"";S=ad.$input.attr("class")||"";X=v("<div>").addClass(T.wrapperClass).addClass(S).addClass(N);aa=v("<div>").addClass(T.inputClass).addClass("items").appendTo(X);ab=v('<input type="text" autocomplete="off" />').appendTo(aa).attr("tabindex",W);Q=v(T.dropdownParent||X);Y=v("<div>").addClass(T.dropdownClass).addClass(S).addClass(N).hide().appendTo(Q);ac=v("<div>").addClass(T.dropdownContentClass).appendTo(Y);X.css({width:ad.$input[0].style.width});if(ad.plugins.names.length){V="plugin-"+ad.plugins.names.join(" plugin-");X.addClass(V);Y.addClass(V)}if((T.maxItems===null||T.maxItems>1)&&ad.tagType===k){ad.$input.attr("multiple","multiple")}if(ad.settings.placeholder){ab.attr("placeholder",T.placeholder)}ad.$wrapper=X;ad.$control=aa;ad.$control_input=ab;ad.$dropdown=Y;ad.$dropdown_content=ac;Y.on("mouseenter","[data-selectable]",function(){return ad.onOptionHover.apply(ad,arguments)});Y.on("mousedown","[data-selectable]",function(){return ad.onOptionSelect.apply(ad,arguments)});A(aa,"mousedown","*:not(input)",function(){return ad.onItemSelect.apply(ad,arguments)});J(ab);aa.on({mousedown:function(){return ad.onMouseDown.apply(ad,arguments)},click:function(){return ad.onClick.apply(ad,arguments)}});ab.on({mousedown:function(ae){ae.stopPropagation()},keydown:function(){return ad.onKeyDown.apply(ad,arguments)},keyup:function(){return ad.onKeyUp.apply(ad,arguments)},keypress:function(){return ad.onKeyPress.apply(ad,arguments)},resize:function(){ad.positionDropdown.apply(ad,[])},blur:function(){return ad.onBlur.apply(ad,arguments)},focus:function(){return ad.onFocus.apply(ad,arguments)}});U.on("keydown"+O,function(ae){ad.isCmdDown=ae[c?"metaKey":"ctrlKey"];ad.isCtrlDown=ae[c?"altKey":"ctrlKey"];ad.isShiftDown=ae.shiftKey});U.on("keyup"+O,function(ae){if(ae.keyCode===e){ad.isCtrlDown=false}if(ae.keyCode===j){ad.isShiftDown=false}if(ae.keyCode===H){ad.isCmdDown=false}});U.on("mousedown"+O,function(ae){if(ad.isFocused){if(ae.target===ad.$dropdown[0]||ae.target.parentNode===ad.$dropdown[0]){return false}if(!ad.$control.has(ae.target).length&&ae.target!==ad.$control[0]){ad.blur()}}});P.on(["scroll"+O,"resize"+O].join(" "),function(){if(ad.isOpen){ad.positionDropdown.apply(ad,arguments)}});P.on("mousemove"+O,function(){ad.ignoreHover=false});this.revertSettings={$children:ad.$input.children().detach(),tabindex:ad.$input.attr("tabindex")};ad.$input.attr("tabindex",-1).hide().after(ad.$wrapper);if(v.isArray(T.items)){ad.setValue(T.items);delete T.items}if(ad.$input[0].validity){ad.$input.on("invalid"+O,function(ae){ae.preventDefault();ad.isInvalid=true;ad.refreshState()})}ad.updateOriginalInput();ad.refreshItems();ad.refreshState();ad.updatePlaceholder();ad.isSetup=true;if(ad.$input.is(":disabled")){ad.disable()}ad.on("change",this.onChange);ad.trigger("initialize");if(T.preload===true){ad.onSearchChange("")}},setupTemplates:function(){var O=this;var N=O.settings.labelField;var P=O.settings.optgroupLabelField;var Q={optgroup:function(R){return'<div class="optgroup">'+R.html+"</div>"},optgroup_header:function(S,R){return'<div class="optgroup-header">'+R(S[P])+"</div>"},option:function(S,R){return'<div class="option">'+R(S[N])+"</div>"},item:function(S,R){return'<div class="item">'+R(S[N])+"</div>"},option_create:function(S,R){return'<div class="create">Add <strong>'+R(S.input)+"</strong>&hellip;</div>"}};O.settings.render=v.extend({},Q,O.settings.render)},setupCallbacks:function(){var N,O,P={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType"};for(N in P){if(P.hasOwnProperty(N)){O=this.settings[P[N]];if(O){this.on(N,O)}}}},onClick:function(O){var N=this;if(!N.isFocused){N.focus();O.preventDefault()}},onMouseDown:function(Q){var O=this;var P=Q.isDefaultPrevented();var N=v(Q.target);if(O.isFocused){if(Q.target!==O.$control_input[0]){if(O.settings.mode==="single"){O.isOpen?O.close():O.open()}else{if(!P){O.setActiveItem(null)}}return false}}else{if(!P){window.setTimeout(function(){O.focus()},0)}}},onChange:function(){this.$input.trigger("change")},onKeyPress:function(O){if(this.isLocked){return O&&O.preventDefault()}var N=String.fromCharCode(O.keyCode||O.which);if(this.settings.create&&N===this.settings.delimiter){this.createItem();O.preventDefault();return false}},onKeyDown:function(R){var Q=R.target===this.$control_input[0];var P=this;if(P.isLocked){if(R.keyCode!==D){R.preventDefault()}return}switch(R.keyCode){case G:if(P.isCmdDown){P.selectAll();return}break;case w:P.close();return;case B:if(!R.ctrlKey){break}case u:if(!P.isOpen&&P.hasOptions){P.open()}else{if(P.$activeOption){P.ignoreHover=true;var N=P.getAdjacentOption(P.$activeOption,1);if(N.length){P.setActiveOption(N,true,true)}}}R.preventDefault();return;case x:if(!R.ctrlKey){break}case F:if(P.$activeOption){P.ignoreHover=true;var O=P.getAdjacentOption(P.$activeOption,-1);if(O.length){P.setActiveOption(O,true,true)}}R.preventDefault();return;case z:if(P.isOpen&&P.$activeOption){P.onOptionSelect({currentTarget:P.$activeOption})}R.preventDefault();return;case p:P.advanceSelection(-1,R);return;case t:P.advanceSelection(1,R);return;case D:if(P.isOpen&&P.$activeOption){P.onOptionSelect({currentTarget:P.$activeOption})}if(P.settings.create&&P.createItem()){R.preventDefault()}return;case o:case q:P.deleteSelection(R);return}if(P.isFull()||P.isInputHidden){R.preventDefault();return}},onKeyUp:function(P){var N=this;if(N.isLocked){return P&&P.preventDefault()}var O=N.$control_input.val()||"";if(N.lastValue!==O){N.lastValue=O;N.onSearchChange(O);N.refreshOptions();N.trigger("type",O)}},onSearchChange:function(P){var N=this;var O=N.settings.load;if(!O){return}if(N.loadedSearches.hasOwnProperty(P)){return}N.loadedSearches[P]=true;N.load(function(Q){O.apply(N,[P,Q])})},onFocus:function(O){var N=this;N.isFocused=true;if(N.isDisabled){N.blur();O&&O.preventDefault();return false}if(N.ignoreFocus){return}if(N.settings.preload==="focus"){N.onSearchChange("")}if(!N.$activeItems.length){N.showInput();N.setActiveItem(null);N.refreshOptions(!!N.settings.openOnFocus)}N.refreshState()},onBlur:function(O){var N=this;N.isFocused=false;if(N.ignoreFocus){return}if(N.settings.create&&N.settings.createOnBlur){N.createItem(false)}N.close();N.setTextboxValue("");N.setActiveItem(null);N.setActiveOption(null);N.setCaret(N.items.length);N.refreshState()},onOptionHover:function(N){if(this.ignoreHover){return}this.setActiveOption(N.currentTarget,false)},onOptionSelect:function(R){var P,N,Q,O=this;if(R.preventDefault){R.preventDefault();R.stopPropagation()}N=v(R.currentTarget);if(N.hasClass("create")){O.createItem()}else{P=N.attr("data-value");if(P){O.lastQuery=null;O.setTextboxValue("");O.addItem(P);if(!O.settings.hideSelected&&R.type&&/mouse/.test(R.type)){O.setActiveOption(O.getOption(P))}}}},onItemSelect:function(O){var N=this;if(N.isLocked){return}if(N.settings.mode==="multi"){O.preventDefault();N.setActiveItem(O.currentTarget,O)}},load:function(O){var N=this;var P=N.$wrapper.addClass("loading");N.loading++;O.apply(N,[function(Q){N.loading=Math.max(N.loading-1,0);if(Q&&Q.length){N.addOption(Q);N.refreshOptions(N.isFocused&&!N.isInputHidden)}if(!N.loading){P.removeClass("loading")}N.trigger("load",Q)}])},setTextboxValue:function(N){this.$control_input.val(N).triggerHandler("update");this.lastValue=N},getValue:function(){if(this.tagType===k&&this.$input.attr("multiple")){return this.items}else{return this.items.join(this.settings.delimiter)}},setValue:function(N){b(this,["change"],function(){this.clear();this.addItems(N)})},setActiveItem:function(U,S){var X=this;var R;var Q,V,N,P,W,O;var T;if(X.settings.mode==="single"){return}U=v(U);if(!U.length){v(X.$activeItems).removeClass("active");X.$activeItems=[];if(X.isFocused){X.showInput()}return}R=S&&S.type.toLowerCase();if(R==="mousedown"&&X.isShiftDown&&X.$activeItems.length){T=X.$control.children(".active:last");N=Array.prototype.indexOf.apply(X.$control[0].childNodes,[T[0]]);P=Array.prototype.indexOf.apply(X.$control[0].childNodes,[U[0]]);if(N>P){O=N;N=P;P=O}for(Q=N;Q<=P;Q++){W=X.$control[0].childNodes[Q];if(X.$activeItems.indexOf(W)===-1){v(W).addClass("active");X.$activeItems.push(W)}}S.preventDefault()}else{if((R==="mousedown"&&X.isCtrlDown)||(R==="keydown"&&this.isShiftDown)){if(U.hasClass("active")){V=X.$activeItems.indexOf(U[0]);X.$activeItems.splice(V,1);U.removeClass("active")}else{X.$activeItems.push(U.addClass("active")[0])}}else{v(X.$activeItems).removeClass("active");X.$activeItems=[U.addClass("active")[0]]}}X.hideInput();if(!this.isFocused){X.focus()}},setActiveOption:function(N,T,P){var O,U,S;var R,Q;var V=this;if(V.$activeOption){V.$activeOption.removeClass("active")}V.$activeOption=null;N=v(N);if(!N.length){return}V.$activeOption=N.addClass("active");if(T||!M(T)){O=V.$dropdown_content.height();U=V.$activeOption.outerHeight(true);T=V.$dropdown_content.scrollTop()||0;S=V.$activeOption.offset().top-V.$dropdown_content.offset().top+T;R=S;Q=S-O+U;if(S+U>O+T){V.$dropdown_content.stop().animate({scrollTop:Q},P?V.settings.scrollDuration:0)}else{if(S<T){V.$dropdown_content.stop().animate({scrollTop:R},P?V.settings.scrollDuration:0)}}}},selectAll:function(){var N=this;if(N.settings.mode==="single"){return}N.$activeItems=Array.prototype.slice.apply(N.$control.children(":not(input)").addClass("active"));if(N.$activeItems.length){N.hideInput();N.close()}N.focus()},hideInput:function(){var N=this;N.setTextboxValue("");N.$control_input.css({opacity:0,position:"absolute",left:N.rtl?10000:-10000});N.isInputHidden=true},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0});this.isInputHidden=false},focus:function(){var N=this;if(N.isDisabled){return}N.ignoreFocus=true;N.$control_input[0].focus();window.setTimeout(function(){N.ignoreFocus=false;N.onFocus()},0)},blur:function(){this.$control_input.trigger("blur")},getScoreFunction:function(N){return this.sifter.getScoreFunction(N,this.getSearchOptions())},getSearchOptions:function(){var O=this.settings;var N=O.sortField;if(typeof N==="string"){N={field:N}}return{fields:O.searchField,conjunction:O.searchConjunction,sort:N}},search:function(R){var Q,S,N,V,P;var T=this;var O=T.settings;var U=this.getSearchOptions();if(O.score){P=T.settings.score.apply(this,[R]);if(typeof P!=="function"){throw new Error('Selectize "score" setting must be a function that returns a function')}}if(R!==T.lastQuery){T.lastQuery=R;V=T.sifter.search(R,v.extend(U,{score:P}));T.currentResults=V}else{V=v.extend(true,{},T.currentResults)}if(O.hideSelected){for(Q=V.items.length-1;Q>=0;Q--){if(T.items.indexOf(y(V.items[Q].id))!==-1){V.items.splice(Q,1)}}}return V},refreshOptions:function(X){var ae,ad,ac,aa,ah,N,T,af,P,ab,R,ag,S;var Q,W,Y;if(typeof X==="undefined"){X=true}var V=this;var O=V.$control_input.val();var Z=V.search(O);var U=V.$dropdown_content;var ai=V.$activeOption&&y(V.$activeOption.attr("data-value"));aa=Z.items.length;if(typeof V.settings.maxOptions==="number"){aa=Math.min(aa,V.settings.maxOptions)}ah={};if(V.settings.optgroupOrder){N=V.settings.optgroupOrder;for(ae=0;ae<N.length;ae++){ah[N[ae]]=[]}}else{N=[]}for(ae=0;ae<aa;ae++){T=V.options[Z.items[ae].id];af=V.render("option",T);P=T[V.settings.optgroupField]||"";ab=v.isArray(P)?P:[P];for(ad=0,ac=ab&&ab.length;ad<ac;ad++){P=ab[ad];if(!V.optgroups.hasOwnProperty(P)){P=""}if(!ah.hasOwnProperty(P)){ah[P]=[];N.push(P)}ah[P].push(af)}}R=[];for(ae=0,aa=N.length;ae<aa;ae++){P=N[ae];if(V.optgroups.hasOwnProperty(P)&&ah[P].length){ag=V.render("optgroup_header",V.optgroups[P])||"";ag+=ah[P].join("");R.push(V.render("optgroup",v.extend({},V.optgroups[P],{html:ag})))}else{R.push(ah[P].join(""))}}U.html(R.join(""));if(V.settings.highlight&&Z.query.length&&Z.tokens.length){for(ae=0,aa=Z.tokens.length;ae<aa;ae++){K(U,Z.tokens[ae].regex)}}if(!V.settings.hideSelected){for(ae=0,aa=V.items.length;ae<aa;ae++){V.getOption(V.items[ae]).addClass("selected")}}S=V.settings.create&&Z.query.length;if(S){U.prepend(V.render("option_create",{input:O}));Y=v(U[0].childNodes[0])}V.hasOptions=Z.items.length>0||S;if(V.hasOptions){if(Z.items.length>0){W=ai&&V.getOption(ai);if(W&&W.length){Q=W}else{if(V.settings.mode==="single"&&V.items.length){Q=V.getOption(V.items[0])}}if(!Q||!Q.length){if(Y&&!V.settings.addPrecedence){Q=V.getAdjacentOption(Y,1)}else{Q=U.find("[data-selectable]:first")}}}else{Q=Y}V.setActiveOption(Q);if(X&&!V.isOpen){V.open()}}else{V.setActiveOption(null);if(X&&V.isOpen){V.close()}}},addOption:function(R){var P,S,O,Q,N=this;if(v.isArray(R)){for(P=0,S=R.length;P<S;P++){N.addOption(R[P])}return}Q=y(R[N.settings.valueField]);if(!Q||N.options.hasOwnProperty(Q)){return}N.userOptions[Q]=true;N.options[Q]=R;N.lastQuery=null;N.trigger("option_add",Q,R)},addOptionGroup:function(O,N){this.optgroups[O]=N;this.trigger("optgroup_add",O,N)},updateOption:function(T,R){var V=this;var U,N;var P,Q,S,O;T=y(T);P=y(R[V.settings.valueField]);if(!V.options.hasOwnProperty(T)){return}if(!P){throw new Error("Value must be set in option data")}if(P!==T){delete V.options[T];Q=V.items.indexOf(T);if(Q!==-1){V.items.splice(Q,1,P)}}V.options[P]=R;S=V.renderCache.item;O=V.renderCache.option;if(M(S)){delete S[T];delete S[P]}if(M(O)){delete O[T];delete O[P]}if(V.items.indexOf(P)!==-1){U=V.getItem(T);N=v(V.render("item",R));if(U.hasClass("active")){N.addClass("active")}U.replaceWith(N)}if(V.isOpen){V.refreshOptions(false)}},removeOption:function(O){var N=this;O=y(O);delete N.userOptions[O];delete N.options[O];N.lastQuery=null;N.trigger("option_remove",O);N.removeItem(O)},clearOptions:function(){var N=this;N.loadedSearches={};N.userOptions={};N.options=N.sifter.items={};N.lastQuery=null;N.trigger("option_clear");N.clear()},getOption:function(N){return this.getElementWithValue(N,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(Q,P){var N=this.$dropdown.find("[data-selectable]");var O=N.index(Q)+P;return O>=0&&O<N.length?N.eq(O):v()},getElementWithValue:function(P,O){P=y(P);if(P){for(var N=0,Q=O.length;N<Q;N++){if(O[N].getAttribute("data-value")===P){return v(O[N])}}}return v()},getItem:function(N){return this.getElementWithValue(N,this.$control.children())},addItems:function(O){var N=v.isArray(O)?O:[O];for(var P=0,Q=N.length;P<Q;P++){this.isPending=(P<Q-1);this.addItem(N[P])}},addItem:function(N){b(this,["change"],function(){var Q,U,O;var P=this;var V=P.settings.mode;var S,T,R;N=y(N);if(P.items.indexOf(N)!==-1){if(V==="single"){P.close()}return}if(!P.options.hasOwnProperty(N)){return}if(V==="single"){P.clear()}if(V==="multi"&&P.isFull()){return}Q=v(P.render("item",P.options[N]));P.items.splice(P.caretPos,0,N);P.insertAtCaret(Q);P.refreshState();if(P.isSetup){O=P.$dropdown_content.find("[data-selectable]");if(!this.isPending){U=P.getOption(N);R=P.getAdjacentOption(U,1).attr("data-value");P.refreshOptions(P.isFocused&&V!=="single");if(R){P.setActiveOption(P.getOption(R))}}if(!O.length||(P.settings.maxItems!==null&&P.items.length>=P.settings.maxItems)){P.close()}else{P.positionDropdown()}P.updatePlaceholder();P.trigger("item_add",N,Q);P.updateOriginalInput()}})},removeItem:function(R){var P=this;var O,Q,N;O=(typeof R==="object")?R:P.getItem(R);R=y(O.attr("data-value"));Q=P.items.indexOf(R);if(Q!==-1){O.remove();if(O.hasClass("active")){N=P.$activeItems.indexOf(O[0]);P.$activeItems.splice(N,1)}P.items.splice(Q,1);P.lastQuery=null;if(!P.settings.persist&&P.userOptions.hasOwnProperty(R)){P.removeOption(R)}if(Q<P.caretPos){P.setCaret(P.caretPos-1)}P.refreshState();P.updatePlaceholder();P.updateOriginalInput();P.positionDropdown();P.trigger("item_remove",R)}},createItem:function(S){var Q=this;var P=v.trim(Q.$control_input.val()||"");var T=Q.caretPos;if(!P.length){return false}Q.lock();if(typeof S==="undefined"){S=true}var N=(typeof Q.settings.create==="function")?this.settings.create:function(U){var V={};V[Q.settings.labelField]=U;V[Q.settings.valueField]=U;return V};var R=r(function(V){Q.unlock();if(!V||typeof V!=="object"){return}var U=y(V[Q.settings.valueField]);if(!U){return}Q.setTextboxValue("");Q.addOption(V);Q.setCaret(T);Q.addItem(U);Q.refreshOptions(S&&Q.settings.mode!=="single")});var O=N.apply(this,[P,R]);if(typeof O!=="undefined"){R(O)}return true},refreshItems:function(){this.lastQuery=null;if(this.isSetup){for(var N=0;N<this.items.length;N++){this.addItem(this.items)}}this.refreshState();this.updateOriginalInput()},refreshState:function(){var N=this;var O=N.isRequired&&!N.items.length;if(!O){N.isInvalid=false}N.$control_input.prop("required",O);N.refreshClasses()},refreshClasses:function(){var N=this;var O=N.isFull();var P=N.isLocked;N.$wrapper.toggleClass("rtl",N.rtl);N.$control.toggleClass("focus",N.isFocused).toggleClass("disabled",N.isDisabled).toggleClass("required",N.isRequired).toggleClass("invalid",N.isInvalid).toggleClass("locked",P).toggleClass("full",O).toggleClass("not-full",!O).toggleClass("input-active",N.isFocused&&!N.isInputHidden).toggleClass("dropdown-active",N.isOpen).toggleClass("has-options",!v.isEmptyObject(N.options)).toggleClass("has-items",N.items.length>0);N.$control_input.data("grow",!O&&!P)},isFull:function(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(){var P,Q,O,N=this;if(N.$input[0].tagName.toLowerCase()==="select"){O=[];for(P=0,Q=N.items.length;P<Q;P++){O.push('<option value="'+C(N.items[P])+'" selected="selected"></option>')}if(!O.length&&!this.$input.attr("multiple")){O.push('<option value="" selected="selected"></option>')}N.$input.html(O.join(""))}else{N.$input.val(N.getValue())}if(N.isSetup){N.trigger("change",N.$input.val())}},updatePlaceholder:function(){if(!this.settings.placeholder){return}var N=this.$control_input;if(this.items.length){N.removeAttr("placeholder")}else{N.attr("placeholder",this.settings.placeholder)}N.triggerHandler("update")},open:function(){var N=this;if(N.isLocked||N.isOpen||(N.settings.mode==="multi"&&N.isFull())){return}N.focus();N.isOpen=true;N.refreshState();N.$dropdown.css({visibility:"hidden",display:"block"});N.positionDropdown();N.$dropdown.css({visibility:"visible"});N.trigger("dropdown_open",N.$dropdown)},close:function(){var N=this;var O=N.isOpen;if(N.settings.mode==="single"&&N.items.length){N.hideInput()}N.isOpen=false;N.$dropdown.hide();N.setActiveOption(null);N.refreshState();if(O){N.trigger("dropdown_close",N.$dropdown)}},positionDropdown:function(){var N=this.$control;var O=this.settings.dropdownParent==="body"?N.offset():N.position();O.top+=N.outerHeight(true);this.$dropdown.css({width:N.outerWidth(),top:O.top,left:O.left})},clear:function(){var N=this;if(!N.items.length){return}N.$control.children(":not(input)").remove();N.items=[];N.setCaret(0);N.updatePlaceholder();N.updateOriginalInput();N.refreshState();N.showInput();N.trigger("clear")},insertAtCaret:function(N){var O=Math.min(this.caretPos,this.items.length);if(O===0){this.$control.prepend(N)}else{v(this.$control[0].childNodes[O]).before(N)}this.setCaret(O+1)},deleteSelection:function(Q){var O,N,U,V,W,S,R,T,P;var X=this;U=(Q&&Q.keyCode===o)?-1:1;V=l(X.$control_input[0]);if(X.$activeOption&&!X.settings.hideSelected){R=X.getAdjacentOption(X.$activeOption,-1).attr("data-value")}W=[];if(X.$activeItems.length){P=X.$control.children(".active:"+(U>0?"last":"first"));S=X.$control.children(":not(input)").index(P);if(U>0){S++}for(O=0,N=X.$activeItems.length;O<N;O++){W.push(v(X.$activeItems[O]).attr("data-value"))}if(Q){Q.preventDefault();Q.stopPropagation()}}else{if((X.isFocused||X.settings.mode==="single")&&X.items.length){if(U<0&&V.start===0&&V.length===0){W.push(X.items[X.caretPos-1])}else{if(U>0&&V.start===X.$control_input.val().length){W.push(X.items[X.caretPos])}}}}if(!W.length||(typeof X.settings.onDelete==="function"&&X.settings.onDelete.apply(X,[W])===false)){return false}if(typeof S!=="undefined"){X.setCaret(S)}while(W.length){X.removeItem(W.pop())}X.showInput();X.positionDropdown();X.refreshOptions(true);if(R){T=X.getOption(R);if(T.length){X.setActiveOption(T)}}return true},advanceSelection:function(R,O){var P,S,T,U,Q,N;var V=this;if(R===0){return}if(V.rtl){R*=-1}P=R>0?"last":"first";S=l(V.$control_input[0]);if(V.isFocused&&!V.isInputHidden){U=V.$control_input.val().length;Q=R<0?S.start===0&&S.length===0:S.start===U;if(Q&&!U){V.advanceCaret(R,O)}}else{N=V.$control.children(".active:"+P);if(N.length){T=V.$control.children(":not(input)").index(N);V.setActiveItem(null);V.setCaret(R>0?T+1:T)}}},advanceCaret:function(R,Q){var N=this,P,O;if(R===0){return}P=R>0?"next":"prev";if(N.isShiftDown){O=N.$control_input[P]();if(O.length){N.hideInput();N.setActiveItem(O);Q&&Q.preventDefault()}}else{N.setCaret(N.caretPos+R)}},setCaret:function(Q){var O=this;if(O.settings.mode==="single"){Q=O.items.length}else{Q=Math.max(0,Math.min(O.items.length,Q))}var P,T,R,N,S;N=O.$control.children(":not(input)");for(P=0,T=N.length;P<T;P++){S=v(N[P]).detach();if(P<Q){O.$control_input.before(S)}else{O.$control.append(S)}}O.caretPos=Q},lock:function(){this.close();this.isLocked=true;this.refreshState()},unlock:function(){this.isLocked=false;this.refreshState()},disable:function(){var N=this;N.$input.prop("disabled",true);N.isDisabled=true;N.lock()},enable:function(){var N=this;N.$input.prop("disabled",false);N.isDisabled=false;N.unlock()},destroy:function(){var N=this;var P=N.eventNS;var O=N.revertSettings;N.trigger("destroy");N.off();N.$wrapper.remove();N.$dropdown.remove();N.$input.html("").append(O.$children).removeAttr("tabindex").attr({tabindex:O.tabindex}).show();v(window).off(P);v(document).off(P);v(document.body).off(P);delete N.$input[0].selectize},render:function(V,P){var T,O,S;var Q="";var N=false;var U=this;var R=/^[\t ]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;if(V==="option"||V==="item"){T=y(P[U.settings.valueField]);N=!!T}if(N){if(!M(U.renderCache[V])){U.renderCache[V]={}}if(U.renderCache[V].hasOwnProperty(T)){return U.renderCache[V][T]}}Q=U.settings.render[V].apply(this,[P,C]);if(V==="option"||V==="option_create"){Q=Q.replace(R,"<$1 data-selectable")}if(V==="optgroup"){O=P[U.settings.optgroupValueField]||"";Q=Q.replace(R,'<$1 data-group="'+f(C(O))+'"')}if(V==="option"||V==="item"){Q=Q.replace(R,'<$1 data-value="'+f(C(T||""))+'"')}if(N){U.renderCache[V][T]=Q}return Q}});d.count=0;d.defaults={plugins:[],delimiter:",",persist:true,diacritics:true,create:false,createOnBlur:false,highlight:true,openOnFocus:true,maxOptions:1000,maxItems:null,hideSelected:null,addPrecedence:false,preload:false,scrollDuration:60,loadThrottle:300,dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",optgroupOrder:null,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,render:{}};v.fn.selectize=function(T){var P=v.fn.selectize.defaults;var O=v.extend({},P,T);var Q=O.dataAttr;var W=O.labelField;var X=O.valueField;var V=O.optgroupField;var R=O.optgroupLabelField;var S=O.optgroupValueField;var N=function(ae,ac){var Z,ad,Y,aa,ab=v.trim(ae.val()||"");if(!ab.length){return}Y=ab.split(O.delimiter);for(Z=0,ad=Y.length;Z<ad;Z++){aa={};aa[W]=Y[Z];aa[X]=Y[Z];ac.options[Y[Z]]=aa}ac.items=Y};var U=function(af,ad){var ae,aa,ab,ah,ac=0;var ai=ad.options;var Y=function(aj){var ak=Q&&aj.attr(Q);if(typeof ak==="string"&&ak.length){return JSON.parse(ak)}return null};var ag=function(am,al){var ak,aj;am=v(am);ak=am.attr("value")||"";if(!ak.length){return}if(ai.hasOwnProperty(ak)){if(al){if(!ai[ak].optgroup){ai[ak].optgroup=al}else{if(!v.isArray(ai[ak].optgroup)){ai[ak].optgroup=[ai[ak].optgroup,al]}else{ai[ak].optgroup.push(al)}}}return}aj=Y(am)||{};aj[W]=aj[W]||am.text();aj[X]=aj[X]||ak;aj[V]=aj[V]||al;aj.$order=++ac;ai[ak]=aj;if(am.is(":selected")){ad.items.push(ak)}};var Z=function(ak){var am,ao,an,al,aj;ak=v(ak);an=ak.attr("label");if(an){al=Y(ak)||{};al[R]=an;al[S]=an;ad.optgroups[an]=al}aj=v("option",ak);for(am=0,ao=aj.length;am<ao;am++){ag(aj[am],an)}};ad.maxItems=af.attr("multiple")?null:1;ah=af.children();for(ae=0,aa=ah.length;ae<aa;ae++){ab=ah[ae].tagName.toLowerCase();if(ab==="optgroup"){Z(ah[ae])}else{if(ab==="option"){ag(ah[ae])}}}};return this.each(function(){if(this.selectize){return}var Y;var ab=v(this);var aa=this.tagName.toLowerCase();var Z={placeholder:ab.children('option[value=""]').text()||ab.attr("placeholder"),options:{},optgroups:{},items:[]};if(aa==="select"){U(ab,Z)}else{N(ab,Z)}Y=new d(ab,v.extend(true,{},P,Z,T));ab.data("selectize",Y);ab.addClass("selectized")})};v.fn.selectize.defaults=d.defaults;d.define("drag_drop",function(O){if(!v.fn.sortable){throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".')}if(this.settings.mode!=="multi"){return}var N=this;N.lock=(function(){var P=N.lock;return function(){var Q=N.$control.data("sortable");if(Q){Q.disable()}return P.apply(N,arguments)}})();N.unlock=(function(){var P=N.unlock;return function(){var Q=N.$control.data("sortable");if(Q){Q.enable()}return P.apply(N,arguments)}})();N.setup=(function(){var P=N.setup;return function(){P.apply(this,arguments);var Q=N.$control.sortable({items:"[data-value]",forcePlaceholderSize:true,disabled:N.isLocked,start:function(S,R){R.placeholder.css("width",R.helper.css("width"));Q.css({overflow:"visible"})},stop:function(){Q.css({overflow:"hidden"});var S=N.$activeItems?N.$activeItems.slice():null;var R=[];Q.children("[data-value]").each(function(){R.push(v(this).attr("data-value"))});N.setValue(R);N.setActiveItem(S)}})}})()});d.define("dropdown_header",function(O){var N=this;O=v.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(P){return('<div class="'+P.headerClass+'"><div class="'+P.titleRowClass+'"><span class="'+P.labelClass+'">'+P.title+'</span><a href="javascript:void(0)" class="'+P.closeClass+'">&times;</a></div></div>')}},O);N.setup=(function(){var P=N.setup;return function(){P.apply(N,arguments);N.$dropdown_header=v(O.html(O));N.$dropdown.prepend(N.$dropdown_header)}})()});d.define("optgroup_columns",function(O){var N=this;O=v.extend({equalizeWidth:true,equalizeHeight:true},O);this.getAdjacentOption=function(T,S){var Q=T.closest("[data-group]").find("[data-selectable]");var R=Q.index(T)+S;return R>=0&&R<Q.length?Q.eq(R):v()};this.onKeyDown=(function(){var Q=N.onKeyDown;return function(V){var T,U,R,S;if(this.isOpen&&(V.keyCode===p||V.keyCode===t)){N.ignoreHover=true;S=this.$activeOption.closest("[data-group]");T=S.find("[data-selectable]").index(this.$activeOption);if(V.keyCode===p){S=S.prev("[data-group]")}else{S=S.next("[data-group]")}R=S.find("[data-selectable]");U=R.eq(Math.min(R.length-1,T));if(U.length){this.setActiveOption(U)}return}return Q.apply(this,arguments)}})();var P=function(){var R,W,Q,S,V,U,T;T=v("[data-group]",N.$dropdown_content);W=T.length;if(!W||!N.$dropdown_content.width()){return}if(O.equalizeHeight){Q=0;for(R=0;R<W;R++){Q=Math.max(Q,T.eq(R).height())}T.css({height:Q})}if(O.equalizeWidth){U=N.$dropdown_content.innerWidth();S=Math.round(U/W);T.css({width:S});if(W>1){V=U-S*(W-1);T.eq(W-1).css({width:V})}}};if(O.equalizeHeight||O.equalizeWidth){s.after(this,"positionDropdown",P);s.after(this,"refreshOptions",P)}});d.define("remove_button",function(P){if(this.settings.mode==="single"){return}P=v.extend({label:"&times;",title:"Remove",className:"remove",append:true},P);var O=this;var Q='<a href="javascript:void(0)" class="'+P.className+'" tabindex="-1" title="'+C(P.title)+'">'+P.label+"</a>";var N=function(R,S){var T=R.search(/(<\/[^>]+>\s*)$/);return R.substring(0,T)+S+R.substring(T)};this.setup=(function(){var R=O.setup;return function(){if(P.append){var S=O.settings.render.item;O.settings.render.item=function(T){return N(S.apply(this,arguments),Q)}}R.apply(this,arguments);this.$control.on("click","."+P.className,function(U){U.preventDefault();if(O.isLocked){return}var T=v(U.currentTarget).parent();O.setActiveItem(T);if(O.deleteSelection()){O.setCaret(O.items.length)}})}})()});d.define("restore_on_backspace",function(O){var N=this;O.text=O.text||function(P){return P[this.settings.labelField]};this.onKeyDown=(function(Q){var P=N.onKeyDown;return function(T){var R,S;if(T.keyCode===o&&this.$control_input.val()===""&&!this.$activeItems.length){R=this.caretPos-1;if(R>=0&&R<this.items.length){S=this.options[this.items[R]];if(this.deleteSelection(T)){this.setTextboxValue(O.text.apply(this,[S]));this.refreshOptions(true)}T.preventDefault();return}}return P.apply(this,arguments)}})()});return d}));window.unescapeUnicode=function(c){var a=c;if(_.isString(c)){var b=/\\u([\d\w]{4})/gi;a=c.replace(b,function(e,d){return String.fromCharCode(parseInt(d,16))})}else{if(_.isArray(c)||_.isPlainObject){_.forOwn(c,function(f,d,e){e[d]=unescapeUnicode(f)})}}return a};Mousetrap.stopCallback=function(d,b,c){var a=b.tagName=="INPUT"||b.tagName=="SELECT"||b.tagName=="TEXTAREA"||(b.contentEditable&&b.contentEditable=="true");if(a){return !(/esc/.test(c)||/ctrl/.test(c)||/command/.test(c))}else{return false}};Mousetrap.bind("?",function(){jQuery.magnificPopup.open({items:{src:"#shortcuts",type:"inline"}})});Mousetrap.bind("r",function(){jQuery("#comment_body").focus();return false});Mousetrap.bind("esc",function(){jQuery("input, textarea").blur()});Mousetrap.bind(["i","ctrl+i","command+i"],function(){if(Tender.is_supporter&&Tender.koNewForm){Tender.koNewForm.internal(!Tender.koNewForm.internal())}});Mousetrap.bind(["ctrl+enter","command+enter"],function(){jQuery("input, textarea").blur();jQuery("#new_comment .btn-post_issue").click()});Mousetrap.bind(["ctrl+shift+enter","command+shift+enter"],function(){jQuery("input, textarea").blur();jQuery("#new_comment .btn-post_issue_resolve").click()});Mousetrap.bind(["k","up"],function(a){if(Tender.is_supporter){if(Tender.koNewForm){Tender.koNewForm.prevCannedReply()}}});Mousetrap.bind(["j","down"],function(a){if(Tender.is_supporter){if(Tender.koNewForm){Tender.koNewForm.nextCannedReply()}}});Mousetrap.bind("enter",function(a){if(Tender.is_supporter){if(Tender.koNewForm){Tender.koNewForm.selectCannedReply()}}});Mousetrap.bind(["e","ctrl+e","command+e"],function(){if(Tender.is_supporter){if(Tender.koNewForm){Tender.koNewForm.toggleCannedReplies()}}});var Tender=Tender||{};var TenderKO=TenderKO||{};TenderKO.discussion=TenderKO.discussion||{};Tender.NewDiscussionForm=Class.extend({init:function(d){var c=this;d=d||{};this.publicCategory=ko.observable(false);this.privateCategory=ko.observable(false);this.useMarkdown=ko.observable(Tender.Markdown.read());this.cannedReplies=ko.observableArray([]);this.showCannedReplies=ko.observable(false);this.selectedCannedReply=ko.observable(0);this.selectedCannedReplyId=ko.observable("");this["private"]=ko.observable(d["private"]);this.internal=ko.observable(d.internal);this.category=ko.observable(d.category);this.addWatchers=ko.observable(d.addWatchers);this.allowPrivateOption=ko.observable(d.allowPrivateOption);this.allowCannedReplies=ko.observable(d.allowCannedReplies);this.allowWatchersOption=ko.observable(d.allowWatchersOption);this.categories=ko.observableArray(unescapeUnicode(d.categories));this.cannedReplies=ko.observableArray(unescapeUnicode(d.cannedReplies));this.keystrokes=ko.observableArray([]);Tender.Modules.AutocompleteWatchers.setup(this);var a=(document.getElementById("comment_body")||document.getElementById("discussion_body"));this.body=ko.observable(jQuery(a).val());if(d.counter&&d.counter.length>0){var b=d.counter.split(",");while(b.length>0){var e=b.shift().split(".");this.keystrokes.push([parseInt(e[0]),parseInt(e[1])])}}this.counter=ko.computed(function(){return _.map(this.keystrokes(),function(f){return f.join(".")}).join(",")},this);setInterval(function(){var g=c.keystrokes().length;var f=c.keystrokes()[g-1];if(g>0){if(f[0]==0){c.keystrokes.splice(g-1,1,[0,f[1]+1])}else{c.keystrokes.push([0,1])}}},1000);this.addWatchersChanged=ko.computed(function(){if(this.addWatchers()){this["private"](true);jQuery("#uniform-discussion_private > span").addClass("checked")}},this);this.categoryChanged=ko.computed(function(){if(this.category()){var f=_.find(this.categories(),{value:this.category()});if(f){if(f.name.match(/\[private\]$/)){this["private"](true);this.publicCategory(false);this.privateCategory(true)}else{if(f.name.match(/\[public\]$/)){this["private"](false);this.publicCategory(true);this.privateCategory(false)}else{this.publicCategory(false);this.privateCategory(false)}}}}},this);this.usePlainText=ko.computed(function(){return !this.useMarkdown()},this);this.files=ko.observableArray([{val:ko.observable(false)}]);this.addFile=function(g,f){g.val(f.target.value.replace(/C:\\fakepath\\/,""));c.files.push({val:ko.observable(false)})};this.removeFile=function(g,f){c.files.remove(g)};this.selectCannedReply=function(f){if(!f){f=this.cannedReplies()[this.selectedCannedReply()]}if(f){c.body(f.body);c.toggleCannedReplies();c.selectedCannedReplyId(f.id)}};this.showInitialOptions=ko.computed(function(){if(this.allowCannedReplies()){return true}if(this.allowWatchersOption()){return true}if(!this.allowPrivateOption()){return false}return !(this.publicCategory()||this.privateCategory())},this)},recordKey:function(){var b=this.keystrokes().length;var a=this.keystrokes()[b-1];if(b==0||(a[0]==0&&a[1]>0)){this.keystrokes.push([1,1])}else{this.keystrokes.splice(b-1,1,[a[0]+1,1])}return true},prevCannedReply:function(){var a=this.cannedReplies().length;this.selectedCannedReply((this.selectedCannedReply()-1+a)%a)},nextCannedReply:function(){var a=this.cannedReplies().length;this.selectedCannedReply((this.selectedCannedReply()+1)%a)},toggleCannedReplies:function(){if(this.showCannedReplies()){this.showCannedReplies(false)}else{this.showCannedReplies(true);this.selectedCannedReply(0)}},toggleMarkdown:function(){val=!this.useMarkdown();this.useMarkdown(val);Tender.Markdown.write(val)},openPreview:function(){Tender.Popbox.open({url:"/help/preview",type:"post",data:{body:this.body()}})},openHelp:function(){Tender.Popbox.open({url:"/help/formatting"})}});jQuery(function(){var a=(document.getElementById("new-discussion-form")||document.getElementById("discussion-reply-form"));if(a){Tender.koNewForm=new Tender.NewDiscussionForm(TenderKO.discussion);ko.applyBindings(Tender.koNewForm,a)}});var Tender=Tender||{};var TenderKO=TenderKO||{};Tender.Modules=Tender.Modules||{};TenderKO.discussion=TenderKO.discussion||{};Tender.Modules.AutocompleteWatchers={setup:function(d,b){d.watchers=ko.observableArray([]);d.watcherUsers=ko.computed(function(){return _.chain(this.watchers()).filter(function(e){return/user:\d+/.test(e)}).map(function(e){return e.split(":")[1]}).valueOf()},d);d.watcherCompanies=ko.computed(function(){return _.chain(this.watchers()).filter(function(e){return/company:\d+/.test(e)}).map(function(e){return e.split(":")[1]}).valueOf()},d);d.watcherEmails=ko.computed(function(){return _.chain(this.watchers()).filter(function(e){return/@/.test(e)}).valueOf()},d);d.watchersHash=ko.computed(function(){return{watchers:{emails:this.watcherEmails(),user_ids:this.watcherUsers(),company_ids:this.watcherCompanies()}}},d);b=b||{};var a=b.selector||"#discussion_initial_watchers";delete b.selector;var c=Tender.Modules.AutocompleteWatchers;d.autocomplete=jQuery(a).selectize(_.merge(b,{labelField:"name",searchField:["name","email"],load:_.bind(c.load,d),create:_.bind(c.create,d),onChange:_.bind(c.changed,d),render:{item:c.formatItem,option:c.formatOption}}))[0];if(d.autocomplete){d.autocomplete=d.autocomplete.selectize}},changed:function(a){this.watchers(a.split(","))},create:function(a){var b=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))){2,6}$/i;if(b.test(a)){return{name:a,value:a}}else{alert("Invalid email address.");return false}},load:function(b,c){var a=this;if(!b.length){return c()}jQuery.ajax({dataType:"json",url:"/dashboard/members",data:{search:b},error:function(){c()},success:function(d){c(d)}})},formatItem:function(b,a){return"<div>"+a(b.name||b.email)+"</div>"},formatOption:function(b,a){html='<div class="watcher-match"">';if(b.name){html=html+"<strong>"+a(b.name)+"</strong>"}if(b.email){html=html+" ("+a(b.email)+")"}if(b.company){html=html+", <strong>Company</strong>: "+a(b.company)}if(b.isCompany){html=html+" (Company)"}return html+"</div>"}};Tender.WatchersForm=Class.extend({init:function(c){var b=this;c=c||{};Tender.Modules.Ajax.setup(this);this.loaded(true);var a=function(){setTimeout(_.bind(b.addWatcher,b),0)};Tender.Modules.AutocompleteWatchers.setup(this,{onItemAdd:a,selector:"#add-other-watcher",maxItems:1});this.toggleNotificationsPath=c.toggleNotificationsPath;this.addWatcherPath=c.addWatcherPath;this.watchersPath=c.watchersPath;this.emailLogPath=c.emailLogPath;this.discussionId=Tender.discussion_id;this.isSupporter=Tender.is_supporter;this.isWatching=ko.observable(!!c.isWatching);this.watchersCount=ko.observable(parseInt(c.watchersCount)||0);this.watchersCountText=ko.computed(function(){if(this.watchersCount()==1){return"person watching"}else{return"people watching"}},this)},subscribe:function(){this.toggleNotify(true)},unsubscribe:function(){this.toggleNotify(false)},toggleNotify:function(b){var a=this;this.prepareAjax();this.xhr=jQuery.ajax({url:this.toggleNotificationsPath,type:"POST",data:{format:"js"},dataType:"json",headers:{"X-CSRF-Token":getAuthKey()}}).done(function(c){a.isWatching(b);a.watchersCount(c.count);a.ajaxLoadSuccess()}).fail(function(){a.ajaxLoadFailure()})},addWatcher:function(){var a=this;var b=this.watchersHash();b.format="js";if(this.loaded){this.prepareAjax();this.autocomplete.lock();this.xhr=jQuery.ajax({url:this.addWatcherPath,type:"POST",data:b,dataType:"json",headers:{"X-CSRF-Token":getAuthKey()}}).done(function(c){a.autocomplete.clear();a.autocomplete.unlock();a.watchersCount(c.count);a.ajaxLoadSuccess()}).fail(function(){a.autocomplete.unlock();a.ajaxLoadFailure()})}},showWatchers:function(){if(this.isSupporter){Tender.Popbox.open({url:this.watchersPath})}},showEmailLog:function(){if(this.isSupporter){Tender.Popbox.open({url:this.emailLogPath})}}});jQuery(function(){var a=document.getElementById("watchers-box");if(a){Tender.koWatchersForm=new Tender.WatchersForm(TenderKO.discussion);ko.applyBindings(Tender.koWatchersForm,a)}});var Tender=Tender||{};Tender.Markdown={read:function(){if(Tender.logged_in){return Tender.user_markdown}else{var a=Cookies.get("user_markdown");if(a===null){return Tender.user_markdown}else{return a&&a=="true"}}},write:function(a){if(Tender.logged_in){Tender.user_markdown=a;jQuery.post("/help/users/preferences",{markdown:a})}Cookies.set("user_markdown",a,{expires:new Date(2038,1,1)})}};var Tender=Tender||{};Tender.Popbox={open:function(a){a.data=a.data||{};a.data["format"]="js";if(a.type&&a.type=="post"){a.data["authenticity_token"]=getAuthKey()}a.dataType="text";jQuery.magnificPopup.open({items:{type:"ajax"},ajax:{settings:a},callbacks:{updateStatus:function(b){if(b.status=="ready"){this.contentContainer.addClass("popbox-container")}else{this.contentContainer.removeClass("popbox-container")}},parseAjax:function(b){b.data="<div>"+b.data+"</div>"}}})}};var Tender=Tender||{};Tender.Superheader=Class.extend({init:function(){this.hideMobileMenu=ko.observable(true)},toggleMobileMenu:function(){this.hideMobileMenu(!this.hideMobileMenu())}});jQuery(function(){var a=document.getElementById("superheader");if(a){Tender.koSuperheader=new Tender.Superheader();ko.applyBindings(Tender.koSuperheader,a)}});var Tender=Tender||{};Tender.Modules=Tender.Modules||{};_.mixin({truncateString:function(b,a){if(b.length>a){b=_.first(b,a).join("")+".."}return b}});Tender.Modules.Ajax={setup:function(a){a.xhr=null;a.error=ko.observable(false);a.loaded=ko.observable(false);a.ajaxTimer=ko.observable(1000);a.prepareAjax=this.prepareAjax;a.ajaxLoadSuccess=this.ajaxLoadSuccess;a.ajaxLoadFailure=this.ajaxLoadFailure;a.ajaxFailureCount=ko.observable(0)},prepareAjax:function(){this.xhr&&this.xhr.abort();this.error(false);this.loaded(false)},ajaxLoadSuccess:function(){this.error(false);this.loaded(true);this.ajaxFailureCount(0)},ajaxLoadFailure:function(b,a){console.log("Ajax error",b,a);this.error(true);this.loaded(true);this.ajaxFailureCount(this.ajaxFailureCount()+1)}};Tender.Modules.Pagination={setup:function(a){a.pageTotal=ko.observable(1);a.pageCurrent=ko.observable(1);a.pagePrev=this.pagePrev;a.pageNext=this.pageNext;a.addPageQuery=this.addPageQuery;a.paginationSuccess=this.paginationSuccess;a.pagePrevClass=ko.computed(function(){return this.pageCurrent()>1?"prev":"prev disabled"},a);a.pageNextClass=ko.computed(function(){return this.pageCurrent()<this.pageTotal()?"next":"next disabled"},a)},pagePrev:function(){if(this.pageCurrent()>1){this.pageCurrent(this.pageCurrent()-1);this.loadQuery()}},pageNext:function(){if(this.pageCurrent()<this.pageTotal()){this.pageCurrent(this.pageCurrent()+1);this.loadQuery()}},addPageQuery:function(a){var b=this.pageCurrent();if(b&&b>1){a.setSearch("page",b)}else{a.removeSearch("page")}},paginationSuccess:function(a){this.pageTotal(a.total_pages);this.pageCurrent(a.page)}};Tender.Modules.TitleNotifier={increment:function(){document.title=document.title.replace(/^\[(\d+)\] /,"");if(RegExp.$1!=""){counter=parseInt(RegExp.$1.replace(/^\[|\]$/g,""))}else{counter=0}document.title="["+(counter+1)+"] "+document.title}};var Tender=Tender||{};Tender.StickyDiscussionViewModel=Class.extend({init:function(a){this.link=ko.observable(a.link);this.title=ko.observable(a.title);this.last_user_name=ko.observable(a.last_user_name);this.updatedText=ko.computed(function(){if(this.last_user_name()){return("Updated by "+this.last_user_name())}else{return("Not yet updated")}},this)}});Tender.StickyQueueViewModel=Class.extend({init:function(){this.isLoading=ko.observable(true);this.queueId=ko.observable(null);this.queueName=ko.observable("");this.queueSize=ko.observable(0);this.discussions=ko.observableArray();this.url=Cookies.get("queueURL");this.discussionsCount=ko.computed(function(){return(this.queueSize()+" Discussion"+(this.queueSize()==1?"":"s"))},this);Tender.Modules.Pagination.setup(this);Tender.Modules.Ajax.setup(this);this.loadQuery()},showPop:function(){if(!this.box){this.box=document.getElementById("sticky-pop");this.box.show();this.box=new StickyQueueBox(this.box)}PopManager.createPop(this.box,{modal:false,positionMode:"fixed"})},loadQuery:function(){var b=this;var a=URI(b.url);this.addPageQuery(a);this.isLoading(true);this.prepareAjax();this.xhr=jQuery.ajax({url:a.toString(),dataType:"json",headers:{"X-CSRF-Token":Tender.authenticityToken},error:function(e,d,c){b.ajaxLoadFailure(e)},success:function(c){b.loadSuccess(c)}})},loadSuccess:function(a){this.queueId(a.id);this.queueName(a.name);this.queueSize(a.total);this.paginationSuccess(a.pagination);this.discussions.removeAll();_.each(a.discussions,function(b){this.discussions.push(new Tender.StickyDiscussionViewModel(b))},this);this.isLoading(false)}});jQuery(function(){var a=document.getElementById("sticky_queue_container");if(a){Tender.koStickyQueue=new Tender.StickyQueueViewModel();ko.applyBindings(Tender.koStickyQueue,a)}});var Tender=Tender||{};Tender.Faq=Class.extend({init:function(a){this.id=ko.observable(a.id);this.link=ko.observable(a.link);this.title=ko.observable(a.title);this.truncated_html=ko.observable(a.truncated_html)}});Tender.SuggestedKB=Class.extend({init:function(){var a=this;this.show=ko.observable(false);this.faqs=ko.observableArray([]);this.plural=ko.computed(function(){return(this.faqs().length+" suggested article"+(this.faqs().length==1?"":"s"))},this)},loadQuery:function(){var b=this;var a=TenderKO.discussion.autosuggestPath;this.xhr=jQuery.ajax({url:a.toString(),dataType:"json",headers:{"X-CSRF-Token":Tender.authenticityToken},success:function(c){b.loadSuccess(c)}})},loadSuccess:function(a){_.each(a.faqs,function(b){this.faqs.push(new Tender.Faq(b))},this)},toggleSuggest:function(){this.show(!this.show())}});jQuery(function(){var a=document.getElementById("autosuggest");if(Tender.is_supporter&&a){Tender.suggestedKB=new Tender.SuggestedKB();Tender.suggestedKB.loadQuery();ko.applyBindings(Tender.suggestedKB,a)}});var Prototype={Version:"1.7.2",Browser:(function(){var b=navigator.userAgent;var a=Object.prototype.toString.call(window.opera)=="[object Opera]";return{IE:!!window.attachEvent&&!a,Opera:a,WebKit:b.indexOf("AppleWebKit/")>-1,Gecko:b.indexOf("Gecko")>-1&&b.indexOf("KHTML")===-1,MobileSafari:/Apple.*Mobile/.test(b)}})(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:(function(){var a=window.Element||window.HTMLElement;return !!(a&&a.prototype)})(),SpecificElementExtensions:(function(){if(typeof window.HTMLDivElement!=="undefined"){return true}var c=document.createElement("div"),b=document.createElement("form"),a=false;if(c.__proto__&&(c.__proto__!==b.__proto__)){a=true}c=b=null;return a})()},ScriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script\\s*>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(a){return a}};if(Prototype.Browser.MobileSafari){Prototype.BrowserFeatures.SpecificElementExtensions=false}var Class=(function(){var d=(function(){for(var e in {toString:1}){if(e==="toString"){return false}}return true})();function a(){}function b(){var h=null,g=$A(arguments);if(Object.isFunction(g[0])){h=g.shift()}function e(){this.initialize.apply(this,arguments)}Object.extend(e,Class.Methods);e.superclass=h;e.subclasses=[];if(h){a.prototype=h.prototype;e.prototype=new a;h.subclasses.push(e)}for(var f=0,j=g.length;f<j;f++){e.addMethods(g[f])}if(!e.prototype.initialize){e.prototype.initialize=Prototype.emptyFunction}e.prototype.constructor=e;return e}function c(l){var g=this.superclass&&this.superclass.prototype,f=Object.keys(l);if(d){if(l.toString!=Object.prototype.toString){f.push("toString")}if(l.valueOf!=Object.prototype.valueOf){f.push("valueOf")}}for(var e=0,h=f.length;e<h;e++){var k=f[e],j=l[k];if(g&&Object.isFunction(j)&&j.argumentNames()[0]=="$super"){var m=j;j=(function(i){return function(){return g[i].apply(this,arguments)}})(k).wrap(m);j.valueOf=(function(i){return function(){return i.valueOf.call(i)}})(m);j.toString=(function(i){return function(){return i.toString.call(i)}})(m)}this.prototype[k]=j}return this}return{create:b,Methods:{addMethods:c}}})();(function(){var y=Object.prototype.toString,k=Object.prototype.hasOwnProperty,z="Null",B="Undefined",K="Boolean",w="Number",v="String",I="Object",i="[object Function]",d="[object Boolean]",j="[object Number]",f="[object String]",b="[object Array]",H="[object Date]",e=window.JSON&&typeof JSON.stringify==="function"&&JSON.stringify(0)==="0"&&typeof JSON.stringify(Prototype.K)==="undefined";var q=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var a=(function(){for(var L in {toString:1}){if(L==="toString"){return false}}return true})();function D(M){switch(M){case null:return z;case (void 0):return B}var L=typeof M;switch(L){case"boolean":return K;case"number":return w;case"string":return v}return I}function h(L,N){for(var M in N){L[M]=N[M]}return L}function l(L){try{if(o(L)){return"undefined"}if(L===null){return"null"}return L.inspect?L.inspect():String(L)}catch(M){if(M instanceof RangeError){return"..."}throw M}}function A(L){return m("",{"":L},[])}function m(U,R,S){var T=R[U];if(D(T)===I&&typeof T.toJSON==="function"){T=T.toJSON(U)}var N=y.call(T);switch(N){case j:case d:case f:T=T.valueOf()}switch(T){case null:return"null";case true:return"true";case false:return"false"}var Q=typeof T;switch(Q){case"string":return T.inspect(true);case"number":return isFinite(T)?String(T):"null";case"object":for(var M=0,L=S.length;M<L;M++){if(S[M]===T){throw new TypeError("Cyclic reference to '"+T+"' in object")}}S.push(T);var P=[];if(N===b){for(var M=0,L=T.length;M<L;M++){var O=m(M,T,S);P.push(typeof O==="undefined"?"null":O)}P="["+P.join(",")+"]"}else{var V=Object.keys(T);for(var M=0,L=V.length;M<L;M++){var U=V[M],O=m(U,T,S);if(typeof O!=="undefined"){P.push(U.inspect(true)+":"+O)}}P="{"+P.join(",")+"}"}S.pop();return P}}function J(L){return JSON.stringify(L)}function C(L){return $H(L).toQueryString()}function p(L){return L&&L.toHTML?L.toHTML():String.interpret(L)}function x(L){if(D(L)!==I){throw new TypeError()}var N=[];for(var O in L){if(k.call(L,O)){N.push(O)}}if(a){for(var M=0;O=q[M];M++){if(k.call(L,O)){N.push(O)}}}return N}function G(L){var M=[];for(var N in L){M.push(L[N])}return M}function s(L){return h({},L)}function E(L){return !!(L&&L.nodeType==1)}function u(L){return y.call(L)===b}var c=(typeof Array.isArray=="function")&&Array.isArray([])&&!Array.isArray({});if(c){u=Array.isArray}function r(L){return L instanceof Hash}function n(L){return y.call(L)===i}function g(L){return y.call(L)===f}function F(L){return y.call(L)===j}function t(L){return y.call(L)===H}function o(L){return typeof L==="undefined"}h(Object,{extend:h,inspect:l,toJSON:e?J:A,toQueryString:C,toHTML:p,keys:Object.keys||x,values:G,clone:s,isElement:E,isArray:u,isHash:r,isFunction:n,isString:g,isNumber:F,isDate:t,isUndefined:o})})();Object.extend(Function.prototype,(function(){var l=Array.prototype.slice;function d(p,m){var o=p.length,n=m.length;while(n--){p[o+n]=m[n]}return p}function j(n,m){n=l.call(n,0);return d(n,m)}function g(){var m=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return m.length==1&&!m[0]?[]:m}function h(o){if(arguments.length<2&&Object.isUndefined(arguments[0])){return this}if(!Object.isFunction(this)){throw new TypeError("The object is not callable.")}var q=function(){};var m=this,n=l.call(arguments,1);var p=function(){var r=j(n,arguments);var s=this instanceof p?this:o;return m.apply(s,r)};q.prototype=this.prototype;p.prototype=new q();return p}function f(o){var m=this,n=l.call(arguments,1);return function(q){var p=d([q||window.event],n);return m.apply(o,p)}}function k(){if(!arguments.length){return this}var m=this,n=l.call(arguments,0);return function(){var o=j(n,arguments);return m.apply(this,o)}}function e(o){var m=this,n=l.call(arguments,1);o=o*1000;return window.setTimeout(function(){return m.apply(m,n)},o)}function a(){var m=d([0.01],arguments);return this.delay.apply(this,m)}function c(n){var m=this;return function(){var o=d([m.bind(this)],arguments);return n.apply(this,o)}}function b(){if(this._methodized){return this._methodized}var m=this;return this._methodized=function(){var n=d([this],arguments);return m.apply(null,n)}}var i={argumentNames:g,bindAsEventListener:f,curry:k,delay:e,defer:a,wrap:c,methodize:b};if(!Function.prototype.bind){i.bind=h}return i})());(function(c){function b(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+"Z"}function a(){return this.toISOString()}if(!c.toISOString){c.toISOString=b}if(!c.toJSON){c.toJSON=a}})(Date.prototype);RegExp.prototype.match=RegExp.prototype.test;RegExp.escape=function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};var PeriodicalExecuter=Class.create({initialize:function(b,a){this.callback=b;this.frequency=a;this.currentlyExecuting=false;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),this.frequency*1000)},execute:function(){this.callback(this)},stop:function(){if(!this.timer){return}clearInterval(this.timer);this.timer=null},onTimerEvent:function(){if(!this.currentlyExecuting){try{this.currentlyExecuting=true;this.execute();this.currentlyExecuting=false}catch(a){this.currentlyExecuting=false;throw a}}}});Object.extend(String,{interpret:function(a){return a==null?"":String(a)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});Object.extend(String.prototype,(function(){var NATIVE_JSON_PARSE_SUPPORT=window.JSON&&typeof JSON.parse==="function"&&JSON.parse('{"test": true}').test;function prepareReplacement(replacement){if(Object.isFunction(replacement)){return replacement}var template=new Template(replacement);return function(match){return template.evaluate(match)}}function isNonEmptyRegExp(regexp){return regexp.source&&regexp.source!=="(?:)"}function gsub(pattern,replacement){var result="",source=this,match;replacement=prepareReplacement(replacement);if(Object.isString(pattern)){pattern=RegExp.escape(pattern)}if(!(pattern.length||isNonEmptyRegExp(pattern))){replacement=replacement("");return replacement+source.split("").join(replacement)+replacement}while(source.length>0){match=source.match(pattern);if(match&&match[0].length>0){result+=source.slice(0,match.index);result+=String.interpret(replacement(match));source=source.slice(match.index+match[0].length)}else{result+=source,source=""}}return result}function sub(pattern,replacement,count){replacement=prepareReplacement(replacement);count=Object.isUndefined(count)?1:count;return this.gsub(pattern,function(match){if(--count<0){return match[0]}return replacement(match)})}function scan(pattern,iterator){this.gsub(pattern,iterator);return String(this)}function truncate(length,truncation){length=length||30;truncation=Object.isUndefined(truncation)?"...":truncation;return this.length>length?this.slice(0,length-truncation.length)+truncation:String(this)}function strip(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function stripTags(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")}function stripScripts(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")}function extractScripts(){var matchAll=new RegExp(Prototype.ScriptFragment,"img"),matchOne=new RegExp(Prototype.ScriptFragment,"im");return(this.match(matchAll)||[]).map(function(scriptTag){return(scriptTag.match(matchOne)||["",""])[1]})}function evalScripts(){return this.extractScripts().map(function(script){return eval(script)})}function escapeHTML(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function unescapeHTML(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function toQueryParams(separator){var match=this.strip().match(/([^?#]*)(#.*)?$/);if(!match){return{}}return match[1].split(separator||"&").inject({},function(hash,pair){if((pair=pair.split("="))[0]){var key=decodeURIComponent(pair.shift()),value=pair.length>1?pair.join("="):pair[0];if(value!=undefined){value=value.gsub("+"," ");value=decodeURIComponent(value)}if(key in hash){if(!Object.isArray(hash[key])){hash[key]=[hash[key]]}hash[key].push(value)}else{hash[key]=value}}return hash})}function toArray(){return this.split("")}function succ(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)}function times(count){return count<1?"":new Array(count+1).join(this)}function camelize(){return this.replace(/-+(.)?/g,function(match,chr){return chr?chr.toUpperCase():""})}function capitalize(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()}function underscore(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()}function dasherize(){return this.replace(/_/g,"-")}function inspect(useDoubleQuotes){var escapedString=this.replace(/[\x00-\x1f\\]/g,function(character){if(character in String.specialChar){return String.specialChar[character]}return"\\u00"+character.charCodeAt().toPaddedString(2,16)});if(useDoubleQuotes){return'"'+escapedString.replace(/"/g,'\\"')+'"'}return"'"+escapedString.replace(/'/g,"\\'")+"'"}function unfilterJSON(filter){return this.replace(filter||Prototype.JSONFilter,"$1")}function isJSON(){var str=this;if(str.blank()){return false}str=str.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@");str=str.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");str=str.replace(/(?:^|:|,)(?:\s*\[)+/g,"");return(/^[\],:{}\s]*$/).test(str)}function evalJSON(sanitize){var json=this.unfilterJSON(),cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if(cx.test(json)){json=json.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}try{if(!sanitize||json.isJSON()){return eval("("+json+")")}}catch(e){}throw new SyntaxError("Badly formed JSON string: "+this.inspect())}function parseJSON(){var json=this.unfilterJSON();return JSON.parse(json)}function include(pattern){return this.indexOf(pattern)>-1}function startsWith(pattern,position){position=Object.isNumber(position)?position:0;return this.lastIndexOf(pattern,position)===position}function endsWith(pattern,position){pattern=String(pattern);position=Object.isNumber(position)?position:this.length;if(position<0){position=0}if(position>this.length){position=this.length}var d=position-pattern.length;return d>=0&&this.indexOf(pattern,d)===d}function empty(){return this==""}function blank(){return/^\s*$/.test(this)}function interpolate(object,pattern){return new Template(this,pattern).evaluate(object)}return{gsub:gsub,sub:sub,scan:scan,truncate:truncate,strip:String.prototype.trim||strip,stripTags:stripTags,stripScripts:stripScripts,extractScripts:extractScripts,evalScripts:evalScripts,escapeHTML:escapeHTML,unescapeHTML:unescapeHTML,toQueryParams:toQueryParams,parseQuery:toQueryParams,toArray:toArray,succ:succ,times:times,camelize:camelize,capitalize:capitalize,underscore:underscore,dasherize:dasherize,inspect:inspect,unfilterJSON:unfilterJSON,isJSON:isJSON,evalJSON:NATIVE_JSON_PARSE_SUPPORT?parseJSON:evalJSON,include:include,startsWith:String.prototype.startsWith||startsWith,endsWith:String.prototype.endsWith||endsWith,empty:empty,blank:blank,interpolate:interpolate}})());var Template=Class.create({initialize:function(a,b){this.template=a.toString();this.pattern=b||Template.Pattern},evaluate:function(a){if(a&&Object.isFunction(a.toTemplateReplacements)){a=a.toTemplateReplacements()}return this.template.gsub(this.pattern,function(d){if(a==null){return(d[1]+"")}var f=d[1]||"";if(f=="\\"){return d[2]}var b=a,g=d[3],e=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;d=e.exec(g);if(d==null){return f}while(d!=null){var c=d[1].startsWith("[")?d[2].replace(/\\\\]/g,"]"):d[1];b=b[c];if(null==b||""==d[3]){break}g=g.substring("["==d[3]?d[1].length:d[0].length);d=e.exec(g)}return f+String.interpret(b)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;var $break={};var Enumerable=(function(){function c(x,w){try{this._each(x,w)}catch(y){if(y!=$break){throw y}}return this}function r(z,y,x){var w=-z,A=[],B=this.toArray();if(z<1){return B}while((w+=z)<B.length){A.push(B.slice(w,w+z))}return A.collect(y,x)}function b(y,x){y=y||Prototype.K;var w=true;this.each(function(A,z){w=w&&!!y.call(x,A,z,this);if(!w){throw $break}},this);return w}function i(y,x){y=y||Prototype.K;var w=false;this.each(function(A,z){if(w=!!y.call(x,A,z,this)){throw $break}},this);return w}function j(y,x){y=y||Prototype.K;var w=[];this.each(function(A,z){w.push(y.call(x,A,z,this))},this);return w}function t(y,x){var w;this.each(function(A,z){if(y.call(x,A,z,this)){w=A;throw $break}},this);return w}function h(y,x){var w=[];this.each(function(A,z){if(y.call(x,A,z,this)){w.push(A)}},this);return w}function g(z,y,x){y=y||Prototype.K;var w=[];if(Object.isString(z)){z=new RegExp(RegExp.escape(z))}this.each(function(B,A){if(z.match(B)){w.push(y.call(x,B,A,this))}},this);return w}function a(w){if(Object.isFunction(this.indexOf)&&this.indexOf(w)!=-1){return true}var x=false;this.each(function(y){if(y==w){x=true;throw $break}});return x}function q(x,w){w=Object.isUndefined(w)?null:w;return this.eachSlice(x,function(y){while(y.length<x){y.push(w)}return y})}function l(w,y,x){this.each(function(A,z){w=y.call(x,w,A,z,this)},this);return w}function v(x){var w=$A(arguments).slice(1);return this.map(function(y){return y[x].apply(y,w)})}function p(y,x){y=y||Prototype.K;var w;this.each(function(A,z){A=y.call(x,A,z,this);if(w==null||A>=w){w=A}},this);return w}function n(y,x){y=y||Prototype.K;var w;this.each(function(A,z){A=y.call(x,A,z,this);if(w==null||A<w){w=A}},this);return w}function e(z,x){z=z||Prototype.K;var y=[],w=[];this.each(function(B,A){(z.call(x,B,A,this)?y:w).push(B)},this);return[y,w]}function f(x){var w=[];this.each(function(y){w.push(y[x])});return w}function d(y,x){var w=[];this.each(function(A,z){if(!y.call(x,A,z,this)){w.push(A)}},this);return w}function m(x,w){return this.map(function(z,y){return{value:z,criteria:x.call(w,z,y,this)}},this).sort(function(B,A){var z=B.criteria,y=A.criteria;return z<y?-1:z>y?1:0}).pluck("value")}function o(){return this.map()}function s(){var x=Prototype.K,w=$A(arguments);if(Object.isFunction(w.last())){x=w.pop()}var y=[this].concat(w).map($A);return this.map(function(A,z){return x(y.pluck(z))})}function k(){return this.toArray().length}function u(){return"#<Enumerable:"+this.toArray().inspect()+">"}return{each:c,eachSlice:r,all:b,every:b,any:i,some:i,collect:j,map:j,detect:t,findAll:h,select:h,filter:h,grep:g,include:a,member:a,inGroupsOf:q,inject:l,invoke:v,max:p,min:n,partition:e,pluck:f,reject:d,sortBy:m,toArray:o,entries:o,zip:s,size:k,inspect:u,find:t}})();function $A(c){if(!c){return[]}if("toArray" in Object(c)){return c.toArray()}var b=c.length||0,a=new Array(b);while(b--){a[b]=c[b]}return a}function $w(a){if(!Object.isString(a)){return[]}a=a.strip();return a?a.split(/\s+/):[]}Array.from=$A;(function(){var x=Array.prototype,p=x.slice,r=x.forEach;function b(D,C){for(var B=0,E=this.length>>>0;B<E;B++){if(B in this){D.call(C,this[B],B,this)}}}if(!r){r=b}function o(){this.length=0;return this}function d(){return this[0]}function g(){return this[this.length-1]}function k(){return this.select(function(B){return B!=null})}function A(){return this.inject([],function(C,B){if(Object.isArray(B)){return C.concat(B.flatten())}C.push(B);return C})}function j(){var B=p.call(arguments,0);return this.select(function(C){return !B.include(C)})}function f(B){return(B===false?this.toArray():this)._reverse()}function n(B){return this.inject([],function(E,D,C){if(0==C||(B?E.last()!=D:!E.include(D))){E.push(D)}return E})}function s(B){return this.uniq().findAll(function(C){return B.indexOf(C)!==-1})}function v(){return p.call(this,0)}function l(){return this.length}function y(){return"["+this.map(Object.inspect).join(", ")+"]"}function a(E,C){if(this==null){throw new TypeError()}var F=Object(this),D=F.length>>>0;if(D===0){return -1}C=Number(C);if(isNaN(C)){C=0}else{if(C!==0&&isFinite(C)){C=(C>0?1:-1)*Math.floor(Math.abs(C))}}if(C>D){return -1}var B=C>=0?C:Math.max(D-Math.abs(C),0);for(;B<D;B++){if(B in F&&F[B]===E){return B}}return -1}function q(E,C){if(this==null){throw new TypeError()}var F=Object(this),D=F.length>>>0;if(D===0){return -1}if(!Object.isUndefined(C)){C=Number(C);if(isNaN(C)){C=0}else{if(C!==0&&isFinite(C)){C=(C>0?1:-1)*Math.floor(Math.abs(C))}}}else{C=D}var B=C>=0?Math.min(C,D-1):D-Math.abs(C);for(;B>=0;B--){if(B in F&&F[B]===E){return B}}return -1}function c(I){var G=[],H=p.call(arguments,0),J,C=0;H.unshift(this);for(var F=0,B=H.length;F<B;F++){J=H[F];if(Object.isArray(J)&&!("callee" in J)){for(var E=0,D=J.length;E<D;E++){if(E in J){G[C]=J[E]}C++}}else{G[C++]=J}}G.length=C;return G}function u(B){return function(){if(arguments.length===0){return B.call(this,Prototype.K)}else{if(arguments[0]===undefined){var C=p.call(arguments,1);C.unshift(Prototype.K);return B.apply(this,C)}else{return B.apply(this,arguments)}}}}function w(F){if(this==null){throw new TypeError()}F=F||Prototype.K;var B=Object(this);var E=[],D=arguments[1],H=0;for(var C=0,G=B.length>>>0;C<G;C++){if(C in B){E[H]=F.call(D,B[C],C,B)}H++}E.length=H;return E}if(x.map){w=u(Array.prototype.map)}function h(F){if(this==null||!Object.isFunction(F)){throw new TypeError()}var B=Object(this);var E=[],D=arguments[1],H;for(var C=0,G=B.length>>>0;C<G;C++){if(C in B){H=B[C];if(F.call(D,H,C,B)){E.push(H)}}}return E}if(x.filter){h=Array.prototype.filter}function i(E){if(this==null){throw new TypeError()}E=E||Prototype.K;var D=arguments[1];var B=Object(this);for(var C=0,F=B.length>>>0;C<F;C++){if(C in B&&E.call(D,B[C],C,B)){return true}}return false}if(x.some){var i=u(Array.prototype.some)}function z(E){if(this==null){throw new TypeError()}E=E||Prototype.K;var D=arguments[1];var B=Object(this);for(var C=0,F=B.length>>>0;C<F;C++){if(C in B&&!E.call(D,B[C],C,B)){return false}}return true}if(x.every){var z=u(Array.prototype.every)}var t=x.reduce;function m(B,D){D=D||Prototype.K;var C=arguments[2];return t.call(this,D.bind(C),B)}if(!x.reduce){var m=Enumerable.inject}Object.extend(x,Enumerable);if(!x._reverse){x._reverse=x.reverse}Object.extend(x,{_each:r,map:w,collect:w,select:h,filter:h,findAll:h,some:i,any:i,every:z,all:z,inject:m,clear:o,first:d,last:g,compact:k,flatten:A,without:j,reverse:f,uniq:n,intersect:s,clone:v,toArray:v,size:l,inspect:y});var e=(function(){return[].concat(arguments)[0][0]!==1})(1,2);if(e){x.concat=c}if(!x.indexOf){x.indexOf=a}if(!x.lastIndexOf){x.lastIndexOf=q}})();function $H(a){return new Hash(a)}var Hash=Class.create(Enumerable,(function(){function e(p){this._object=Object.isHash(p)?p.toObject():Object.clone(p)}function f(s,r){var q=0;for(var p in this._object){var t=this._object[p],u=[p,t];u.key=p;u.value=t;s.call(r,u,q);q++}}function j(p,q){return this._object[p]=q}function c(p){if(this._object[p]!==Object.prototype[p]){return this._object[p]}}function m(p){var q=this._object[p];delete this._object[p];return q}function o(){return Object.clone(this._object)}function n(){return this.pluck("key")}function l(){return this.pluck("value")}function g(q){var p=this.detect(function(r){return r.value===q});return p&&p.key}function i(p){return this.clone().update(p)}function d(p){return new Hash(p).inject(this,function(q,r){q.set(r.key,r.value);return q})}function b(p,q){if(Object.isUndefined(q)){return p}q=String.interpret(q);q=q.gsub(/(\r)?\n/,"\r\n");q=encodeURIComponent(q);q=q.gsub(/%20/,"+");return p+"="+q}function a(){return this.inject([],function(t,w){var s=encodeURIComponent(w.key),q=w.value;if(q&&typeof q=="object"){if(Object.isArray(q)){var v=[];for(var r=0,p=q.length,u;r<p;r++){u=q[r];v.push(b(s,u))}return t.concat(v)}}else{t.push(b(s,q))}return t}).join("&")}function k(){return"#<Hash:{"+this.map(function(p){return p.map(Object.inspect).join(": ")}).join(", ")+"}>"}function h(){return new Hash(this)}return{initialize:e,_each:f,set:j,get:c,unset:m,toObject:o,toTemplateReplacements:o,keys:n,values:l,index:g,merge:i,update:d,toQueryString:a,inspect:k,toJSON:o,clone:h}})());Hash.from=$H;Object.extend(Number.prototype,(function(){function d(){return this.toPaddedString(2,16)}function b(){return this+1}function h(j,i){$R(0,this,true).each(j,i);return this}function g(k,j){var i=this.toString(j||10);return"0".times(k-i.length)+i}function a(){return Math.abs(this)}function c(){return Math.round(this)}function e(){return Math.ceil(this)}function f(){return Math.floor(this)}return{toColorPart:d,succ:b,times:h,toPaddedString:g,abs:a,round:c,ceil:e,floor:f}})());function $R(c,a,b){return new ObjectRange(c,a,b)}var ObjectRange=Class.create(Enumerable,(function(){function b(f,d,e){this.start=f;this.end=d;this.exclusive=e}function c(f,e){var g=this.start,d;for(d=0;this.include(g);d++){f.call(e,g,d);g=g.succ()}}function a(d){if(d<this.start){return false}if(this.exclusive){return d<this.end}return d<=this.end}return{initialize:b,_each:c,include:a}})());var Abstract={};var Try={these:function(){var c;for(var b=0,d=arguments.length;b<d;b++){var a=arguments[b];try{c=a();break}catch(f){}}return c}};var Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||false},activeRequestCount:0};Ajax.Responders={responders:[],_each:function(b,a){this.responders._each(b,a)},register:function(a){if(!this.include(a)){this.responders.push(a)}},unregister:function(a){this.responders=this.responders.without(a)},dispatch:function(d,b,c,a){this.each(function(f){if(Object.isFunction(f[d])){try{f[d].apply(f,[b,c,a])}catch(g){}}})}};Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});Ajax.Base=Class.create({initialize:function(a){this.options={method:"post",asynchronous:true,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:true,evalJS:true};Object.extend(this.options,a||{});this.options.method=this.options.method.toLowerCase();if(Object.isHash(this.options.parameters)){this.options.parameters=this.options.parameters.toObject()}}});Ajax.Request=Class.create(Ajax.Base,{_complete:false,initialize:function($super,b,a){$super(a);this.transport=Ajax.getTransport();this.request(b)},request:function(b){this.url=b;this.method=this.options.method;var d=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters);if(!["get","post"].include(this.method)){d+=(d?"&":"")+"_method="+this.method;this.method="post"}if(d&&this.method==="get"){this.url+=(this.url.include("?")?"&":"?")+d}this.parameters=d.toQueryParams();try{var a=new Ajax.Response(this);if(this.options.onCreate){this.options.onCreate(a)}Ajax.Responders.dispatch("onCreate",this,a);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);if(this.options.asynchronous){this.respondToReadyState.bind(this).defer(1)}this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body=this.method=="post"?(this.options.postBody||d):null;this.transport.send(this.body);if(!this.options.asynchronous&&this.transport.overrideMimeType){this.onStateChange()}}catch(c){this.dispatchException(c)}},onStateChange:function(){var a=this.transport.readyState;if(a>1&&!((a==4)&&this._complete)){this.respondToReadyState(this.transport.readyState)}},setRequestHeaders:function(){var e={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};if(this.method=="post"){e["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+this.options.encoding:"");if(this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005){e.Connection="close"}}if(typeof this.options.requestHeaders=="object"){var c=this.options.requestHeaders;if(Object.isFunction(c.push)){for(var b=0,d=c.length;b<d;b+=2){e[c[b]]=c[b+1]}}else{$H(c).each(function(f){e[f.key]=f.value})}}for(var a in e){if(e[a]!=null){this.transport.setRequestHeader(a,e[a])}}},success:function(){var a=this.getStatus();return !a||(a>=200&&a<300)||a==304},getStatus:function(){try{if(this.transport.status===1223){return 204}return this.transport.status||0}catch(a){return 0}},respondToReadyState:function(a){var c=Ajax.Request.Events[a],b=new Ajax.Response(this);if(c=="Complete"){try{this._complete=true;(this.options["on"+b.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(b,b.headerJSON)}catch(d){this.dispatchException(d)}var f=b.getHeader("Content-type");if(this.options.evalJS=="force"||(this.options.evalJS&&this.isSameOrigin()&&f&&f.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))){this.evalResponse()}}try{(this.options["on"+c]||Prototype.emptyFunction)(b,b.headerJSON);Ajax.Responders.dispatch("on"+c,this,b,b.headerJSON)}catch(d){this.dispatchException(d)}if(c=="Complete"){this.transport.onreadystatechange=Prototype.emptyFunction}},isSameOrigin:function(){var a=this.url.match(/^\s*https?:\/\/[^\/]*/);return !a||(a[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""}))},getHeader:function(a){try{return this.transport.getResponseHeader(a)||null}catch(b){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(e){this.dispatchException(e)}},dispatchException:function(a){(this.options.onException||Prototype.emptyFunction)(this,a);Ajax.Responders.dispatch("onException",this,a)}});Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];Ajax.Response=Class.create({initialize:function(c){this.request=c;var d=this.transport=c.transport,a=this.readyState=d.readyState;if((a>2&&!Prototype.Browser.IE)||a==4){this.status=this.getStatus();this.statusText=this.getStatusText();this.responseText=String.interpret(d.responseText);this.headerJSON=this._getHeaderJSON()}if(a==4){var b=d.responseXML;this.responseXML=Object.isUndefined(b)?null:b;this.responseJSON=this._getResponseJSON()}},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||""}catch(a){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(a){return null}},getResponseHeader:function(a){return this.transport.getResponseHeader(a)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var a=this.getHeader("X-JSON");if(!a){return null}try{a=decodeURIComponent(escape(a))}catch(b){}try{return a.evalJSON(this.request.options.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}},_getResponseJSON:function(){var a=this.request.options;if(!a.evalJSON||(a.evalJSON!="force"&&!(this.getHeader("Content-type")||"").include("application/json"))||this.responseText.blank()){return null}try{return this.responseText.evalJSON(a.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}}});Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,a,c,b){this.container={success:(a.success||a),failure:(a.failure||(a.success?null:a))};b=Object.clone(b);var d=b.onComplete;b.onComplete=(function(e,f){this.updateContent(e.responseText);if(Object.isFunction(d)){d(e,f)}}).bind(this);$super(c,b)},updateContent:function(d){var c=this.container[this.success()?"success":"failure"],a=this.options;if(!a.evalScripts){d=d.stripScripts()}if(c=$(c)){if(a.insertion){if(Object.isString(a.insertion)){var b={};b[a.insertion]=d;c.insert(b)}else{a.insertion(c,d)}}else{c.update(d)}}}});Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,a,c,b){$super(b);this.onComplete=this.options.onComplete;this.frequency=(this.options.frequency||2);this.decay=(this.options.decay||1);this.updater={};this.container=a;this.url=c;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=undefined;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},updateComplete:function(a){if(this.options.decay){this.decay=(a.responseText==this.lastText?this.decay*this.options.decay:1);this.lastText=a.responseText}this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});(function(a8){var aE;var a1=Array.prototype.slice;var av=document.createElement("div");function aZ(bp){if(arguments.length>1){for(var F=0,br=[],bq=arguments.length;F<bq;F++){br.push(aZ(arguments[F]))}return br}if(Object.isString(bp)){bp=document.getElementById(bp)}return aF.extend(bp)}a8.$=aZ;if(!a8.Node){a8.Node={}}if(!a8.Node.ELEMENT_NODE){Object.extend(a8.Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12})}var r={};function aQ(F,i){if(F==="select"){return false}if("type" in i){return false}return true}var d=(function(){try{var i=document.createElement('<input name="x">');return i.tagName.toLowerCase()==="input"&&i.name==="x"}catch(F){return false}})();var aI=a8.Element;function aF(F,i){i=i||{};F=F.toLowerCase();if(d&&i.name){F="<"+F+' name="'+i.name+'">';delete i.name;return aF.writeAttribute(document.createElement(F),i)}if(!r[F]){r[F]=aF.extend(document.createElement(F))}var bp=aQ(F,i)?r[F].cloneNode(false):document.createElement(F);return aF.writeAttribute(bp,i)}a8.Element=aF;Object.extend(a8.Element,aI||{});if(aI){a8.Element.prototype=aI.prototype}aF.Methods={ByTag:{},Simulated:{}};var a3={};var H={id:"id",className:"class"};function ba(F){F=aZ(F);var i="<"+F.tagName.toLowerCase();var bp,br;for(var bq in H){bp=H[bq];br=(F[bq]||"").toString();if(br){i+=" "+bp+"="+br.inspect(true)}}return i+">"}a3.inspect=ba;function v(i){return aZ(i).style.display!=="none"}function ax(F,i){F=aZ(F);if(Object.isUndefined(i)){i=!aF.visible(F)}aF[i?"show":"hide"](F);return F}function aH(i){i=aZ(i);i.style.display="none";return i}function j(i){i=aZ(i);i.style.display="";return i}Object.extend(a3,{visible:v,toggle:ax,hide:aH,show:j});function ad(i){i=aZ(i);i.parentNode.removeChild(i);return i}var aT=(function(){var i=document.createElement("select"),F=true;i.innerHTML='<option value="test">test</option>';if(i.options&&i.options[0]){F=i.options[0].nodeName.toUpperCase()!=="OPTION"}i=null;return F})();var I=(function(){try{var i=document.createElement("table");if(i&&i.tBodies){i.innerHTML="<tbody><tr><td>test</td></tr></tbody>";var bp=typeof i.tBodies[0]=="undefined";i=null;return bp}}catch(F){return true}})();var a2=(function(){try{var i=document.createElement("div");i.innerHTML="<link />";var bp=(i.childNodes.length===0);i=null;return bp}catch(F){return true}})();var x=aT||I||a2;var aq=(function(){var i=document.createElement("script"),bp=false;try{i.appendChild(document.createTextNode(""));bp=!i.firstChild||i.firstChild&&i.firstChild.nodeType!==3}catch(F){bp=true}i=null;return bp})();function O(br,bt){br=aZ(br);var bu=br.getElementsByTagName("*"),bq=bu.length;while(bq--){Z(bu[bq])}if(bt&&bt.toElement){bt=bt.toElement()}if(Object.isElement(bt)){return br.update().insert(bt)}bt=Object.toHTML(bt);var bp=br.tagName.toUpperCase();if(bp==="SCRIPT"&&aq){br.text=bt;return br}if(x){if(bp in L.tags){while(br.firstChild){br.removeChild(br.firstChild)}var F=t(bp,bt.stripScripts());for(var bq=0,bs;bs=F[bq];bq++){br.appendChild(bs)}}else{if(a2&&Object.isString(bt)&&bt.indexOf("<link")>-1){while(br.firstChild){br.removeChild(br.firstChild)}var F=t(bp,bt.stripScripts(),true);for(var bq=0,bs;bs=F[bq];bq++){br.appendChild(bs)}}else{br.innerHTML=bt.stripScripts()}}}else{br.innerHTML=bt.stripScripts()}bt.evalScripts.bind(bt).defer();return br}function ah(F,bp){F=aZ(F);if(bp&&bp.toElement){bp=bp.toElement()}else{if(!Object.isElement(bp)){bp=Object.toHTML(bp);var i=F.ownerDocument.createRange();i.selectNode(F);bp.evalScripts.bind(bp).defer();bp=i.createContextualFragment(bp.stripScripts())}}F.parentNode.replaceChild(bp,F);return F}var L={before:function(i,F){i.parentNode.insertBefore(F,i)},top:function(i,F){i.insertBefore(F,i.firstChild)},bottom:function(i,F){i.appendChild(F)},after:function(i,F){i.parentNode.insertBefore(F,i.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}};var aJ=L.tags;Object.extend(aJ,{THEAD:aJ.TBODY,TFOOT:aJ.TBODY,TH:aJ.TD});function ao(bp,bs){bp=aZ(bp);if(bs&&bs.toElement){bs=bs.toElement()}if(Object.isElement(bs)){bp.parentNode.replaceChild(bs,bp);return bp}bs=Object.toHTML(bs);var br=bp.parentNode,F=br.tagName.toUpperCase();if(F in L.tags){var bt=aF.next(bp);var i=t(F,bs.stripScripts());br.removeChild(bp);var bq;if(bt){bq=function(bu){br.insertBefore(bu,bt)}}else{bq=function(bu){br.appendChild(bu)}}i.each(bq)}else{bp.outerHTML=bs.stripScripts()}bs.evalScripts.bind(bs).defer();return bp}if("outerHTML" in document.documentElement){ah=ao}function a7(i){if(Object.isUndefined(i)||i===null){return false}if(Object.isString(i)||Object.isNumber(i)){return true}if(Object.isElement(i)){return true}if(i.toElement||i.toHTML){return true}return false}function bn(br,bt,F){F=F.toLowerCase();var bv=L[F];if(bt&&bt.toElement){bt=bt.toElement()}if(Object.isElement(bt)){bv(br,bt);return br}bt=Object.toHTML(bt);var bq=((F==="before"||F==="after")?br.parentNode:br).tagName.toUpperCase();var bu=t(bq,bt.stripScripts());if(F==="top"||F==="after"){bu.reverse()}for(var bp=0,bs;bs=bu[bp];bp++){bv(br,bs)}bt.evalScripts.bind(bt).defer()}function Q(F,bp){F=aZ(F);if(a7(bp)){bp={bottom:bp}}for(var i in bp){bn(F,bp[i],i)}return F}function u(F,bp,i){F=aZ(F);if(Object.isElement(bp)){aZ(bp).writeAttribute(i||{})}else{if(Object.isString(bp)){bp=new aF(bp,i)}else{bp=new aF("div",bp)}}if(F.parentNode){F.parentNode.replaceChild(bp,F)}bp.appendChild(F);return bp}function w(F){F=aZ(F);var bp=F.firstChild;while(bp){var i=bp.nextSibling;if(bp.nodeType===Node.TEXT_NODE&&!/\S/.test(bp.nodeValue)){F.removeChild(bp)}bp=i}return F}function a4(i){return aZ(i).innerHTML.blank()}function t(bs,br,bt){var bq=L.tags[bs],bu=av;var F=!!bq;if(!F&&bt){F=true;bq=["","",0]}if(F){bu.innerHTML="&#160;"+bq[0]+br+bq[1];bu.removeChild(bu.firstChild);for(var bp=bq[2];bp--;){bu=bu.firstChild}}else{bu.innerHTML=br}return $A(bu.childNodes)}function E(bq,F){if(!(bq=aZ(bq))){return}var bs=bq.cloneNode(F);if(!aY){bs._prototypeUID=aE;if(F){var br=aF.select(bs,"*"),bp=br.length;while(bp--){br[bp]._prototypeUID=aE}}}return aF.extend(bs)}function Z(F){var i=M(F);if(i){aF.stopObserving(F);if(!aY){F._prototypeUID=aE}delete aF.Storage[i]}}function bl(bp){var F=bp.length;while(F--){Z(bp[F])}}function at(br){var bq=br.length,bp,F;while(bq--){bp=br[bq];F=M(bp);delete aF.Storage[F];delete Event.cache[F]}}if(aY){bl=at}function m(bp){if(!(bp=aZ(bp))){return}Z(bp);var bq=bp.getElementsByTagName("*"),F=bq.length;while(F--){Z(bq[F])}return null}Object.extend(a3,{remove:ad,update:O,replace:ah,insert:Q,wrap:u,cleanWhitespace:w,empty:a4,clone:E,purge:m});function am(i,bp,bq){i=aZ(i);bq=bq||-1;var F=[];while(i=i[bp]){if(i.nodeType===Node.ELEMENT_NODE){F.push(aF.extend(i))}if(F.length===bq){break}}return F}function aL(i){return am(i,"parentNode")}function bm(i){return aF.select(i,"*")}function X(i){i=aZ(i).firstChild;while(i&&i.nodeType!==Node.ELEMENT_NODE){i=i.nextSibling}return aZ(i)}function bi(F){var i=[],bp=aZ(F).firstChild;while(bp){if(bp.nodeType===Node.ELEMENT_NODE){i.push(aF.extend(bp))}bp=bp.nextSibling}return i}function p(i){return am(i,"previousSibling")}function bh(i){return am(i,"nextSibling")}function aV(i){i=aZ(i);var bp=p(i),F=bh(i);return bp.reverse().concat(F)}function aR(F,i){F=aZ(F);if(Object.isString(i)){return Prototype.Selector.match(F,i)}return i.match(F)}function aW(F,bp,bq,i){F=aZ(F),bq=bq||0,i=i||0;if(Object.isNumber(bq)){i=bq,bq=null}while(F=F[bp]){if(F.nodeType!==1){continue}if(bq&&!Prototype.Selector.match(F,bq)){continue}if(--i>=0){continue}return aF.extend(F)}}function aa(F,bp,i){F=aZ(F);if(arguments.length===1){return aZ(F.parentNode)}return aW(F,"parentNode",bp,i)}function y(F,bq,i){if(arguments.length===1){return X(F)}F=aZ(F),bq=bq||0,i=i||0;if(Object.isNumber(bq)){i=bq,bq="*"}var bp=Prototype.Selector.select(bq,F)[i];return aF.extend(bp)}function h(F,bp,i){return aW(F,"previousSibling",bp,i)}function aB(F,bp,i){return aW(F,"nextSibling",bp,i)}function bb(i){i=aZ(i);var F=a1.call(arguments,1).join(", ");return Prototype.Selector.select(F,i)}function aD(bq){bq=aZ(bq);var bs=a1.call(arguments,1).join(", ");var bt=aF.siblings(bq),bp=[];for(var F=0,br;br=bt[F];F++){if(Prototype.Selector.match(br,bs)){bp.push(br)}}return bp}function D(F,i){F=aZ(F),i=aZ(i);while(F=F.parentNode){if(F===i){return true}}return false}function B(F,i){F=aZ(F),i=aZ(i);if(!i.contains){return D(F,i)}return i.contains(F)&&i!==F}function J(F,i){F=aZ(F),i=aZ(i);return(F.compareDocumentPosition(i)&8)===8}var aM;if(av.compareDocumentPosition){aM=J}else{if(av.contains){aM=B}else{aM=D}}Object.extend(a3,{recursivelyCollect:am,ancestors:aL,descendants:bm,firstDescendant:X,immediateDescendants:bi,previousSiblings:p,nextSiblings:bh,siblings:aV,match:aR,up:aa,down:y,previous:h,next:aB,select:bb,adjacent:aD,descendantOf:aM,getElementsBySelector:bb,childElements:bi});var T=1;function aU(i){i=aZ(i);var F=aF.readAttribute(i,"id");if(F){return F}do{F="anonymous_element_"+T++}while(aZ(F));aF.writeAttribute(i,"id",F);return F}function a9(F,i){return aZ(F).getAttribute(i)}function K(F,i){F=aZ(F);var bp=aG.read;if(bp.values[i]){return bp.values[i](F,i)}if(bp.names[i]){i=bp.names[i]}if(i.include(":")){if(!F.attributes||!F.attributes[i]){return null}return F.attributes[i].value}return F.getAttribute(i)}function e(F,i){if(i==="title"){return F.title}return F.getAttribute(i)}var U=(function(){av.setAttribute("onclick",[]);var i=av.getAttribute("onclick");var F=Object.isArray(i);av.removeAttribute("onclick");return F})();if(U){a9=K}else{if(Prototype.Browser.Opera){a9=e}}function a0(bq,bp,bs){bq=aZ(bq);var F={},br=aG.write;if(typeof bp==="object"){F=bp}else{F[bp]=Object.isUndefined(bs)?true:bs}for(var i in F){bp=br.names[i]||i;bs=F[i];if(br.values[i]){bp=br.values[i](bq,bs)||bp}if(bs===false||bs===null){bq.removeAttribute(bp)}else{if(bs===true){bq.setAttribute(bp,bp)}else{bq.setAttribute(bp,bs)}}}return bq}var a=(function(){if(!d){return false}var F=document.createElement('<input type="checkbox">');F.checked=true;var i=F.getAttributeNode("checked");return !i||!i.specified})();function Y(i,bp){bp=aG.has[bp]||bp;var F=aZ(i).getAttributeNode(bp);return !!(F&&F.specified)}function bg(i,F){if(F==="checked"){return i.checked}return Y(i,F)}a8.Element.Methods.Simulated.hasAttribute=a?bg:Y;function k(i){return new aF.ClassNames(i)}var V={};function f(F){if(V[F]){return V[F]}var i=new RegExp("(^|\\s+)"+F+"(\\s+|$)");V[F]=i;return i}function al(i,F){if(!(i=aZ(i))){return}var bp=i.className;if(bp.length===0){return false}if(bp===F){return true}return f(F).test(bp)}function o(i,F){if(!(i=aZ(i))){return}if(!al(i,F)){i.className+=(i.className?" ":"")+F}return i}function au(i,F){if(!(i=aZ(i))){return}i.className=i.className.replace(f(F)," ").strip();return i}function ae(F,bp,i){if(!(F=aZ(F))){return}if(Object.isUndefined(i)){i=!al(F,bp)}var bq=aF[i?"addClassName":"removeClassName"];return bq(F,bp)}var aG={};var aP="className",ar="for";av.setAttribute(aP,"x");if(av.className!=="x"){av.setAttribute("class","x");if(av.className==="x"){aP="class"}}var aK=document.createElement("label");aK.setAttribute(ar,"x");if(aK.htmlFor!=="x"){aK.setAttribute("htmlFor","x");if(aK.htmlFor==="x"){ar="htmlFor"}}aK=null;function ac(i,F){return i.getAttribute(F)}function g(i,F){return i.getAttribute(F,2)}function A(i,bp){var F=i.getAttributeNode(bp);return F?F.value:""}function bj(i,F){return aZ(i).hasAttribute(F)?F:null}av.onclick=Prototype.emptyFunction;var P=av.getAttribute("onclick");var aw;if(String(P).indexOf("{")>-1){aw=function(i,F){var bp=i.getAttribute(F);if(!bp){return null}bp=bp.toString();bp=bp.split("{")[1];bp=bp.split("}")[0];return bp.strip()}}else{if(P===""){aw=function(i,F){var bp=i.getAttribute(F);if(!bp){return null}return bp.strip()}}}aG.read={names:{"class":aP,className:aP,"for":ar,htmlFor:ar},values:{style:function(i){return i.style.cssText.toLowerCase()},title:function(i){return i.title}}};aG.write={names:{className:"class",htmlFor:"for",cellpadding:"cellPadding",cellspacing:"cellSpacing"},values:{checked:function(i,F){i.checked=!!F},style:function(i,F){i.style.cssText=F?F:""}}};aG.has={names:{}};Object.extend(aG.write.names,aG.read.names);var a6=$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder");for(var af=0,ag;ag=a6[af];af++){aG.write.names[ag.toLowerCase()]=ag;aG.has.names[ag.toLowerCase()]=ag}Object.extend(aG.read.values,{href:g,src:g,type:ac,action:A,disabled:bj,checked:bj,readonly:bj,multiple:bj,onload:aw,onunload:aw,onclick:aw,ondblclick:aw,onmousedown:aw,onmouseup:aw,onmouseover:aw,onmousemove:aw,onmouseout:aw,onfocus:aw,onblur:aw,onkeypress:aw,onkeydown:aw,onkeyup:aw,onsubmit:aw,onreset:aw,onselect:aw,onchange:aw});Object.extend(a3,{identify:aU,readAttribute:a9,writeAttribute:a0,classNames:k,hasClassName:al,addClassName:o,removeClassName:au,toggleClassName:ae});function W(i){if(i==="float"||i==="styleFloat"){return"cssFloat"}return i.camelize()}function bo(i){if(i==="float"||i==="cssFloat"){return"styleFloat"}return i.camelize()}function C(bp,bq){bp=aZ(bp);var bt=bp.style,F;if(Object.isString(bq)){bt.cssText+=";"+bq;if(bq.include("opacity")){var i=bq.match(/opacity:\s*(\d?\.?\d*)/)[1];aF.setOpacity(bp,i)}return bp}for(var bs in bq){if(bs==="opacity"){aF.setOpacity(bp,bq[bs])}else{var br=bq[bs];if(bs==="float"||bs==="cssFloat"){bs=Object.isUndefined(bt.styleFloat)?"cssFloat":"styleFloat"}bt[bs]=br}}return bp}function aO(F,bp){F=aZ(F);bp=W(bp);var bq=F.style[bp];if(!bq||bq==="auto"){var i=document.defaultView.getComputedStyle(F,null);bq=i?i[bp]:null}if(bp==="opacity"){return bq?parseFloat(bq):1}return bq==="auto"?null:bq}function s(i,F){switch(F){case"height":case"width":if(!aF.visible(i)){return null}var bp=parseInt(aO(i,F),10);if(bp!==i["offset"+F.capitalize()]){return bp+"px"}return aF.measure(i,F);default:return aO(i,F)}}function aj(i,F){i=aZ(i);F=bo(F);var bp=i.style[F];if(!bp&&i.currentStyle){bp=i.currentStyle[F]}if(F==="opacity"&&!N){return be(i)}if(bp==="auto"){if((F==="width"||F==="height")&&aF.visible(i)){return aF.measure(i,F)+"px"}return null}return bp}function aA(i){return(i||"").replace(/alpha\([^\)]*\)/gi,"")}function ab(i){if(!i.currentStyle||!i.currentStyle.hasLayout){i.style.zoom=1}return i}var N=(function(){av.style.cssText="opacity:.55";return/^0.55/.test(av.style.opacity)})();function z(i,F){i=aZ(i);if(F==1||F===""){F=""}else{if(F<0.00001){F=0}}i.style.opacity=F;return i}function bf(i,bq){if(N){return z(i,bq)}i=ab(aZ(i));var bp=aF.getStyle(i,"filter"),F=i.style;if(bq==1||bq===""){bp=aA(bp);if(bp){F.filter=bp}else{F.removeAttribute("filter")}return i}if(bq<0.00001){bq=0}F.filter=aA(bp)+"alpha(opacity="+(bq*100)+")";return i}function bd(i){return aF.getStyle(i,"opacity")}function be(F){if(N){return bd(F)}var bp=aF.getStyle(F,"filter");if(bp.length===0){return 1}var i=(bp||"").match(/alpha\(opacity=(.*)\)/);if(i&&i[1]){return parseFloat(i[1])/100}return 1}Object.extend(a3,{setStyle:C,getStyle:aO,setOpacity:z,getOpacity:bd});if("styleFloat" in av.style){a3.getStyle=aj;a3.setOpacity=bf;a3.getOpacity=be}var l=0;a8.Element.Storage={UID:1};function M(i){if(i===window){return 0}if(typeof i._prototypeUID==="undefined"){i._prototypeUID=aF.Storage.UID++}return i._prototypeUID}function c(i){if(i===window){return 0}if(i==document){return 1}return i.uniqueID}var aY=("uniqueID" in av);if(aY){M=c}function b(F){if(!(F=aZ(F))){return}var i=M(F);if(!aF.Storage[i]){aF.Storage[i]=$H()}return aF.Storage[i]}function a5(F,i,bp){if(!(F=aZ(F))){return}var bq=b(F);if(arguments.length===2){bq.update(i)}else{bq.set(i,bp)}return F}function aN(bp,F,i){if(!(bp=aZ(bp))){return}var br=b(bp),bq=br.get(F);if(Object.isUndefined(bq)){br.set(F,i);bq=i}return bq}Object.extend(a3,{getStorage:b,store:a5,retrieve:aN});var an={},aX=aF.Methods.ByTag,aC=Prototype.BrowserFeatures;if(!aC.ElementExtensions&&("__proto__" in av)){a8.HTMLElement={};a8.HTMLElement.prototype=av.__proto__;aC.ElementExtensions=true}function bc(i){if(typeof window.Element==="undefined"){return false}if(!d){return false}var bp=window.Element.prototype;if(bp){var br="_"+(Math.random()+"").slice(2),F=document.createElement(i);bp[br]="x";var bq=(F[br]!=="x");delete bp[br];F=null;return bq}return false}var ap=bc("object");function ak(F,i){for(var bq in i){var bp=i[bq];if(Object.isFunction(bp)&&!(bq in F)){F[bq]=bp.methodize()}}}var bk={};function ay(F){var i=M(F);return(i in bk)}function az(bp){if(!bp||ay(bp)){return bp}if(bp.nodeType!==Node.ELEMENT_NODE||bp==window){return bp}var i=Object.clone(an),F=bp.tagName.toUpperCase();if(aX[F]){Object.extend(i,aX[F])}ak(bp,i);bk[M(bp)]=true;return bp}function aS(F){if(!F||ay(F)){return F}var i=F.tagName;if(i&&(/^(?:object|applet|embed)$/i.test(i))){ak(F,aF.Methods);ak(F,aF.Methods.Simulated);ak(F,aF.Methods.ByTag[i.toUpperCase()])}return F}if(aC.SpecificElementExtensions){az=ap?aS:Prototype.K}function S(F,i){F=F.toUpperCase();if(!aX[F]){aX[F]={}}Object.extend(aX[F],i)}function q(F,bp,i){if(Object.isUndefined(i)){i=false}for(var br in bp){var bq=bp[br];if(!Object.isFunction(bq)){continue}if(!i||!(br in F)){F[br]=bq.methodize()}}}function ai(bq){var i;var bp={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};if(bp[bq]){i="HTML"+bp[bq]+"Element"}if(window[i]){return window[i]}i="HTML"+bq+"Element";if(window[i]){return window[i]}i="HTML"+bq.capitalize()+"Element";if(window[i]){return window[i]}var F=document.createElement(bq),br=F.__proto__||F.constructor.prototype;F=null;return br}function R(br){if(arguments.length===0){G()}if(arguments.length===2){var bt=br;br=arguments[1]}if(!bt){Object.extend(aF.Methods,br||{})}else{if(Object.isArray(bt)){for(var bs=0,bq;bq=bt[bs];bs++){S(bq,br)}}else{S(bt,br)}}var bp=window.HTMLElement?HTMLElement.prototype:aF.prototype;if(aC.ElementExtensions){q(bp,aF.Methods);q(bp,aF.Methods.Simulated,true)}if(aC.SpecificElementExtensions){for(var bq in aF.Methods.ByTag){var F=ai(bq);if(Object.isUndefined(F)){continue}q(F.prototype,aX[bq])}}Object.extend(aF,aF.Methods);Object.extend(aF,aF.Methods.Simulated);delete aF.ByTag;delete aF.Simulated;aF.extend.refresh();r={}}Object.extend(a8.Element,{extend:az,addMethods:R});if(az===Prototype.K){a8.Element.extend.refresh=Prototype.emptyFunction}else{a8.Element.extend.refresh=function(){if(Prototype.BrowserFeatures.ElementExtensions){return}Object.extend(an,aF.Methods);Object.extend(an,aF.Methods.Simulated);bk={}}}function G(){Object.extend(Form,Form.Methods);Object.extend(Form.Element,Form.Element.Methods);Object.extend(aF.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods),BUTTON:Object.clone(Form.Element.Methods)})}aF.addMethods(a3);function n(){av=null;r=null}if(window.attachEvent){window.attachEvent("onunload",n)}})(this);(function(){function k(G){var F=G.match(/^(\d+)%?$/i);if(!F){return null}return(Number(F[1])/100)}function y(G,H){G=$(G);var I=G.style[H];if(!I||I==="auto"){var F=document.defaultView.getComputedStyle(G,null);I=F?F[H]:null}if(H==="opacity"){return I?parseFloat(I):1}return I==="auto"?null:I}function B(F,G){var H=F.style[G];if(!H&&F.currentStyle){H=F.currentStyle[G]}return H}function r(H,G){var J=H.offsetWidth;var L=u(H,"borderLeftWidth",G)||0;var F=u(H,"borderRightWidth",G)||0;var I=u(H,"paddingLeft",G)||0;var K=u(H,"paddingRight",G)||0;return J-L-F-I-K}if("currentStyle" in document.documentElement){y=B}function u(P,Q,G){var J=null;if(Object.isElement(P)){J=P;P=y(J,Q)}if(P===null||Object.isUndefined(P)){return null}if((/^(?:-)?\d+(\.\d+)?(px)?$/i).test(P)){return window.parseFloat(P)}var K=P.include("%"),H=(G===document.viewport);if(/\d/.test(P)&&J&&J.runtimeStyle&&!(K&&H)){var F=J.style.left,O=J.runtimeStyle.left;J.runtimeStyle.left=J.currentStyle.left;J.style.left=P||0;P=J.style.pixelLeft;J.style.left=F;J.runtimeStyle.left=O;return P}if(J&&K){G=G||J.parentNode;var I=k(P),L=null;var N=Q.include("left")||Q.include("right")||Q.include("width");var M=Q.include("top")||Q.include("bottom")||Q.include("height");if(G===document.viewport){if(N){L=document.viewport.getWidth()}else{if(M){L=document.viewport.getHeight()}}}else{if(N){L=$(G).measure("width")}else{if(M){L=$(G).measure("height")}}}return(L===null)?0:L*I}return 0}function j(F){if(Object.isString(F)&&F.endsWith("px")){return F}return F+"px"}function m(F){while(F&&F.parentNode){var G=F.getStyle("display");if(G==="none"){return false}F=$(F.parentNode)}return true}var g=Prototype.K;if("currentStyle" in document.documentElement){g=function(F){if(!F.currentStyle.hasLayout){F.style.zoom=1}return F}}function i(F){if(F.include("border")){F=F+"-width"}return F.camelize()}Element.Layout=Class.create(Hash,{initialize:function($super,G,F){$super();this.element=$(G);Element.Layout.PROPERTIES.each(function(H){this._set(H,null)},this);if(F){this._preComputing=true;this._begin();Element.Layout.PROPERTIES.each(this._compute,this);this._end();this._preComputing=false}},_set:function(G,F){return Hash.prototype.set.call(this,G,F)},set:function(G,F){throw"Properties of Element.Layout are read-only."},get:function($super,G){var F=$super(G);return F===null?this._compute(G):F},_begin:function(){if(this._isPrepared()){return}var J=this.element;if(m(J)){this._setPrepared(true);return}var L={position:J.style.position||"",width:J.style.width||"",visibility:J.style.visibility||"",display:J.style.display||""};J.store("prototype_original_styles",L);var M=y(J,"position"),F=J.offsetWidth;if(F===0||F===null){J.style.display="block";F=J.offsetWidth}var G=(M==="fixed")?document.viewport:J.parentNode;var N={visibility:"hidden",display:"block"};if(M!=="fixed"){N.position="absolute"}J.setStyle(N);var H=J.offsetWidth,I;if(F&&(H===F)){I=r(J,G)}else{if(M==="absolute"||M==="fixed"){I=r(J,G)}else{var O=J.parentNode,K=$(O).getLayout();I=K.get("width")-this.get("margin-left")-this.get("border-left")-this.get("padding-left")-this.get("padding-right")-this.get("border-right")-this.get("margin-right")}}J.setStyle({width:I+"px"});this._setPrepared(true)},_end:function(){var G=this.element;var F=G.retrieve("prototype_original_styles");G.store("prototype_original_styles",null);G.setStyle(F);this._setPrepared(false)},_compute:function(G){var F=Element.Layout.COMPUTATIONS;if(!(G in F)){throw"Property not found."}return this._set(G,F[G].call(this,this.element))},_isPrepared:function(){return this.element.retrieve("prototype_element_layout_prepared",false)},_setPrepared:function(F){return this.element.store("prototype_element_layout_prepared",F)},toObject:function(){var F=$A(arguments);var G=(F.length===0)?Element.Layout.PROPERTIES:F.join(" ").split(" ");var H={};G.each(function(I){if(!Element.Layout.PROPERTIES.include(I)){return}var J=this.get(I);if(J!=null){H[I]=J}},this);return H},toHash:function(){var F=this.toObject.apply(this,arguments);return new Hash(F)},toCSS:function(){var F=$A(arguments);var H=(F.length===0)?Element.Layout.PROPERTIES:F.join(" ").split(" ");var G={};H.each(function(I){if(!Element.Layout.PROPERTIES.include(I)){return}if(Element.Layout.COMPOSITE_PROPERTIES.include(I)){return}var J=this.get(I);if(J!=null){G[i(I)]=J+"px"}},this);return G},inspect:function(){return"#<Element.Layout>"}});Object.extend(Element.Layout,{PROPERTIES:$w("height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"),COMPOSITE_PROPERTIES:$w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),COMPUTATIONS:{height:function(H){if(!this._preComputing){this._begin()}var F=this.get("border-box-height");if(F<=0){if(!this._preComputing){this._end()}return 0}var I=this.get("border-top"),G=this.get("border-bottom");var K=this.get("padding-top"),J=this.get("padding-bottom");if(!this._preComputing){this._end()}return F-I-G-K-J},width:function(H){if(!this._preComputing){this._begin()}var G=this.get("border-box-width");if(G<=0){if(!this._preComputing){this._end()}return 0}var K=this.get("border-left"),F=this.get("border-right");var I=this.get("padding-left"),J=this.get("padding-right");if(!this._preComputing){this._end()}return G-K-F-I-J},"padding-box-height":function(G){var F=this.get("height"),I=this.get("padding-top"),H=this.get("padding-bottom");return F+I+H},"padding-box-width":function(F){var G=this.get("width"),H=this.get("padding-left"),I=this.get("padding-right");return G+H+I},"border-box-height":function(G){if(!this._preComputing){this._begin()}var F=G.offsetHeight;if(!this._preComputing){this._end()}return F},"border-box-width":function(F){if(!this._preComputing){this._begin()}var G=F.offsetWidth;if(!this._preComputing){this._end()}return G},"margin-box-height":function(G){var F=this.get("border-box-height"),H=this.get("margin-top"),I=this.get("margin-bottom");if(F<=0){return 0}return F+H+I},"margin-box-width":function(H){var G=this.get("border-box-width"),I=this.get("margin-left"),F=this.get("margin-right");if(G<=0){return 0}return G+I+F},top:function(F){var G=F.positionedOffset();return G.top},bottom:function(F){var I=F.positionedOffset(),G=F.getOffsetParent(),H=G.measure("height");var J=this.get("border-box-height");return H-J-I.top},left:function(F){var G=F.positionedOffset();return G.left},right:function(H){var J=H.positionedOffset(),I=H.getOffsetParent(),F=I.measure("width");var G=this.get("border-box-width");return F-G-J.left},"padding-top":function(F){return u(F,"paddingTop")},"padding-bottom":function(F){return u(F,"paddingBottom")},"padding-left":function(F){return u(F,"paddingLeft")},"padding-right":function(F){return u(F,"paddingRight")},"border-top":function(F){return u(F,"borderTopWidth")},"border-bottom":function(F){return u(F,"borderBottomWidth")},"border-left":function(F){return u(F,"borderLeftWidth")},"border-right":function(F){return u(F,"borderRightWidth")},"margin-top":function(F){return u(F,"marginTop")},"margin-bottom":function(F){return u(F,"marginBottom")},"margin-left":function(F){return u(F,"marginLeft")},"margin-right":function(F){return u(F,"marginRight")}}});if("getBoundingClientRect" in document.documentElement){Object.extend(Element.Layout.COMPUTATIONS,{right:function(G){var H=g(G.getOffsetParent());var I=G.getBoundingClientRect(),F=H.getBoundingClientRect();return(F.right-I.right).round()},bottom:function(G){var H=g(G.getOffsetParent());var I=G.getBoundingClientRect(),F=H.getBoundingClientRect();return(F.bottom-I.bottom).round()}})}Element.Offset=Class.create({initialize:function(G,F){this.left=G.round();this.top=F.round();this[0]=this.left;this[1]=this.top},relativeTo:function(F){return new Element.Offset(this.left-F.left,this.top-F.top)},inspect:function(){return"#<Element.Offset left: #{left} top: #{top}>".interpolate(this)},toString:function(){return"[#{left}, #{top}]".interpolate(this)},toArray:function(){return[this.left,this.top]}});function z(G,F){return new Element.Layout(G,F)}function d(F,G){return $(F).getLayout().get(G)}function q(F){return Element.getDimensions(F).height}function c(F){return Element.getDimensions(F).width}function s(G){G=$(G);var K=Element.getStyle(G,"display");if(K&&K!=="none"){return{width:G.offsetWidth,height:G.offsetHeight}}var H=G.style;var F={visibility:H.visibility,position:H.position,display:H.display};var J={visibility:"hidden",display:"block"};if(F.position!=="fixed"){J.position="absolute"}Element.setStyle(G,J);var I={width:G.offsetWidth,height:G.offsetHeight};Element.setStyle(G,F);return I}function p(F){F=$(F);if(h(F)||f(F)||o(F)||n(F)){return $(document.body)}var G=(Element.getStyle(F,"display")==="inline");if(!G&&F.offsetParent){return $(F.offsetParent)}while((F=F.parentNode)&&F!==document.body){if(Element.getStyle(F,"position")!=="static"){return n(F)?$(document.body):$(F)}}return $(document.body)}function C(G){G=$(G);var F=0,H=0;if(G.parentNode){do{F+=G.offsetTop||0;H+=G.offsetLeft||0;G=G.offsetParent}while(G)}return new Element.Offset(H,F)}function w(G){G=$(G);var H=G.getLayout();var F=0,J=0;do{F+=G.offsetTop||0;J+=G.offsetLeft||0;G=G.offsetParent;if(G){if(o(G)){break}var I=Element.getStyle(G,"position");if(I!=="static"){break}}}while(G);J-=H.get("margin-top");F-=H.get("margin-left");return new Element.Offset(J,F)}function b(G){var F=0,H=0;do{if(G===document.body){var I=document.documentElement||document.body.parentNode||document.body;F+=!Object.isUndefined(window.pageYOffset)?window.pageYOffset:I.scrollTop||0;H+=!Object.isUndefined(window.pageXOffset)?window.pageXOffset:I.scrollLeft||0;break}else{F+=G.scrollTop||0;H+=G.scrollLeft||0;G=G.parentNode}}while(G);return new Element.Offset(H,F)}function A(J){var F=0,I=0,H=document.body;J=$(J);var G=J;do{F+=G.offsetTop||0;I+=G.offsetLeft||0;if(G.offsetParent==H&&Element.getStyle(G,"position")=="absolute"){break}}while(G=G.offsetParent);G=J;do{if(G!=H){F-=G.scrollTop||0;I-=G.scrollLeft||0}}while(G=G.parentNode);return new Element.Offset(I,F)}function x(F){F=$(F);if(Element.getStyle(F,"position")==="absolute"){return F}var J=p(F);var I=F.viewportOffset(),G=J.viewportOffset();var K=I.relativeTo(G);var H=F.getLayout();F.store("prototype_absolutize_original_styles",{position:F.getStyle("position"),left:F.getStyle("left"),top:F.getStyle("top"),width:F.getStyle("width"),height:F.getStyle("height")});F.setStyle({position:"absolute",top:K.top+"px",left:K.left+"px",width:H.get("width")+"px",height:H.get("height")+"px"});return F}function l(G){G=$(G);if(Element.getStyle(G,"position")==="relative"){return G}var F=G.retrieve("prototype_absolutize_original_styles");if(F){G.setStyle(F)}return G}function a(F){F=$(F);var G=Element.cumulativeOffset(F);window.scrollTo(G.left,G.top);return F}function v(G){G=$(G);var F=Element.getStyle(G,"position"),H={};if(F==="static"||!F){H.position="relative";if(Prototype.Browser.Opera){H.top=0;H.left=0}Element.setStyle(G,H);Element.store(G,"prototype_made_positioned",true)}return G}function t(F){F=$(F);var H=Element.getStorage(F),G=H.get("prototype_made_positioned");if(G){H.unset("prototype_made_positioned");Element.setStyle(F,{position:"",top:"",bottom:"",left:"",right:""})}return F}function e(G){G=$(G);var I=Element.getStorage(G),F=I.get("prototype_made_clipping");if(Object.isUndefined(F)){var H=Element.getStyle(G,"overflow");I.set("prototype_made_clipping",H);if(H!=="hidden"){G.style.overflow="hidden"}}return G}function D(F){F=$(F);var H=Element.getStorage(F),G=H.get("prototype_made_clipping");if(!Object.isUndefined(G)){H.unset("prototype_made_clipping");F.style.overflow=G||""}return F}function E(G,K,F){F=Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},F||{});K=$(K);G=$(G);var L,M,J,I={};if(F.setLeft||F.setTop){L=Element.viewportOffset(K);M=[0,0];if(Element.getStyle(G,"position")==="absolute"){var H=Element.getOffsetParent(G);if(H!==document.body){M=Element.viewportOffset(H)}}}if(F.setWidth||F.setHeight){J=Element.getLayout(K)}if(F.setLeft){I.left=(L[0]-M[0]+F.offsetLeft)+"px"}if(F.setTop){I.top=(L[1]-M[1]+F.offsetTop)+"px"}if(F.setWidth){I.width=J.get("border-box-width")+"px"}if(F.setHeight){I.height=J.get("border-box-height")+"px"}return Element.setStyle(G,I)}if(Prototype.Browser.IE){p=p.wrap(function(H,G){G=$(G);if(h(G)||f(G)||o(G)||n(G)){return $(document.body)}var F=G.getStyle("position");if(F!=="static"){return H(G)}G.setStyle({position:"relative"});var I=H(G);G.setStyle({position:F});return I});w=w.wrap(function(I,G){G=$(G);if(!G.parentNode){return new Element.Offset(0,0)}var F=G.getStyle("position");if(F!=="static"){return I(G)}var H=G.getOffsetParent();if(H&&H.getStyle("position")==="fixed"){g(H)}G.setStyle({position:"relative"});var J=I(G);G.setStyle({position:F});return J})}else{if(Prototype.Browser.Webkit){C=function(G){G=$(G);var F=0,H=0;do{F+=G.offsetTop||0;H+=G.offsetLeft||0;if(G.offsetParent==document.body){if(Element.getStyle(G,"position")=="absolute"){break}}G=G.offsetParent}while(G);return new Element.Offset(H,F)}}}Element.addMethods({getLayout:z,measure:d,getWidth:c,getHeight:q,getDimensions:s,getOffsetParent:p,cumulativeOffset:C,positionedOffset:w,cumulativeScrollOffset:b,viewportOffset:A,absolutize:x,relativize:l,scrollTo:a,makePositioned:v,undoPositioned:t,makeClipping:e,undoClipping:D,clonePosition:E});function o(F){return F.nodeName.toUpperCase()==="BODY"}function n(F){return F.nodeName.toUpperCase()==="HTML"}function h(F){return F.nodeType===Node.DOCUMENT_NODE}function f(F){return F!==document.body&&!Element.descendantOf(F,document.body)}if("getBoundingClientRect" in document.documentElement){Element.addMethods({viewportOffset:function(F){F=$(F);if(f(F)){return new Element.Offset(0,0)}var G=F.getBoundingClientRect(),H=document.documentElement;return new Element.Offset(G.left-H.clientLeft,G.top-H.clientTop)}})}})();(function(){var c=Prototype.Browser.Opera&&(window.parseFloat(window.opera.version())<9.5);var f=null;function b(){if(f){return f}f=c?document.body:document.documentElement;return f}function d(){return{width:this.getWidth(),height:this.getHeight()}}function a(){return b().clientWidth}function g(){return b().clientHeight}function e(){var h=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft;var i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;return new Element.Offset(h,i)}document.viewport={getDimensions:d,getWidth:a,getHeight:g,getScrollOffsets:e}})();window.$$=function(){var a=$A(arguments).join(", ");return Prototype.Selector.select(a,document)};Prototype.Selector=(function(){function a(){throw new Error('Method "Prototype.Selector.select" must be defined.')}function c(){throw new Error('Method "Prototype.Selector.match" must be defined.')}function d(l,m,h){h=h||0;var g=Prototype.Selector.match,k=l.length,f=0,j;for(j=0;j<k;j++){if(g(l[j],m)&&h==f++){return Element.extend(l[j])}}}function e(h){for(var f=0,g=h.length;f<g;f++){Element.extend(h[f])}return h}var b=Prototype.K;return{select:a,match:c,find:d,extendElements:(Element.extend===b)?b:e,extendElement:Element.extend}})();Prototype._original_property=window.Sizzle;
/*!
 * Sizzle CSS Selector Engine v@VERSION
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: @DATE
 */
(function(av){var D,ay,t,M,P,ab,ax,aC,N,ac,ae,H,u,an,ai,aw,k,K,ap="sizzle"+-(new Date()),O=av.document,az=0,aj=0,d=F(),ao=F(),L=F(),J=function(i,e){if(i===e){ac=true}return 0},au=typeof undefined,V=1<<31,T=({}).hasOwnProperty,ar=[],at=ar.pop,R=ar.push,b=ar.push,s=ar.slice,j=ar.indexOf||function(aE){var aD=0,e=this.length;for(;aD<e;aD++){if(this[aD]===aE){return aD}}return -1},c="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",v="[\\x20\\t\\r\\n\\f]",a="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Q=a.replace("w","w#"),al="\\["+v+"*("+a+")"+v+"*(?:([*^$|!~]?=)"+v+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+Q+")|)|)"+v+"*\\]",q=":("+a+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+al.replace(3,8)+")*)|.*)\\)|)",x=new RegExp("^"+v+"+|((?:^|[^\\\\])(?:\\\\.)*)"+v+"+$","g"),A=new RegExp("^"+v+"*,"+v+"*"),G=new RegExp("^"+v+"*([>+~]|"+v+")"+v+"*"),z=new RegExp("="+v+"*([^\\]'\"]*?)"+v+"*\\]","g"),X=new RegExp(q),Z=new RegExp("^"+Q+"$"),ah={ID:new RegExp("^#("+a+")"),CLASS:new RegExp("^\\.("+a+")"),TAG:new RegExp("^("+a.replace("w","w*")+")"),ATTR:new RegExp("^"+al),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+v+"*(even|odd|(([+-]|)(\\d*)n|)"+v+"*(?:([+-]|)"+v+"*(\\d+)|))"+v+"*\\)|)","i"),bool:new RegExp("^(?:"+c+")$","i"),needsContext:new RegExp("^"+v+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+v+"*((?:-\\d)?\\d*)"+v+"*\\)|)(?=[^-]|$)","i")},h=/^(?:input|select|textarea|button)$/i,r=/^h\d$/i,U=/^[^{]+\{\s*\[native \w/,W=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ag=/[+~]/,S=/'|\\/g,y=new RegExp("\\\\([\\da-f]{1,6}"+v+"?|("+v+")|.)","ig"),ak=function(e,aE,i){var aD="0x"+aE-65536;return aD!==aD||i?aE:aD<0?String.fromCharCode(aD+65536):String.fromCharCode(aD>>10|55296,aD&1023|56320)};try{b.apply((ar=s.call(O.childNodes)),O.childNodes);ar[O.childNodes.length].nodeType}catch(I){b={apply:ar.length?function(i,e){R.apply(i,s.call(e))}:function(aF,aE){var e=aF.length,aD=0;while((aF[e++]=aE[aD++])){}aF.length=e-1}}}function B(aK,aD,aO,aQ){var aP,aH,aI,aM,aN,aG,aF,e,aE,aL;if((aD?aD.ownerDocument||aD:O)!==H){ae(aD)}aD=aD||H;aO=aO||[];if(!aK||typeof aK!=="string"){return aO}if((aM=aD.nodeType)!==1&&aM!==9){return[]}if(an&&!aQ){if((aP=W.exec(aK))){if((aI=aP[1])){if(aM===9){aH=aD.getElementById(aI);if(aH&&aH.parentNode){if(aH.id===aI){aO.push(aH);return aO}}else{return aO}}else{if(aD.ownerDocument&&(aH=aD.ownerDocument.getElementById(aI))&&K(aD,aH)&&aH.id===aI){aO.push(aH);return aO}}}else{if(aP[2]){b.apply(aO,aD.getElementsByTagName(aK));return aO}else{if((aI=aP[3])&&ay.getElementsByClassName&&aD.getElementsByClassName){b.apply(aO,aD.getElementsByClassName(aI));return aO}}}}if(ay.qsa&&(!ai||!ai.test(aK))){e=aF=ap;aE=aD;aL=aM===9&&aK;if(aM===1&&aD.nodeName.toLowerCase()!=="object"){aG=n(aK);if((aF=aD.getAttribute("id"))){e=aF.replace(S,"\\$&")}else{aD.setAttribute("id",e)}e="[id='"+e+"'] ";aN=aG.length;while(aN--){aG[aN]=e+o(aG[aN])}aE=ag.test(aK)&&Y(aD.parentNode)||aD;aL=aG.join(",")}if(aL){try{b.apply(aO,aE.querySelectorAll(aL));return aO}catch(aJ){}finally{if(!aF){aD.removeAttribute("id")}}}}}return ax(aK.replace(x,"$1"),aD,aO,aQ)}function F(){var i=[];function e(aD,aE){if(i.push(aD+" ")>t.cacheLength){delete e[i.shift()]}return(e[aD+" "]=aE)}return e}function p(e){e[ap]=true;return e}function l(i){var aE=H.createElement("div");try{return !!i(aE)}catch(aD){return false}finally{if(aE.parentNode){aE.parentNode.removeChild(aE)}aE=null}}function aA(aD,aF){var e=aD.split("|"),aE=aD.length;while(aE--){t.attrHandle[e[aE]]=aF}}function f(i,e){var aE=e&&i,aD=aE&&i.nodeType===1&&e.nodeType===1&&(~e.sourceIndex||V)-(~i.sourceIndex||V);if(aD){return aD}if(aE){while((aE=aE.nextSibling)){if(aE===e){return -1}}}return i?1:-1}function C(e){return function(aD){var i=aD.nodeName.toLowerCase();return i==="input"&&aD.type===e}}function g(e){return function(aD){var i=aD.nodeName.toLowerCase();return(i==="input"||i==="button")&&aD.type===e}}function am(e){return p(function(i){i=+i;return p(function(aD,aH){var aF,aE=e([],aD.length,i),aG=aE.length;while(aG--){if(aD[(aF=aE[aG])]){aD[aF]=!(aH[aF]=aD[aF])}}})})}function Y(e){return e&&typeof e.getElementsByTagName!==au&&e}ay=B.support={};P=B.isXML=function(e){var i=e&&(e.ownerDocument||e).documentElement;return i?i.nodeName!=="HTML":false};ae=B.setDocument=function(aD){var e,aE=aD?aD.ownerDocument||aD:O,i=aE.defaultView;if(aE===H||aE.nodeType!==9||!aE.documentElement){return H}H=aE;u=aE.documentElement;an=!P(aE);if(i&&i!==i.top){if(i.addEventListener){i.addEventListener("unload",function(){ae()},false)}else{if(i.attachEvent){i.attachEvent("onunload",function(){ae()})}}}ay.attributes=l(function(aF){aF.className="i";return !aF.getAttribute("className")});ay.getElementsByTagName=l(function(aF){aF.appendChild(aE.createComment(""));return !aF.getElementsByTagName("*").length});ay.getElementsByClassName=U.test(aE.getElementsByClassName)&&l(function(aF){aF.innerHTML="<div class='a'></div><div class='a i'></div>";aF.firstChild.className="i";return aF.getElementsByClassName("i").length===2});ay.getById=l(function(aF){u.appendChild(aF).id=ap;return !aE.getElementsByName||!aE.getElementsByName(ap).length});if(ay.getById){t.find.ID=function(aH,aG){if(typeof aG.getElementById!==au&&an){var aF=aG.getElementById(aH);return aF&&aF.parentNode?[aF]:[]}};t.filter.ID=function(aG){var aF=aG.replace(y,ak);return function(aH){return aH.getAttribute("id")===aF}}}else{delete t.find.ID;t.filter.ID=function(aG){var aF=aG.replace(y,ak);return function(aI){var aH=typeof aI.getAttributeNode!==au&&aI.getAttributeNode("id");return aH&&aH.value===aF}}}t.find.TAG=ay.getElementsByTagName?function(aF,aG){if(typeof aG.getElementsByTagName!==au){return aG.getElementsByTagName(aF)}}:function(aF,aJ){var aK,aI=[],aH=0,aG=aJ.getElementsByTagName(aF);if(aF==="*"){while((aK=aG[aH++])){if(aK.nodeType===1){aI.push(aK)}}return aI}return aG};t.find.CLASS=ay.getElementsByClassName&&function(aG,aF){if(typeof aF.getElementsByClassName!==au&&an){return aF.getElementsByClassName(aG)}};aw=[];ai=[];if((ay.qsa=U.test(aE.querySelectorAll))){l(function(aF){aF.innerHTML="<select t=''><option selected=''></option></select>";if(aF.querySelectorAll("[t^='']").length){ai.push("[*^$]="+v+"*(?:''|\"\")")}if(!aF.querySelectorAll("[selected]").length){ai.push("\\["+v+"*(?:value|"+c+")")}if(!aF.querySelectorAll(":checked").length){ai.push(":checked")}});l(function(aG){var aF=aE.createElement("input");aF.setAttribute("type","hidden");aG.appendChild(aF).setAttribute("name","D");if(aG.querySelectorAll("[name=d]").length){ai.push("name"+v+"*[*^$|!~]?=")}if(!aG.querySelectorAll(":enabled").length){ai.push(":enabled",":disabled")}aG.querySelectorAll("*,:x");ai.push(",.*:")})}if((ay.matchesSelector=U.test((k=u.webkitMatchesSelector||u.mozMatchesSelector||u.oMatchesSelector||u.msMatchesSelector)))){l(function(aF){ay.disconnectedMatch=k.call(aF,"div");k.call(aF,"[s!='']:x");aw.push("!=",q)})}ai=ai.length&&new RegExp(ai.join("|"));aw=aw.length&&new RegExp(aw.join("|"));e=U.test(u.compareDocumentPosition);K=e||U.test(u.contains)?function(aG,aF){var aI=aG.nodeType===9?aG.documentElement:aG,aH=aF&&aF.parentNode;return aG===aH||!!(aH&&aH.nodeType===1&&(aI.contains?aI.contains(aH):aG.compareDocumentPosition&&aG.compareDocumentPosition(aH)&16))}:function(aG,aF){if(aF){while((aF=aF.parentNode)){if(aF===aG){return true}}}return false};J=e?function(aG,aF){if(aG===aF){ac=true;return 0}var aH=!aG.compareDocumentPosition-!aF.compareDocumentPosition;if(aH){return aH}aH=(aG.ownerDocument||aG)===(aF.ownerDocument||aF)?aG.compareDocumentPosition(aF):1;if(aH&1||(!ay.sortDetached&&aF.compareDocumentPosition(aG)===aH)){if(aG===aE||aG.ownerDocument===O&&K(O,aG)){return -1}if(aF===aE||aF.ownerDocument===O&&K(O,aF)){return 1}return N?(j.call(N,aG)-j.call(N,aF)):0}return aH&4?-1:1}:function(aG,aF){if(aG===aF){ac=true;return 0}var aM,aJ=0,aL=aG.parentNode,aI=aF.parentNode,aH=[aG],aK=[aF];if(!aL||!aI){return aG===aE?-1:aF===aE?1:aL?-1:aI?1:N?(j.call(N,aG)-j.call(N,aF)):0}else{if(aL===aI){return f(aG,aF)}}aM=aG;while((aM=aM.parentNode)){aH.unshift(aM)}aM=aF;while((aM=aM.parentNode)){aK.unshift(aM)}while(aH[aJ]===aK[aJ]){aJ++}return aJ?f(aH[aJ],aK[aJ]):aH[aJ]===O?-1:aK[aJ]===O?1:0};return aE};B.matches=function(i,e){return B(i,null,null,e)};B.matchesSelector=function(aD,aF){if((aD.ownerDocument||aD)!==H){ae(aD)}aF=aF.replace(z,"='$1']");if(ay.matchesSelector&&an&&(!aw||!aw.test(aF))&&(!ai||!ai.test(aF))){try{var i=k.call(aD,aF);if(i||ay.disconnectedMatch||aD.document&&aD.document.nodeType!==11){return i}}catch(aE){}}return B(aF,H,null,[aD]).length>0};B.contains=function(e,i){if((e.ownerDocument||e)!==H){ae(e)}return K(e,i)};B.attr=function(aD,e){if((aD.ownerDocument||aD)!==H){ae(aD)}var i=t.attrHandle[e.toLowerCase()],aE=i&&T.call(t.attrHandle,e.toLowerCase())?i(aD,e,!an):undefined;return aE!==undefined?aE:ay.attributes||!an?aD.getAttribute(e):(aE=aD.getAttributeNode(e))&&aE.specified?aE.value:null};B.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};B.uniqueSort=function(aE){var aF,aG=[],e=0,aD=0;ac=!ay.detectDuplicates;N=!ay.sortStable&&aE.slice(0);aE.sort(J);if(ac){while((aF=aE[aD++])){if(aF===aE[aD]){e=aG.push(aD)}}while(e--){aE.splice(aG[e],1)}}N=null;return aE};M=B.getText=function(aG){var aF,aD="",aE=0,e=aG.nodeType;if(!e){while((aF=aG[aE++])){aD+=M(aF)}}else{if(e===1||e===9||e===11){if(typeof aG.textContent==="string"){return aG.textContent}else{for(aG=aG.firstChild;aG;aG=aG.nextSibling){aD+=M(aG)}}}else{if(e===3||e===4){return aG.nodeValue}}}return aD};t=B.selectors={cacheLength:50,createPseudo:p,match:ah,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(y,ak);e[3]=(e[4]||e[5]||"").replace(y,ak);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){B.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+((e[7]+e[8])||e[3]==="odd")}else{if(e[3]){B.error(e[0])}}return e},PSEUDO:function(i){var e,aD=!i[5]&&i[2];if(ah.CHILD.test(i[0])){return null}if(i[3]&&i[4]!==undefined){i[2]=i[4]}else{if(aD&&X.test(aD)&&(e=n(aD,true))&&(e=aD.indexOf(")",aD.length-e)-aD.length)){i[0]=i[0].slice(0,e);i[2]=aD.slice(0,e)}}return i.slice(0,3)}},filter:{TAG:function(i){var e=i.replace(y,ak).toLowerCase();return i==="*"?function(){return true}:function(aD){return aD.nodeName&&aD.nodeName.toLowerCase()===e}},CLASS:function(e){var i=d[e+" "];return i||(i=new RegExp("(^|"+v+")"+e+"("+v+"|$)"))&&d(e,function(aD){return i.test(typeof aD.className==="string"&&aD.className||typeof aD.getAttribute!==au&&aD.getAttribute("class")||"")})},ATTR:function(aD,i,e){return function(aF){var aE=B.attr(aF,aD);if(aE==null){return i==="!="}if(!i){return true}aE+="";return i==="="?aE===e:i==="!="?aE!==e:i==="^="?e&&aE.indexOf(e)===0:i==="*="?e&&aE.indexOf(e)>-1:i==="$="?e&&aE.slice(-e.length)===e:i==="~="?(" "+aE+" ").indexOf(e)>-1:i==="|="?aE===e||aE.slice(0,e.length+1)===e+"-":false}},CHILD:function(i,aF,aE,aG,aD){var aI=i.slice(0,3)!=="nth",e=i.slice(-4)!=="last",aH=aF==="of-type";return aG===1&&aD===0?function(aJ){return !!aJ.parentNode}:function(aP,aN,aS){var aJ,aV,aQ,aU,aR,aM,aO=aI!==e?"nextSibling":"previousSibling",aT=aP.parentNode,aL=aH&&aP.nodeName.toLowerCase(),aK=!aS&&!aH;if(aT){if(aI){while(aO){aQ=aP;while((aQ=aQ[aO])){if(aH?aQ.nodeName.toLowerCase()===aL:aQ.nodeType===1){return false}}aM=aO=i==="only"&&!aM&&"nextSibling"}return true}aM=[e?aT.firstChild:aT.lastChild];if(e&&aK){aV=aT[ap]||(aT[ap]={});aJ=aV[i]||[];aR=aJ[0]===az&&aJ[1];aU=aJ[0]===az&&aJ[2];aQ=aR&&aT.childNodes[aR];while((aQ=++aR&&aQ&&aQ[aO]||(aU=aR=0)||aM.pop())){if(aQ.nodeType===1&&++aU&&aQ===aP){aV[i]=[az,aR,aU];break}}}else{if(aK&&(aJ=(aP[ap]||(aP[ap]={}))[i])&&aJ[0]===az){aU=aJ[1]}else{while((aQ=++aR&&aQ&&aQ[aO]||(aU=aR=0)||aM.pop())){if((aH?aQ.nodeName.toLowerCase()===aL:aQ.nodeType===1)&&++aU){if(aK){(aQ[ap]||(aQ[ap]={}))[i]=[az,aU]}if(aQ===aP){break}}}}}aU-=aD;return aU===aG||(aU%aG===0&&aU/aG>=0)}}},PSEUDO:function(aE,aD){var e,i=t.pseudos[aE]||t.setFilters[aE.toLowerCase()]||B.error("unsupported pseudo: "+aE);if(i[ap]){return i(aD)}if(i.length>1){e=[aE,aE,"",aD];return t.setFilters.hasOwnProperty(aE.toLowerCase())?p(function(aH,aJ){var aG,aF=i(aH,aD),aI=aF.length;while(aI--){aG=j.call(aH,aF[aI]);aH[aG]=!(aJ[aG]=aF[aI])}}):function(aF){return i(aF,0,e)}}return i}},pseudos:{not:p(function(e){var i=[],aD=[],aE=ab(e.replace(x,"$1"));return aE[ap]?p(function(aG,aL,aJ,aH){var aK,aF=aE(aG,null,aH,[]),aI=aG.length;while(aI--){if((aK=aF[aI])){aG[aI]=!(aL[aI]=aK)}}}):function(aH,aG,aF){i[0]=aH;aE(i,null,aF,aD);return !aD.pop()}}),has:p(function(e){return function(i){return B(e,i).length>0}}),contains:p(function(e){return function(i){return(i.textContent||i.innerText||M(i)).indexOf(e)>-1}}),lang:p(function(e){if(!Z.test(e||"")){B.error("unsupported lang: "+e)}e=e.replace(y,ak).toLowerCase();return function(aD){var i;do{if((i=an?aD.lang:aD.getAttribute("xml:lang")||aD.getAttribute("lang"))){i=i.toLowerCase();return i===e||i.indexOf(e+"-")===0}}while((aD=aD.parentNode)&&aD.nodeType===1);return false}}),target:function(e){var i=av.location&&av.location.hash;return i&&i.slice(1)===e.id},root:function(e){return e===u},focus:function(e){return e===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var i=e.nodeName.toLowerCase();return(i==="input"&&!!e.checked)||(i==="option"&&!!e.selected)},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return !t.pseudos.empty(e)},header:function(e){return r.test(e.nodeName)},input:function(e){return h.test(e.nodeName)},button:function(i){var e=i.nodeName.toLowerCase();return e==="input"&&i.type==="button"||e==="button"},text:function(i){var e;return i.nodeName.toLowerCase()==="input"&&i.type==="text"&&((e=i.getAttribute("type"))==null||e.toLowerCase()==="text")},first:am(function(){return[0]}),last:am(function(e,i){return[i-1]}),eq:am(function(e,aD,i){return[i<0?i+aD:i]}),even:am(function(e,aE){var aD=0;for(;aD<aE;aD+=2){e.push(aD)}return e}),odd:am(function(e,aE){var aD=1;for(;aD<aE;aD+=2){e.push(aD)}return e}),lt:am(function(e,aF,aE){var aD=aE<0?aE+aF:aE;for(;--aD>=0;){e.push(aD)}return e}),gt:am(function(e,aF,aE){var aD=aE<0?aE+aF:aE;for(;++aD<aF;){e.push(aD)}return e})}};t.pseudos.nth=t.pseudos.eq;for(D in {radio:true,checkbox:true,file:true,password:true,image:true}){t.pseudos[D]=C(D)}for(D in {submit:true,reset:true}){t.pseudos[D]=g(D)}function aa(){}aa.prototype=t.filters=t.pseudos;t.setFilters=new aa();function n(aF,aK){var i,aG,aI,aJ,aH,aD,e,aE=ao[aF+" "];if(aE){return aK?0:aE.slice(0)}aH=aF;aD=[];e=t.preFilter;while(aH){if(!i||(aG=A.exec(aH))){if(aG){aH=aH.slice(aG[0].length)||aH}aD.push((aI=[]))}i=false;if((aG=G.exec(aH))){i=aG.shift();aI.push({value:i,type:aG[0].replace(x," ")});aH=aH.slice(i.length)}for(aJ in t.filter){if((aG=ah[aJ].exec(aH))&&(!e[aJ]||(aG=e[aJ](aG)))){i=aG.shift();aI.push({value:i,type:aJ,matches:aG});aH=aH.slice(i.length)}}if(!i){break}}return aK?aH.length:aH?B.error(aF):ao(aF,aD).slice(0)}function o(aF){var aE=0,aD=aF.length,e="";for(;aE<aD;aE++){e+=aF[aE].value}return e}function w(aF,aD,aE){var e=aD.dir,aG=aE&&e==="parentNode",i=aj++;return aD.first?function(aJ,aI,aH){while((aJ=aJ[e])){if(aJ.nodeType===1||aG){return aF(aJ,aI,aH)}}}:function(aL,aJ,aI){var aM,aK,aH=[az,i];if(aI){while((aL=aL[e])){if(aL.nodeType===1||aG){if(aF(aL,aJ,aI)){return true}}}}else{while((aL=aL[e])){if(aL.nodeType===1||aG){aK=aL[ap]||(aL[ap]={});if((aM=aK[e])&&aM[0]===az&&aM[1]===i){return(aH[2]=aM[2])}else{aK[e]=aH;if((aH[2]=aF(aL,aJ,aI))){return true}}}}}}}function aB(e){return e.length>1?function(aG,aF,aD){var aE=e.length;while(aE--){if(!e[aE](aG,aF,aD)){return false}}return true}:e[0]}function E(aD,aG,aF){var aE=0,e=aG.length;for(;aE<e;aE++){B(aD,aG[aE],aF)}return aF}function af(e,aD,aE,aF,aI){var aG,aL=[],aH=0,aJ=e.length,aK=aD!=null;for(;aH<aJ;aH++){if((aG=e[aH])){if(!aE||aE(aG,aF,aI)){aL.push(aG);if(aK){aD.push(aH)}}}}return aL}function m(aD,i,aF,aE,aG,e){if(aE&&!aE[ap]){aE=m(aE)}if(aG&&!aG[ap]){aG=m(aG,e)}return p(function(aR,aO,aJ,aQ){var aT,aP,aL,aK=[],aS=[],aI=aO.length,aH=aR||E(i||"*",aJ.nodeType?[aJ]:aJ,[]),aM=aD&&(aR||!i)?af(aH,aK,aD,aJ,aQ):aH,aN=aF?aG||(aR?aD:aI||aE)?[]:aO:aM;if(aF){aF(aM,aN,aJ,aQ)}if(aE){aT=af(aN,aS);aE(aT,[],aJ,aQ);aP=aT.length;while(aP--){if((aL=aT[aP])){aN[aS[aP]]=!(aM[aS[aP]]=aL)}}}if(aR){if(aG||aD){if(aG){aT=[];aP=aN.length;while(aP--){if((aL=aN[aP])){aT.push((aM[aP]=aL))}}aG(null,(aN=[]),aT,aQ)}aP=aN.length;while(aP--){if((aL=aN[aP])&&(aT=aG?j.call(aR,aL):aK[aP])>-1){aR[aT]=!(aO[aT]=aL)}}}}else{aN=af(aN===aO?aN.splice(aI,aN.length):aN);if(aG){aG(null,aO,aN,aQ)}else{b.apply(aO,aN)}}})}function aq(aI){var aD,aG,aE,aH=aI.length,aL=t.relative[aI[0].type],aM=aL||t.relative[" "],aF=aL?1:0,aJ=w(function(i){return i===aD},aM,true),aK=w(function(i){return j.call(aD,i)>-1},aM,true),e=[function(aO,aN,i){return(!aL&&(i||aN!==aC))||((aD=aN).nodeType?aJ(aO,aN,i):aK(aO,aN,i))}];for(;aF<aH;aF++){if((aG=t.relative[aI[aF].type])){e=[w(aB(e),aG)]}else{aG=t.filter[aI[aF].type].apply(null,aI[aF].matches);if(aG[ap]){aE=++aF;for(;aE<aH;aE++){if(t.relative[aI[aE].type]){break}}return m(aF>1&&aB(e),aF>1&&o(aI.slice(0,aF-1).concat({value:aI[aF-2].type===" "?"*":""})).replace(x,"$1"),aG,aF<aE&&aq(aI.slice(aF,aE)),aE<aH&&aq((aI=aI.slice(aE))),aE<aH&&o(aI))}e.push(aG)}}return aB(e)}function ad(aE,aD){var e=aD.length>0,aF=aE.length>0,i=function(aP,aJ,aO,aN,aS){var aK,aL,aQ,aU=0,aM="0",aG=aP&&[],aV=[],aT=aC,aI=aP||aF&&t.find.TAG("*",aS),aH=(az+=aT==null?1:Math.random()||0.1),aR=aI.length;if(aS){aC=aJ!==H&&aJ}for(;aM!==aR&&(aK=aI[aM])!=null;aM++){if(aF&&aK){aL=0;while((aQ=aE[aL++])){if(aQ(aK,aJ,aO)){aN.push(aK);break}}if(aS){az=aH}}if(e){if((aK=!aQ&&aK)){aU--}if(aP){aG.push(aK)}}}aU+=aM;if(e&&aM!==aU){aL=0;while((aQ=aD[aL++])){aQ(aG,aV,aJ,aO)}if(aP){if(aU>0){while(aM--){if(!(aG[aM]||aV[aM])){aV[aM]=at.call(aN)}}}aV=af(aV)}b.apply(aN,aV);if(aS&&!aP&&aV.length>0&&(aU+aD.length)>1){B.uniqueSort(aN)}}if(aS){az=aH;aC=aT}return aG};return e?p(i):i}ab=B.compile=function(e,aE){var aF,aD=[],aH=[],aG=L[e+" "];if(!aG){if(!aE){aE=n(e)}aF=aE.length;while(aF--){aG=aq(aE[aF]);if(aG[ap]){aD.push(aG)}else{aH.push(aG)}}aG=L(e,ad(aH,aD));aG.selector=e}return aG};ax=B.select=function(aE,e,aF,aI){var aG,aL,aD,aM,aJ,aK=typeof aE==="function"&&aE,aH=!aI&&n((aE=aK.selector||aE));aF=aF||[];if(aH.length===1){aL=aH[0]=aH[0].slice(0);if(aL.length>2&&(aD=aL[0]).type==="ID"&&ay.getById&&e.nodeType===9&&an&&t.relative[aL[1].type]){e=(t.find.ID(aD.matches[0].replace(y,ak),e)||[])[0];if(!e){return aF}else{if(aK){e=e.parentNode}}aE=aE.slice(aL.shift().value.length)}aG=ah.needsContext.test(aE)?0:aL.length;while(aG--){aD=aL[aG];if(t.relative[(aM=aD.type)]){break}if((aJ=t.find[aM])){if((aI=aJ(aD.matches[0].replace(y,ak),ag.test(aL[0].type)&&Y(e.parentNode)||e))){aL.splice(aG,1);aE=aI.length&&o(aL);if(!aE){b.apply(aF,aI);return aF}break}}}}(aK||ab(aE,aH))(aI,e,!an,aF,ag.test(aE)&&Y(e.parentNode)||e);return aF};ay.sortStable=ap.split("").sort(J).join("")===ap;ay.detectDuplicates=!!ac;ae();ay.sortDetached=l(function(e){return e.compareDocumentPosition(H.createElement("div"))&1});if(!l(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){aA("type|href|height|width",function(i,e,aD){if(!aD){return i.getAttribute(e,e.toLowerCase()==="type"?1:2)}})}if(!ay.attributes||!l(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){aA("value",function(i,e,aD){if(!aD&&i.nodeName.toLowerCase()==="input"){return i.defaultValue}})}if(!l(function(e){return e.getAttribute("disabled")==null})){aA(c,function(i,e,aE){var aD;if(!aE){return i[e]===true?e.toLowerCase():(aD=i.getAttributeNode(e))&&aD.specified?aD.value:null}})}if(typeof define==="function"&&define.amd){define(function(){return B})}else{if(typeof module!=="undefined"&&module.exports){module.exports=B}else{av.Sizzle=B}}})(window);(function(c){var d=Prototype.Selector.extendElements;function a(e,f){return d(c(e,f||document))}function b(f,e){return c.matches(e,[f]).length==1}Prototype.Selector.engine=c;Prototype.Selector.select=a;Prototype.Selector.match=b})(Sizzle);window.Sizzle=Prototype._original_property;delete Prototype._original_property;var Form={reset:function(a){a=$(a);a.reset();return a},serializeElements:function(h,d){if(typeof d!="object"){d={hash:!!d}}else{if(Object.isUndefined(d.hash)){d.hash=true}}var e,g,a=false,f=d.submit,b,c;if(d.hash){c={};b=function(i,j,k){if(j in i){if(!Object.isArray(i[j])){i[j]=[i[j]]}i[j]=i[j].concat(k)}else{i[j]=k}return i}}else{c="";b=function(i,k,j){if(!Object.isArray(j)){j=[j]}if(!j.length){return i}var l=encodeURIComponent(k).gsub(/%20/,"+");return i+(i?"&":"")+j.map(function(m){m=m.gsub(/(\r)?\n/,"\r\n");m=encodeURIComponent(m);m=m.gsub(/%20/,"+");return l+"="+m}).join("&")}}return h.inject(c,function(i,j){if(!j.disabled&&j.name){e=j.name;g=$(j).getValue();if(g!=null&&j.type!="file"&&(j.type!="submit"||(!a&&f!==false&&(!f||e==f)&&(a=true)))){i=b(i,e,g)}}return i})}};Form.Methods={serialize:function(b,a){return Form.serializeElements(Form.getElements(b),a)},getElements:function(e){var f=$(e).getElementsByTagName("*");var d,c=[],b=Form.Element.Serializers;for(var a=0;d=f[a];a++){if(b[d.tagName.toLowerCase()]){c.push(Element.extend(d))}}return c},getInputs:function(g,c,d){g=$(g);var a=g.getElementsByTagName("input");if(!c&&!d){return $A(a).map(Element.extend)}for(var e=0,h=[],f=a.length;e<f;e++){var b=a[e];if((c&&b.type!=c)||(d&&b.name!=d)){continue}h.push(Element.extend(b))}return h},disable:function(a){a=$(a);Form.getElements(a).invoke("disable");return a},enable:function(a){a=$(a);Form.getElements(a).invoke("enable");return a},findFirstElement:function(b){var c=$(b).getElements().findAll(function(d){return"hidden"!=d.type&&!d.disabled});var a=c.findAll(function(d){return d.hasAttribute("tabIndex")&&d.tabIndex>=0}).sortBy(function(d){return d.tabIndex}).first();return a?a:c.find(function(d){return/^(?:input|select|textarea)$/i.test(d.tagName)})},focusFirstElement:function(b){b=$(b);var a=b.findFirstElement();if(a){a.activate()}return b},request:function(b,a){b=$(b),a=Object.clone(a||{});var d=a.parameters,c=b.readAttribute("action")||"";if(c.blank()){c=window.location.href}a.parameters=b.serialize(true);if(d){if(Object.isString(d)){d=d.toQueryParams()}Object.extend(a.parameters,d)}if(b.hasAttribute("method")&&!a.method){a.method=b.method}return new Ajax.Request(c,a)}};Form.Element={focus:function(a){$(a).focus();return a},select:function(a){$(a).select();return a}};Form.Element.Methods={serialize:function(a){a=$(a);if(!a.disabled&&a.name){var b=a.getValue();if(b!=undefined){var c={};c[a.name]=b;return Object.toQueryString(c)}}return""},getValue:function(a){a=$(a);var b=a.tagName.toLowerCase();return Form.Element.Serializers[b](a)},setValue:function(a,b){a=$(a);var c=a.tagName.toLowerCase();Form.Element.Serializers[c](a,b);return a},clear:function(a){$(a).value="";return a},present:function(a){return $(a).value!=""},activate:function(a){a=$(a);try{a.focus();if(a.select&&(a.tagName.toLowerCase()!="input"||!(/^(?:button|reset|submit)$/i.test(a.type)))){a.select()}}catch(b){}return a},disable:function(a){a=$(a);a.disabled=true;return a},enable:function(a){a=$(a);a.disabled=false;return a}};var Field=Form.Element;var $F=Form.Element.Methods.getValue;Form.Element.Serializers=(function(){function b(h,i){switch(h.type.toLowerCase()){case"checkbox":case"radio":return f(h,i);default:return e(h,i)}}function f(h,i){if(Object.isUndefined(i)){return h.checked?h.value:null}else{h.checked=!!i}}function e(h,i){if(Object.isUndefined(i)){return h.value}else{h.value=i}}function a(k,n){if(Object.isUndefined(n)){return(k.type==="select-one"?c:d)(k)}var j,l,o=!Object.isArray(n);for(var h=0,m=k.length;h<m;h++){j=k.options[h];l=this.optionValue(j);if(o){if(l==n){j.selected=true;return}}else{j.selected=n.include(l)}}}function c(i){var h=i.selectedIndex;return h>=0?g(i.options[h]):null}function d(l){var h,m=l.length;if(!m){return null}for(var k=0,h=[];k<m;k++){var j=l.options[k];if(j.selected){h.push(g(j))}}return h}function g(h){return Element.hasAttribute(h,"value")?h.value:h.text}return{input:b,inputSelector:f,textarea:e,select:a,selectOne:c,selectMany:d,optionValue:g,button:e}})();Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,a,b,c){$super(c,b);this.element=$(a);this.lastValue=this.getValue()},execute:function(){var a=this.getValue();if(Object.isString(this.lastValue)&&Object.isString(a)?this.lastValue!=a:String(this.lastValue)!=String(a)){this.callback(this.element,a);this.lastValue=a}}});Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});Abstract.EventObserver=Class.create({initialize:function(a,b){this.element=$(a);this.callback=b;this.lastValue=this.getValue();if(this.element.tagName.toLowerCase()=="form"){this.registerFormCallbacks()}else{this.registerCallback(this.element)}},onElementEvent:function(){var a=this.getValue();if(this.lastValue!=a){this.callback(this.element,a);this.lastValue=a}},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(a){if(a.type){switch(a.type.toLowerCase()){case"checkbox":case"radio":Event.observe(a,"click",this.onElementEvent.bind(this));break;default:Event.observe(a,"change",this.onElementEvent.bind(this));break}}}});Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});(function(D){var u=document.createElement("div");var d=document.documentElement;var k="onmouseenter" in d&&"onmouseleave" in d;var L={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45};var z=function(X){return false};if(window.attachEvent){if(window.addEventListener){z=function(X){return !(X instanceof window.Event)}}else{z=function(X){return true}}}var O;function M(Y,X){return Y.which?(Y.which===X+1):(Y.button===X)}var W={0:1,1:4,2:2};function S(Y,X){return Y.button===W[X]}function P(Y,X){switch(X){case 0:return Y.which==1&&!Y.metaKey;case 1:return Y.which==2||(Y.which==1&&Y.metaKey);case 2:return Y.which==3;default:return false}}if(window.attachEvent){if(!window.addEventListener){O=S}else{O=function(Y,X){return z(Y)?S(Y,X):M(Y,X)}}}else{if(Prototype.Browser.WebKit){O=P}else{O=M}}function B(X){return O(X,0)}function i(X){return O(X,1)}function e(X){return O(X,2)}function o(X){return Element.extend(K(X))}function K(Z){Z=L.extend(Z);var Y=Z.target,X=Z.type,aa=Z.currentTarget;if(aa&&aa.tagName){if(X==="load"||X==="error"||(X==="click"&&aa.tagName.toLowerCase()==="input"&&aa.type==="radio")){Y=aa}}return Y.nodeType==Node.TEXT_NODE?Y.parentNode:Y}function j(Z,aa){var Y=K(Z),X=Prototype.Selector;if(!aa){return Element.extend(Y)}while(Y){if(Object.isElement(Y)&&X.match(Y,aa)){return Element.extend(Y)}Y=Y.parentNode}}function t(X){return{x:U(X),y:T(X)}}function U(Z){var Y=document.documentElement,X=document.body||{scrollLeft:0};return Z.pageX||(Z.clientX+(Y.scrollLeft||X.scrollLeft)-(Y.clientLeft||0))}function T(Z){var Y=document.documentElement,X=document.body||{scrollTop:0};return Z.pageY||(Z.clientY+(Y.scrollTop||X.scrollTop)-(Y.clientTop||0))}function r(X){L.extend(X);X.preventDefault();X.stopPropagation();X.stopped=true}L.Methods={isLeftClick:B,isMiddleClick:i,isRightClick:e,element:o,findElement:j,pointer:t,pointerX:U,pointerY:T,stop:r};var H=Object.keys(L.Methods).inject({},function(X,Y){X[Y]=L.Methods[Y].methodize();return X});if(window.attachEvent){function V(Y){var X;switch(Y.type){case"mouseover":case"mouseenter":X=Y.fromElement;break;case"mouseout":case"mouseleave":X=Y.toElement;break;default:return null}return Element.extend(X)}var Q={stopPropagation:function(){this.cancelBubble=true},preventDefault:function(){this.returnValue=false},inspect:function(){return"[object Event]"}};L.extend=function(Y,X){if(!Y){return false}if(!z(Y)){return Y}if(Y._extendedByPrototype){return Y}Y._extendedByPrototype=Prototype.emptyFunction;var Z=L.pointer(Y);Object.extend(Y,{target:Y.srcElement||X,relatedTarget:V(Y),pageX:Z.x,pageY:Z.y});Object.extend(Y,H);Object.extend(Y,Q);return Y}}else{L.extend=Prototype.K}if(window.addEventListener){L.prototype=window.Event.prototype||document.createEvent("HTMLEvents").__proto__;Object.extend(L.prototype,H)}var v={mouseenter:"mouseover",mouseleave:"mouseout"};function f(X){return v[X]||X}if(k){f=Prototype.K}function R(X){if(X===window){return 0}if(typeof X._prototypeUID==="undefined"){X._prototypeUID=Element.Storage.UID++}return X._prototypeUID}function I(X){if(X===window){return 0}if(X==document){return 1}return X.uniqueID}if("uniqueID" in u){R=I}function x(X){return X.include(":")}L._isCustomEvent=x;function A(Z,Y){var X=D.Event.cache;if(Object.isUndefined(Y)){Y=R(Z)}if(!X[Y]){X[Y]={element:Z}}return X[Y]}function E(Y,X){if(Object.isUndefined(X)){X=R(Y)}delete D.Event.cache[X]}function h(Z,ac,af){var X=A(Z);if(!X[ac]){X[ac]=[]}var ab=X[ac];var aa=ab.length;while(aa--){if(ab[aa].handler===af){return null}}var ad=R(Z);var Y=D.Event._createResponder(ad,ac,af);var ae={responder:Y,handler:af};ab.push(ae);return ae}function s(ac,Z,ad){var Y=A(ac);var X=Y[Z];if(!X){return}var ab=X.length,ae;while(ab--){if(X[ab].handler===ad){ae=X[ab];break}}if(!ae){return}var aa=X.indexOf(ae);X.splice(aa,1);return ae}function c(Z,Y,aa){Z=$(Z);var ab=h(Z,Y,aa);if(ab===null){return Z}var X=ab.responder;if(x(Y)){p(Z,Y,X)}else{m(Z,Y,X)}return Z}function m(aa,Z,Y){var X=f(Z);if(aa.addEventListener){aa.addEventListener(X,Y,false)}else{aa.attachEvent("on"+X,Y)}}function p(Z,Y,X){if(Z.addEventListener){Z.addEventListener("dataavailable",X,false)}else{Z.attachEvent("ondataavailable",X);Z.attachEvent("onlosecapture",X)}}function J(Y,X,Z){Y=$(Y);var ab=!Object.isUndefined(Z),ac=!Object.isUndefined(X);if(!ac&&!ab){y(Y);return Y}if(!ab){G(Y,X);return Y}var aa=s(Y,X,Z);if(!aa){return Y}a(Y,X,aa.responder);return Y}function C(aa,Z,Y){var X=f(Z);if(aa.removeEventListener){aa.removeEventListener(X,Y,false)}else{aa.detachEvent("on"+X,Y)}}function b(Z,Y,X){if(Z.removeEventListener){Z.removeEventListener("dataavailable",X,false)}else{Z.detachEvent("ondataavailable",X);Z.detachEvent("onlosecapture",X)}}function y(ac){var ab=R(ac),Z=D.Event.cache[ab];if(!Z){return}E(ac,ab);var X,aa;for(var Y in Z){if(Y==="element"){continue}X=Z[Y];aa=X.length;while(aa--){a(ac,Y,X[aa].responder)}}}function G(ab,Z){var Y=A(ab);var X=Y[Z];if(!X){return}delete Y[Z];var aa=X.length;while(aa--){a(ab,Z,X[aa].responder)}}function a(Y,X,Z){if(x(X)){b(Y,X,Z)}else{C(Y,X,Z)}}function g(X){if(X!==document){return X}if(document.createEvent&&!X.dispatchEvent){return document.documentElement}return X}function w(aa,Z,Y,X){aa=g($(aa));if(Object.isUndefined(X)){X=true}Y=Y||{};var ab=N(aa,Z,Y,X);return L.extend(ab)}function l(aa,Z,Y,X){var ab=document.createEvent("HTMLEvents");ab.initEvent("dataavailable",X,true);ab.eventName=Z;ab.memo=Y;aa.dispatchEvent(ab);return ab}function n(aa,Z,Y,X){var ab=document.createEventObject();ab.eventType=X?"ondataavailable":"onlosecapture";ab.eventName=Z;ab.memo=Y;aa.fireEvent(ab.eventType,ab);return ab}var N=document.createEvent?l:n;L.Handler=Class.create({initialize:function(Z,Y,X,aa){this.element=$(Z);this.eventName=Y;this.selector=X;this.callback=aa;this.handler=this.handleEvent.bind(this)},start:function(){L.observe(this.element,this.eventName,this.handler);return this},stop:function(){L.stopObserving(this.element,this.eventName,this.handler);return this},handleEvent:function(Y){var X=L.findElement(Y,this.selector);if(X){this.callback.call(this.element,Y,X)}}});function F(Z,Y,X,aa){Z=$(Z);if(Object.isFunction(X)&&Object.isUndefined(aa)){aa=X,X=null}return new L.Handler(Z,Y,X,aa).start()}Object.extend(L,L.Methods);Object.extend(L,{fire:w,observe:c,stopObserving:J,on:F});Element.addMethods({fire:w,observe:c,stopObserving:J,on:F});Object.extend(document,{fire:w.methodize(),observe:c.methodize(),stopObserving:J.methodize(),on:F.methodize(),loaded:false});if(D.Event){Object.extend(window.Event,L)}else{D.Event=L}D.Event.cache={};function q(){D.Event.cache=null}if(window.attachEvent){window.attachEvent("onunload",q)}u=null;d=null})(this);(function(c){var g=document.documentElement;var b="onmouseenter" in g&&"onmouseleave" in g;function f(h){return !b&&(h==="mouseenter"||h==="mouseleave")}function d(i,h,j){if(Event._isCustomEvent(h)){return e(i,h,j)}if(f(h)){return a(i,h,j)}return function(l){if(!Event.cache){return}var k=Event.cache[i].element;Event.extend(l,k);j.call(k,l)}}function e(i,h,j){return function(l){var k=Event.cache[i].element;if(Object.isUndefined(l.eventName)){return false}if(l.eventName!==h){return false}Event.extend(l,k);j.call(k,l)}}function a(i,h,j){return function(m){var k=Event.cache[i].element;Event.extend(m,k);var l=m.relatedTarget;while(l&&l!==k){try{l=l.parentNode}catch(n){l=k}}if(l===k){return}j.call(k,m)}}c.Event._createResponder=d;g=null})(this);(function(a){var e;function b(){if(document.loaded){return}if(e){window.clearTimeout(e)}document.loaded=true;document.fire("dom:loaded")}function d(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",d);b()}}function c(){try{document.documentElement.doScroll("left")}catch(f){e=c.defer();return}b()}if(document.readyState==="complete"){b();return}if(document.addEventListener){document.addEventListener("DOMContentLoaded",b,false)}else{document.attachEvent("onreadystatechange",d);if(window==top){e=c.defer()}}Event.observe(window,"load",b)})(this);Element.addMethods();Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.Methods.childOf=Element.Methods.descendantOf;var Insertion={Before:function(a,b){return Element.insert(a,{before:b})},Top:function(a,b){return Element.insert(a,{top:b})},Bottom:function(a,b){return Element.insert(a,{bottom:b})},After:function(a,b){return Element.insert(a,{after:b})}};var $continue=new Error('"throw $continue" is deprecated, use "return" instead');var Position={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},within:function(b,a,c){if(this.includeScrollOffsets){return this.withinIncludingScrolloffsets(b,a,c)}this.xcomp=a;this.ycomp=c;this.offset=Element.cumulativeOffset(b);return(c>=this.offset[1]&&c<this.offset[1]+b.offsetHeight&&a>=this.offset[0]&&a<this.offset[0]+b.offsetWidth)},withinIncludingScrolloffsets:function(b,a,d){var c=Element.cumulativeScrollOffset(b);this.xcomp=a+c[0]-this.deltaX;this.ycomp=d+c[1]-this.deltaY;this.offset=Element.cumulativeOffset(b);return(this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+b.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+b.offsetWidth)},overlap:function(b,a){if(!b){return 0}if(b=="vertical"){return((this.offset[1]+a.offsetHeight)-this.ycomp)/a.offsetHeight}if(b=="horizontal"){return((this.offset[0]+a.offsetWidth)-this.xcomp)/a.offsetWidth}},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(a){Position.prepare();return Element.absolutize(a)},relativize:function(a){Position.prepare();return Element.relativize(a)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(b,c,a){a=a||{};return Element.clonePosition(c,b,a)}};if(!document.getElementsByClassName){document.getElementsByClassName=function(b){function a(c){return c.blank()?null:"[contains(concat(' ', @class, ' '), ' "+c+" ')]"}b.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(c,e){e=e.toString().strip();var d=/\s/.test(e)?$w(e).map(a).join(""):a(e);return d?document._getElementsByXPath(".//*"+d,c):[]}:function(e,f){f=f.toString().strip();var g=[],h=(/\s/.test(f)?$w(f):null);if(!h&&!f){return g}var c=$(e).getElementsByTagName("*");f=" "+f+" ";for(var d=0,k,j;k=c[d];d++){if(k.className&&(j=" "+k.className+" ")&&(j.include(f)||(h&&h.all(function(i){return !i.toString().blank()&&j.include(" "+i+" ")})))){g.push(Element.extend(k))}}return g};return function(d,c){return $(c||document.body).getElementsByClassName(d)}}(Element.Methods)}Element.ClassNames=Class.create();Element.ClassNames.prototype={initialize:function(a){this.element=$(a)},_each:function(b,a){this.element.className.split(/\s+/).select(function(c){return c.length>0})._each(b,a)},set:function(a){this.element.className=a},add:function(a){if(this.include(a)){return}this.set($A(this).concat(a).join(" "))},remove:function(a){if(!this.include(a)){return}this.set($A(this).without(a).join(" "))},toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);(function(){window.Selector=Class.create({initialize:function(a){this.expression=a.strip()},findElements:function(a){return Prototype.Selector.select(this.expression,a)},match:function(a){return Prototype.Selector.match(a,this.expression)},toString:function(){return this.expression},inspect:function(){return"#<Selector: "+this.expression+">"}});Object.extend(Selector,{matchElements:function(f,g){var a=Prototype.Selector.match,d=[];for(var c=0,e=f.length;c<e;c++){var b=f[c];if(a(b,g)){d.push(Element.extend(b))}}return d},findElement:function(f,g,b){b=b||0;var a=0,d;for(var c=0,e=f.length;c<e;c++){d=f[c];if(Prototype.Selector.match(d,g)&&b===a++){return Element.extend(d)}}},findChildElements:function(b,c){var a=c.toArray().join(", ");return Prototype.Selector.select(a,b||document)}})})();var Builder={NODEMAP:{AREA:"map",CAPTION:"table",COL:"table",COLGROUP:"table",LEGEND:"fieldset",OPTGROUP:"select",OPTION:"select",PARAM:"object",TBODY:"table",TD:"table",TFOOT:"table",TH:"table",THEAD:"table",TR:"table"},node:function(a){a=a.toUpperCase();var g=this.NODEMAP[a]||"div";var b=document.createElement(g);try{b.innerHTML="<"+a+"></"+a+">"}catch(f){}var d=b.firstChild||null;if(d&&(d.tagName.toUpperCase()!=a)){d=d.getElementsByTagName(a)[0]}if(!d){d=document.createElement(a)}if(!d){return}if(arguments[1]){if(this._isStringOrNumber(arguments[1])||(arguments[1] instanceof Array)||arguments[1].tagName){this._children(d,arguments[1])}else{var c=this._attributes(arguments[1]);if(c.length){try{b.innerHTML="<"+a+" "+c+"></"+a+">"}catch(f){}d=b.firstChild||null;if(!d){d=document.createElement(a);for(attr in arguments[1]){d[attr=="class"?"className":attr]=arguments[1][attr]}}if(d.tagName.toUpperCase()!=a){d=b.getElementsByTagName(a)[0]}}}}if(arguments[2]){this._children(d,arguments[2])}return $(d)},_text:function(a){return document.createTextNode(a)},ATTR_MAP:{className:"class",htmlFor:"for"},_attributes:function(a){var b=[];for(attribute in a){b.push((attribute in this.ATTR_MAP?this.ATTR_MAP[attribute]:attribute)+'="'+a[attribute].toString().escapeHTML().gsub(/"/,"&quot;")+'"')}return b.join(" ")},_children:function(b,a){if(a.tagName){b.appendChild(a);return}if(typeof a=="object"){a.flatten().each(function(c){if(typeof c=="object"){b.appendChild(c)}else{if(Builder._isStringOrNumber(c)){b.appendChild(Builder._text(c))}}})}else{if(Builder._isStringOrNumber(a)){b.appendChild(Builder._text(a))}}},_isStringOrNumber:function(a){return(typeof a=="string"||typeof a=="number")},build:function(b){var a=this.node("div");$(a).update(b.strip());return a.down()},dump:function(b){if(typeof b!="object"&&typeof b!="function"){b=window}var a=("A ABBR ACRONYM ADDRESS APPLET AREA B BASE BASEFONT BDO BIG BLOCKQUOTE BODY BR BUTTON CAPTION CENTER CITE CODE COL COLGROUP DD DEL DFN DIR DIV DL DT EM FIELDSET FONT FORM FRAME FRAMESET H1 H2 H3 H4 H5 H6 HEAD HR HTML I IFRAME IMG INPUT INS ISINDEX KBD LABEL LEGEND LI LINK MAP MENU META NOFRAMES NOSCRIPT OBJECT OL OPTGROUP OPTION P PARAM PRE Q S SAMP SCRIPT SELECT SMALL SPAN STRIKE STRONG STYLE SUB SUP TABLE TBODY TD TEXTAREA TFOOT TH THEAD TITLE TR TT U UL VAR").split(/\s+/);a.each(function(c){b[c]=function(){return Builder.node.apply(Builder,[c].concat($A(arguments)))}})}};String.prototype.parseColor=function(){var a="#";if(this.slice(0,4)=="rgb("){var c=this.slice(4,this.length-1).split(",");var b=0;do{a+=parseInt(c[b]).toColorPart()}while(++b<3)}else{if(this.slice(0,1)=="#"){if(this.length==4){for(var b=1;b<4;b++){a+=(this.charAt(b)+this.charAt(b)).toLowerCase()}}if(this.length==7){a=this.toLowerCase()}}}return(a.length==7?a:(arguments[0]||this))};Element.collectTextNodes=function(a){return $A($(a).childNodes).collect(function(b){return(b.nodeType==3?b.nodeValue:(b.hasChildNodes()?Element.collectTextNodes(b):""))}).flatten().join("")};Element.collectTextNodesIgnoreClass=function(a,b){return $A($(a).childNodes).collect(function(c){return(c.nodeType==3?c.nodeValue:((c.hasChildNodes()&&!Element.hasClassName(c,b))?Element.collectTextNodesIgnoreClass(c,b):""))}).flatten().join("")};Element.setContentZoom=function(a,b){a=$(a);a.setStyle({fontSize:(b/100)+"em"});if(Prototype.Browser.WebKit){window.scrollBy(0,0)}return a};Element.getInlineOpacity=function(a){return $(a).style.opacity||""};Element.forceRerendering=function(a){try{a=$(a);var c=document.createTextNode(" ");a.appendChild(c);a.removeChild(c)}catch(b){}};var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},Transitions:{linear:Prototype.K,sinoidal:function(a){return(-Math.cos(a*Math.PI)/2)+0.5},reverse:function(a){return 1-a},flicker:function(a){var a=((-Math.cos(a*Math.PI)/4)+0.75)+Math.random()/4;return a>1?1:a},wobble:function(a){return(-Math.cos(a*Math.PI*(9*a))/2)+0.5},pulse:function(b,a){return(-Math.cos((b*((a||5)-0.5)*2)*Math.PI)/2)+0.5},spring:function(a){return 1-(Math.cos(a*4.5*Math.PI)*Math.exp(-a*6))},none:function(a){return 0},full:function(a){return 1}},DefaultOptions:{duration:1,fps:100,sync:false,from:0,to:1,delay:0,queue:"parallel"},tagifyText:function(a){var b="position:relative";if(Prototype.Browser.IE){b+=";zoom:1"}a=$(a);$A(a.childNodes).each(function(c){if(c.nodeType==3){c.nodeValue.toArray().each(function(d){a.insertBefore(new Element("span",{style:b}).update(d==" "?String.fromCharCode(160):d),c)});Element.remove(c)}})},multiple:function(b,c){var e;if(((typeof b=="object")||Object.isFunction(b))&&(b.length)){e=b}else{e=$(b).childNodes}var a=Object.extend({speed:0.1,delay:0},arguments[2]||{});var d=a.delay;$A(e).each(function(g,f){new c(g,Object.extend(a,{delay:f*a.speed+d}))})},PAIRS:{slide:["SlideDown","SlideUp"],blind:["BlindDown","BlindUp"],appear:["Appear","Fade"]},toggle:function(b,c,a){b=$(b);c=(c||"appear").toLowerCase();return Effect[Effect.PAIRS[c][b.visible()?1:0]](b,Object.extend({queue:{position:"end",scope:(b.id||"global"),limit:1}},a||{}))}};Effect.DefaultOptions.transition=Effect.Transitions.sinoidal;Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[];this.interval=null},_each:function(a){this.effects._each(a)},add:function(b){var c=new Date().getTime();var a=Object.isString(b.options.queue)?b.options.queue:b.options.queue.position;switch(a){case"front":this.effects.findAll(function(d){return d.state=="idle"}).each(function(d){d.startOn+=b.finishOn;d.finishOn+=b.finishOn});break;case"with-last":c=this.effects.pluck("startOn").max()||c;break;case"end":c=this.effects.pluck("finishOn").max()||c;break}b.startOn+=c;b.finishOn+=c;if(!b.options.queue.limit||(this.effects.length<b.options.queue.limit)){this.effects.push(b)}if(!this.interval){this.interval=setInterval(this.loop.bind(this),15)}},remove:function(a){this.effects=this.effects.reject(function(b){return b==a});if(this.effects.length==0){clearInterval(this.interval);this.interval=null}},loop:function(){var c=new Date().getTime();for(var b=0,a=this.effects.length;b<a;b++){this.effects[b]&&this.effects[b].loop(c)}}});Effect.Queues={instances:$H(),get:function(a){if(!Object.isString(a)){return a}return this.instances.get(a)||this.instances.set(a,new Effect.ScopedQueue())}};Effect.Queue=Effect.Queues.get("global");Effect.Base=Class.create({position:null,start:function(a){if(a&&a.transition===false){a.transition=Effect.Transitions.linear}this.options=Object.extend(Object.extend({},Effect.DefaultOptions),a||{});this.currentFrame=0;this.state="idle";this.startOn=this.options.delay*1000;this.finishOn=this.startOn+(this.options.duration*1000);this.fromToDelta=this.options.to-this.options.from;this.totalTime=this.finishOn-this.startOn;this.totalFrames=this.options.fps*this.options.duration;this.render=(function(){function b(d,c){if(d.options[c+"Internal"]){d.options[c+"Internal"](d)}if(d.options[c]){d.options[c](d)}}return function(c){if(this.state==="idle"){this.state="running";b(this,"beforeSetup");if(this.setup){this.setup()}b(this,"afterSetup")}if(this.state==="running"){c=(this.options.transition(c)*this.fromToDelta)+this.options.from;this.position=c;b(this,"beforeUpdate");if(this.update){this.update(c)}b(this,"afterUpdate")}}})();this.event("beforeStart");if(!this.options.sync){Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).add(this)}},loop:function(c){if(c>=this.startOn){if(c>=this.finishOn){this.render(1);this.cancel();this.event("beforeFinish");if(this.finish){this.finish()}this.event("afterFinish");return}var b=(c-this.startOn)/this.totalTime,a=(b*this.totalFrames).round();if(a>this.currentFrame){this.render(b);this.currentFrame=a}}},cancel:function(){if(!this.options.sync){Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).remove(this)}this.state="finished"},event:function(a){if(this.options[a+"Internal"]){this.options[a+"Internal"](this)}if(this.options[a]){this.options[a](this)}},inspect:function(){var a=$H();for(property in this){if(!Object.isFunction(this[property])){a.set(property,this[property])}}return"#<Effect:"+a.inspect()+",options:"+$H(this.options).inspect()+">"}});Effect.Parallel=Class.create(Effect.Base,{initialize:function(a){this.effects=a||[];this.start(arguments[1])},update:function(a){this.effects.invoke("render",a)},finish:function(a){this.effects.each(function(b){b.render(1);b.cancel();b.event("beforeFinish");if(b.finish){b.finish(a)}b.event("afterFinish")})}});Effect.Tween=Class.create(Effect.Base,{initialize:function(c,f,e){c=Object.isString(c)?$(c):c;var b=$A(arguments),d=b.last(),a=b.length==5?b[3]:null;this.method=Object.isFunction(d)?d.bind(c):Object.isFunction(c[d])?c[d].bind(c):function(g){c[d]=g};this.start(Object.extend({from:f,to:e},a||{}))},update:function(a){this.method(a)}});Effect.Event=Class.create(Effect.Base,{initialize:function(){this.start(Object.extend({duration:0},arguments[0]||{}))},update:Prototype.emptyFunction});Effect.Opacity=Class.create(Effect.Base,{initialize:function(b){this.element=$(b);if(!this.element){throw (Effect._elementDoesNotExistError)}if(Prototype.Browser.IE&&(!this.element.currentStyle.hasLayout)){this.element.setStyle({zoom:1})}var a=Object.extend({from:this.element.getOpacity()||0,to:1},arguments[1]||{});this.start(a)},update:function(a){this.element.setOpacity(a)}});Effect.Move=Class.create(Effect.Base,{initialize:function(b){this.element=$(b);if(!this.element){throw (Effect._elementDoesNotExistError)}var a=Object.extend({x:0,y:0,mode:"relative"},arguments[1]||{});this.start(a)},setup:function(){this.element.makePositioned();this.originalLeft=parseFloat(this.element.getStyle("left")||"0");this.originalTop=parseFloat(this.element.getStyle("top")||"0");if(this.options.mode=="absolute"){this.options.x=this.options.x-this.originalLeft;this.options.y=this.options.y-this.originalTop}},update:function(a){this.element.setStyle({left:(this.options.x*a+this.originalLeft).round()+"px",top:(this.options.y*a+this.originalTop).round()+"px"})}});Effect.MoveBy=function(b,a,c){return new Effect.Move(b,Object.extend({x:c,y:a},arguments[3]||{}))};Effect.Scale=Class.create(Effect.Base,{initialize:function(b,c){this.element=$(b);if(!this.element){throw (Effect._elementDoesNotExistError)}var a=Object.extend({scaleX:true,scaleY:true,scaleContent:true,scaleFromCenter:false,scaleMode:"box",scaleFrom:100,scaleTo:c},arguments[2]||{});this.start(a)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||false;this.elementPositioning=this.element.getStyle("position");this.originalStyle={};["top","left","width","height","fontSize"].each(function(b){this.originalStyle[b]=this.element.style[b]}.bind(this));this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;var a=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(b){if(a.indexOf(b)>0){this.fontSize=parseFloat(a);this.fontSizeType=b}}.bind(this));this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;this.dims=null;if(this.options.scaleMode=="box"){this.dims=[this.element.offsetHeight,this.element.offsetWidth]}if(/^content/.test(this.options.scaleMode)){this.dims=[this.element.scrollHeight,this.element.scrollWidth]}if(!this.dims){this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth]}},update:function(a){var b=(this.options.scaleFrom/100)+(this.factor*a);if(this.options.scaleContent&&this.fontSize){this.element.setStyle({fontSize:this.fontSize*b+this.fontSizeType})}this.setDimensions(this.dims[0]*b,this.dims[1]*b)},finish:function(a){if(this.restoreAfterFinish){this.element.setStyle(this.originalStyle)}},setDimensions:function(a,e){var f={};if(this.options.scaleX){f.width=e.round()+"px"}if(this.options.scaleY){f.height=a.round()+"px"}if(this.options.scaleFromCenter){var c=(a-this.dims[0])/2;var b=(e-this.dims[1])/2;if(this.elementPositioning=="absolute"){if(this.options.scaleY){f.top=this.originalTop-c+"px"}if(this.options.scaleX){f.left=this.originalLeft-b+"px"}}else{if(this.options.scaleY){f.top=-c+"px"}if(this.options.scaleX){f.left=-b+"px"}}}this.element.setStyle(f)}});Effect.Highlight=Class.create(Effect.Base,{initialize:function(b){this.element=$(b);if(!this.element){throw (Effect._elementDoesNotExistError)}var a=Object.extend({startcolor:"#ffff99"},arguments[1]||{});this.start(a)},setup:function(){if(this.element.getStyle("display")=="none"){this.cancel();return}this.oldStyle={};if(!this.options.keepBackgroundImage){this.oldStyle.backgroundImage=this.element.getStyle("background-image");this.element.setStyle({backgroundImage:"none"})}if(!this.options.endcolor){this.options.endcolor=this.element.getStyle("background-color").parseColor("#ffffff")}if(!this.options.restorecolor){this.options.restorecolor=this.element.getStyle("background-color")}this._base=$R(0,2).map(function(a){return parseInt(this.options.startcolor.slice(a*2+1,a*2+3),16)}.bind(this));this._delta=$R(0,2).map(function(a){return parseInt(this.options.endcolor.slice(a*2+1,a*2+3),16)-this._base[a]}.bind(this))},update:function(a){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(b,c,d){return b+((this._base[d]+(this._delta[d]*a)).round().toColorPart())}.bind(this))})},finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}});Effect.ScrollTo=function(c){var b=arguments[1]||{},a=document.viewport.getScrollOffsets(),d=$(c).cumulativeOffset();if(b.offset){d[1]+=b.offset}return new Effect.Tween(null,a.top,d[1],b,function(e){scrollTo(a.left,e.round())})};Effect.Fade=function(c){c=$(c);var a=c.getInlineOpacity();var b=Object.extend({from:c.getOpacity()||1,to:0,afterFinishInternal:function(d){if(d.options.to!=0){return}d.element.hide().setStyle({opacity:a})}},arguments[1]||{});return new Effect.Opacity(c,b)};Effect.Appear=function(b){b=$(b);var a=Object.extend({from:(b.getStyle("display")=="none"?0:b.getOpacity()||0),to:1,afterFinishInternal:function(c){c.element.forceRerendering()},beforeSetup:function(c){c.element.setOpacity(c.options.from).show()}},arguments[1]||{});return new Effect.Opacity(b,a)};Effect.Puff=function(b){b=$(b);var a={opacity:b.getInlineOpacity(),position:b.getStyle("position"),top:b.style.top,left:b.style.left,width:b.style.width,height:b.style.height};return new Effect.Parallel([new Effect.Scale(b,200,{sync:true,scaleFromCenter:true,scaleContent:true,restoreAfterFinish:true}),new Effect.Opacity(b,{sync:true,to:0})],Object.extend({duration:1,beforeSetupInternal:function(c){Position.absolutize(c.effects[0].element)},afterFinishInternal:function(c){c.effects[0].element.hide().setStyle(a)}},arguments[1]||{}))};Effect.BlindUp=function(a){a=$(a);a.makeClipping();return new Effect.Scale(a,0,Object.extend({scaleContent:false,scaleX:false,restoreAfterFinish:true,afterFinishInternal:function(b){b.element.hide().undoClipping()}},arguments[1]||{}))};Effect.BlindDown=function(b){b=$(b);var a=b.getDimensions();return new Effect.Scale(b,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:a.height,originalWidth:a.width},restoreAfterFinish:true,afterSetup:function(c){c.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(c){c.element.undoClipping()}},arguments[1]||{}))};Effect.SwitchOff=function(b){b=$(b);var a=b.getInlineOpacity();return new Effect.Appear(b,Object.extend({duration:0.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(c){new Effect.Scale(c.element,1,{duration:0.3,scaleFromCenter:true,scaleX:false,scaleContent:false,restoreAfterFinish:true,beforeSetup:function(d){d.element.makePositioned().makeClipping()},afterFinishInternal:function(d){d.element.hide().undoClipping().undoPositioned().setStyle({opacity:a})}})}},arguments[1]||{}))};Effect.DropOut=function(b){b=$(b);var a={top:b.getStyle("top"),left:b.getStyle("left"),opacity:b.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(b,{x:0,y:100,sync:true}),new Effect.Opacity(b,{sync:true,to:0})],Object.extend({duration:0.5,beforeSetup:function(c){c.effects[0].element.makePositioned()},afterFinishInternal:function(c){c.effects[0].element.hide().undoPositioned().setStyle(a)}},arguments[1]||{}))};Effect.Shake=function(d){d=$(d);var b=Object.extend({distance:20,duration:0.5},arguments[1]||{});var e=parseFloat(b.distance);var c=parseFloat(b.duration)/10;var a={top:d.getStyle("top"),left:d.getStyle("left")};return new Effect.Move(d,{x:e,y:0,duration:c,afterFinishInternal:function(f){new Effect.Move(f.element,{x:-e*2,y:0,duration:c*2,afterFinishInternal:function(g){new Effect.Move(g.element,{x:e*2,y:0,duration:c*2,afterFinishInternal:function(h){new Effect.Move(h.element,{x:-e*2,y:0,duration:c*2,afterFinishInternal:function(i){new Effect.Move(i.element,{x:e*2,y:0,duration:c*2,afterFinishInternal:function(j){new Effect.Move(j.element,{x:-e,y:0,duration:c,afterFinishInternal:function(k){k.element.undoPositioned().setStyle(a)}})}})}})}})}})}})};Effect.SlideDown=function(c){c=$(c).cleanWhitespace();var a=c.down().getStyle("bottom");var b=c.getDimensions();return new Effect.Scale(c,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:b.height,originalWidth:b.width},restoreAfterFinish:true,afterSetup:function(d){d.element.makePositioned();d.element.down().makePositioned();if(window.opera){d.element.setStyle({top:""})}d.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(d){d.element.down().setStyle({bottom:(d.dims[0]-d.element.clientHeight)+"px"})},afterFinishInternal:function(d){d.element.undoClipping().undoPositioned();d.element.down().undoPositioned().setStyle({bottom:a})}},arguments[1]||{}))};Effect.SlideUp=function(c){c=$(c).cleanWhitespace();var a=c.down().getStyle("bottom");var b=c.getDimensions();return new Effect.Scale(c,window.opera?0:1,Object.extend({scaleContent:false,scaleX:false,scaleMode:"box",scaleFrom:100,scaleMode:{originalHeight:b.height,originalWidth:b.width},restoreAfterFinish:true,afterSetup:function(d){d.element.makePositioned();d.element.down().makePositioned();if(window.opera){d.element.setStyle({top:""})}d.element.makeClipping().show()},afterUpdateInternal:function(d){d.element.down().setStyle({bottom:(d.dims[0]-d.element.clientHeight)+"px"})},afterFinishInternal:function(d){d.element.hide().undoClipping().undoPositioned();d.element.down().undoPositioned().setStyle({bottom:a})}},arguments[1]||{}))};Effect.Squish=function(a){return new Effect.Scale(a,window.opera?1:0,{restoreAfterFinish:true,beforeSetup:function(b){b.element.makeClipping()},afterFinishInternal:function(b){b.element.hide().undoClipping()}})};Effect.Grow=function(c){c=$(c);var b=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},arguments[1]||{});var a={top:c.style.top,left:c.style.left,height:c.style.height,width:c.style.width,opacity:c.getInlineOpacity()};var g=c.getDimensions();var h,f;var e,d;switch(b.direction){case"top-left":h=f=e=d=0;break;case"top-right":h=g.width;f=d=0;e=-g.width;break;case"bottom-left":h=e=0;f=g.height;d=-g.height;break;case"bottom-right":h=g.width;f=g.height;e=-g.width;d=-g.height;break;case"center":h=g.width/2;f=g.height/2;e=-g.width/2;d=-g.height/2;break}return new Effect.Move(c,{x:h,y:f,duration:0.01,beforeSetup:function(i){i.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(i){new Effect.Parallel([new Effect.Opacity(i.element,{sync:true,to:1,from:0,transition:b.opacityTransition}),new Effect.Move(i.element,{x:e,y:d,sync:true,transition:b.moveTransition}),new Effect.Scale(i.element,100,{scaleMode:{originalHeight:g.height,originalWidth:g.width},sync:true,scaleFrom:window.opera?1:0,transition:b.scaleTransition,restoreAfterFinish:true})],Object.extend({beforeSetup:function(j){j.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(j){j.effects[0].element.undoClipping().undoPositioned().setStyle(a)}},b))}})};Effect.Shrink=function(c){c=$(c);var b=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},arguments[1]||{});var a={top:c.style.top,left:c.style.left,height:c.style.height,width:c.style.width,opacity:c.getInlineOpacity()};var f=c.getDimensions();var e,d;switch(b.direction){case"top-left":e=d=0;break;case"top-right":e=f.width;d=0;break;case"bottom-left":e=0;d=f.height;break;case"bottom-right":e=f.width;d=f.height;break;case"center":e=f.width/2;d=f.height/2;break}return new Effect.Parallel([new Effect.Opacity(c,{sync:true,to:0,from:1,transition:b.opacityTransition}),new Effect.Scale(c,window.opera?1:0,{sync:true,transition:b.scaleTransition,restoreAfterFinish:true}),new Effect.Move(c,{x:e,y:d,sync:true,transition:b.moveTransition})],Object.extend({beforeStartInternal:function(g){g.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(g){g.effects[0].element.hide().undoClipping().undoPositioned().setStyle(a)}},b))};Effect.Pulsate=function(c){c=$(c);var b=arguments[1]||{},a=c.getInlineOpacity(),e=b.transition||Effect.Transitions.linear,d=function(f){return 1-e((-Math.cos((f*(b.pulses||5)*2)*Math.PI)/2)+0.5)};return new Effect.Opacity(c,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(f){f.element.setStyle({opacity:a})}},b),{transition:d}))};Effect.Fold=function(b){b=$(b);var a={top:b.style.top,left:b.style.left,width:b.style.width,height:b.style.height};b.makeClipping();return new Effect.Scale(b,5,Object.extend({scaleContent:false,scaleX:false,afterFinishInternal:function(c){new Effect.Scale(b,1,{scaleContent:false,scaleY:false,afterFinishInternal:function(d){d.element.hide().undoClipping().setStyle(a)}})}},arguments[1]||{}))};Effect.Morph=Class.create(Effect.Base,{initialize:function(c){this.element=$(c);if(!this.element){throw (Effect._elementDoesNotExistError)}var a=Object.extend({style:{}},arguments[1]||{});if(!Object.isString(a.style)){this.style=$H(a.style)}else{if(a.style.include(":")){this.style=a.style.parseStyle()}else{this.element.addClassName(a.style);this.style=$H(this.element.getStyles());this.element.removeClassName(a.style);var b=this.element.getStyles();this.style=this.style.reject(function(d){return d.value==b[d.key]});a.afterFinishInternal=function(d){d.element.addClassName(d.options.style);d.transforms.each(function(e){d.element.style[e.style]=""})}}}this.start(a)},setup:function(){function a(b){if(!b||["rgba(0, 0, 0, 0)","transparent"].include(b)){b="#ffffff"}b=b.parseColor();return $R(0,2).map(function(c){return parseInt(b.slice(c*2+1,c*2+3),16)})}this.transforms=this.style.map(function(g){var f=g[0],e=g[1],d=null;if(e.parseColor("#zzzzzz")!="#zzzzzz"){e=e.parseColor();d="color"}else{if(f=="opacity"){e=parseFloat(e);if(Prototype.Browser.IE&&(!this.element.currentStyle.hasLayout)){this.element.setStyle({zoom:1})}}else{if(Element.CSS_LENGTH.test(e)){var c=e.match(/^([\+\-]?[0-9\.]+)(.*)$/);e=parseFloat(c[1]);d=(c.length==3)?c[2]:null}}}var b=this.element.getStyle(f);return{style:f.camelize(),originalValue:d=="color"?a(b):parseFloat(b||0),targetValue:d=="color"?a(e):e,unit:d}}.bind(this)).reject(function(b){return((b.originalValue==b.targetValue)||(b.unit!="color"&&(isNaN(b.originalValue)||isNaN(b.targetValue))))})},update:function(a){var d={},b,c=this.transforms.length;while(c--){d[(b=this.transforms[c]).style]=b.unit=="color"?"#"+(Math.round(b.originalValue[0]+(b.targetValue[0]-b.originalValue[0])*a)).toColorPart()+(Math.round(b.originalValue[1]+(b.targetValue[1]-b.originalValue[1])*a)).toColorPart()+(Math.round(b.originalValue[2]+(b.targetValue[2]-b.originalValue[2])*a)).toColorPart():(b.originalValue+(b.targetValue-b.originalValue)*a).toFixed(3)+(b.unit===null?"":b.unit)}this.element.setStyle(d,true)}});Effect.Transform=Class.create({initialize:function(a){this.tracks=[];this.options=arguments[1]||{};this.addTracks(a)},addTracks:function(a){a.each(function(b){b=$H(b);var c=b.values().first();this.tracks.push($H({ids:b.keys().first(),effect:Effect.Morph,options:{style:c}}))}.bind(this));return this},play:function(){return new Effect.Parallel(this.tracks.map(function(a){var d=a.get("ids"),c=a.get("effect"),b=a.get("options");var e=[$(d)||$$(d)].flatten();return e.map(function(f){return new c(f,Object.extend({sync:true},b))})}).flatten(),this.options)}});Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex");Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$/;String.__parseStyleElement=document.createElement("div");String.prototype.parseStyle=function(){var b,a=$H();if(Prototype.Browser.WebKit){b=new Element("div",{style:this}).style}else{String.__parseStyleElement.innerHTML='<div style="'+this+'"></div>';b=String.__parseStyleElement.childNodes[0].style}Element.CSS_PROPERTIES.each(function(c){if(b[c]){a.set(c,b[c])}});if(Prototype.Browser.IE&&this.include("opacity")){a.set("opacity",this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1])}return a};if(document.defaultView&&document.defaultView.getComputedStyle){Element.getStyles=function(b){var a=document.defaultView.getComputedStyle($(b),null);return Element.CSS_PROPERTIES.inject({},function(c,d){c[d]=a[d];return c})}}else{Element.getStyles=function(b){b=$(b);var a=b.currentStyle,c;c=Element.CSS_PROPERTIES.inject({},function(d,e){d[e]=a[e];return d});if(!c.opacity){c.opacity=b.getOpacity()}return c}}Effect.Methods={morph:function(a,b){a=$(a);new Effect.Morph(a,Object.extend({style:b},arguments[2]||{}));return a},visualEffect:function(c,e,b){c=$(c);var d=e.dasherize().camelize(),a=d.charAt(0).toUpperCase()+d.substring(1);new Effect[a](c,b);return c},highlight:function(b,a){b=$(b);new Effect.Highlight(b,a);return b}};$w("fade appear grow shrink fold blindUp blindDown slideUp slideDown pulsate shake puff squish switchOff dropOut").each(function(a){Effect.Methods[a]=function(c,b){c=$(c);Effect[a.charAt(0).toUpperCase()+a.substring(1)](c,b);return c}});$w("getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles").each(function(a){Effect.Methods[a]=Element[a]});Element.addMethods(Effect.Methods);if(typeof Effect=="undefined"){throw ("controls.js requires including script.aculo.us' effects.js library")}var Autocompleter={};Autocompleter.Base=Class.create({baseInitialize:function(b,c,a){b=$(b);this.element=b;this.update=$(c);this.hasFocus=false;this.changed=false;this.active=false;this.index=0;this.entryCount=0;this.oldElementValue=this.element.value;if(this.setOptions){this.setOptions(a)}else{this.options=a||{}}this.options.paramName=this.options.paramName||this.element.name;this.options.tokens=this.options.tokens||[];this.options.frequency=this.options.frequency||0.4;this.options.minChars=this.options.minChars||1;this.options.onShow=this.options.onShow||function(d,e){if(!e.style.position||e.style.position=="absolute"){e.style.position="absolute";Position.clone(d,e,{setHeight:false,offsetTop:d.offsetHeight})}Effect.Appear(e,{duration:0.15})};this.options.onHide=this.options.onHide||function(d,e){new Effect.Fade(e,{duration:0.15})};if(typeof(this.options.tokens)=="string"){this.options.tokens=new Array(this.options.tokens)}if(!this.options.tokens.include("\n")){this.options.tokens.push("\n")}this.observer=null;this.element.setAttribute("autocomplete","off");Element.hide(this.update);Event.observe(this.element,"blur",this.onBlur.bindAsEventListener(this));Event.observe(this.element,"keydown",this.onKeyPress.bindAsEventListener(this))},show:function(){if(Element.getStyle(this.update,"display")=="none"){this.options.onShow(this.element,this.update)}if(!this.iefix&&(Prototype.Browser.IE)&&(Element.getStyle(this.update,"position")=="absolute")){new Insertion.After(this.update,'<iframe id="'+this.update.id+'_iefix" style="display:none;position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);" src="javascript:false;" frameborder="0" scrolling="no"></iframe>');this.iefix=$(this.update.id+"_iefix")}if(this.iefix){setTimeout(this.fixIEOverlapping.bind(this),50)}},fixIEOverlapping:function(){Position.clone(this.update,this.iefix,{setTop:(!this.update.style.height)});this.iefix.style.zIndex=1;this.update.style.zIndex=2;Element.show(this.iefix)},hide:function(){this.stopIndicator();if(Element.getStyle(this.update,"display")!="none"){this.options.onHide(this.element,this.update)}if(this.iefix){Element.hide(this.iefix)}},startIndicator:function(){if(this.options.indicator){Element.show(this.options.indicator)}},stopIndicator:function(){if(this.options.indicator){Element.hide(this.options.indicator)}},onKeyPress:function(a){if(this.active){switch(a.keyCode){case Event.KEY_TAB:case Event.KEY_RETURN:this.selectEntry();Event.stop(a);case Event.KEY_ESC:this.hide();this.active=false;Event.stop(a);return;case Event.KEY_LEFT:case Event.KEY_RIGHT:return;case Event.KEY_UP:this.markPrevious();this.render();Event.stop(a);return;case Event.KEY_DOWN:this.markNext();this.render();Event.stop(a);return}}else{if(a.keyCode==Event.KEY_TAB||a.keyCode==Event.KEY_RETURN||(Prototype.Browser.WebKit>0&&a.keyCode==0)){return}}this.changed=true;this.hasFocus=true;if(this.observer){clearTimeout(this.observer)}this.observer=setTimeout(this.onObserverEvent.bind(this),this.options.frequency*1000)},activate:function(){this.changed=false;this.hasFocus=true;this.getUpdatedChoices()},onHover:function(b){var a=Event.findElement(b,"LI");if(this.index!=a.autocompleteIndex){this.index=a.autocompleteIndex;this.render()}Event.stop(b)},onClick:function(b){var a=Event.findElement(b,"LI");this.index=a.autocompleteIndex;this.selectEntry();this.hide()},onBlur:function(a){setTimeout(this.hide.bind(this),250);this.hasFocus=false;this.active=false},render:function(){if(this.entryCount>0){for(var a=0;a<this.entryCount;a++){this.index==a?Element.addClassName(this.getEntry(a),"selected"):Element.removeClassName(this.getEntry(a),"selected")}if(this.hasFocus){this.show();this.active=true}}else{this.active=false;this.hide()}},markPrevious:function(){if(this.index>0){this.index--}else{this.index=this.entryCount-1}this.getEntry(this.index).scrollIntoView(true)},markNext:function(){if(this.index<this.entryCount-1){this.index++}else{this.index=0}this.getEntry(this.index).scrollIntoView(false)},getEntry:function(a){return this.update.firstChild.childNodes[a]},getCurrentEntry:function(){return this.getEntry(this.index)},selectEntry:function(){this.active=false;this.updateElement(this.getCurrentEntry())},updateElement:function(f){if(this.options.updateElement){this.options.updateElement(f);return}var d="";if(this.options.select){var a=$(f).select("."+this.options.select)||[];if(a.length>0){d=Element.collectTextNodes(a[0],this.options.select)}}else{d=Element.collectTextNodesIgnoreClass(f,"informal")}var c=this.getTokenBounds();if(c[0]!=-1){var e=this.element.value.substr(0,c[0]);var b=this.element.value.substr(c[0]).match(/^\s+/);if(b){e+=b[0]}this.element.value=e+d+this.element.value.substr(c[1])}else{this.element.value=d}this.oldElementValue=this.element.value;this.element.focus();if(this.options.afterUpdateElement){this.options.afterUpdateElement(this.element,f)}},updateChoices:function(c){if(!this.changed&&this.hasFocus){this.update.innerHTML=c;Element.cleanWhitespace(this.update);Element.cleanWhitespace(this.update.down());if(this.update.firstChild&&this.update.down().childNodes){this.entryCount=this.update.down().childNodes.length;for(var a=0;a<this.entryCount;a++){var b=this.getEntry(a);b.autocompleteIndex=a;this.addObservers(b)}}else{this.entryCount=0}this.stopIndicator();this.index=0;if(this.entryCount==1&&this.options.autoSelect){this.selectEntry();this.hide()}else{this.render()}}},addObservers:function(a){Event.observe(a,"mouseover",this.onHover.bindAsEventListener(this));Event.observe(a,"click",this.onClick.bindAsEventListener(this))},onObserverEvent:function(){this.changed=false;this.tokenBounds=null;if(this.getToken().length>=this.options.minChars){this.getUpdatedChoices()}else{this.active=false;this.hide()}this.oldElementValue=this.element.value},getToken:function(){var a=this.getTokenBounds();return this.element.value.substring(a[0],a[1]).strip()},getTokenBounds:function(){if(null!=this.tokenBounds){return this.tokenBounds}var e=this.element.value;if(e.strip().empty()){return[-1,0]}var f=arguments.callee.getFirstDifferencePos(e,this.oldElementValue);var h=(f==this.oldElementValue.length?1:0);var d=-1,c=e.length;var g;for(var b=0,a=this.options.tokens.length;b<a;++b){g=e.lastIndexOf(this.options.tokens[b],f+h-1);if(g>d){d=g}g=e.indexOf(this.options.tokens[b],f+h);if(-1!=g&&g<c){c=g}}return(this.tokenBounds=[d+1,c])}});Autocompleter.Base.prototype.getTokenBounds.getFirstDifferencePos=function(c,a){var d=Math.min(c.length,a.length);for(var b=0;b<d;++b){if(c[b]!=a[b]){return b}}return d};Ajax.Autocompleter=Class.create(Autocompleter.Base,{initialize:function(c,d,b,a){this.baseInitialize(c,d,a);this.options.asynchronous=true;this.options.onComplete=this.onComplete.bind(this);this.options.defaultParams=this.options.parameters||null;this.url=b},getUpdatedChoices:function(){this.startIndicator();var a=encodeURIComponent(this.options.paramName)+"="+encodeURIComponent(this.getToken());this.options.parameters=this.options.callback?this.options.callback(this.element,a):a;if(this.options.defaultParams){this.options.parameters+="&"+this.options.defaultParams}new Ajax.Request(this.url,this.options)},onComplete:function(a){this.updateChoices(a.responseText)}});Autocompleter.Local=Class.create(Autocompleter.Base,{initialize:function(b,d,c,a){this.baseInitialize(b,d,a);this.options.array=c},getUpdatedChoices:function(){this.updateChoices(this.options.selector(this))},setOptions:function(a){this.options=Object.extend({choices:10,partialSearch:true,partialChars:2,ignoreCase:true,fullSearch:false,selector:function(b){var d=[];var c=[];var h=b.getToken();var g=0;for(var e=0;e<b.options.array.length&&d.length<b.options.choices;e++){var f=b.options.array[e];var j=b.options.ignoreCase?f.toLowerCase().indexOf(h.toLowerCase()):f.indexOf(h);while(j!=-1){if(j==0&&f.length!=h.length){d.push("<li><strong>"+f.substr(0,h.length)+"</strong>"+f.substr(h.length)+"</li>");break}else{if(h.length>=b.options.partialChars&&b.options.partialSearch&&j!=-1){if(b.options.fullSearch||/\s/.test(f.substr(j-1,1))){c.push("<li>"+f.substr(0,j)+"<strong>"+f.substr(j,h.length)+"</strong>"+f.substr(j+h.length)+"</li>");break}}}j=b.options.ignoreCase?f.toLowerCase().indexOf(h.toLowerCase(),j+1):f.indexOf(h,j+1)}}if(c.length){d=d.concat(c.slice(0,b.options.choices-d.length))}return"<ul>"+d.join("")+"</ul>"}},a||{})}});Field.scrollFreeActivate=function(a){setTimeout(function(){Field.activate(a)},1)};Ajax.InPlaceEditor=Class.create({initialize:function(c,b,a){this.url=b;this.element=c=$(c);this.prepareOptions();this._controls={};arguments.callee.dealWithDeprecatedOptions(a);Object.extend(this.options,a||{});if(!this.options.formId&&this.element.id){this.options.formId=this.element.id+"-inplaceeditor";if($(this.options.formId)){this.options.formId=""}}if(this.options.externalControl){this.options.externalControl=$(this.options.externalControl)}if(!this.options.externalControl){this.options.externalControlOnly=false}this._originalBackground=this.element.getStyle("background-color")||"transparent";this.element.title=this.options.clickToEditText;this._boundCancelHandler=this.handleFormCancellation.bind(this);this._boundComplete=(this.options.onComplete||Prototype.emptyFunction).bind(this);this._boundFailureHandler=this.handleAJAXFailure.bind(this);this._boundSubmitHandler=this.handleFormSubmission.bind(this);this._boundWrapperHandler=this.wrapUp.bind(this);this.registerListeners()},checkForEscapeOrReturn:function(a){if(!this._editing||a.ctrlKey||a.altKey||a.shiftKey){return}if(Event.KEY_ESC==a.keyCode){this.handleFormCancellation(a)}else{if(Event.KEY_RETURN==a.keyCode){this.handleFormSubmission(a)}}},createControl:function(g,c,b){var e=this.options[g+"Control"];var f=this.options[g+"Text"];if("button"==e){var a=document.createElement("input");a.type="submit";a.value=f;a.className="editor_"+g+"_button";if("cancel"==g){a.onclick=this._boundCancelHandler}this._form.appendChild(a);this._controls[g]=a}else{if("link"==e){var d=document.createElement("a");d.href="#";d.appendChild(document.createTextNode(f));d.onclick="cancel"==g?this._boundCancelHandler:this._boundSubmitHandler;d.className="editor_"+g+"_link";if(b){d.className+=" "+b}this._form.appendChild(d);this._controls[g]=d}}},createEditField:function(){var c=(this.options.loadTextURL?this.options.loadingText:this.getText());var b;if(1>=this.options.rows&&!/\r|\n/.test(this.getText())){b=document.createElement("input");b.type="text";var a=this.options.size||this.options.cols||0;if(0<a){b.size=a}}else{b=document.createElement("textarea");b.rows=(1>=this.options.rows?this.options.autoRows:this.options.rows);b.cols=this.options.cols||40}b.name=this.options.paramName;b.value=c;b.className="editor_field";if(this.options.submitOnBlur){b.onblur=this._boundSubmitHandler}this._controls.editor=b;if(this.options.loadTextURL){this.loadExternalText()}this._form.appendChild(this._controls.editor)},createForm:function(){var b=this;function a(d,e){var c=b.options["text"+d+"Controls"];if(!c||e===false){return}b._form.appendChild(document.createTextNode(c))}this._form=$(document.createElement("form"));this._form.id=this.options.formId;this._form.addClassName(this.options.formClassName);this._form.onsubmit=this._boundSubmitHandler;this.createEditField();if("textarea"==this._controls.editor.tagName.toLowerCase()){this._form.appendChild(document.createElement("br"))}if(this.options.onFormCustomization){this.options.onFormCustomization(this,this._form)}a("Before",this.options.okControl||this.options.cancelControl);this.createControl("ok",this._boundSubmitHandler);a("Between",this.options.okControl&&this.options.cancelControl);this.createControl("cancel",this._boundCancelHandler,"editor_cancel");a("After",this.options.okControl||this.options.cancelControl)},destroy:function(){if(this._oldInnerHTML){this.element.innerHTML=this._oldInnerHTML}this.leaveEditMode();this.unregisterListeners()},enterEditMode:function(a){if(this._saving||this._editing){return}this._editing=true;this.triggerCallback("onEnterEditMode");if(this.options.externalControl){this.options.externalControl.hide()}this.element.hide();this.createForm();this.element.parentNode.insertBefore(this._form,this.element);if(!this.options.loadTextURL){this.postProcessEditField()}if(a){Event.stop(a)}},enterHover:function(a){if(this.options.hoverClassName){this.element.addClassName(this.options.hoverClassName)}if(this._saving){return}this.triggerCallback("onEnterHover")},getText:function(){return this.element.innerHTML.unescapeHTML()},handleAJAXFailure:function(a){this.triggerCallback("onFailure",a);if(this._oldInnerHTML){this.element.innerHTML=this._oldInnerHTML;this._oldInnerHTML=null}},handleFormCancellation:function(a){this.wrapUp();if(a){Event.stop(a)}},handleFormSubmission:function(d){var b=this._form;var c=$F(this._controls.editor);this.prepareSubmission();var f=this.options.callback(b,c)||"";if(Object.isString(f)){f=f.toQueryParams()}f.editorId=this.element.id;if(this.options.htmlResponse){var a=Object.extend({evalScripts:true},this.options.ajaxOptions);Object.extend(a,{parameters:f,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler});new Ajax.Updater({success:this.element},this.url,a)}else{var a=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(a,{parameters:f,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler});new Ajax.Request(this.url,a)}if(d){Event.stop(d)}},leaveEditMode:function(){this.element.removeClassName(this.options.savingClassName);this.removeForm();this.leaveHover();this.element.style.backgroundColor=this._originalBackground;this.element.show();if(this.options.externalControl){this.options.externalControl.show()}this._saving=false;this._editing=false;this._oldInnerHTML=null;this.triggerCallback("onLeaveEditMode")},leaveHover:function(a){if(this.options.hoverClassName){this.element.removeClassName(this.options.hoverClassName)}if(this._saving){return}this.triggerCallback("onLeaveHover")},loadExternalText:function(){this._form.addClassName(this.options.loadingClassName);this._controls.editor.disabled=true;var a=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(a,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(c){this._form.removeClassName(this.options.loadingClassName);var b=c.responseText;if(this.options.stripLoadedTextTags){b=b.stripTags()}this._controls.editor.value=b;this._controls.editor.disabled=false;this.postProcessEditField()}.bind(this),onFailure:this._boundFailureHandler});new Ajax.Request(this.options.loadTextURL,a)},postProcessEditField:function(){var a=this.options.fieldPostCreation;if(a){$(this._controls.editor)["focus"==a?"focus":"activate"]()}},prepareOptions:function(){this.options=Object.clone(Ajax.InPlaceEditor.DefaultOptions);Object.extend(this.options,Ajax.InPlaceEditor.DefaultCallbacks);[this._extraDefaultOptions].flatten().compact().each(function(a){Object.extend(this.options,a)}.bind(this))},prepareSubmission:function(){this._saving=true;this.removeForm();this.leaveHover();this.showSaving()},registerListeners:function(){this._listeners={};var a;$H(Ajax.InPlaceEditor.Listeners).each(function(b){a=this[b.value].bind(this);this._listeners[b.key]=a;if(!this.options.externalControlOnly){this.element.observe(b.key,a)}if(this.options.externalControl){this.options.externalControl.observe(b.key,a)}}.bind(this))},removeForm:function(){if(!this._form){return}this._form.remove();this._form=null;this._controls={}},showSaving:function(){this._oldInnerHTML=this.element.innerHTML;this.element.innerHTML=this.options.savingText;this.element.addClassName(this.options.savingClassName);this.element.style.backgroundColor=this._originalBackground;this.element.show()},triggerCallback:function(b,a){if("function"==typeof this.options[b]){this.options[b](this,a)}},unregisterListeners:function(){$H(this._listeners).each(function(a){if(!this.options.externalControlOnly){this.element.stopObserving(a.key,a.value)}if(this.options.externalControl){this.options.externalControl.stopObserving(a.key,a.value)}}.bind(this))},wrapUp:function(a){this.leaveEditMode();this._boundComplete(a,this.element)}});Object.extend(Ajax.InPlaceEditor.prototype,{dispose:Ajax.InPlaceEditor.prototype.destroy});Ajax.InPlaceCollectionEditor=Class.create(Ajax.InPlaceEditor,{initialize:function($super,c,b,a){this._extraDefaultOptions=Ajax.InPlaceCollectionEditor.DefaultOptions;$super(c,b,a)},createEditField:function(){var a=document.createElement("select");a.name=this.options.paramName;a.size=1;this._controls.editor=a;this._collection=this.options.collection||[];if(this.options.loadCollectionURL){this.loadCollection()}else{this.checkForExternalText()}this._form.appendChild(this._controls.editor)},loadCollection:function(){this._form.addClassName(this.options.loadingClassName);this.showLoadingText(this.options.loadingCollectionText);var options=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(options,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(transport){var js=transport.responseText.strip();if(!/^\[.*\]$/.test(js)){throw ("Server returned an invalid collection representation.")}this._collection=eval(js);this.checkForExternalText()}.bind(this),onFailure:this.onFailure});new Ajax.Request(this.options.loadCollectionURL,options)},showLoadingText:function(b){this._controls.editor.disabled=true;var a=this._controls.editor.firstChild;if(!a){a=document.createElement("option");a.value="";this._controls.editor.appendChild(a);a.selected=true}a.update((b||"").stripScripts().stripTags())},checkForExternalText:function(){this._text=this.getText();if(this.options.loadTextURL){this.loadExternalText()}else{this.buildOptionList()}},loadExternalText:function(){this.showLoadingText(this.options.loadingText);var a=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(a,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(b){this._text=b.responseText.strip();this.buildOptionList()}.bind(this),onFailure:this.onFailure});new Ajax.Request(this.options.loadTextURL,a)},buildOptionList:function(){this._form.removeClassName(this.options.loadingClassName);this._collection=this._collection.map(function(d){return 2===d.length?d:[d,d].flatten()});var b=("value" in this.options)?this.options.value:this._text;var a=this._collection.any(function(d){return d[0]==b}.bind(this));this._controls.editor.update("");var c;this._collection.each(function(e,d){c=document.createElement("option");c.value=e[0];c.selected=a?e[0]==b:0==d;c.appendChild(document.createTextNode(e[1]));this._controls.editor.appendChild(c)}.bind(this));this._controls.editor.disabled=false;Field.scrollFreeActivate(this._controls.editor)}});Ajax.InPlaceEditor.prototype.initialize.dealWithDeprecatedOptions=function(a){if(!a){return}function b(c,d){if(c in a||d===undefined){return}a[c]=d}b("cancelControl",(a.cancelLink?"link":(a.cancelButton?"button":a.cancelLink==a.cancelButton==false?false:undefined)));b("okControl",(a.okLink?"link":(a.okButton?"button":a.okLink==a.okButton==false?false:undefined)));b("highlightColor",a.highlightcolor);b("highlightEndColor",a.highlightendcolor)};Object.extend(Ajax.InPlaceEditor,{DefaultOptions:{ajaxOptions:{},autoRows:3,cancelControl:"link",cancelText:"cancel",clickToEditText:"Click to edit",externalControl:null,externalControlOnly:false,fieldPostCreation:"activate",formClassName:"inplaceeditor-form",formId:null,highlightColor:"#ffff99",highlightEndColor:"#ffffff",hoverClassName:"",htmlResponse:true,loadingClassName:"inplaceeditor-loading",loadingText:"Loading...",okControl:"button",okText:"ok",paramName:"value",rows:1,savingClassName:"inplaceeditor-saving",savingText:"Saving...",size:0,stripLoadedTextTags:false,submitOnBlur:false,textAfterControls:"",textBeforeControls:"",textBetweenControls:""},DefaultCallbacks:{callback:function(a){return Form.serialize(a)},onComplete:function(b,a){new Effect.Highlight(a,{startcolor:this.options.highlightColor,keepBackgroundImage:true})},onEnterEditMode:null,onEnterHover:function(a){a.element.style.backgroundColor=a.options.highlightColor;if(a._effect){a._effect.cancel()}},onFailure:function(b,a){alert("Error communication with the server: "+b.responseText.stripTags())},onFormCustomization:null,onLeaveEditMode:null,onLeaveHover:function(a){a._effect=new Effect.Highlight(a.element,{startcolor:a.options.highlightColor,endcolor:a.options.highlightEndColor,restorecolor:a._originalBackground,keepBackgroundImage:true})}},Listeners:{click:"enterEditMode",keydown:"checkForEscapeOrReturn",mouseover:"enterHover",mouseout:"leaveHover"}});Ajax.InPlaceCollectionEditor.DefaultOptions={loadingCollectionText:"Loading options..."};Form.Element.DelayedObserver=Class.create({initialize:function(b,a,c){this.delay=a||0.5;this.element=$(b);this.callback=c;this.timer=null;this.lastValue=$F(this.element);Event.observe(this.element,"keyup",this.delayedListener.bindAsEventListener(this))},delayedListener:function(a){if(this.lastValue==$F(this.element)){return}if(this.timer){clearTimeout(this.timer)}this.timer=setTimeout(this.onTimerEvent.bind(this),this.delay*1000);this.lastValue=$F(this.element)},onTimerEvent:function(){this.timer=null;this.callback(this.element,$F(this.element))}});var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function encode64(c){var a="";var k,h,f;var j,g,e,d;var b=0;do{k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a=a+keyStr.charAt(j)+keyStr.charAt(g)+keyStr.charAt(e)+keyStr.charAt(d)}while(b<c.length);return a}function decode64(c){var a="";var k,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{j=keyStr.indexOf(c.charAt(b++));g=keyStr.indexOf(c.charAt(b++));e=keyStr.indexOf(c.charAt(b++));d=keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a=a+String.fromCharCode(k);if(e!=64){a=a+String.fromCharCode(h)}if(d!=64){a=a+String.fromCharCode(f)}}while(b<c.length);return a}var Behavior={triggers:[],register:function(a){this.triggers.push(a)},start:function(){document.observe("dom:loaded",this.apply.bind(this,null))},apply:function(a){this.triggers.each(function(b){for(selector in b){var c=a==null?$$(selector):$(a).select(selector);if(!c){continue}c.each(function(d){b[selector](d)})}})}};Behavior.start();var Cookie={version:"0.7",cookies:{},_each:function(a){$H(this.cookies).each(a)},getAll:function(){this.cookies={};$A(document.cookie.split("; ")).each(function(b){var a=b.indexOf("=");this.cookies[b.substring(0,a)]=unescape(b.substring(a+1,b.length))}.bind(this));return this.cookies},read:function(){var b=$A(arguments),a=[];this.getAll();b.each(function(c){if(this.cookies[c]){a.push(this.cookies[c])}else{a.push(null)}}.bind(this));return a.length>1?a:a[0]},write:function(b,a){if(b.constructor==Object&&b.name){b=[b]}if(b.constructor==Array){$A(b).each(function(c){this._write(c.name,c.value,c.expires,c.path,c.domain)}.bind(this))}else{a=a||{expires:false,path:"",domain:""};for(name in b){this._write(name,b[name],a.expires,a.path,a.domain)}}},_write:function(b,e,a,f,d){if(b.indexOf("=")!=-1){return}var c=b+"="+escape(e);if(a){c+="; expires="+a.toGMTString()}if(f){c+="; path="+f}if(d){c+="; domain="+d}document.cookie=c},erase:function(a){var b={};$A(arguments).each(function(c){b[c]=""});this.write(b,{expires:(new Date((new Date()).getTime()-100000000000)),path:"/"});this.getAll()},eraseAll:function(){this.erase.apply(this,$H(this.getAll()).keys())}};Object.extend(Cookie,{get:Cookie.read,set:Cookie.write,add:Cookie.read,remove:Cookie.erase,removeAll:Cookie.eraseAll,wipe:Cookie.erase,wipeAll:Cookie.eraseAll,destroy:Cookie.erase,destroyAll:Cookie.eraseAll});var DateFormat={autoParse:function(){$$("span.timestamp").each(function(d){if(d.hasClassName("parsed")){return}var c=Date.parseUTC(d.innerHTML);var a=d.getAttribute("rel");var b;if(a=="words"){b=c.timeAgoInWords()}else{if(a=="words_old"){b=c.timeAgoInWords();b.replace("ago","old")}else{b=c.strftime(a)}}d.update(b).addClassName("parsed")})}};Object.extend(Date.prototype,{strftime:function(f){var b=this.getDay(),e=this.getMonth();var a=this.getHours(),c=this.getMinutes();function d(h){return h.toPaddedString(2)}function g(h){if(h=="00"){return"12"}if(h=="0"){return"12"}return h}return f.gsub(/\%([aAbBcdHImMpSwyY])/,function(h){switch(h[1]){case"a":return $w("Sun Mon Tue Wed Thu Fri Sat")[b];case"A":return $w("Sunday Monday Tuesday Wednesday Thursday Friday Saturday")[b];case"b":return $w("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec")[e];case"B":return $w("January February March April May June July August September October November December")[e];case"c":return this.toString();case"d":return d(this.getDate());case"H":return d(a);case"I":return g(d((a+12)%12));case"m":return g(d(e+1));case"M":return d(c);case"p":return a>11?"PM":"AM";case"S":return d(this.getSeconds());case"w":return b+1;case"y":return d(this.getFullYear()%100);case"Y":return this.getFullYear().toString()}}.bind(this))},timeAgoInWords:function(){var a=(arguments.length>0)?arguments[1]:new Date();return Date.distanceOfTimeInWords(this,a,arguments[2])}});Object.extend(Date,{strftimeFormats:{time:"%I:%M %p",day:"%B %d",compact:"%b %d",dayName:"%A"},differenceFromNow:function(d){var c=Math.ceil((new Date().getTime()-d.getTime())/1000);var a=Math.floor(c/3600).toPaddedString(2);c=Math.floor(c%3600);var b=Math.floor(c/60).toPaddedString(2);c=(c%60).toPaddedString(2);return[a,b,c]},parseUTC:function(b){var a=new Date(b);var c=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds());return new Date(c)},distanceOfTimeInWords:function(d,b,c){var f=parseInt((b.getTime()-d.getTime())/1000);if(f<60){return"less than a minute ago"}else{if(f<120){return"about a minute ago"}else{if(f<(45*60)){return(parseInt(f/60)).toString()+" minutes ago"}else{if(f<(120*60)){return"about an hour ago"}else{if(f<(24*60*60)){return"about "+(parseInt(f/3600)).toString()+" hours ago"}else{if(f<(48*60*60)){return"1 day ago"}else{var e=(parseInt(f/86400)).toString();if(e>5){var a="%B %d";if(b.getYear()!=d.getYear()){a+=", %Y"}if(c){a+=" %I:%M %p"}return d.strftime(a)}else{return e+" days ago"}}}}}}}}});Object.extend(Number.prototype,{seconds:function(){return this*1000},minutes:function(){return this*(60).seconds()},hours:function(){return this*(60).minutes()},days:function(){return this*(24).hours()},weeks:function(a){return this*(7).days()},fortnights:function(){return this*(2).weeks()},months:function(){return this*(30).days()},years:function(){return parseInt(this*(365.25).days())},since:function(a){a=a||new Date();if(a instanceof Date){a=a.getTime()}return this+a},ago:function(a){a=a||new Date();if(a instanceof Date){a=a.getTime()}return a-this},toDate:function(){var a=new Date();a.setTime(this);return a}});Object.extend(Number.prototype,{second:Number.prototype.seconds,minute:Number.prototype.minutes,hour:Number.prototype.hours,day:Number.prototype.days,week:Number.prototype.weeks,fortnight:Number.prototype.fortnights,month:Number.prototype.months,year:Number.prototype.years,from_now:Number.prototype.since,fromNow:Number.prototype.since,until:Number.prototype.ago});Element.addMethods({replaceClassName:function(a,c,b){a=$(a);a.removeClassName(c);a.addClassName(b);return a}});var Opentip={Version:"1.4.4",REQUIRED_PROTOTYPE_VERSION:"1.6.0",REQUIRED_SCRIPTACULOUS_VERSION:"1.8.0",STICKS_OUT_TOP:1,STICKS_OUT_BOTTOM:2,STICKS_OUT_LEFT:1,STICKS_OUT_RIGHT:2,cached:{},debugging:false,load:function(){function a(b){var c=b.split(".");return parseInt(c[0])*100000+parseInt(c[1])*1000+parseInt(c[2])}if((typeof Prototype==="undefined")||(typeof Element==="undefined")||(typeof Element.Methods==="undefined")||(a(Prototype.Version)<a(Opentip.REQUIRED_PROTOTYPE_VERSION))){throw ("Opentip requires the Prototype JavaScript framework >= "+Opentip.REQUIRED_PROTOTYPE_VERSION)}Opentip.useCss3Transitions=Opentip.supports("transition");Opentip.useScriptaculousTransitions=!Opentip.useCss3Transitions;if(Opentip.useCss3Transitions){Opentip.debug("Using CSS3 transitions.")}if((typeof Scriptaculous==="undefined")||(typeof Effect==="undefined")||(a(Scriptaculous.Version)<a(Opentip.REQUIRED_SCRIPTACULOUS_VERSION))){Opentip.debug("No scriptaculous available. Disabling scriptaculous transitions.");Opentip.useScriptaculousTransitions=false}},debug:function(){if(this.debugging&&typeof console!=="undefined"&&typeof console.debug!=="undefined"){console.debug.apply(console,arguments)}},IEVersion:function(){if(typeof Opentip.cached.IEVersion!=="undefined"){return Opentip.cached.IEVersion}if(Prototype.Browser.IE){var a=navigator.userAgent.match("MSIE ([\\d.]+)");var b=a?(parseFloat(a[1])):false}else{b=false}Opentip.cached.IEVersion=b;return b},objectIsEvent:function(a){return(typeof(a)=="object"&&a.type&&a.screenX)},useIFrame:function(){return Opentip.IEVersion()?(Opentip.IEVersion()<=6):false},lastTipId:1,lastZIndex:100,documentIsLoaded:false,postponeCreation:function(a){if(Opentip.documentIsLoaded||!Opentip.IEVersion()){a()}else{Event.observe(window,"load",a)}},element:function(d,a,c){if(Object.isArray(a)||Object.isString(a)||Object.isElement(a)){c=a;a=null}var b=new Element(d,a||{});if(a&&a.className){a.className.split(" ").each(function(e){b.addClassName(e)})}if(c){if(Object.isArray(c)){c.each(function(e){b.insert({bottom:e})})}else{b.insert({bottom:c})}}return b},sanitizePosition:function(b){var a;if(Object.isArray(b)){var c="";if(b[0]=="center"){c=b[1]}else{if(b[1]=="middle"){c=b[0]}else{c=b[1]+b[0].capitalize()}}if(Opentip.position[c]===undefined){throw"Unknown position: "+c}a=Opentip.position[c]}else{if(Object.isString(b)){if(Opentip.position[b]===undefined){throw"Unknown position: "+b}a=Opentip.position[b]}}return parseInt(a)},vendors:"Khtml Ms O Moz Webkit".split(" "),testDiv:document.createElement("div"),supports:function(a){if(a in Opentip.testDiv.style){return true}a=a.ot_ucfirst();return Opentip.vendors.any(function(b){return b+a in Opentip.testDiv.style})}};String.prototype.ot_ucfirst=function(){return this.replace(/^\w/,function(a){return a.toUpperCase()})};Opentip.load();Opentip.styles={standard:{title:null,className:"standard",stem:false,delay:null,hideDelay:0.1,fixed:false,showOn:"mouseover",hideTrigger:"trigger",hideOn:null,offset:[0,0],containInViewport:true,autoOffset:true,showEffect:"appear",fallbackShowEffect:"appear",hideEffect:"fade",fallbackHideEffect:"appear",showEffectDuration:0.3,hideEffectDuration:0.2,stemSize:8,tipJoint:["left","top"],target:null,targetJoint:null,ajax:false,group:null,escapeHtml:false,style:null},slick:{className:"slick",stem:true},rounded:{className:"rounded",stem:true},glass:{className:"glass"}};Opentip.defaultStyle="standard";Opentip.position={top:0,topRight:1,right:2,bottomRight:3,bottom:4,bottomLeft:5,left:6,topLeft:7};Event.observe(window,Opentip.IEVersion()?"load":"dom:loaded",function(){Opentip.documentIsLoaded=true;var b=[];for(var a in Opentip.styles.standard){b.push(a.underscore().dasherize())}$$("[data-ot]").each(function(d){var c={};d=$(d);var e=d.readAttribute("data-ot");if(e===""||e==="true"||e==="yes"){e=d.readAttribute("title");d.title=""}e||(e="");b.each(function(f){var h;if(h=d.readAttribute("data-ot-"+f)){try{h=h.gsub("'",'"').evalJSON()}catch(g){}c[f.camelize()]=h}});d.addTip(e,c)})});var Tips={list:[],append:function(a){this.list.push(a)},remove:function(a){if(!a.element){var b=this.list.find(function(c){return c.triggerElement===a})}else{var b=this.list.find(function(c){return c===a})}if(b){b.deactivate();b.destroyAllElements();this.list=this.list.without(b)}},add:function(d){if(d._opentipAddedTips){var f=this.list.find(function(g){return(g.triggerElement===d)});if(f.options.showOn=="creation"){f.show()}f.debug("Using an existing opentip.");return}else{setTimeout(function(){d._opentipAddedTips=true},1)}Opentip.debug("Creating new opentip");var a=[];$A(arguments).each(function(h,g){if(g==1&&!Opentip.objectIsEvent(h)){a.push(null)}a.push(h)});var e=new TipClass(a[0],a[1],a[2],a[3],a[4]);this.append(e);var b=this;var c=function(){e.create(a[1])};Opentip.postponeCreation(c);return e},hideGroup:function(a){this.list.findAll(function(b){return(b.options.group==a)}).invoke("doHide")},abortShowingGroup:function(a){this.list.findAll(function(b){return(b.options.group==a)}).invoke("abortShowing")}};var Tip=function(){return Tips.add.apply(Tips,arguments)};Element.addMethods({addTip:function(a){a=$(a);Tips.add.apply(Tips,arguments);return a},setCss3Style:function(b){b=$(b);var c={};for(var a in arguments[1]){var d=a.ot_ucfirst();var e=arguments[1][a];Opentip.vendors.each(function(f){c[f+d]=e;b.setStyle(c)})}return b}});var TipClass=Class.create({debug:function(){var a=Array.from(arguments);a.unshift("ID:",this.id,"|");Opentip.debug.apply(Opentip,a)},initialize:function(d,b){this.id=Opentip.lastTipId++;d=$(d);this.triggerElement=d;this.loaded=false;this.loading=false;this.visible=false;this.waitingToShow=false;this.waitingToHide=false;this.lastPosition={left:0,top:0};this.dimensions=[100,50];var c={};this.content="";if(typeof(arguments[2])=="object"){c=Object.clone(arguments[2])}else{if(typeof(arguments[3])=="object"){this.setContent(arguments[2]);c=Object.clone(arguments[3])}else{if(typeof(arguments[4])=="object"){this.setContent(arguments[2]);c=Object.clone(arguments[4]);c.title=arguments[3]}else{if(Object.isString(arguments[2])||Object.isFunction(arguments[2])){this.setContent(arguments[2])}if(Object.isString(arguments[3])){c.title=arguments[3]}}}}if(!c.showOn&&b){c.showOn=b.type}if(c.ajax&&!c.ajax.url){if(this.triggerElement.tagName.toLowerCase()=="a"){if(typeof(c.ajax)!="object"){c.ajax={}}c.ajax.url=this.triggerElement.href}else{c.ajax=false}}if(c.showOn=="click"&&this.triggerElement.tagName.toLowerCase()=="a"){if(b){b.stop()}this.triggerElement.observe("click",function(f){f.stop()})}c.style||(c.style=Opentip.defaultStyle);var a=Object.extend({},Opentip.styles.standard);if(c.style!="standard"){Object.extend(a,Opentip.styles[c.style])}c=Object.extend(a,c);c.target&&(c.fixed=true);if(c.stem===true){c.stem=c.tipJoint}if(c.target===true){c.target=this.triggerElement}else{if(c.target){c.target=$(c.target)}}this.currentStemPosition=c.stem;if(c.delay===null){if(c.showOn=="mouseover"){c.delay=0.2}else{c.delay=0}}if(Opentip.useScriptaculousTransitions){if(c.showEffect&&!Effect[c.showEffect.ot_ucfirst()]){this.debug('Using fallback show effect "'+c.fallbackShowEffect+'" instead of "'+c.showEffect+'"');c.showEffect=c.fallbackShowEffect}if(c.hideEffect&&!Effect[c.hideEffect.ot_ucfirst()]){this.debug('Using fallback hide effect "'+c.fallbackHideEffect+'" instead of "'+c.hideEffect+'"');c.hideEffect=c.fallbackHideEffect}}if(c.targetJoint==null){c.targetJoint=[];c.targetJoint[0]=c.tipJoint[0]=="left"?"right":(c.tipJoint[0]=="right"?"left":"center");c.targetJoint[1]=c.tipJoint[1]=="top"?"bottom":(c.tipJoint[1]=="bottom"?"top":"middle")}this.options=c;this.options.showTriggerElementsWhenHidden=[];if(this.options.showOn&&this.options.showOn!="creation"){this.options.showTriggerElementsWhenHidden.push({element:this.triggerElement,event:this.options.showOn})}this.options.showTriggerElementsWhenVisible=[];this.options.hideTriggerElements=[]},create:function(a){this.buildContainer();if(this.options.hideTrigger){var c=null;var b=null;if(!(this.options.hideTrigger instanceof Array)){this.options.hideTrigger=[this.options.hideTrigger]}this.options.hideTrigger.each(function(f,d){var e=(this.options.hideOn instanceof Array)?this.options.hideOn[d]:this.options.hideOn;switch(f){case"trigger":c=e?e:"mouseout";b=this.triggerElement;break;case"tip":c=e?e:"mouseover";b=this.container;break;case"target":c=e?e:"mouseover";b=this.options.target;break;case"closeButton":break;default:c=e?e:"mouseover";b=$(f);break}if(b){this.options.hideTriggerElements.push({element:b,event:c});if(c=="mouseout"){this.options.showTriggerElementsWhenVisible.push({element:b,event:"mouseover"})}}}.bind(this))}this.activate();if(a||this.options.showOn=="creation"){this.show(a)}},activate:function(){this.bound={};this.bound.doShow=this.doShow.bindAsEventListener(this);this.bound.show=this.show.bindAsEventListener(this);this.bound.doHide=this.doHide.bindAsEventListener(this);this.bound.hide=this.hide.bindAsEventListener(this);this.bound.position=this.position.bindAsEventListener(this);if(this.options.showEffect||this.options.hideEffect){this.queue={limit:1,position:"end",scope:this.container.identify()}}this.setupObserversForReallyHiddenTip();this.setupObserversForHiddenTip()},deactivate:function(){this.debug("Deactivating tooltip.");this.doHide();this.setupObserversForReallyHiddenTip()},buildContainer:function(){this.container=$(Opentip.element("div",{className:"ot-container ot-completely-hidden style-"+this.options.className+(this.options.ajax?" ot-loading":"")+(this.options.fixed?" ot-fixed":"")}));if(Opentip.useCss3Transitions){this.container.setCss3Style({transitionDuration:"0s"});this.container.addClassName("ot-css3");if(this.options.showEffect){this.container.addClassName("ot-show-"+this.options.showEffect)}if(this.options.hideEffect){this.container.addClassName("ot-hide-"+this.options.hideEffect)}}if(Opentip.useScriptaculousTransitions){this.container.setStyle({display:"none"})}},buildElements:function(){var h;var f;if(this.options.stem){var c="-"+this.options.stemSize+"px";this.container.appendChild(Opentip.element("div",{className:"stem-container "+this.options.stem[0]+" "+this.options.stem[1]},h=Opentip.element("canvas",{className:"stem"})))}var a=this;var e=[];var b=[];if(this.options.title){b.push(Opentip.element("div",{className:"title"},this.options.title))}e.push(Opentip.element("div",{className:"header"},b));e.push($(Opentip.element("div",{className:"content"})));if(this.options.ajax){e.push($(Opentip.element("div",{className:"loadingIndication"},Opentip.element("span","Loading..."))))}this.tooltipElement=$(Opentip.element("div",{className:"opentip"},e));this.container.appendChild(this.tooltipElement);var d=this.container.appendChild(Opentip.element("div",{className:"ot-buttons"}));var g=false;if(this.options.hideTrigger&&this.options.hideTrigger.include("closeButton")){d.appendChild(Opentip.element("a",{href:"javascript:undefined",className:"close"},f=Opentip.element("canvas",{className:"canvas"})));g=true}if(Opentip.useIFrame()){this.iFrameElement=this.container.appendChild($(Opentip.element("iframe",{className:"opentipIFrame",src:"javascript:false;"})).setStyle({display:"none",zIndex:100}).setOpacity(0))}document.body.appendChild(this.container);if(typeof G_vmlCanvasManager!=="undefined"){if(h){G_vmlCanvasManager.initElement(h)}if(f){G_vmlCanvasManager.initElement(f)}}if(g){this.drawCloseButton()}},drawCloseButton:function(){var b=this.container.down(".ot-buttons canvas");var g=this.container.down(".ot-buttons .close");var d=parseInt(g.getStyle("width"))||20;var e=b.getStyle("color");if(!e||e=="transparent"){e="white"}var c=b.getStyle("backgroundColor");if(!c||c=="transparent"){c="rgba(0, 0, 0, 0.2)"}b.setStyle({backgroundColor:"transparent"});b.width=d;b.height=d;var a=b.getContext("2d");a.clearRect(0,0,d,d);a.beginPath();var f=d/2.95;a.fillStyle=c;a.lineWidth=d/5.26;a.strokeStyle=e;a.lineCap="round";a.arc(d/2,d/2,d/2,0,Math.PI*2,false);a.fill();a.beginPath();a.moveTo(f,f);a.lineTo(d-f,d-f);a.stroke();a.beginPath();a.moveTo(d-f,f);a.lineTo(f,d-f);a.stroke()},setContent:function(a){this.content=a;if(this.visible){this.updateElementContent()}},updateElementContent:function(){var a=this.container.down(".content");if(a){if(Object.isFunction(this.content)){this.debug("Executing content function.");this.content=this.content(this)}a.update(this.options.escapeHtml?this.content.escapeHTML():this.content)}this.storeAndFixDimensions()},storeAndFixDimensions:function(){this.container.setStyle({width:"auto",left:"0px",top:"0px"});this.dimensions=this.container.getDimensions();this.container.setStyle({width:this.dimensions.width+"px",left:this.lastPosition.left+"px",top:this.lastPosition.top+"px"})},destroyAllElements:function(){if(this.container){this.container.remove()}},clearShowTimeout:function(){window.clearTimeout(this.timeoutId)},clearHideTimeout:function(){window.clearTimeout(this.hideTimeoutId)},clearTimeouts:function(){window.clearTimeout(this.visibilityStateTimeoutId);this.clearShowTimeout();this.clearHideTimeout()},setupObserversForReallyVisibleTip:function(){this.options.showTriggerElementsWhenVisible.each(function(a){$(a.element).observe(a.event,this.bound.show)},this)},setupObserversForVisibleTip:function(){this.options.hideTriggerElements.each(function(a){$(a.element).observe(a.event,this.bound.hide)},this);this.options.showTriggerElementsWhenHidden.each(function(a){$(a.element).stopObserving(a.event,this.bound.show)},this);Event.observe(document.onresize?document:window,"resize",this.bound.position);Event.observe(window,"scroll",this.bound.position)},setupObserversForReallyHiddenTip:function(){this.options.showTriggerElementsWhenVisible.each(function(a){$(a.element).stopObserving(a.event,this.bound.show)},this)},setupObserversForHiddenTip:function(){this.options.showTriggerElementsWhenHidden.each(function(a){$(a.element).observe(a.event,this.bound.show)},this);this.options.hideTriggerElements.each(function(a){$(a.element).stopObserving(a.event,this.bound.hide)},this);Event.stopObserving(document.onresize?document:window,"resize",this.bound.position);Event.stopObserving(window,"scroll",this.bound.position)},show:function(a){this.abortHiding();if(this.visible){return}this.debug("Showing in "+this.options.delay+"s.");if(this.options.group){Tips.abortShowingGroup(this.options.group)}this.waitingToShow=true;this.setupObserversForVisibleTip();this.followMousePosition();this.position(a);if(!this.options.delay){this.bound.doShow(a)}else{this.timeoutId=this.bound.doShow.delay(this.options.delay)}},abortShowing:function(){if(this.waitingToShow){this.debug("Aborting showing.");this.clearTimeouts();this.stopFollowingMousePosition();this.waitingToShow=false;this.setupObserversForHiddenTip()}},doShow:function(){this.clearTimeouts();if(this.visible){return}if(!this.triggerElementExists()){this.deactivate();return}this.debug("Showing!");if(this.options.group){Tips.hideGroup(this.options.group)}this.visible=true;this.waitingToShow=false;if(!this.tooltipElement){this.buildElements()}this.updateElementContent();if(this.options.ajax&&!this.loaded){this.loadAjax()}this.searchAndActivateHideButtons();this.ensureElement();this.container.setStyle({zIndex:Opentip.lastZIndex+=1});this.setupObserversForReallyVisibleTip();this.setupObserversForVisibleTip();if(Opentip.useScriptaculousTransitions){if(this.options.showEffect||this.options.hideEffect){this.cancelEffects()}if(!this.options.showEffect||!this.container[this.options.showEffect]){this.container.show()}else{this.container[this.options.showEffect]({duration:this.options.showEffectDuration,queue:this.queue,afterFinish:this.afterShowEffect.bind(this)})}if(Opentip.useIFrame()){this.iFrameElement.show()}}this.position();this.container.removeClassName("ot-hidden").addClassName("ot-becoming-visible");var a=function(){if(Opentip.useCss3Transitions){this.container.setCss3Style({transitionDuration:this.options.showEffectDuration+"s"})}this.container.removeClassName("ot-becoming-visible").addClassName("ot-visible");if(this.options.showEffect&&this.options.showEffectDuration){this.visibilityStateTimeoutId=(function(){this.removeClassName("ot-visible").addClassName("ot-completely-visible")}).bind(this.container).delay(this.options.showEffectDuration)}else{this.container.removeClassName("ot-visible").addClassName("ot-completely-visible")}this.activateFirstInput()};(function(){this.container.removeClassName("ot-completely-hidden");(a).bind(this).defer()}).bind(this).defer()},loadAjax:function(){if(this.loading){return}this.loading=true;this.container.addClassName("ot-loading");this.debug("Loading content from "+this.options.ajax.url+".");new Ajax.Request(this.options.ajax.url,Object.extend({onComplete:function(){this.container.removeClassName("ot-loading");this.loaded=true;this.loading=false;this.updateElementContent();this.searchAndActivateHideButtons();this.activateFirstInput();this.position()}.bind(this),onSuccess:function(a){this.debug("Loading successfull.");this.content=a.responseText}.bind(this),onFailure:function(){this.debug("There was a problem downloading the file.");this.options.escapeHtml=false;this.content='<a class="close">There was a problem downloading the content.</a>'}.bind(this)},this.options.ajax.options||{}))},afterShowEffect:function(){this.activateFirstInput();this.position()},activateFirstInput:function(){var b=this.container.down("input");var a=this.container.down("textarea");if(b){b.focus()}else{if(a){a.focus()}}},searchAndActivateHideButtons:function(){if(!this.options.hideTrigger||this.options.hideTrigger.include("closeButton")){this.options.hideTriggerElements=[];this.container.select(".close").each(function(a){this.options.hideTriggerElements.push({element:a,event:"click"})},this);if(this.visible){this.setupObserversForVisibleTip()}}},hide:function(a){this.abortShowing();if(!this.visible){return}this.debug("Hiding in "+this.options.hideDelay+"s.");this.waitingToHide=true;this.setupObserversForHiddenTip();this.hideTimeoutId=this.bound.doHide.delay(this.options.hideDelay,a)},abortHiding:function(){if(this.waitingToHide){this.debug("Aborting hiding.");this.clearTimeouts();this.waitingToHide=false;this.setupObserversForVisibleTip()}},doHide:function(b){this.clearTimeouts();if(!this.visible){return}this.debug("Hiding!");this.visible=false;this.waitingToHide=false;this.deactivateElementEnsurance();this.setupObserversForReallyHiddenTip();this.setupObserversForHiddenTip();if(!this.options.fixed){this.stopFollowingMousePosition()}if(Opentip.useScriptaculousTransitions){if(this.options.showEffect||this.options.hideEffect){this.cancelEffects()}if(!this.options.hideEffect||!this.container[this.options.hideEffect]){this.container.hide()}else{var a={duration:this.options.hideEffectDuration,queue:this.queue};if(b&&Object.isFunction(b)){a.afterFinish=b}this.container[this.options.hideEffect](a)}if(Opentip.useIFrame()){this.iFrameElement.hide()}}if(Opentip.useCss3Transitions){this.container.setCss3Style({transitionDuration:this.options.hideEffectDuration+"s"})}this.container.removeClassName("ot-visible").removeClassName("ot-completely-visible").addClassName("ot-hidden");if(this.options.hideEffect&&this.options.hideEffectDuration){this.visibilityStateTimeoutId=(function(){this.setCss3Style({transitionDuration:"0s"});this.removeClassName("ot-hidden").addClassName("ot-completely-hidden")}).bind(this.container).delay(this.options.showEffectDuration)}else{this.container.removeClassName("ot-hidden").addClassName("ot-completely-hidden")}},cancelEffects:function(){Effect.Queues.get(this.queue.scope).invoke("cancel")},followMousePosition:function(){if(!this.options.fixed){$(document.body).observe("mousemove",this.bound.position)}},stopFollowingMousePosition:function(){if(!this.options.fixed){$(document.body).stopObserving("mousemove",this.bound.position)}},positionsEqual:function(b,a){return(b.left==a.left&&b.top==a.top)},position:function(c){var c=c||this.lastEvt;this.currentStemPosition=this.options.stem;var a=this.ensureViewportContainment(c,this.getPosition(c));if(this.positionsEqual(a,this.lastPosition)){this.positionStem();return}this.lastPosition=a;if(a){var d={left:a.left+"px",top:a.top+"px"};this.container.setStyle(d);if(Opentip.useIFrame()&&this.iFrameElement){this.iFrameElement.setStyle({width:this.container.getWidth()+"px",height:this.container.getHeight()+"px"})}var b=this.container;(function(){b.style.visibility="hidden";var e=b.offsetHeight;b.style.visibility="visible"}).defer()}this.positionStem()},getPosition:function(i,e,g,d){var e=e||this.options.tipJoint;var g=g||this.options.targetJoint;var h={};if(this.options.target){var f=this.options.target.cumulativeOffset();h.left=f[0];h.top=f[1];if(g[0]=="right"){if(typeof this.options.target.getBoundingClientRect!="undefined"){h.left=this.options.target.getBoundingClientRect().right+$(document.viewport).getScrollOffsets().left}else{h.left=h.left+this.options.target.getWidth()}}else{if(g[0]=="center"){h.left+=Math.round(this.options.target.getWidth()/2)}}if(g[1]=="bottom"){h.top+=this.options.target.getHeight()}else{if(g[1]=="middle"){h.top+=Math.round(this.options.target.getHeight()/2)}}}else{if(!i){return}this.lastEvt=i;h.left=Event.pointerX(i);h.top=Event.pointerY(i)}if(this.options.autoOffset){var b=this.options.stem?this.options.stemSize:0;var j=(b&&this.options.fixed)?2:10;var a=(e[1]=="middle"&&!this.options.fixed)?15:0;var c=(e[0]=="center"&&!this.options.fixed)?15:0;if(e[0]=="right"){h.left-=j+a}else{if(e[0]=="left"){h.left+=j+a}}if(e[1]=="bottom"){h.top-=j+c}else{if(e[1]=="top"){h.top+=j+c}}if(b){var d=d||this.options.stem;if(d[0]=="right"){h.left-=b}else{if(d[0]=="left"){h.left+=b}}if(d[1]=="bottom"){h.top-=b}else{if(d[1]=="top"){h.top+=b}}}}h.left+=this.options.offset[0];h.top+=this.options.offset[1];if(e[0]=="right"){h.left-=this.container.getWidth()}if(e[0]=="center"){h.left-=Math.round(this.container.getWidth()/2)}if(e[1]=="bottom"){h.top-=this.container.getHeight()}if(e[1]=="middle"){h.top-=Math.round(this.container.getHeight()/2)}return h},ensureViewportContainment:function(n,h){if(!this.visible){return h}var j=[this.sticksOutX(h),this.sticksOutY(h)];if(!j[0]&&!j[1]){return h}var d=this.options.tipJoint.clone();var g=this.options.targetJoint.clone();var b=$(document.viewport).getScrollOffsets();var a=this.dimensions;var o={left:h.left-b.left,top:h.top-b.top};var l=document.viewport.getDimensions();var m=false;if(l.width>=a.width){if(o.left<0){m=true;d[0]="left";if(this.options.target&&g[0]=="left"){g[0]="right"}}else{if(o.left+a.width>l.width){m=true;d[0]="right";if(this.options.target&&g[0]=="right"){g[0]="left"}}}}if(l.height>=a.height){if(o.top<0){m=true;d[1]="top";if(this.options.target&&g[1]=="top"){g[1]="bottom"}}else{if(o.top+a.height>l.height){m=true;d[1]="bottom";if(this.options.target&&g[1]=="bottom"){g[1]="top"}}}}if(m){var c=this.getPosition(n,d,g,d);var f=[this.sticksOutX(c),this.sticksOutY(c)];var k=0;for(var e=0;e<=1;e++){if(f[e]&&f[e]!=j[e]){k++;d[e]=this.options.tipJoint[e];if(this.options.target){g[e]=this.options.targetJoint[e]}}}if(k<2){this.currentStemPosition=d;return this.getPosition(n,d,g,d)}}return h},sticksOut:function(a){return this.sticksOutX(a)||this.sticksOutY(a)},sticksOutX:function(b){var c=$(document.viewport).getScrollOffsets();var a={left:b.left-c.left,top:b.top-c.top};if(a.left<0){return Opentip.STICKS_OUT_LEFT}if(a.left+this.dimensions.width>document.viewport.getDimensions().width){return Opentip.STICKS_OUT_RIGHT}},sticksOutY:function(b){var c=$(document.viewport).getScrollOffsets();var a={left:b.left-c.left,top:b.top-c.top};if(a.top<0){return Opentip.STICKS_OUT_TOP}if(a.top+this.dimensions.height>document.viewport.getDimensions().height){return Opentip.STICKS_OUT_BOTTOM}},getStemCanvas:function(){return this.container.down(".stem")},stemPositionsEqual:function(b,a){return(b&&a&&b[0]==a[0]&&b[1]==a[1])},positionStem:function(){if(this.options.stem){var l=this.getStemCanvas();if(l&&!this.stemPositionsEqual(this.lastStemPosition,this.currentStemPosition)){this.debug("Setting stem style");this.lastStemPosition=this.currentStemPosition;var f=Opentip.sanitizePosition(this.currentStemPosition);var b=this.options.stemSize;var n=f*Math.PI/4;var j=Math.round(b*1.5);var k={w:j,h:b};var g=false;if(f%2==1){g=true;var i=Math.round(0.707106781*j);k={w:b+i,h:b+i}}var c=Object.clone(k);if(f==Opentip.position.left||f==Opentip.position.right){k.h=c.w;k.w=c.h}var e=l.getStyle("color")||"black";l.width=k.w;l.height=k.h;var m=l.getContext("2d");m.clearRect(0,0,l.width,l.height);m.beginPath();m.fillStyle=e;m.save();m.translate(k.w/2,k.h/2);var h=Math.floor(f/2);m.rotate(h*Math.PI/2);if(k.w==c.w){m.translate(-k.w/2,-k.h/2)}else{m.translate(-k.h/2,-k.w/2)}if(g){m.moveTo(i,c.h);m.lineTo(c.w,0);m.lineTo(0,c.h-i)}else{m.moveTo(c.w/2-j/2,c.h);m.lineTo(c.w/2,0);m.lineTo(c.w/2+j/2,c.h)}m.fill();m.restore();var a={width:k.w+"px",height:k.h+"px",left:"",right:"",top:"",bottom:""};switch(f){case Opentip.position.top:a.top=-k.h+"px";a.left=-Math.round(k.w/2)+"px";break;case Opentip.position.right:a.top=-Math.round(k.h/2)+"px";a.left=0;break;case Opentip.position.bottom:a.top=0;a.left=-Math.round(k.w/2)+"px";break;case Opentip.position.left:a.top=-Math.round(k.h/2)+"px";a.left=-k.w+"px";break;case Opentip.position.topRight:a.top=-b+"px";a.left=-i+"px";break;case Opentip.position.bottomRight:a.top=-i+"px";a.left=-i+"px";break;case Opentip.position.bottomLeft:a.top=-i+"px";a.left=-b+"px";break;case Opentip.position.topLeft:a.top=-b+"px";a.left=-b+"px";break;default:throw"Unknown stem position: "+f}l.setStyle(a);var d=l.up(".stem-container");d.removeClassName("left").removeClassName("right").removeClassName("center").removeClassName("top").removeClassName("bottom").removeClassName("middle");switch(f){case Opentip.position.top:case Opentip.position.topLeft:case Opentip.position.topRight:d.addClassName("top");break;case Opentip.position.bottom:case Opentip.position.bottomLeft:case Opentip.position.bottomRight:d.addClassName("bottom");break;default:d.addClassName("middle");break}switch(f){case Opentip.position.left:case Opentip.position.topLeft:case Opentip.position.bottomLeft:d.addClassName("left");break;case Opentip.position.right:case Opentip.position.topRight:case Opentip.position.bottomRight:d.addClassName("right");break;default:d.addClassName("center");break}}}},triggerElementExists:function(a){return this.triggerElement.parentNode&&this.triggerElement.visible()&&this.triggerElement.descendantOf(document.body)},ensureElementInterval:1000,ensureElement:function(){this.deactivateElementEnsurance();if(!this.triggerElementExists()){this.deactivate()}this.ensureElementTimeoutId=setTimeout(this.ensureElement.bind(this),this.ensureElementInterval)},deactivateElementEnsurance:function(){clearTimeout(this.ensureElementTimeoutId)}});var PopBox=Class.create({initialize:function(b){var a=Builder.node("div",{"class":"popbox-inner"},b);this.element=Builder.node("div",{"class":"popbox-container"},a)},element:null,options:{}});var PopManager={startZ:101,activeBoxes:[],modalized:false,createPop:function(e,a){a==null?a={}:false;a.modal=a.modal==null?true:a.modal;a.positionMode=a.positionMode==null?"center":a.positionMode;if(typeof e!="object"){return}this.activeBoxes.push(e);if(a.modal){this._createOverlay()}this.enableKeys();var c=$(e.element);c.setOpacity(0);var f=Builder.node("span",{"class":"close-btn"},"Close");c.insert(f);document.body.appendChild(c);var b=this.startZ;b=b=="auto"?this.startZ+1:b++;c.setStyle({zIndex:b});c.setOpacity(1);c.select(".close-btn")[0].observe("click",function(){PopManager.removePop(e)});var d=this.activeBoxes.last();if(a.positionMode=="center"){this.enableAutoCenter()}Behavior.apply(c)},removePop:function(a){if(typeof a!="object"||a==null){return}if(a.options.onClose!=null){a.options.onClose()}a.element.down("span.close-btn").remove();a.element.remove();this.activeBoxes=this.activeBoxes.without(a);if(this.modalized&&this.activeBoxes.length==0){this._removeOverlay();this.disableKeys()}},ajaxCreate:function(c,b){b=$H(b||{});var h=b.get("method")||"get";var f=b.unset("onComplete");var d=Builder.node("div");var a=$H({onLoading:function(){d.setStyle({"min-height":"200px"});d.innerHTML="<h1>Loading...</h1>"}});var g=function(i,j){d.innerHTML=j.responseText;if(!Object.isUndefined(f)){f.call(i,j)}this._center(i.element);this.setupAjaxPagination(d,a);DateFormat.autoParse()};d.innerHTML="<h1>Loading...</h1>";var e=new PopBox(d);PopManager.createPop(e);a=a.merge({method:h,parameters:b.get("parameters"),onComplete:g.bind(this,e)}).merge(b);new Ajax.Request(c,a.toObject())},setupAjaxPagination:function(b,a){b=$(b);b.select("div.pagination.ajax a").each(function(c){c.observe("click",function(e){e.stop();var d=this.readAttribute("href");new Ajax.Request(d,a.toObject())})})},removeLast:function(){if(this.activeBoxes.length<1){return}this.removePop(this.activeBoxes.last())},centerLast:function(){if(this.activeBoxes.length>0){this._center(this.activeBoxes.last().element)}},enableAutoCenter:function(){this._center(this.activeBoxes.last().element);return;this._autoCenter=function(){this._center(this.activeBoxes.last().element)}.bind(this);$(document).observe("scroll",this._autoCenter);this._autoCenter()},disableAutoCenter:function(){},enableKeys:function(){$(document).observe("keypress",this._kbdInput.bind(this))},disableKeys:function(){$(document).observe("keypress",this._kbdInput.bind(this))},_kbdInput:function(b){var a=b.keyCode||b.which;if(a==Event.KEY_ESC){this.removePop(this.activeBoxes.last())}},_createOverlay:function(){var b=$(Builder.node("iframe",{id:"popbox_iframe","class":"popbox-iframe"}));$(document.body).insert(b);var a=$(Builder.node("div",{id:"popbox_overlay","class":"popbox-overlay"}));$(document.body).insert(a);this._resizeOverlay();this.modalized=true},_removeOverlay:function(){$("popbox_overlay").remove();$("popbox_iframe").remove();this.modalized=false},_resizeOverlay:function(){$("popbox_overlay").setStyle({height:document.body.scrollHeight+"px",width:$(document.body).getDimensions().width+"px"});$("popbox_iframe").setStyle({height:document.body.scrollHeight+"px",width:$(document.body).getDimensions().width+"px"})},_center:function(e){if(!e){return}var b=e.getDimensions();var c=0;if(document.viewport.getHeight()<b.height){c=50}else{var f=document.viewport.getHeight()-b.height;c=parseInt(f/2)}var a=document.viewport.getScrollOffsets().top;c+=a;if(a+b.height>document.viewport.getHeight()){c=a}e.setStyle({position:"absolute",top:c+"px",left:"50%"});var d=parseInt(e.getStyle("width"))+parseInt(e.getStyle("padding-left"))+parseInt(e.getStyle("padding-right"));e.setStyle({marginLeft:parseInt((-1*d/2))+"px"})}};var SelectorBase=Class.create({wrapper:null,searchForm:null,searchElement:null,resultsElement:null,submitForm:null,submitIdElement:null,currentData:null,initialize:function(a){this.wrapper=$(a);this.searchForm=this.wrapper.select(".searchform").first();this.searchElement=this.searchForm.select("input").first();this.resultsElement=this.wrapper.select(".searchresults").first();this.searchForm.observe("submit",this.onSubmit.bind(this))},onSubmit:function(a){this.search(this.searchElement.value);a.stop()},handleSearchResult:function(a){var b=a.responseJSON;if(b!=null&&b.length>0){this.buildResults(b);this.currentData=b}else{var c=new Element("p").update("Sorry, but your search didn&rsquo;t return any results");this.resultsElement.innerHTML="";this.resultsElement.appendChild(c);this.currentData={}}}});var Tabs=Class.create({triggers:[],containers:{},selectedContainer:null,initialize:function(b){this.triggers=$(b).select("a");var a;this.triggers.each(function(d){var e=d.getAttribute("href").getAnchor();var c=$(e);if(c==null){return}d.observe("click",this.click.bindAsEventListener(this,d));this.containers[e]=c;if(d.hasClassName("selected")){a=d}}.bind(this));this.click(null,a?a:this.triggers.first())},click:function(b,a){var c=a.getAttribute("href").getAnchor();if(this.selectedContainer!=null){this.selectedContainer.hide()}this.selectedContainer=this.containers[c].show();this.triggers.each(function(d){d.removeClassName("selected")});a.addClassName("selected");if(b){b.stop()}}});Object.extend(Tabs,{autoActivate:function(){var a=$$(".tabs");if(a.length>0){$$(".tab-content").each(Element.hide)}a.each(function(b){new Tabs(b)})}});String.prototype.getAnchor=function(){return/#([a-z][\w.:-]*)$/i.exec(this)[1]};document.observe("dom:loaded",function(){$$(".autosuggest li.knowledgebase-article h4 a, p.rlinks a.readmore").each(function(a){a.observe("click",function(b){b.stop();this.up("li").down(".article").toggle();if(this.classNames().include("readmore")){this.up("div.body").hide()}})})});var DiscussionAction=Class.create({wrapper:null,initialize:function(b){var a=b.getAttribute("confirm_message");if(a!=null&&a!=""){if(!confirm(a)){return}}this.element=$(b);this.wrapper=b.up(".admin-functions");if(this.wrapper.hasClassName("acting")){return}this.wrapper.addClassName("acting");this.loader=this.wrapper.down("span.loader");if(this.loader==null){this.loader=new Element("span",{"class":"loader"})}this.wrapper.insert(this.loader);this.sendRequest()},sendRequest:function(a){if(a){a.stop()}this.loader.removeClassName("loader-success").removeClassName("loader-error").update("Sending request...");new Ajax.Request(this.url,{method:"post",onSuccess:this.onSuccess.bind(this),onFailure:this.onFailure.bind(this),parameters:{authenticity_token:getAuthKey()}})},onSuccess:function(a){this.wrapper.removeClassName("acting");this.succeed()},onFailure:function(a){this.wrapper.removeClassName("acting");this.fail()},fail:function(){this.loader.addClassName("loader-error");this.loader.update("There was a problem with your request. <a href='#' class='retry'>Retry?</a> or <a href='#' class='cancel'>Cancel</a>");this.loader.down(".retry").observe("click",this.sendRequest.bind(this));this.loader.down(".cancel").observe("click",function(a){if(a){a.stop()}this.loader.remove()}.bind(this))},succeed:function(){this.loader.hide()}});DiscussionAction.ToggleQueue=function(a){if(a.up("li").hasClassName("in-queue")){new DiscussionAction.RemoveFromQueue(a)}else{new DiscussionAction.AddToQueue(a)}};DiscussionAction.AddToSupporterQueue=Class.create(DiscussionAction,{initialize:function($super,a){this.element=$(a);this.wrapper=a.up("li");this.url=a.getAttribute("add_path").replace(":id",$F(this.element));if(this.wrapper.hasClassName("acting")){return}this.wrapper.addClassName("acting");this.loader=this.wrapper.down("span.loader");if(this.loader==null){this.loader=new Element("span",{"class":"loader"})}this.wrapper.insert(this.loader);this.sendRequest()},sendRequest:function(a){this.loader.removeClassName("loader-success").removeClassName("loader-error").update("<br>Sending request...");new Ajax.Request(this.url,{method:"post",onSuccess:this.onSuccess.bind(this),onFailure:this.onFailure.bind(this),parameters:{authenticity_token:getAuthKey(),_method:"put"}})},onSuccess:function(a){this.wrapper.removeClassName("acting");this.succeed(a.responseText)},succeed:function(b){this.loader.addClassName("loader-success");this.loader.update("Discussion has been assigned!");this.loader.show();this.element.up("#assignment_wrapper").replace(b);this.element.up("li").hide();var a=function(){this.loader.hide()};setTimeout(a.bind(this),1500)}});DiscussionAction.RemoveFromSupporterQueue=Class.create(DiscussionAction,{initialize:function($super,a){this.element=$(a);this.wrapper=a.up("li");this.url=a.getAttribute("href");if(this.wrapper.hasClassName("acting")){return}this.wrapper.addClassName("acting");this.loader=this.wrapper.down("span.loader");if(this.loader==null){this.loader=new Element("span",{"class":"loader"})}this.wrapper.insert(this.loader);this.sendRequest()},sendRequest:function(a){this.loader.removeClassName("loader-success").removeClassName("loader-error").update("Sending request...");new Ajax.Request(this.url,{method:"post",onSuccess:this.onSuccess.bind(this),onFailure:this.onFailure.bind(this),parameters:{authenticity_token:getAuthKey(),_method:"put"}})},succeed:function(){this.loader.addClassName("loader-success");this.loader.update("Discussion no longer assigned!");this.loader.show();$("assigned_to").hide();$("assign_widget").show();var a=function(){this.loader.hide()};setTimeout(a.bind(this),1500)}});DiscussionAction.AddToQueue=Class.create(DiscussionAction,{initialize:function($super,a){this.url=a.getAttribute("add_path");$super(a)},sendRequest:function(a){this.loader.removeClassName("loader-success").removeClassName("loader-error").update("Sending request...");new Ajax.Request(this.url,{method:"post",onSuccess:this.onSuccess.bind(this),onFailure:this.onFailure.bind(this),parameters:{authenticity_token:getAuthKey(),_method:"put"}})},succeed:function($super){$super();this.loader.addClassName("loader-success");this.loader.update("Discussion added to queue!");this.loader.show();this.element.up("li").addClassName("in-queue");var a=function(){this.loader.hide()};setTimeout(a.bind(this),1500)}});DiscussionAction.RemoveFromQueue=Class.create(DiscussionAction,{initialize:function($super,a){this.url=a.getAttribute("remove_path");$super(a)},sendRequest:function(a){this.loader.removeClassName("loader-success").removeClassName("loader-error").update("Sending request...");new Ajax.Request(this.url,{method:"post",onSuccess:this.onSuccess.bind(this),onFailure:this.onFailure.bind(this),parameters:{authenticity_token:getAuthKey(),_method:"put"}})},succeed:function($super){$super();this.loader.addClassName("loader-success");this.loader.update("Discussion removed from queue!");this.loader.show();this.element.up("li").removeClassName("in-queue");var a=function(){this.loader.hide()};setTimeout(a.bind(this),1500)}});DiscussionAction.AcknowledgeUpdate=Class.create(DiscussionAction,{initialize:function($super,a){this.url=a.getAttribute("href");this.ack_button=a.up("ul").down("li#acknowledge");this.unack_button=a.up("ul").down("li#unacknowledge");$super(a)},succeed:function($super){$super();this.loader.addClassName("loader-success");this.loader.update("This update has been acknowledged");this.loader.show();this.ack_button.hide();this.unack_button.show();var a=function(){this.loader.hide()};setTimeout(a.bind(this),1500)}});DiscussionAction.UnAcknowledgeUpdate=Class.create(DiscussionAction,{initialize:function($super,a){this.url=a.getAttribute("href");this.ack_button=a.up("ul").down("li#acknowledge");this.unack_button=a.up("ul").down("li#unacknowledge");$super(a)},succeed:function($super){$super();this.loader.addClassName("loader-success");this.loader.update("Moved discussion back to pending.");this.loader.show();this.ack_button.show();this.unack_button.hide();var a=function(){this.loader.hide()};setTimeout(a.bind(this),1500)}});var FAQSelector=Class.create(SelectorBase,{initialize:function($super,a){$super(a);this.submitForm=this.wrapper.select(".faqAssignment").first();this.submitIdElement=this.wrapper.select(".faqId").first();this.apiURL=Tender.root+"faqs/search.json"},search:function(a){this.resultsElement.innerHTML="<p>Searching Knowledge Base&hellip;</p>";new Ajax.Request(this.apiURL+"?q="+escape(a),{method:"get",onSuccess:this.handleSearchResult.bind(this)})},handleSearchResult:function(a){var b=a.responseJSON;if(b!=null&&b.length>0){this.buildResults(b);this.currentData=b}else{var c=new Element("p").update("Sorry, but your search didn&rsquo;t return any results");this.resultsElement.innerHTML="";this.resultsElement.appendChild(c);this.currentData={}}},buildResults:function(b){var a=new Element("ul",{"class":"ticket-list"});b.each(function(e){e=e.faq;var c=new Element("li");var d=new Element("a",{href:"#",title:"Click to see the body of this article"}).update(e.title);d.observe("click",this.showPreview.bindAsEventListener(this,d,e));var f=new Element("a",{href:"#","class":"assign"}).update("Select This Article");f.observe("click",function(g,h){g.stop();this.assignArticle(h)}.bindAsEventListener(this,e));c.appendChild(d);c.appendChild(f);a.appendChild(c)}.bind(this));this.resultsElement.innerHTML="";this.resultsElement.appendChild(a)},showPreview:function(c,e,d){c.stop();var a=e.up().select(".description").first();if(a!=null){a.visible()?a.hide():a.show()}else{var b=new Element("div",{"class":"description"}).update(d.body);e.up().appendChild(b)}},assignArticle:function(a){this.resultsElement.innerHTML="<p>Assigning your article..</p>";this.submitIdElement.value=a.id;this.submitForm.submit()}});Ajax.Responders.register({onCreate:function(b){if(getAuthKey()){var c="X-CSRF-Token",a=getAuthKey();if(!b.options.requestHeaders){b.options.requestHeaders={}}b.options.requestHeaders[c]=a}}});var globalTriggers=function(){Tabs.autoActivate();DateFormat.autoParse();$$(".requires-js").each(function(b){b.removeClassName("requires-js")});if(window.location.hash&&$$(window.location.hash)){var a=$$(window.location.hash)[0];if(a&&a.highlight){a.highlight()}}};var Placeholder=Class.create({initialize:function(a){if(a.getAttribute("placeholder")==""||a.getAttribute("placeholder")==null){return}a.onfocus=function(){if(this.value!=this.getAttribute("placeholder")){return}this.value="";$(this).removeClassName("placeholder")};a.onblur=function(){if(this.value!=""){return}this.value=this.getAttribute("placeholder");$(this).addClassName("placeholder")};if(a.value==""||a.value==a.getAttribute("placeholder")){a.value=a.getAttribute("placeholder");$(a).addClassName("placeholder")}}});var menu=false;var rules={"#wrapper":function(a){globalTriggers();SearchPage.init()},"#user_company_name":function(a){a.onfocus=function(){$("user_company_list_button").show()};a.onblur=function(){$("user_company_list_button").hide()};var b=new Autocompleter.Local("user_company_name","user_company_list",Tender.company_list,{minChars:0})},".ticket-status.external":function(a){var b=function(c){c.responseText.evalScripts();a.innerHTML=c.responseText};new Ajax.Request("/tickets/state/"+$(a).getAttribute("data-ticket-id"),{method:"get",onComplete:b,evalScripts:false})},"#edit-company-info":function(a){var b=$("edit-company").innerHTML;$("edit-company").remove();$(a).observe("click",function(e){e.stop();var c=Builder.node("div");c.innerHTML=b;var d=new PopBox(c);PopManager.createPop(d)})},"#invite-company":function(b){var a=$("invite-form");a.hide();$(b).observe("click",function(d){d.stop();var c=new PopBox(a);PopManager.createPop(c);a.show()})},"ul.tab-activated":function(a){new Tabs(a)},"li.internal div a":function(a){a.innerHTML=a.innerHTML.replace(/(href=\"\{(challenge|fpch|fu|fyeah|hmm|lol|megusta|notbad|omg|sweetjesus|troll|trolldad|wtf|yao|yuno)\})\"/,"<img src='/images/rage/$2.png' class='rage' />");if(a.href.match(/^(challenge|fpch|fu|fyeah|hmm|lol|megusta|notbad|omg|sweetjesus|troll|trolldad|wtf|yao|yuno)$/)){a.update('<img src="/images/rage/'+$1+'.png"/>')}},"li.internal div p":function(a){a.innerHTML=a.innerHTML.replace(/(\{(challenge|fpch|fu|fyeah|hmm|lol|megusta|notbad|omg|sweetjesus|troll|trolldad|wtf|yao|yuno)\})/,"<img src='/images/rage/$2.png' class='rage' />")},"#comment_body.liveupdate":function(g){var d,e=[],a=0,h=5;var i=function(j){clearTimeout(d);d=setTimeout(function(){a=a+1;params={};if($("comment_user_name")){params.user_name=$("comment_user_name").value;params.user_email=$("comment_user_email").value}params.expires=h+10;params.authenticity_token=getAuthKey();if($("comment_body").getValue()!=""){params.typing="1"}else{params.typing="0"}new Ajax.Request(TenderKO.discussion.draftPath,{method:"post",parameters:params})},1500)};var c=function(){h=10;a=0;i()};g.observe("keyup",c);var f=$("discussion-live-form");var b=function(n){var l=n.responseText.evalJSON(true);var k=new Element("ul",{"class":"who-is-viewing"});if(l.length>0){f.innerHTML="";for(var j=0;j<l.length;j++){var m;if(typeof l[j].user!="undefined"){m=k.appendChild(new Element("li",{"class":"user user-"+l[j].state}).update(new Element("span").update(l[j].user)));if(l[j].typing=="1"){m.addClassName("typing");m.writeAttribute("title",l[j].user+" has started typing a reply.")}}}f.appendChild(k)}};watching_timer=new PeriodicalExecuter(function(j){if(!Tender.discussion_id){return}if(!Tender.discussion_token){return}if(h>200){j.stop();return}new Ajax.Request("/help/comment_update",{method:"post",parameters:{id:Tender.discussion_id,discussion_token:Tender.discussion_token,authenticity_token:getAuthKey()},onComplete:b,evalScripts:false,evalJSON:false});a=a+1;if(a>10){j.frequency=h;j.stop();j.registerCallback()}},h);draft_timer=new PeriodicalExecuter(function(j){if(!Tender.discussion_id){return}if(a>10){h=h*1.2;j.frequency=h;j.stop();j.registerCallback()}if(h>2000){j.stop();return}i()},h)},"ol#comments li.system.internal":function(a){$(a).observe("click",function(){$(a).toggleClassName("system");$(a).toggleClassName("system-full")})},".discussion-form":function(a){a.down(".fields:last-child").addClassName("last-child")},"#member_invite":function(a){new MemberInviter(a)},".word_stats":function(a){new WordStats(a)},"a.popbox":function(a){var b={};$(a.observe("click",function(d){d.stop();var c=a.getAttribute("href");if(b[c]){return}var e=function(i){b[c]=false;i.responseText.evalScripts();var g=Builder.node("div");g.innerHTML=i.responseText;var h=new PopBox(g);PopManager.createPop(h);if(a.hasClassName("split")){var f=$("discussion_title");f.setAttribute("placeholder",f.value);new Placeholder(f)}};b[c]=true;new Ajax.Request(this.href,{method:"get",onComplete:e,evalScripts:false})}))},input:function(a){new Placeholder(a)},".ticket-selector":function(a){TicketSelector.instance=new TicketSelector(a)},".faq-selector":function(a){faqselect=new FAQSelector(a)},".domainsetup":function(b){var c=$(b);var a=c.down(".availability").hide()},"div.alert":function(b){b=$(b);var a=Cookie.get("hiddenAnnouncements");a=a==null?[]:a.split(",");if(a.indexOf(b.id)==-1){b.show()}b.down("a.close").observe("click",function(c){if(c){c.stop()}a.push(b.id);Cookie.set({hiddenAnnouncements:a.join(",")},{path:"/",expires:new Date(2038,1,1)});b.hide()})},"a.form-partial-toggle":function(a){var b=$(a.getAttribute("href").getAnchor());if(b==null){return}b.hide();$(a).observe("click",function(c){if(c){c.stop()}b.toggle()})},"div.original-body":function(e){var c,b,f,a,d,h,g;if(c=Tender.discussion_author_extras){a=document.createElement("div");a.addClassName("custom-fields");d="<h3>Private information <span>(visible only to supporters)</span></h3>";d=d+"<ul>";for(var i in c){if(c.hasOwnProperty(i)){b=unescapeUnicode(c[i]);if(b&&b.match(/^https?:\/\//)){b="<a target='_blank' href='"+b+"'>"+b+"</a>"}d+="<li>"+i+": "+b+"</li>"}}d=d+"</ul>";a.update(d);var g=$(e).adjacent("div.custom-fields")[0];if(g){if(Tender.discussion_extras_changed){h=g.select("h3 span")[0];h.update("(user extras has changed, this is the original)");f="<img alt='user extras has changed, click to see the original' src='/help/images/admin/warning.gif'>";h.insert({after:f});h=a.select("h3 span")[0];h.insert({after:f});g.insert({after:a});g.hide();$$("div.custom-fields h3 img").each(function(j){j.on("click",function(){g.toggle();a.toggle()})})}}else{e.insert({after:a})}}},"form.ticketCreation":function(d){var a=$("ticket_title");var b=$("ticket_body");var c=$$(".maincol h1")[0].innerHTML.replace("<strong>Subject:</strong> ","");a.value="Via Tender: "+c;b.value="As reported in Tender:\n\n<blockquote>"+$$(".original-body")[0].down("div").innerHTML+"</blockquote>";d.onsubmit=function(){var f=a.value;var e=b.value;if(f==null||f==""){alert("Oops! You need to fill out the title");return false}if(e==null||e==""){alert("Oops! You need to fill out the body");return false}return true}},".editable_by_current_user":function(a){if(!Tender.is_supporter&&Tender.logged_in&&Tender.discussion_editable){a.toggle()}},".admin-functions":function(b){if(Tender.is_supporter||!Tender.logged_in){return}var a=b.id.match(/^admin\_functions_user\-(\d+)\_comment\_/);if(a&&a[1]==Tender.user_id.toString()){b.toggle()}},".admin-functions ul.actions ul":function(a){var b=$(a).hide();b.previous("a").observe("click",function(c){c.stop();b.toggle()})},".admin-functions ul.actions ul.queues a":function(c){var b=$(c);b.observe("click",function(d){d.stop();DiscussionAction.ToggleQueue(c)});var a=b.next(".sticky");a.observe("click",function(){StickyQueue.stick(this.getAttribute("json"))})},"li#acknowledge a":function(a){$(a).observe("click",function(b){b.stop();new DiscussionAction.AcknowledgeUpdate(a)})},"li#unacknowledge a":function(a){$(a).observe("click",function(b){b.stop();new DiscussionAction.UnAcknowledgeUpdate(a)})},".hidden":function(a){$(a).hide()},"#check-email":function(a){$(a).observe("click",function(b){b.stop();$$(".flash-error").invoke("hide");a.hide();$("apply-flash").hide();$("check-email-loading").show();a.form.onsubmit()})},".toggle-private-public":function(b){var a=$("private-or-public");var c=false;var d=function(){if(a.hasClassName("public")){a.removeClassName("public").addClassName("private")}else{a.removeClassName("private").addClassName("public")}$("toggle_access_loader").remove();c=false};b.observe("click",function(f){if(f){f.stop()}if(c){return}c=true;var e=new Element("p",{"class":"loading",id:"toggle_access_loader"}).update("Toggling discussion&hellip;");a.appendChild(e);new Ajax.Request(b.href,{method:"post",parameters:{authenticity_token:getAuthKey()},onComplete:d})})},"#for-public-form":function(a){a.hide();$("for-public-link").show()},"#for-private-form":function(a){a.hide();$("for-private-link").show()},".ajaxpop":function(a){a.observe("click",function(c){c.stop();var b=a.readAttribute("href");PopManager.ajaxCreate(b,{parameters:{authenticity_token:getAuthKey()}})})},"#faqsections":function(a){a.select("li.faqitem").each(function(c,b){b=b+1;if(b%2!=0&&b!=0){c.addClassName("odd")}})},"#merge-confirm":function(a){a.observe("click",function(b){$("merge-warning-1").hide();$("merge-warning-2").show();return false})},"#merge-cancel":function(a){a.observe("click",function(b){$("merge-warning-2").hide();$("merge-warning-1").show();return false})},"#comments .body":function(c){var b=window.location.pathname.split("/");discussion=b.pop().match(/^(\d+)(\-\w*)?/)[1];b.push(discussion,"r");b=b.join("/");var a=function(d){if(d.host!=window.location.host){d.title="Link outside Support: "+d.href;d.href=b+"?go="+encode64(d.href)}};$$(".body a").each(a);$$(".original-body a").each(a)}};Behavior.register(rules);(function(){var a=new Date();var b=a.getTimezoneOffset();Cookie.set({tzoffset:b})})();String.prototype.getAnchor=function(){return/#([a-z][\w.:-]*)$/i.exec(this)[1]};var HistoryManager={callbacks:{},addStateCallback:function(a,b){this.callbacks[document.location.hash]=a;this._changeLocation(b)},listen:function(){var a=document.location.hash;if(a!=this.currentPath){HistoryManager.goTo(a)}},goTo:function(a){if(this.callbacks[a]){this.callbacks[a]()}},_changeLocation:function(a){this.currentPath=a;document.location.hash=a}};setInterval(HistoryManager.listen,100);var TicketSelector=Class.create({wrapper:null,searchForm:null,searchElement:null,resultsElement:null,submitForm:null,submitIdElements:null,submitIdElementsIdElements:null,currentData:null,initialize:function(c){this.wrapper=$(c);this.searchForm=this.wrapper.select(".searchform").first();this.searchElement=this.searchForm.select("input").first();this.resultsElement=this.wrapper.select(".searchresults").first();this.submitForm=this.wrapper.select(".ticketAssignment").first();this.submitIdElements=this.wrapper.select(".ticketId");this.submitTrackerIdElements=this.wrapper.select(".trackerId");this.searchForm.observe("submit",this.onSubmit.bind(this));var a=$$(".show-ticket-form-button")[0];if(a){a.observe("click",function(){var b=function(){if(typeof(PopManager!="undefined")){PopManager.centerLast()}};setTimeout(b,100)})}},apiURL:function(){return this.projectURL()+"/search.json"},projectURL:function(){return"/help/settings/tickets/"+TicketSelector.trackerId},ticketURL:function(a){if(a.html_url){return a.html_url}else{if(a.url){return a.url}else{return""}}},onSubmit:function(a){a.stop();this.search(this.searchElement.value)},search:function(c){var b=this;this.resultsElement.innerHTML="<p>Searching Tickets&hellip;</p>";var a=this.apiURL()+"?q="+escape(c);new Ajax.Request(a,{onSuccess:function(d){b.handleSearchResult(d.responseJSON)}})},handleSearchResult:function(a){if(a.tickets!==null){this.buildResults(a.tickets);this.currentData=a.tickets}else{var b=new Element("p").update("Sorry, but your search didn&rsquo;t return any results");this.resultsElement.innerHTML="";this.resultsElement.appendChild(b);this.currentData={}}},buildResults:function(b){var a=new Element("ul",{"class":"ticket-list"});b.each(function(h){if(h.ticket){h=h.ticket}var c=new Element("li",{"class":h.state});var e=new Element("a",{href:this.ticketURL(h),title:"Click to see the ticket"}).update("#"+h.number);var d=new Element("span",{"class":"num"});var g=new Element("a",{href:"#",title:"Click to see the body of this ticket","class":"ticket_title"}).update(h.title);g.observe("click",this.showPreview.bindAsEventListener(this,g,h));var f=new Element("span",{"class":"note"}).update("("+h.state+")");var i=new Element("a",{href:"#","class":"assign"}).update("Select This Ticket");i.observe("click",function(j,k){j.stop();this.assignTicket(k)}.bindAsEventListener(this,h));d.appendChild(e);c.appendChild(d);c.appendChild(g);c.appendChild(f);c.appendChild(i);a.appendChild(c)}.bind(this));this.resultsElement.innerHTML="";this.resultsElement.appendChild(a);if(typeof(PopManager!="undefined")){PopManager.centerLast()}},showPreview:function(c,e,d){c.stop();var a=e.up().select(".description").first();if(a!==null){if(a.visible()){a.hide()}else{a.show()}}else{var b=new Element("div",{"class":"description"}).update(d.body||d.original_body_html);e.up().appendChild(b)}},assignTicket:function(a){this.resultsElement.innerHTML="<p>Assigning your ticket..</p>";this.submitIdElements.each(function(b){b.value=a.number});this.submitForm.submit()},});var MemberInviter=Class.create({createaccountForm:null,loginForm:null,inviteForms:null,inviteOptions:null,backButton:null,initialize:function(e){e=$(e);var f=$("confirmation_form").hide();var d=$("login_form").hide();var c=$("createaccount_form").hide();var b=$("invite_forms").hide();var a=$("invite_options");this.createAccountForm=c;this.confirmationForm=f;this.loginForm=d;this.inviteForms=b;this.inviteOptions=a;this.backButton=$("back");a.select("a").each(function(g){$(g).observe("click",function(h){switch(this.href.getAnchor()){case"createaccount_form":c.show();break;case"login_form":d.show();break;case"confirmation_form":f.show();break}b.show();a.hide();h.stop()})});$("back").observe("click",function(g){b.hide();a.show();c.hide();f.hide();d.hide();g.stop()})}});var SearchPage={init:function(){this.activateToggler();this.focusSearchbox();this.keepCurrentSearch()},keepCurrentSearch:function(){faqs=$("faqs_q");user=$("users_q");disc=$("discussions_q");var a=function(b){value=b.srcElement.value;if(faqs){faqs.setValue(value)}if(user){user.setValue(value)}if(disc){disc.setValue(value)}};if(faqs){faqs.observe("change",a)}if(user){user.observe("change",a)}if(disc){disc.observe("change",a)}},focusSearchbox:function(){var a;var b=$("users_box");var d=$("discussions_box");var c=$("knowledge_base_box");if(d&&d.visible()){a=$("discussions_q")}if(c&&c.visible()){a=$("faqs_q")}if(b&&b.visible()){a=$("users_q")}if(a){setTimeout(function(){a.focus()})}},activateToggler:function(){this.toggle=$$(".search-title .toggle")[0];if(!this.toggle){return}this.massEditBar=$("bulk_edit_bar").hide();this.searchResults=$("search_results");this.standardToggle=this.toggle.down(".standalone").addClassName("selected");this.massEditToggle=this.toggle.down(".bulkedit");this.standardToggle.observe("click",function(a){a.stop();this.toStandard()}.bind(this));this.massEditToggle.observe("click",function(a){a.stop();this.toMassEdit()}.bind(this));this.activateAddToQueue();this.activateBigClickArea();this.activateCheckAll();this.massEditing=false;if(this.toggle.getAttribute("mode")=="bulk_edit"){this.toMassEdit()}},toStandard:function(){this.massEditToggle.removeClassName("selected");this.standardToggle.addClassName("selected");this.massEditBar.hide();this.searchResults.removeClassName("mass-editing");this.massEditing=false},toMassEdit:function(){this.massEditToggle.addClassName("selected");this.standardToggle.removeClassName("selected");this.massEditBar.show();this.searchResults.addClassName("mass-editing");this.massEditing=true},activateAddToQueue:function(){this.queueSelect=this.massEditBar.down(".queue-choice").hide();this.massEditBar.down("select.selected-action").observe("change",function(b){var a=b.element();if(a.value.match(/queue/)){this.queueSelect.show()}else{this.queueSelect.hide()}}.bind(this))},activateBigClickArea:function(){this.searchResults.select("li").each(function(b){var a=b.down(".check input");if(a){a.observe("change",function(){if(a.checked){b.addClassName("checked")}else{b.removeClassName("checked")}})}b.observe("click",function(d){if(!this.massEditing){return}var c=d.element();if(c.tagName.toLowerCase()=="a"){return}if(c.tagName.toLowerCase()=="input"){return}if(c.tagName.toLowerCase()!="li"){c=c.up("li")}if(a){a.checked=!a.checked;if(a.checked){c.addClassName("checked")}else{c.removeClassName("checked")}}}.bind(this));if(a&&a.checked){b.addClassName("checked")}else{b.removeClassName("checked")}}.bind(this))},activateCheckAll:function(){var a=this.searchResults.select(".check input");$("check_all_checkbox").observe("change",function(b){var c=b.element();a.each(function(d){d.checked=c.checked;if(d.checked){d.up("li").addClassName("checked")}else{d.up("li").removeClassName("checked")}})})}};var StickyQueueBox=Class.create(PopBox,{initialize:function($super,a){$super(a);this.element.addClassName("sticky-queue-box")}});